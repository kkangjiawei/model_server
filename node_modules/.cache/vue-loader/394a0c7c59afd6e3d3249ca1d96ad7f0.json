{"remainingRequest":"/Users/a1/Desktop/code/golang/src/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/a1/Desktop/code/golang/src/vue-element-admin/src/views/model/mode-detail.vue?vue&type=style&index=0&id=3892a4ab&scoped=true&lang=css&","dependencies":[{"path":"/Users/a1/Desktop/code/golang/src/vue-element-admin/src/views/model/mode-detail.vue","mtime":1677438542808},{"path":"/Users/a1/Desktop/code/golang/src/vue-element-admin/node_modules/css-loader/dist/cjs.js","mtime":1677293887603},{"path":"/Users/a1/Desktop/code/golang/src/vue-element-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1677293892954},{"path":"/Users/a1/Desktop/code/golang/src/vue-element-admin/node_modules/postcss-loader/src/index.js","mtime":1677293887964},{"path":"/Users/a1/Desktop/code/golang/src/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1677293886981},{"path":"/Users/a1/Desktop/code/golang/src/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1677293892832}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZ3JpZC1jb250ZW50IHsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgbWluLWhlaWdodDogMzZweDsKfQoKLm92ZXJ2aWV3X2ZvbnQgewogIGZvbnQtc2l6ZTogMjBweDsKICBmb250LWZhbWlseTogIk1pY3Jvc29mdCBZYUhlaSIsIlRpbWVzIE5ldyBSb21hbiIsIFRpbWVzLCBzZXJpZjsKICB0ZXh0LWFsaWduOiBqdXN0aWZ5OwogIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgbGluZS1oZWlnaHQ6IDEuNTsKfQoKLmdyaWQtY29udGVudCB7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIG1pbi1oZWlnaHQ6IDM2cHg7Cn0KCi5tb2wtY29udGFpbmVyIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDMwMHB4OwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNEQ0RGRTY7Cn0KCi50aXRsZV9mb250IHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0K"},{"version":3,"sources":["mode-detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0NA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"mode-detail.vue","sourceRoot":"src/views/model","sourcesContent":["<template>\n  <div>\n    <el-row style=\"margin-top: 20px\">\n      <el-col :span=\"1\"> <div class=\"grid-content\" /> </el-col>\n      <el-col :span=\"22\">\n        <el-card>\n          <div slot=\"header\" class=\"clearfix\">\n            <h1 class=\"title_font\">{{modelDetail.name}}</h1>\n          </div>\n          <div>\n            <el-descriptions :column=\"2\">\n              <el-descriptions-item label=\"Model Name\">{{ modelDetail.name }}</el-descriptions-item>\n              <el-descriptions-item label=\"Version\">\n                <el-link :href=\"modelDetail.code_address\" type=\"primary\">\n                  {{ modelDetail.version }}\n                </el-link>\n              </el-descriptions-item>\n              <el-descriptions-item label=\"Dataset\">\n                <el-link\n                  :href=\"modelDetail.dataset\"\n                  target=\"_blank\"\n                  type=\"primary\"\n                  icon=\"el-icon-bottom\"\n                >Download</el-link>\n              </el-descriptions-item>\n              <el-descriptions-item label=\"Code\">\n                <el-link type=\"primary\" :href=\"modelDetail.code_address\">\n                  <svg-icon icon-class=\"gitlab\" />\n                  GitLab\n                </el-link>\n              </el-descriptions-item>\n            </el-descriptions>\n          </div>\n          <el-divider/>\n          <h1 class=\"title_font\">Overview</h1>\n          <p class=\"overview_font\">\n            {{ modelDetail.long_description }}\n          </p>\n\n          <div style=\"width: 100%;\" align=\"center\">\n            <img :src=\"modelDetail.arch_img\" style=\"margin: 0 auto; width: 560px; height: 460px\">\n<!--            <img :src=\"../../assets/models_img/\" style=\"margin: 0 auto; width: 560px; height: 460px\">-->\n          </div>\n          <el-divider />\n          <h1 class=\"title_font\">Code for inference</h1>\n          <div class=\"editor-container\">\n            <python-editor ref=\"pythonEditor\" v-model=\"codeExmple\" :code-exmple=\"codeExmple\" />\n          </div>\n          <div style=\"margin-top: 50px; width: 100%; height: 20px\">\n            <el-divider />\n          </div>\n\n          <h1 class=\"title_font\">Try the model now !</h1>\n          <h5 style=\"text-align: center\">Input data on the left and submit to model</h5>\n          <el-row>\n            <el-col :span=\"10\">\n              <div class=\"editor-container\">\n                <json-editor ref=\"jsonEditor\" v-model=\"value\" />\n              </div>\n            </el-col>\n            <el-col :span=\"2\"><div class=\"grid-content\" /></el-col>\n            <el-col :span=\"10\">\n              <div class=\"editor-container\" v-if=\"resultType === 1\">\n                <json-editor ref=\"jsonEditor\" v-model=\"result\" />\n              </div>\n              <div id=\"container-01\" class=\"mol-container\" v-else-if=\"resultType === 0\"/>\n              <div v-else-if=\"resultType === 2\">\n                <el-card>\n                  <div slot=\"header\" class=\"clearfix\">\n                    Prediction Result\n                  </div>\n\n                  <el-row>\n                    <el-col :span=\"24\">\n                      <span v-html=\"prot_seq\"></span>\n                    </el-col>\n                  </el-row>\n\n                  <el-row>\n                    <el-col :span=\"24\">\n                      <span v-html=\"pep_seq\"></span>\n                    </el-col>\n                  </el-row>\n                </el-card>\n\n              </div>\n            </el-col>\n          </el-row>\n          <div style=\"margin-top: 20px;\" align=\"center\">\n            <el-button type=\"primary\" size=\"medium\" @click=\"reasoningModel()\">Predict</el-button>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"1\"> <div class=\"grid-content\" /></el-col>\n    </el-row>\n  </div>\n</template>\n<script>\nconst jsonData = '[{\"items\":[{\"market_type\":\"forexdata\",\"symbol\":\"NGAS\"}],\"name\":\"能源化工\"}]'\nimport JsonEditor from '@/components/JsonEditor'\nimport PythonEditor from '@/components/PythonEditor'\nimport { getModelDetail, predict } from '@/api/model_detail'\nimport $ from '@/utils/jquery'\nrequire('@/utils/3Dmol-min')\n\nexport default {\n  name: 'ModeDetail',\n  components: { JsonEditor, PythonEditor },\n  data() {\n    return {\n      modelName: '',\n      value: JSON.parse(jsonData),\n      result: '',\n      codeExmple: '',\n      resultType: 0,\n      prot_seq: '',\n      pep_seq: '',\n      modelDetail: {\n      }\n    }\n  },\n  created() {\n    var modelName = this.$route.query.modelName\n    this.modelName = modelName\n    getModelDetail(modelName).then(resp => {\n      console.log(resp)\n      this.modelDetail = resp.data\n      // this.modelDetail.dataset= 'http://120.53.7.54:5065/' + this.modelDetail.dataset\n      this.modelDetail.dataset = 'http://120.53.7.54:5065/' + 'v6_SMILES_affinity.zip'\n      this.modelDetail.arch_img = require('../../assets/models_img/' + this.modelDetail.arch_img)\n      if (this.modelDetail.inf_code.length <= 0) {\n        this.modelDetail.inf_code = 'import'\n      }\n      this.codeExmple = this.modelDetail.inf_code\n      this.$refs.pythonEditor.refreshPythonEditor(this.codeExmple)\n      this.value = JSON.parse(this.modelDetail.inf_front)\n    }).catch(err => {\n      console.log(err)\n    })\n  },\n  methods: {\n    reasoningModel() {\n      console.log('this.value = ' + this.value)\n      var data = JSON.stringify(this.value)\n      predict(this.modelName, data).then(resp => {\n        if (resp.data.data_type === 'pdb') {\n          this.resultType = 0\n          const element = $('#container-01')\n          const config = { backgroundColor: 'white' }\n          const viewer = $3Dmol.createViewer(element, config)\n          // eslint-disable-next-line no-undef\n          viewer.addModel(resp.data.results, 'pdb') /* load data */\n          viewer.setStyle({chain: 'B'}, {cartoon: {color: 'spectrum'}})\n          viewer.setStyle({chain: 'C'}, {cartoon: {color: 'white'}})\n          viewer.setStyle({chain: 'D'}, {cartoon: {color: 'red'}})\n          viewer.addSurface($3Dmol.SurfaceType.VDW, {opacity: 0.75, color: 'white'}, {chain:'D'})\n          viewer.zoomTo() /* set camera */\n          viewer.render() /* render scene */\n        } else if(resp.data.data_type === 'float') {\n          this.resultType = 1\n          this.result = \"Prediction Result: \" + resp.data.results\n          this.$message({\n            message: \"Predict Successfly! See the Results Blow\",\n            type: 'success'\n          })\n        } else if(resp.data.data_type === 'interaction') {\n          this.resultType = 2\n          var respResult = JSON.parse(resp.data.results)\n          this.prot_seq = '<h5>' + 'Binding residues in protein: ' + '</h5> <br> '\n          var tempDict = {}\n          for (var i = 0; i < respResult['prot_index'].length; i++) {\n            tempDict[respResult['prot_index'][i]] = '1'\n          }\n          for (var i = 0; i < respResult['prot_seq'].length; i++) {\n            console.log(\"this.tempDict = \", tempDict[i.toString()])\n            if (tempDict[i.toString()] == 1) {\n              this.prot_seq += '<div style=\"color: red; display: inline-block\">' + respResult['prot_seq'][i] + '</div>'\n            } else {\n              this.prot_seq += '<div style=\"display: inline-block\">' + respResult['prot_seq'][i] + '</div>'\n            }\n          }\n          this.prot_seq = '<p class=\"overview_font\">' + this.prot_seq + '</p>'\n\n\n          this.pep_seq = '<h5>' + 'Binding residues in peptide: ' + '</h5> <br> '\n          tempDict = {}\n          for (var i = 0; i < respResult['pep_index'].length; i++) {\n            tempDict[respResult['pep_index'][i]] = '1'\n          }\n          for (var i = 0; i < respResult['pep_seq'].length; i++) {\n            if (tempDict[i.toString()] == 1) {\n              this.pep_seq += '<div style=\"color: red; display: inline-block\">' + respResult['pep_seq'][i] + '</div>'\n            } else {\n              this.pep_seq += respResult['pep_seq'][i]\n            }\n          }\n          this.pep_seq = '<p>' + this.pep_seq + '</p>'\n          console.log(\"this.result = \", this.result)\n        }\n        // eslint-disable-next-line no-undef\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    change(value) {\n      console.log('change this.value = ' + value)\n    },\n    input(value) {\n      console.log('input this.value = ' + value)\n    },\n    test() {\n\n    }\n  }\n}\n</script>\n\n<style scoped>\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n\n.overview_font {\n  font-size: 20px;\n  font-family: \"Microsoft YaHei\",\"Times New Roman\", Times, serif;\n  text-align: justify;\n  font-weight: normal;\n  line-height: 1.5;\n}\n\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n\n.mol-container {\n  width: 100%;\n  height: 300px;\n  position: relative;\n  border-left: 1px solid #DCDFE6;\n}\n\n.title_font {\n  text-align: center;\n}\n</style>\n"]}]}