{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-c276dcfa\"],{\"0481\":function(e,t,r){\"use strict\";var i=r(\"23e7\"),n=r(\"a2bf\"),a=r(\"7b0b\"),o=r(\"50c4\"),s=r(\"a691\"),l=r(\"65f0\");i({target:\"Array\",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),r=o(t.length),i=l(t,0);return i.length=n(i,t,t,r,0,void 0===e?1:s(e)),i}})},\"0538\":function(e,t,r){\"use strict\";var i=r(\"1c0b\"),n=r(\"861d\"),a=[].slice,o={},s=function(e,t,r){if(!(t in o)){for(var i=[],n=0;n<t;n++)i[n]=\"a[\"+n+\"]\";o[t]=Function(\"C,a\",\"return new C(\"+i.join(\",\")+\")\")}return o[t](e,r)};e.exports=Function.bind||function(e){var t=i(this),r=a.call(arguments,1),o=function(){var i=r.concat(a.call(arguments));return this instanceof o?s(t,i.length,i):t.apply(e,i)};return n(t.prototype)&&(o.prototype=t.prototype),o}},\"098e\":function(e,t,r){e.exports=r.p+\"static/img/SC-CPPTransformer.b335f018.png\"},\"0a47\":function(e,t,r){e.exports=r.p+\"static/img/SH-PepContrast.49f1f467.png\"},\"0f64\":function(e,t,r){e.exports=r.p+\"static/img/SH-pepESM.fda07b8b.png\"},1276:function(e,t,r){\"use strict\";var i=r(\"d784\"),n=r(\"44e7\"),a=r(\"825a\"),o=r(\"1d80\"),s=r(\"4840\"),l=r(\"8aa5\"),h=r(\"50c4\"),u=r(\"14c3\"),c=r(\"9263\"),d=r(\"d039\"),f=[].push,p=Math.min,v=4294967295,g=!d((function(){return!RegExp(v,\"y\")}));i(\"split\",2,(function(e,t,r){var i;return i=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(e,r){var i=String(o(this)),a=void 0===r?v:r>>>0;if(0===a)return[];if(void 0===e)return[i];if(!n(e))return t.call(i,e,a);var s,l,h,u=[],d=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(e.sticky?\"y\":\"\"),p=0,g=new RegExp(e.source,d+\"g\");while(s=c.call(g,i)){if(l=g.lastIndex,l>p&&(u.push(i.slice(p,s.index)),s.length>1&&s.index<i.length&&f.apply(u,s.slice(1)),h=s[0].length,p=l,u.length>=a))break;g.lastIndex===s.index&&g.lastIndex++}return p===i.length?!h&&g.test(\"\")||u.push(\"\"):u.push(i.slice(p)),u.length>a?u.slice(0,a):u}:\"0\".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var n=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n,r):i.call(String(n),t,r)},function(e,n){var o=r(i,e,this,n,i!==t);if(o.done)return o.value;var c=a(e),d=String(this),f=s(c,RegExp),m=c.unicode,y=(c.ignoreCase?\"i\":\"\")+(c.multiline?\"m\":\"\")+(c.unicode?\"u\":\"\")+(g?\"y\":\"g\"),_=new f(g?c:\"^(?:\"+c.source+\")\",y),b=void 0===n?v:n>>>0;if(0===b)return[];if(0===d.length)return null===u(_,d)?[d]:[];var w=0,x=0,k=[];while(x<d.length){_.lastIndex=g?x:0;var C,A=u(_,g?d:d.slice(x));if(null===A||(C=p(h(_.lastIndex+(g?0:x)),d.length))===w)x=l(d,x,m);else{if(k.push(d.slice(w,x)),k.length===b)return k;for(var S=1;S<=A.length-1;S++)if(k.push(A[S]),k.length===b)return k;x=w=C}}return k.push(d.slice(w)),k}]}),!g)},\"143c\":function(e,t,r){var i=r(\"74e8\");i(\"Int32\",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},\"1ca7\":function(e,t,r){\"use strict\";r(\"8226\")},\"220d\":function(e,t,r){e.exports=r.p+\"static/img/SD-PepGPT.0ba65090.png\"},2896:function(e,t,r){e.exports=r.p+\"static/img/ST-PepCarC.647d2ad5.png\"},\"32af\":function(e,t,r){function i(t,r){return e.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports[\"default\"]=e.exports,i(t,r)}r(\"131a\"),e.exports=i,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"331b\":function(e,t,r){e.exports=r.p+\"static/img/ST-PepScore.e3cfe4b5.png\"},3495:function(e,t){function r(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}e.exports=r,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"35b0\":function(e,t,r){r(\"8172\"),r(\"efec\"),r(\"a4d3\"),r(\"e01a\"),r(\"d3b7\"),r(\"a9e3\");var i=r(\"38a1\")[\"default\"];function n(e,t){if(\"object\"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||\"default\");if(\"object\"!==i(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}e.exports=n,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"38cf\":function(e,t,r){var i=r(\"23e7\"),n=r(\"1148\");i({target:\"String\",proto:!0},{repeat:n})},\"3dcd\":function(e,t,r){e.exports=r.p+\"static/img/SK-ImmuPred.f7fffa8d.png\"},4069:function(e,t,r){var i=r(\"44d2\");i(\"flat\")},4163:function(e,t,r){e.exports=r.p+\"static/img/ST-PepMRS.72cd166b.png\"},4260:function(e,t,r){e.exports=r.p+\"static/img/ST-PepGeo.ed4632a1.png\"},\"481f\":function(e,t,r){\"use strict\";r(\"769a\")},\"4a9b\":function(e,t,r){var i=r(\"74e8\");i(\"Float64\",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},\"4ae1\":function(e,t,r){var i=r(\"23e7\"),n=r(\"d066\"),a=r(\"1c0b\"),o=r(\"825a\"),s=r(\"861d\"),l=r(\"7c73\"),h=r(\"0538\"),u=r(\"d039\"),c=n(\"Reflect\",\"construct\"),d=u((function(){function e(){}return!(c((function(){}),[],e)instanceof e)})),f=!u((function(){c((function(){}))})),p=d||f;i({target:\"Reflect\",stat:!0,forced:p,sham:p},{construct:function(e,t){a(e),o(t);var r=arguments.length<3?e:a(arguments[2]);if(f&&!d)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(h.apply(e,i))}var n=r.prototype,u=l(s(n)?n:Object.prototype),p=Function.apply.call(e,u,t);return s(p)?p:u}})},\"4c53\":function(e,t,r){\"use strict\";var i=r(\"23e7\"),n=r(\"857a\"),a=r(\"af03\");i({target:\"String\",proto:!0,forced:a(\"sub\")},{sub:function(){return n(this,\"sub\",\"\",\"\")}})},\"4ec9\":function(e,t,r){\"use strict\";var i=r(\"6d61\"),n=r(\"6566\");e.exports=i(\"Map\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},5377:function(e,t,r){var i=r(\"83ab\"),n=r(\"9bf2\"),a=r(\"ad6d\"),o=r(\"9f7f\").UNSUPPORTED_Y;i&&(\"g\"!=/./g.flags||o)&&n.f(RegExp.prototype,\"flags\",{configurable:!0,get:a})},\"5bdf\":function(e,t,r){var i=r(\"38a1\")[\"default\"],n=r(\"3495\");function a(e,t){if(t&&(\"object\"===i(t)||\"function\"===typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return n(e)}e.exports=a,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"5c5b\":function(module,exports,__webpack_require__){(function(module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_get=__webpack_require__(\"748a\").default,_getPrototypeOf=__webpack_require__(\"7076\").default,_possibleConstructorReturn=__webpack_require__(\"5bdf\").default,_inherits=__webpack_require__(\"7b80\").default,_createSuper=__webpack_require__(\"8622\").default,_createForOfIteratorHelper=__webpack_require__(\"e0d7\").default,_classCallCheck=__webpack_require__(\"b394\").default,_createClass=__webpack_require__(\"f94f\").default,_typeof=__webpack_require__(\"38a1\").default;__webpack_require__(\"ace4\"),__webpack_require__(\"d3b7\"),__webpack_require__(\"5cc6\"),__webpack_require__(\"9a8c\"),__webpack_require__(\"a975\"),__webpack_require__(\"735e\"),__webpack_require__(\"c1ac\"),__webpack_require__(\"d139\"),__webpack_require__(\"3a7b\"),__webpack_require__(\"d5d6\"),__webpack_require__(\"82f8\"),__webpack_require__(\"e91f\"),__webpack_require__(\"60bd\"),__webpack_require__(\"5f96\"),__webpack_require__(\"3280\"),__webpack_require__(\"3fcc\"),__webpack_require__(\"ca91\"),__webpack_require__(\"25a1\"),__webpack_require__(\"cd26\"),__webpack_require__(\"3c5d\"),__webpack_require__(\"2954\"),__webpack_require__(\"649e\"),__webpack_require__(\"219c\"),__webpack_require__(\"170b\"),__webpack_require__(\"b39a\"),__webpack_require__(\"72f7\"),__webpack_require__(\"fb6a\"),__webpack_require__(\"cfc3\"),__webpack_require__(\"4ec9\"),__webpack_require__(\"3ca3\"),__webpack_require__(\"ddb0\"),__webpack_require__(\"fb2c\"),__webpack_require__(\"fd87\"),__webpack_require__(\"8b09\"),__webpack_require__(\"84c3\"),__webpack_require__(\"143c\"),__webpack_require__(\"4a9b\"),__webpack_require__(\"c19f\"),__webpack_require__(\"82da\"),__webpack_require__(\"a9e3\"),__webpack_require__(\"b0c0\"),__webpack_require__(\"e9c4\"),__webpack_require__(\"a15b\"),__webpack_require__(\"99af\"),__webpack_require__(\"843c\"),__webpack_require__(\"7db0\"),__webpack_require__(\"4c53\"),__webpack_require__(\"ac1f\"),__webpack_require__(\"466d\"),__webpack_require__(\"2ca0\"),__webpack_require__(\"cb29\"),__webpack_require__(\"00b4\"),__webpack_require__(\"5319\"),__webpack_require__(\"6062\"),__webpack_require__(\"a434\"),__webpack_require__(\"0481\"),__webpack_require__(\"4069\"),__webpack_require__(\"d81d\"),__webpack_require__(\"159b\"),__webpack_require__(\"b64b\"),__webpack_require__(\"4e82\"),__webpack_require__(\"4de4\"),__webpack_require__(\"7039\"),__webpack_require__(\"cc71\"),__webpack_require__(\"25f0\"),__webpack_require__(\"1276\"),__webpack_require__(\"8a59\"),__webpack_require__(\"38cf\"),__webpack_require__(\"8a79\"),__webpack_require__(\"498a\"),__webpack_require__(\"841c\"),__webpack_require__(\"caad\"),__webpack_require__(\"2532\"),__webpack_require__(\"8ba4\"),__webpack_require__(\"5377\"),__webpack_require__(\"2b3d\"),__webpack_require__(\"9861\"),__webpack_require__(\"a4d3\"),__webpack_require__(\"e01a\"),__webpack_require__(\"944a\"),__webpack_require__(\"0c47\"),__webpack_require__(\"23dc\"),function(e,t){\"object\"==_typeof(exports)&&\"object\"==_typeof(module)?module.exports=t():(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=t,__WEBPACK_AMD_DEFINE_RESULT__=\"function\"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,(function(){return function(){var __webpack_modules__={7396:function(){\"use strict\";!function(e){if(e.TextEncoder&&e.TextDecoder)return!1;function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"utf-8\";if(\"utf-8\"!==e)throw new RangeError(\"Failed to construct 'TextEncoder': The encoding label provided ('\".concat(e,\"') is invalid.\"))}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"utf-8\",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fatal:!1};if(\"utf-8\"!==e)throw new RangeError(\"Failed to construct 'TextDecoder': The encoding label provided ('\".concat(e,\"') is invalid.\"));if(t.fatal)throw new Error(\"Failed to construct 'TextDecoder': the 'fatal' option is unsupported.\")}Object.defineProperty(t.prototype,\"encoding\",{value:\"utf-8\"}),t.prototype.encode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stream:!1};if(t.stream)throw new Error(\"Failed to encode: the 'stream' option is unsupported.\");for(var r=0,i=e.length,n=0,a=Math.max(32,i+(i>>1)+7),o=new Uint8Array(a>>3<<3);r<i;){var s=e.charCodeAt(r++);if(s>=55296&&s<=56319){if(r<i){var l=e.charCodeAt(r);56320==(64512&l)&&(++r,s=((1023&s)<<10)+(1023&l)+65536)}if(s>=55296&&s<=56319)continue}if(n+4>o.length){a+=8,a*=1+r/e.length*2,a=a>>3<<3;var h=new Uint8Array(a);h.set(o),o=h}if(0!=(4294967168&s)){if(0==(4294965248&s))o[n++]=s>>6&31|192;else if(0==(4294901760&s))o[n++]=s>>12&15|224,o[n++]=s>>6&63|128;else{if(0!=(4292870144&s))continue;o[n++]=s>>18&7|240,o[n++]=s>>12&63|128,o[n++]=s>>6&63|128}o[n++]=63&s|128}else o[n++]=s}return o.slice(0,n)},Object.defineProperty(r.prototype,\"encoding\",{value:\"utf-8\"}),Object.defineProperty(r.prototype,\"fatal\",{value:!1}),Object.defineProperty(r.prototype,\"ignoreBOM\",{value:!1}),r.prototype.decode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stream:!1};if(t.stream)throw new Error(\"Failed to decode: the 'stream' option is unsupported.\");for(var r=new Uint8Array(e),i=0,n=r.length,a=[];i<n;){var o=r[i++];if(0===o)break;if(0==(128&o))a.push(o);else if(192==(224&o)){var s=63&r[i++];a.push((31&o)<<6|s)}else if(224==(240&o)){var l=63&r[i++],h=63&r[i++];a.push((31&o)<<12|l<<6|h)}else if(240==(248&o)){var u=(7&o)<<18|(63&r[i++])<<12|(63&r[i++])<<6|63&r[i++];u>65535&&(u-=65536,a.push(u>>>10&1023|55296),u=56320|1023&u),a.push(u)}}return String.fromCharCode.apply(null,a)},e.TextEncoder=t,e.TextDecoder=r}(\"undefined\"!=typeof window?window:\"undefined\"!=typeof self?self:this)},4406:function(e,t,r){\"use strict\";r.r(t),r.d(t,{CAP:function(){return i},GLDraw:function(){return n}});var i,n,a=r(9652);!function(e){e[e.NONE=0]=\"NONE\",e[e.FLAT=1]=\"FLAT\",e[e.ROUND=2]=\"ROUND\"}(i||(i={})),function(e){function t(e,t,r){var i,n,a,o,s,l=Math.sqrt(e*e+t*t);l<1e-4?(n=0,a=1):(n=-e/l,a=t/l),t=-n*e+a*t,(i=Math.sqrt(t*t+r*r))<1e-4?(o=0,s=1):(o=r/i,s=t/i);var h=new Float32Array(9);return h[0]=a,h[1]=n,h[2]=0,h[3]=-n*s,h[4]=a*s,h[5]=o,h[6]=n*o,h[7]=-a*o,h[8]=s,h}var r=new(function(){function e(){_classCallCheck(this,e),this.cache={};var t,r=[],i=Math.pow(2,4),n=2,o=Math.pow(2,n),s=i/o;for(r[0]=new a.Vector3(-1,0,0),r[s]=new a.Vector3(0,0,1),r[2*s]=new a.Vector3(1,0,0),r[3*s]=new a.Vector3(0,0,-1),n=3;n<=4;n++){for(o=Math.pow(2,n-1),s=i/o,t=0;t<o-1;t++)r[s/2+t*s]=r[t*s].clone().add(r[(t+1)*s]).normalize();t=o-1,r[s/2+t*s]=r[t*s].clone().add(r[0]).normalize()}this.basisVectors=r}return _createClass(e,[{key:\"getVerticesForRadius\",value:function(e,t,r){if(void 0!==this.cache&&void 0!==this.cache[e]&&void 0!==this.cache[e][t+r])return this.cache[e][t+r];for(var n,o=this.basisVectors.length,s=[],l=[],h=0;h<o;h++)s.push(this.basisVectors[h].clone().multiplyScalar(e)),s.push(this.basisVectors[h].clone().multiplyScalar(e)),n=this.basisVectors[h].clone().normalize(),l.push(n),l.push(n);var u,c,d=[],f=10,p=o,v=2*Math.PI,g=Math.PI,m=!1,y=!1;for(c=0;c<=f;c++){m=0===c||c===f,y=5===c;var _=[],b=[];for(u=0;u<=p;u++)if(y){var w=u<p?2*u:0;b.push(w+1),_.push(w)}else{var x=u/p,k=c/f;if(m&&0!==u)m&&_.push(s.length-1);else if(u<p){var C=new a.Vector3;C.x=-e*Math.cos(0+x*v)*Math.sin(0+k*g),C.y=1==t?0:e*Math.cos(0+k*g),C.z=e*Math.sin(0+x*v)*Math.sin(0+k*g),Math.abs(C.x)<1e-5&&(C.x=0),Math.abs(C.y)<1e-5&&(C.y=0),Math.abs(C.z)<1e-5&&(C.z=0),t==i.FLAT?(n=new a.Vector3(0,Math.cos(0+k*g),0)).normalize():(n=new a.Vector3(C.x,C.y,C.z)).normalize(),s.push(C),l.push(n),_.push(s.length-1)}else _.push(s.length-p)}y&&d.push(b),d.push(_)}var A={vertices:s,normals:l,verticesRows:d,w:p,h:f};return e in this.cache||(this.cache[e]={}),this.cache[e][t+r]=A,A}}]),e}());e.drawCylinder=function(e,i,n,a,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(i&&n){var h=l||s;o=o||{r:0,g:0,b:0};var u,c,d,f,p,v,g=t(n.x-i.x,n.y-i.y,n.z-i.z),m=r.getVerticesForRadius(a,l,\"to\"),y=m.w,_=m.h,b=h?_*y+2:2*y,w=e.updateGeoGroup(b),x=m.vertices,k=m.normals,C=m.verticesRows,A=C[_/2],S=C[_/2+1],E=w.vertices,z=w.vertexArray,M=w.normalArray,T=w.colorArray,L=w.faceArray;for(d=0;d<y;++d){var D=2*d;f=g[0]*x[D].x+g[3]*x[D].y+g[6]*x[D].z,p=g[1]*x[D].x+g[4]*x[D].y+g[7]*x[D].z,v=g[5]*x[D].y+g[8]*x[D].z,u=3*(E+D),c=w.faceidx,z[u]=f+i.x,z[u+1]=p+i.y,z[u+2]=v+i.z,z[u+3]=f+n.x,z[u+4]=p+n.y,z[u+5]=v+n.z,M[u]=f,M[u+3]=f,M[u+1]=p,M[u+4]=p,M[u+2]=v,M[u+5]=v,T[u]=o.r,T[u+3]=o.r,T[u+1]=o.g,T[u+4]=o.g,T[u+2]=o.b,T[u+5]=o.b,L[c]=S[d]+E,L[c+1]=S[d+1]+E,L[c+2]=A[d]+E,L[c+3]=A[d]+E,L[c+4]=S[d+1]+E,L[c+5]=A[d+1]+E,w.faceidx+=6}if(h){var O,I,F,R,P,N,B,U,G,V,j,H,q,W,Y,Z,X,K,$,Q,J,ee,te,re,ie,ne,ae,oe,se,le,he,ue,ce=s?_+1:_/2+1;for(p=l?0:_/2;p<ce;p++)if(p!==_/2){var de=p<=_/2?n:i,fe=r.getVerticesForRadius(a,l,\"to\"),pe=r.getVerticesForRadius(a,s,\"from\");for(de===n?(x=fe.vertices,k=fe.normals,C=fe.verticesRows):de==i&&(x=pe.vertices,k=pe.normals,C=pe.verticesRows),f=0;f<y;f++)c=w.faceidx,se=3*((O=C[p][f+1])+E),le=3*((I=C[p][f])+E),he=3*((F=C[p+1][f])+E),ue=3*((R=C[p+1][f+1])+E),P=g[0]*x[O].x+g[3]*x[O].y+g[6]*x[O].z,N=g[0]*x[I].x+g[3]*x[I].y+g[6]*x[I].z,B=g[0]*x[F].x+g[3]*x[F].y+g[6]*x[F].z,U=g[0]*x[R].x+g[3]*x[R].y+g[6]*x[R].z,G=g[1]*x[O].x+g[4]*x[O].y+g[7]*x[O].z,V=g[1]*x[I].x+g[4]*x[I].y+g[7]*x[I].z,j=g[1]*x[F].x+g[4]*x[F].y+g[7]*x[F].z,H=g[1]*x[R].x+g[4]*x[R].y+g[7]*x[R].z,q=g[5]*x[O].y+g[8]*x[O].z,W=g[5]*x[I].y+g[8]*x[I].z,Y=g[5]*x[F].y+g[8]*x[F].z,Z=g[5]*x[R].y+g[8]*x[R].z,z[se]=P+de.x,z[le]=N+de.x,z[he]=B+de.x,z[ue]=U+de.x,z[se+1]=G+de.y,z[le+1]=V+de.y,z[he+1]=j+de.y,z[ue+1]=H+de.y,z[se+2]=q+de.z,z[le+2]=W+de.z,z[he+2]=Y+de.z,z[ue+2]=Z+de.z,T[se]=o.r,T[le]=o.r,T[he]=o.r,T[ue]=o.r,T[se+1]=o.g,T[le+1]=o.g,T[he+1]=o.g,T[ue+1]=o.g,T[se+2]=o.b,T[le+2]=o.b,T[he+2]=o.b,T[ue+2]=o.b,X=g[0]*k[O].x+g[3]*k[O].y+g[6]*k[O].z,K=g[0]*k[I].x+g[3]*k[I].y+g[6]*k[I].z,$=g[0]*k[F].x+g[3]*k[F].y+g[6]*k[F].z,Q=g[0]*k[R].x+g[3]*k[R].y+g[6]*k[R].z,J=g[1]*k[O].x+g[4]*k[O].y+g[7]*k[O].z,ee=g[1]*k[I].x+g[4]*k[I].y+g[7]*k[I].z,te=g[1]*k[F].x+g[4]*k[F].y+g[7]*k[F].z,re=g[1]*k[R].x+g[4]*k[R].y+g[7]*k[R].z,ie=g[5]*k[O].y+g[8]*k[O].z,ne=g[5]*k[I].y+g[8]*k[I].z,ae=g[5]*k[F].y+g[8]*k[F].z,oe=g[5]*k[R].y+g[8]*k[R].z,0===p?(M[se]=X,M[he]=$,M[ue]=Q,M[se+1]=J,M[he+1]=te,M[ue+1]=re,M[se+2]=ie,M[he+2]=ae,M[ue+2]=oe,L[c]=O+E,L[c+1]=F+E,L[c+2]=R+E,w.faceidx+=3):p===ce-1?(M[se]=X,M[le]=K,M[he]=$,M[se+1]=J,M[le+1]=ee,M[he+1]=te,M[se+2]=ie,M[le+2]=ne,M[he+2]=ae,L[c]=O+E,L[c+1]=I+E,L[c+2]=F+E,w.faceidx+=3):(M[se]=X,M[le]=K,M[ue]=Q,M[se+1]=J,M[le+1]=ee,M[ue+1]=re,M[se+2]=ie,M[le+2]=ne,M[ue+2]=oe,M[le]=K,M[he]=$,M[ue]=Q,M[le+1]=ee,M[he+1]=te,M[ue+1]=re,M[le+2]=ne,M[he+2]=ae,M[ue+2]=oe,L[c]=O+E,L[c+1]=I+E,L[c+2]=R+E,L[c+3]=I+E,L[c+4]=F+E,L[c+5]=R+E,w.faceidx+=6)}}w.vertices+=b}},e.drawCone=function(e,i,n,o,s){if(i&&n){s=s||{r:0,g:0,b:0};var l=new a.Vector3(n.x-i.x,n.y-i.y,n.z-i.z),h=t(l.x,l.y,l.z);l=l.normalize();var u,c,d,f,p,v,g=r.basisVectors.length,m=r.basisVectors,y=g+2,_=e.updateGeoGroup(y),b=_.vertices,w=_.vertexArray,x=_.normalArray,k=_.colorArray,C=_.faceArray;for(w[u=3*b]=i.x,w[u+1]=i.y,w[u+2]=i.z,x[u]=-l.x,x[u+1]=-l.y,x[u+2]=-l.z,k[u]=s.r,k[u+1]=s.g,k[u+2]=s.b,w[u+3]=n.x,w[u+4]=n.y,w[u+5]=n.z,x[u+3]=l.x,x[u+4]=l.y,x[u+5]=l.z,k[u+3]=s.r,k[u+4]=s.g,k[u+5]=s.b,u+=6,d=0;d<g;++d){var A=m[d].clone();A.multiplyScalar(o),f=h[0]*A.x+h[3]*A.y+h[6]*A.z,p=h[1]*A.x+h[4]*A.y+h[7]*A.z,v=h[5]*A.y+h[8]*A.z,w[u]=f+i.x,w[u+1]=p+i.y,w[u+2]=v+i.z,x[u]=f,x[u+1]=p,x[u+2]=v,k[u]=s.r,k[u+1]=s.g,k[u+2]=s.b,u+=3}for(_.vertices+=g+2,c=_.faceidx,d=0;d<g;d++){var S=b+2+d,E=b+2+(d+1)%g;C[c]=S,C[c+1]=E,C[c+2]=b,C[c+=3]=S,C[c+1]=E,C[c+2]=b+1,c+=3}_.faceidx+=6*g}};var n=new(function(){function e(){_classCallCheck(this,e),this.cache=new Map}return _createClass(e,[{key:\"getVerticesForRadius\",value:function(e,t){t=t||2,this.cache.has(t)||this.cache.set(t,new Map);var r=this.cache.get(t);if(r.has(e))return r.get(e);var i={vertices:[],verticesRows:[],normals:[]},n=16*t,o=10*t;e<1&&(n=10*t,o=8*t);var s,l,h=2*Math.PI,u=Math.PI;for(l=0;l<=o;l++){var c=[];for(s=0;s<=n;s++){var d=s/n,f=l/o,p=-e*Math.cos(0+d*h)*Math.sin(0+f*u),v=e*Math.cos(0+f*u),g=e*Math.sin(0+d*h)*Math.sin(0+f*u),m=new a.Vector3(p,v,g);m.normalize(),i.vertices.push({x:p,y:v,z:g}),i.normals.push(m),c.push(i.vertices.length-1)}i.verticesRows.push(c)}return r.set(e,i),i}}]),e}());e.drawSphere=function(e,t,r,i,a){for(var o=n.getVerticesForRadius(r,a),s=o.vertices,l=o.normals,h=e.updateGeoGroup(s.length),u=h.vertices,c=h.vertexArray,d=h.colorArray,f=h.faceArray,p=h.lineArray,v=h.normalArray,g=0,m=s.length;g<m;++g){var y=3*(u+g),_=s[g];c[y]=_.x+t.x,c[y+1]=_.y+t.y,c[y+2]=_.z+t.z,d[y]=i.r,d[y+1]=i.g,d[y+2]=i.b}h.vertices+=s.length;for(var b=o.verticesRows,w=b.length-1,x=0;x<w;x++)for(var k=b[x].length-1,C=0;C<k;C++){var A=h.faceidx,S=h.lineidx,E=b[x][C+1]+u,z=3*E,M=b[x][C]+u,T=3*M,L=b[x+1][C]+u,D=3*L,O=b[x+1][C+1]+u,I=3*O,F=l[E-u],R=l[M-u],P=l[L-u],N=l[O-u];Math.abs(s[E-u].y)===r?(v[z]=F.x,v[D]=P.x,v[I]=N.x,v[z+1]=F.y,v[D+1]=P.y,v[I+1]=N.y,v[z+2]=F.z,v[D+2]=P.z,v[I+2]=N.z,f[A]=E,f[A+1]=L,f[A+2]=O,p[S]=E,p[S+1]=L,p[S+2]=E,p[S+3]=O,p[S+4]=L,p[S+5]=O,h.faceidx+=3,h.lineidx+=6):Math.abs(s[L-u].y)===r?(v[z]=F.x,v[T]=R.x,v[D]=P.x,v[z+1]=F.y,v[T+1]=R.y,v[D+1]=P.y,v[z+2]=F.z,v[T+2]=R.z,v[D+2]=P.z,f[A]=E,f[A+1]=M,f[A+2]=L,p[S]=E,p[S+1]=M,p[S+2]=E,p[S+3]=L,p[S+4]=M,p[S+5]=L,h.faceidx+=3,h.lineidx+=6):(v[z]=F.x,v[T]=R.x,v[I]=N.x,v[z+1]=F.y,v[T+1]=R.y,v[I+1]=N.y,v[z+2]=F.z,v[T+2]=R.z,v[I+2]=N.z,v[T]=R.x,v[D]=P.x,v[I]=N.x,v[T+1]=R.y,v[D+1]=P.y,v[I+1]=N.y,v[T+2]=R.z,v[D+2]=P.z,v[I+2]=N.z,f[A]=E,f[A+1]=M,f[A+2]=O,f[A+3]=M,f[A+4]=L,f[A+5]=O,p[S]=E,p[S+1]=M,p[S+2]=E,p[S+3]=O,p[S+4]=M,p[S+5]=L,p[S+6]=L,p[S+7]=O,h.faceidx+=6,h.lineidx+=8)}}}(n||(n={}))},2116:function(e,t,r){\"use strict\";r.r(t),r.d(t,{GLModel:function(){return P}});var i=r(7693),n=r(3351),a=r(9652),o=r(2550),s=r(4406),l=r(6163),h=r(9005),u=r(1460),c=r(2640);function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"utf8\";return new TextDecoder(t).decode(e)}r(7396);var f=new TextEncoder,p=function(){var e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])}(),v={int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,uint64:BigUint64Array,int64:BigInt64Array,float32:Float32Array,float64:Float64Array},g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var i=!1;\"number\"==typeof t?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);var n=r.offset?r.offset>>>0:0,a=t.byteLength-n,o=n;(ArrayBuffer.isView(t)||t instanceof e)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+n),t=t.buffer),this.lastWrittenByte=i?a:0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}return _createClass(e,[{key:\"available\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}},{key:\"isLittleEndian\",value:function(){return this.littleEndian}},{key:\"setLittleEndian\",value:function(){return this.littleEndian=!0,this}},{key:\"isBigEndian\",value:function(){return!this.littleEndian}},{key:\"setBigEndian\",value:function(){return this.littleEndian=!1,this}},{key:\"skip\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=e,this}},{key:\"back\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=e,this}},{key:\"seek\",value:function(e){return this.offset=e,this}},{key:\"mark\",value:function(){return this._mark=this.offset,this}},{key:\"reset\",value:function(){return this.offset=this._mark,this}},{key:\"pushMark\",value:function(){return this._marks.push(this.offset),this}},{key:\"popMark\",value:function(){var e=this._marks.pop();if(void 0===e)throw new Error(\"Mark stack empty\");return this.seek(e),this}},{key:\"rewind\",value:function(){return this.offset=0,this}},{key:\"ensureAvailable\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(e)){var t=2*(this.offset+e),r=new Uint8Array(t);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=t,this._data=new DataView(this.buffer)}return this}},{key:\"readBoolean\",value:function(){return 0!==this.readUint8()}},{key:\"readInt8\",value:function(){return this._data.getInt8(this.offset++)}},{key:\"readUint8\",value:function(){return this._data.getUint8(this.offset++)}},{key:\"readByte\",value:function(){return this.readUint8()}},{key:\"readBytes\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(e,\"uint8\")}},{key:\"readArray\",value:function(e,t){var r=v[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,n=this.buffer.slice(i,i+r);if(this.littleEndian===p&&\"uint8\"!==t&&\"int8\"!==t){var a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();var o=new v[t](a.buffer);return this.offset+=r,o.reverse(),o}var s=new v[t](n);return this.offset+=r,s}},{key:\"readInt16\",value:function(){var e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}},{key:\"readUint16\",value:function(){var e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}},{key:\"readInt32\",value:function(){var e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:\"readUint32\",value:function(){var e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:\"readFloat32\",value:function(){var e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:\"readFloat64\",value:function(){var e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}},{key:\"readBigInt64\",value:function(){var e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}},{key:\"readBigUint64\",value:function(){var e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}},{key:\"readChar\",value:function(){return String.fromCharCode(this.readInt8())}},{key:\"readChars\",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=\"\",r=0;r<e;r++)t+=this.readChar();return t}},{key:\"readUtf8\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return d(this.readBytes(e))}},{key:\"decodeText\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"utf-8\";return d(this.readBytes(e),t)}},{key:\"writeBoolean\",value:function(e){return this.writeUint8(e?255:0),this}},{key:\"writeInt8\",value:function(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}},{key:\"writeUint8\",value:function(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}},{key:\"writeByte\",value:function(e){return this.writeUint8(e)}},{key:\"writeBytes\",value:function(e){this.ensureAvailable(e.length);for(var t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}},{key:\"writeInt16\",value:function(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}},{key:\"writeUint16\",value:function(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}},{key:\"writeInt32\",value:function(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:\"writeUint32\",value:function(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:\"writeFloat32\",value:function(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:\"writeFloat64\",value:function(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:\"writeBigInt64\",value:function(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:\"writeBigUint64\",value:function(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:\"writeChar\",value:function(e){return this.writeUint8(e.charCodeAt(0))}},{key:\"writeChars\",value:function(e){for(var t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}},{key:\"writeUtf8\",value:function(e){return this.writeBytes(function(e){return f.encode(e)}(e))}},{key:\"toArray\",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}},{key:\"_updateLastWrittenByte\",value:function(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}]),e}();function m(e,t){if(e)throw new TypeError(\"Not a valid NetCDF v3.x file: \".concat(t))}function y(e){e.offset%4!=0&&e.skip(4-e.offset%4)}function _(e){var t=e.readUint32(),r=e.readChars(t);return y(e),r}var b=1,w=2,x=3,k=4,C=5,A=6;function S(e){switch(Number(e)){case b:return\"byte\";case w:return\"char\";case x:return\"short\";case k:return\"int\";case C:return\"float\";case A:return\"double\";default:return\"undefined\"}}function E(e){switch(Number(e)){case b:case w:return 1;case x:return 2;case k:case C:return 4;case A:return 8;default:return-1}}function z(e){switch(String(e)){case\"byte\":return b;case\"char\":return w;case\"short\":return x;case\"int\":return k;case\"float\":return C;case\"double\":return A;default:return-1}}function M(e,t){if(1!==e){for(var r=new Array(e),i=0;i<e;i++)r[i]=t();return r}return t()}function T(e,t,r){switch(t){case b:return e.readBytes(r);case w:return function(e){return 0===e.charCodeAt(e.length-1)?e.substring(0,e.length-1):e}(e.readChars(r));case x:return M(r,e.readInt16.bind(e));case k:return M(r,e.readInt32.bind(e));case C:return M(r,e.readFloat32.bind(e));case A:return M(r,e.readFloat64.bind(e));default:return void m(!0,\"non valid type \".concat(t))}}function L(e,t){var r={recordDimension:{length:e.readUint32()}};r.version=t;var i=function(e){var t,r,i,n=e.readUint32();if(0===n)return m(0!==e.readUint32(),\"wrong empty tag for list of dimensions\"),[];m(10!==n,\"wrong tag for list of dimensions\");var a=e.readUint32();i=new Array(a);for(var o=0;o<a;o++){var s=_(e),l=e.readUint32();0===l&&(t=o,r=s),i[o]={name:s,size:l}}return{dimensions:i,recordId:t,recordName:r}}(e);r.recordDimension.id=i.recordId,r.recordDimension.name=i.recordName,r.dimensions=i.dimensions,r.globalAttributes=D(e);var n=function(e,t,r){var i,n=e.readUint32(),a=0;if(0===n)return m(0!==e.readUint32(),\"wrong empty tag for list of variables\"),[];m(11!==n,\"wrong tag for list of variables\");var o=e.readUint32();i=new Array(o);for(var s=0;s<o;s++){for(var l=_(e),h=e.readUint32(),u=new Array(h),c=0;c<h;c++)u[c]=e.readUint32();var d=D(e),f=e.readUint32();m(f<1&&f>6,\"non valid type \".concat(f));var p=e.readUint32(),v=e.readUint32();2===r&&(m(v>0,\"offsets larger than 4GB not supported\"),v=e.readUint32());var g=!1;void 0!==t&&u[0]===t&&(a+=p,g=!0),i[s]={name:l,dimensions:u,attributes:d,type:S(f),size:p,offset:v,record:g}}return{variables:i,recordStep:a}}(e,i.recordId,t);return r.variables=n.variables,r.recordDimension.recordStep=n.recordStep,r}function D(e){var t,r=e.readUint32();if(0===r)return m(0!==e.readUint32(),\"wrong empty tag for list of attributes\"),[];m(12!==r,\"wrong tag for list of attributes\");var i=e.readUint32();t=new Array(i);for(var n=0;n<i;n++){var a=_(e),o=e.readUint32();m(o<1||o>6,\"non valid type \".concat(o));var s=e.readUint32(),l=T(e,o,s);y(e),t[n]={name:a,type:S(o),value:l}}return t}function O(){var e=[];e.push(\"DIMENSIONS\");var t,r=_createForOfIteratorHelper(this.dimensions);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.push(\"  \".concat(i.name.padEnd(30),\" = size: \").concat(i.size))}}catch(d){r.e(d)}finally{r.f()}e.push(\"\"),e.push(\"GLOBAL ATTRIBUTES\");var n,a=_createForOfIteratorHelper(this.globalAttributes);try{for(a.s();!(n=a.n()).done;){var o=n.value;e.push(\"  \".concat(o.name.padEnd(30),\" = \").concat(o.value))}}catch(d){a.e(d)}finally{a.f()}var s=JSON.parse(JSON.stringify(this.variables));e.push(\"\"),e.push(\"VARIABLES:\");var l,h=_createForOfIteratorHelper(s);try{for(h.s();!(l=h.n()).done;){var u=l.value;u.value=this.getDataVariable(u);var c=JSON.stringify(u.value);c.length>50&&(c=c.substring(0,50)),isNaN(u.value.length)||(c+=\" (length: \".concat(u.value.length,\")\")),e.push(\"  \".concat(u.name.padEnd(30),\" = \").concat(c))}}catch(d){h.e(d)}finally{h.f()}return e.join(\"\\n\")}var I=function(){function e(t){_classCallCheck(this,e);var r=new g(t);r.setBigEndian(),m(\"CDF\"!==r.readChars(3),\"should start with CDF\");var i=r.readByte();m(i>2,\"unknown version\"),this.header=L(r,i),this.buffer=r}return _createClass(e,[{key:\"version\",get:function(){return 1===this.header.version?\"classic format\":\"64-bit offset format\"}},{key:\"recordDimension\",get:function(){return this.header.recordDimension}},{key:\"dimensions\",get:function(){return this.header.dimensions}},{key:\"globalAttributes\",get:function(){return this.header.globalAttributes}},{key:\"getAttribute\",value:function(e){var t=this.globalAttributes.find((function(t){return t.name===e}));return t?t.value:null}},{key:\"getDataVariableAsString\",value:function(e){var t=this.getDataVariable(e);return t?t.join(\"\"):null}},{key:\"variables\",get:function(){return this.header.variables}},{key:\"toString\",value:function(){return O.call(this)}},{key:\"getDataVariable\",value:function(e){var t;return t=\"string\"==typeof e?this.header.variables.find((function(t){return t.name===e})):e,m(void 0===t,\"variable not found: \".concat(e)),this.buffer.seek(t.offset),t.record?function(e,t,r){for(var i=z(t.type),n=t.size?t.size/E(i):1,a=r.length,o=new Array(a),s=r.recordStep,l=0;l<a;l++){var h=e.offset;o[l]=T(e,i,n),e.seek(h+s)}return o}(this.buffer,t,this.header.recordDimension):function(e,t){for(var r=z(t.type),i=t.size/E(r),n=new Array(i),a=0;a<i;a++)n[a]=T(e,r,1);return n}(this.buffer,t)}},{key:\"dataVariableExists\",value:function(e){return void 0!==this.header.variables.find((function(t){return t.name===e}))}},{key:\"attributeExists\",value:function(e){return void 0!==this.globalAttributes.find((function(t){return t.name===e}))}}]),e}(),F=r(7885),R=r(3920),P=function(){function e(t,r){_classCallCheck(this,e),this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new a.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=o.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=r||{},this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:o.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=t}return _createClass(e,[{key:\"getRadiusFromStyle\",value:function(t,r){var i=this.defaultSphereRadius;if(void 0!==r.radius)i=r.radius;else if(e.vdwRadii[t.elem])i=e.vdwRadii[t.elem];else if(t.elem.length>1){var n=t.elem;n=n[0].toUpperCase()+n[1].toLowerCase(),e.vdwRadii[n]&&(i=e.vdwRadii[n])}return void 0!==r.scale&&(i*=r.scale),i}},{key:\"drawAtomCross\",value:function(t,r){if(t.style.cross){var n=t.style.cross;if(!n.hidden){var o=n.linewidth||e.defaultlineWidth;r[o]||(r[o]=new i.Geometry);var s=r[o].updateGeoGroup(6),l=this.getRadiusFromStyle(t,n),u=[[l,0,0],[-l,0,0],[0,l,0],[0,-l,0],[0,0,l],[0,0,-l]],c=t.clickable||t.hoverable;c&&void 0===t.intersectionShape&&(t.intersectionShape={sphere:[],cylinder:[],line:[]});for(var d=(0,h.getColorFromStyle)(t,n),f=s.vertexArray,p=s.colorArray,v=0;v<6;v++){var g=3*s.vertices;if(s.vertices++,f[g]=t.x+u[v][0],f[g+1]=t.y+u[v][1],f[g+2]=t.z+u[v][2],p[g]=d.r,p[g+1]=d.g,p[g+2]=d.b,c){var m=new a.Vector3(u[v][0],u[v][1],u[v][2]);m.multiplyScalar(.1),m.set(m.x+t.x,m.y+t.y,m.z+t.z),t.intersectionShape.line.push(m)}}}}}},{key:\"getGoodCross\",value:function(e,t,r,i){for(var n=null,o=-1,s=0,l=e.bonds.length;s<l;s++)if(e.bonds[s]!=t.index){var h=e.bonds[s],u=this.atoms[h],c=new a.Vector3(u.x,u.y,u.z).clone();c.sub(r);var d=c.clone();d.cross(i);var f=d.lengthSq();if(f>o&&(n=d,(o=f)>.1))return n}return n}},{key:\"getSideBondV\",value:function(e,t,r){var i,n,o,s,l=new a.Vector3(e.x,e.y,e.z),h=new a.Vector3(t.x,t.y,t.z).clone(),u=null;if(h.sub(l),1===e.bonds.length)1===t.bonds.length?(u=h.clone(),Math.abs(u.x)>1e-4?u.y+=1:u.x+=1):(i=(r+1)%t.bonds.length,n=t.bonds[i],o=this.atoms[n],(s=new a.Vector3(o.x,o.y,o.z).clone()).sub(l),(u=s.clone()).cross(h));else if((u=this.getGoodCross(e,t,l,h)).lengthSq()<.01){var c=this.getGoodCross(t,e,l,h);null!=c&&(u=c)}return u.lengthSq()<.01&&(u=h.clone(),Math.abs(u.x)>1e-4?u.y+=1:u.x+=1),u.cross(h),u.normalize(),u}},{key:\"addLine\",value:function(e,t,r,i,n,a){e[r]=i.x,e[r+1]=i.y,e[r+2]=i.z,t[r]=a.r,t[r+1]=a.g,t[r+2]=a.b,e[r+3]=n.x,e[r+4]=n.y,e[r+5]=n.z,t[r+3]=a.r,t[r+4]=a.g,t[r+5]=a.b}},{key:\"drawBondLines\",value:function(t,r,n){if(t.style.line){var s=t.style.line;if(!s.hidden){var l,u,c,d,f=s.linewidth||e.defaultlineWidth;n[f]||(n[f]=new i.Geometry);for(var p=n[f].updateGeoGroup(6*t.bonds.length),v=p.vertexArray,g=p.colorArray,m=0;m<t.bonds.length;m++){var y=r[t.bonds[m]];if(y.style.line&&!(t.index>=y.index)){var _=new a.Vector3(t.x,t.y,t.z),b=new a.Vector3(y.x,y.y,y.z),w=_.clone().add(b).multiplyScalar(.5),x=!1,k=t.clickable||t.hoverable,C=y.clickable||y.hoverable;(k||C)&&(k&&(void 0===t.intersectionShape&&(t.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),t.intersectionShape.line.push(_),t.intersectionShape.line.push(w)),C&&(void 0===y.intersectionShape&&(y.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),y.intersectionShape.line.push(w),y.intersectionShape.line.push(b)));var A=(0,h.getColorFromStyle)(t,t.style.line),S=(0,h.getColorFromStyle)(y,y.style.line);if(t.bondStyles&&t.bondStyles[m]){var E=t.bondStyles[m];if(!E.iswire)continue;E.singleBond&&(x=!0),void 0!==E.color1&&(A=o.CC.color(E.color1)),void 0!==E.color2&&(S=o.CC.color(E.color2))}var z,M,T=3*p.vertices;if(t.bondOrder[m]>1&&t.bondOrder[m]<4&&!x){var L=this.getSideBondV(t,y,m),D=b.clone();D.sub(_),2==t.bondOrder[m]?(L.multiplyScalar(.1),(l=_.clone()).add(L),(u=_.clone()).sub(L),(c=l.clone()).add(D),(d=u.clone()).add(D),A==S?(p.vertices+=4,this.addLine(v,g,T,l,c,A),this.addLine(v,g,T+6,u,d,A)):(p.vertices+=8,D.multiplyScalar(.5),(z=l.clone()).add(D),(M=u.clone()).add(D),this.addLine(v,g,T,l,z,A),this.addLine(v,g,T+6,z,c,S),this.addLine(v,g,T+12,u,M,A),this.addLine(v,g,T+18,M,d,S))):3==t.bondOrder[m]&&(L.multiplyScalar(.1),(l=_.clone()).add(L),(u=_.clone()).sub(L),(c=l.clone()).add(D),(d=u.clone()).add(D),A==S?(p.vertices+=6,this.addLine(v,g,T,_,b,A),this.addLine(v,g,T+6,l,c,A),this.addLine(v,g,T+12,u,d,A)):(p.vertices+=12,D.multiplyScalar(.5),(z=l.clone()).add(D),(M=u.clone()).add(D),this.addLine(v,g,T,_,w,A),this.addLine(v,g,T+6,w,b,S),this.addLine(v,g,T+12,l,z,A),this.addLine(v,g,T+18,z,c,S),this.addLine(v,g,T+24,u,M,A),this.addLine(v,g,T+30,M,d,S)))}else A==S?(p.vertices+=2,this.addLine(v,g,T,_,b,A)):(p.vertices+=4,this.addLine(v,g,T,_,w,A),this.addLine(v,g,T+6,w,b,S))}}}}}},{key:\"drawAtomSphere\",value:function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var i=(0,h.getColorFromStyle)(e,r),o=this.getRadiusFromStyle(e,r);if((!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var l=new a.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(l,o))}s.GLDraw.drawSphere(t,e,o,i)}}}},{key:\"drawAtomClickSphere\",value:function(e){if(e.style.clicksphere){var t=e.style.clicksphere;if(!t.hidden){var r=this.getRadiusFromStyle(e,t);if((!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var i=new a.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(i,r))}}}}},{key:\"drawAtomInstanced\",value:function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var i=this.getRadiusFromStyle(e,r),o=(0,h.getColorFromStyle)(e,r),s=t.updateGeoGroup(1),l=s.vertices,u=3*l,c=s.vertexArray,d=s.colorArray,f=s.radiusArray;if(c[u]=e.x,c[u+1]=e.y,c[u+2]=e.z,d[u]=o.r,d[u+1]=o.g,d[u+2]=o.b,f[l]=i,(!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var p=new a.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(p,i))}s.vertices+=1}}}},{key:\"drawSphereImposter\",value:function(e,t,r,i){var n,a=e.updateGeoGroup(4),o=a.vertices,s=3*o,l=a.vertexArray,h=a.colorArray;for(n=0;n<4;n++)l[s+3*n]=t.x,l[s+3*n+1]=t.y,l[s+3*n+2]=t.z;var u=a.normalArray;for(n=0;n<4;n++)h[s+3*n]=i.r,h[s+3*n+1]=i.g,h[s+3*n+2]=i.b;u[s+0]=-r,u[s+1]=r,u[s+2]=0,u[s+3]=-r,u[s+4]=-r,u[s+5]=0,u[s+6]=r,u[s+7]=-r,u[s+8]=0,u[s+9]=r,u[s+10]=r,u[s+11]=0,a.vertices+=4;var c=a.faceArray,d=a.faceidx;c[d+0]=o,c[d+1]=o+1,c[d+2]=o+2,c[d+3]=o+2,c[d+4]=o+3,c[d+5]=o,a.faceidx+=6}},{key:\"drawAtomImposter\",value:function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var i=this.getRadiusFromStyle(e,r),o=(0,h.getColorFromStyle)(e,r);if((!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var s=new a.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(s,i))}this.drawSphereImposter(t,e,i,o)}}}},{key:\"drawBondSticks\",value:function(t,r,i){if(t.style.stick){var l=t.style.stick;if(!l.hidden){var u,c,d,f,p,v,g,m,y,_,b,w,x,k,C=l.radius||this.defaultStickRadius,A=C,S=l.singleBonds||!1,E=0,z=0,M=(0,h.getColorFromStyle)(t,l);!t.capDrawn&&t.bonds.length<4&&(E=2);var T=s.GLDraw.drawCylinder;for(i.imposter&&(T=e.drawStickImposter),d=0;d<t.bonds.length;d++){var L=r[t.bonds[d]];if(w=x=k=null,t.index<L.index){var D=L.style;if(!D.stick||D.stick.hidden)continue;var O=(0,h.getColorFromStyle)(L,D.stick);if(A=C,f=S,t.bondStyles&&t.bondStyles[d]){if((p=t.bondStyles[d]).iswire)continue;p.radius&&(A=p.radius),p.singleBond&&(f=!0),void 0!==p.color1&&(M=o.CC.color(p.color1)),void 0!==p.color2&&(O=o.CC.color(p.color2))}var I=new a.Vector3(t.x,t.y,t.z),F=new a.Vector3(L.x,L.y,L.z);if(t.bondOrder[d]<=1||f||t.bondOrder[d]>3){if(t.bondOrder[d]<1&&(A*=t.bondOrder[d]),!L.capDrawn&&L.bonds.length<4&&(z=2),M!=O?(T(i,I,w=(new a.Vector3).addVectors(I,F).multiplyScalar(.5),A,M,E,0),T(i,w,F,A,O,0,z)):T(i,I,F,A,M,E,z),u=t.clickable||t.hoverable,c=L.clickable||L.hoverable,u||c){if(w||(w=(new a.Vector3).addVectors(I,F).multiplyScalar(.5)),u){var R=new n.Cylinder(I,w,A),P=new n.Sphere(I,A);t.intersectionShape.cylinder.push(R),t.intersectionShape.sphere.push(P)}if(c){var N=new n.Cylinder(F,w,A),B=new n.Sphere(F,A);L.intersectionShape.cylinder.push(N),L.intersectionShape.sphere.push(B)}}}else if(t.bondOrder[d]>1){var U=0,G=0;A!=C&&(U=2,G=2);var V,j,H,q,W,Y=F.clone(),Z=null;Y.sub(I),Z=this.getSideBondV(t,L,d),2==t.bondOrder[d]?(V=A/2.5,Z.multiplyScalar(1.5*V),(j=I.clone()).add(Z),(H=I.clone()).sub(Z),(q=j.clone()).add(Y),(W=H.clone()).add(Y),M!=O?(w=(new a.Vector3).addVectors(j,q).multiplyScalar(.5),x=(new a.Vector3).addVectors(H,W).multiplyScalar(.5),T(i,j,w,V,M,U,0),T(i,w,q,V,O,0,G),T(i,H,x,V,M,U,0),T(i,x,W,V,O,0,G)):(T(i,j,q,V,M,U,G),T(i,H,W,V,M,U,G)),u=t.clickable||t.hoverable,c=L.clickable||L.hoverable,(u||c)&&(w||(w=(new a.Vector3).addVectors(j,q).multiplyScalar(.5)),x||(x=(new a.Vector3).addVectors(H,W).multiplyScalar(.5)),u&&(v=new n.Cylinder(j,w,V),g=new n.Cylinder(H,x,V),t.intersectionShape.cylinder.push(v),t.intersectionShape.cylinder.push(g)),c&&(y=new n.Cylinder(q,w,V),_=new n.Cylinder(W,x,V),L.intersectionShape.cylinder.push(y),L.intersectionShape.cylinder.push(_)))):3==t.bondOrder[d]&&(V=A/4,Z.cross(Y),Z.normalize(),Z.multiplyScalar(3*V),(j=I.clone()).add(Z),(H=I.clone()).sub(Z),(q=j.clone()).add(Y),(W=H.clone()).add(Y),M!=O?(w=(new a.Vector3).addVectors(j,q).multiplyScalar(.5),x=(new a.Vector3).addVectors(H,W).multiplyScalar(.5),k=(new a.Vector3).addVectors(I,F).multiplyScalar(.5),T(i,j,w,V,M,U,0),T(i,w,q,V,O,0,G),T(i,I,k,V,M,E,0),T(i,k,F,V,O,0,z),T(i,H,x,V,M,U,0),T(i,x,W,V,O,0,G)):(T(i,j,q,V,M,U,G),T(i,I,F,V,M,E,z),T(i,H,W,V,M,U,G)),u=t.clickable||t.hoverable,c=L.clickable||L.hoverable,(u||c)&&(w||(w=(new a.Vector3).addVectors(j,q).multiplyScalar(.5)),x||(x=(new a.Vector3).addVectors(H,W).multiplyScalar(.5)),k||(k=(new a.Vector3).addVectors(I,F).multiplyScalar(.5)),u&&(v=new n.Cylinder(j.clone(),w.clone(),V),g=new n.Cylinder(H.clone(),x.clone(),V),m=new n.Cylinder(I.clone(),k.clone(),V),t.intersectionShape.cylinder.push(v),t.intersectionShape.cylinder.push(g),t.intersectionShape.cylinder.push(m)),c&&(y=new n.Cylinder(q.clone(),w.clone(),V),_=new n.Cylinder(W.clone(),x.clone(),V),b=new n.Cylinder(F.clone(),k.clone(),V),L.intersectionShape.cylinder.push(y),L.intersectionShape.cylinder.push(_),L.intersectionShape.cylinder.push(b))))}}}var X=!1,K=0,$=!1;for(d=0;d<t.bonds.length;d++)f=S,t.bondStyles&&t.bondStyles[d]&&((p=t.bondStyles[d]).singleBond&&(f=!0),p.radius&&p.radius!=C&&($=!0)),(f||1==t.bondOrder[d])&&K++;$?K>0&&(X=!0):0==K&&(t.bonds.length>0||l.showNonBonded)&&(X=!0),X&&(A=C,i.imposter?this.drawSphereImposter(i.sphereGeometry,t,A,M):s.GLDraw.drawSphere(i,t,A,M))}}}},{key:\"createMolObj\",value:function(e,t){t=t||{};var r,n,a,h,u=new i.Object3D,c=[],d={},f={},p=this.drawAtomSphere,v=null,g=null;t.supportsImposters?(p=this.drawAtomImposter,(v=new i.Geometry(!0)).imposter=!0,(g=new i.Geometry(!0,!0)).imposter=!0,g.sphereGeometry=new i.Geometry(!0),g.sphereGeometry.imposter=!0,g.drawnCaps={}):t.supportsAIA?(p=this.drawAtomInstanced,(v=new i.Geometry(!1,!0,!0)).instanced=!0,g=new i.Geometry(!0)):(v=new i.Geometry(!0),g=new i.Geometry(!0));var m,y={},_=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(r=0,a=e.length;r<a;r++){var b=e[r];if(b&&b.style){for(n in(b.clickable||b.hoverable)&&void 0===b.intersectionShape&&(b.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),h={line:void 0,cross:void 0,stick:void 0,sphere:void 0})b.style[n]?b.style[n].opacity?h[n]=parseFloat(b.style[n].opacity):h[n]=1:h[n]=void 0,y[n]?null!=h[n]&&y[n]!=h[n]&&(console.log(\"Warning: \"+n+\" opacity is ambiguous\"),y[n]=1):y[n]=h[n];p.call(this,b,v),this.drawAtomClickSphere(b),this.drawAtomCross(b,f),this.drawBondLines(b,e,d),this.drawBondSticks(b,e,g),void 0===b.style.cartoon||b.style.cartoon.hidden||(\"spectrum\"!==b.style.cartoon.color||\"number\"!=typeof b.resi||b.hetflag||(b.resi<_[0]&&(_[0]=b.resi),b.resi>_[1]&&(_[1]=b.resi)),c.push(b))}}if(c.length>0&&(0,l.drawCartoon)(u,c,_,this.defaultCartoonQuality),v&&v.vertices>0){v.initTypedArrays();var w=null,x=null;v.imposter?w=new i.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):v.instanced?(x=new i.Geometry(!0),s.GLDraw.drawSphere(x,{x:0,y:0,z:0},1,new o.Color(.5,.5,.5)),x.initTypedArrays(),w=new i.InstancedMaterial({sphereMaterial:new i.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:x})):w=new i.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),y.sphere<1&&y.sphere>=0&&(w.transparent=!0,w.opacity=y.sphere),x=new i.Mesh(v,w),u.add(x)}if(g.vertices>0){var k=null,C=null,A=g.sphereGeometry;A&&void 0!==A.vertices&&0!=A.vertices||(A=null),g.initTypedArrays(),A&&A.initTypedArrays();var S={ambient:0,vertexColors:!0,reflectivity:0};g.imposter?(k=new i.StickImposterMaterial(S),C=new i.SphereImposterMaterial(S)):(k=new i.MeshLambertMaterial(S),C=new i.MeshLambertMaterial(S),k.wireframe&&(g.setUpWireframe(),A&&A.setUpWireframe())),y.stick<1&&y.stick>=0&&(k.transparent=!0,k.opacity=y.stick,C.transparent=!0,C.opacity=y.stick);var E=new i.Mesh(g,k);if(u.add(E),A){var z=new i.Mesh(A,C);u.add(z)}}for(r in d)if(d.hasOwnProperty(r)){m=r;var M=new i.LineBasicMaterial({linewidth:m,vertexColors:!0});y.line<1&&y.line>=0&&(M.transparent=!0,M.opacity=y.line),d[r].initTypedArrays();var T=new i.Line(d[r],M,i.LineStyle.LinePieces);u.add(T)}for(r in f)if(f.hasOwnProperty(r)){m=r;var L=new i.LineBasicMaterial({linewidth:m,vertexColors:!0});y.cross<1&&y.cross>=0&&(L.transparent=!0,L.opacity=y.cross),f[r].initTypedArrays();var D=new i.Line(f[r],L,i.LineStyle.LinePieces);u.add(D)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var O,I=new i.Object3D;for(O=0;O<this.modelData.symmetries.length;O++){var F=new i.Object3D;(F=u.clone()).matrix.copy(this.modelData.symmetries[O]),F.matrixAutoUpdate=!1,I.add(F)}return I}return u}},{key:\"getInternalState\",value:function(){return{atoms:this.atoms,frames:this.frames}}},{key:\"setInternalState\",value:function(e){this.atoms=e.atoms,this.frames=e.frames,this.molObj=null}},{key:\"getCrystData\",value:function(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){var e=this.modelData.cryst;this.modelData.cryst.matrix=(0,a.conversionMatrix3)(e.a,e.b,e.c,e.alpha,e.beta,e.gamma)}return this.modelData.cryst}return null}},{key:\"setCrystData\",value:function(e,t,r,i,n,o){e=e||1,t=t||1,r=r||1,i=i||90,n=n||90,o=o||90;var s=(0,a.conversionMatrix3)(e,t,r,i,n,o);this.modelData.cryst={a:e,b:t,c:r,alpha:i,beta:n,gamma:o,matrix:s}}},{key:\"setCrystMatrix\",value:function(e){e=e||new a.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:e}}},{key:\"getSymmetries\",value:function(){return void 0===this.modelData.symmetries&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}},{key:\"setSymmetries\",value:function(e){this.modelData.symmetries=void 0===e?[this.idMatrix]:e}},{key:\"getID\",value:function(){return this.id}},{key:\"getNumFrames\",value:function(){return null!=this.frames.numFrames?this.frames.numFrames:this.frames.length}},{key:\"adjustCoord\",value:function(e,t,r,i){var n=t-e;return n<-r?t+i:n>r?t-i:t}},{key:\"adjustCoordinatesToBox\",value:function(){if(this.box&&this.atomdfs)for(var e=this.box[0],t=this.box[1],r=this.box[2],i=.9*e,n=.9*t,a=.9*r,o=0;o<this.atomdfs.length;o++)for(var s=this.atomdfs[o],l=1;l<s.length;l++){var h=this.atoms[s[l][0]],u=this.atoms[s[l][1]];h.x=this.adjustCoord(u.x,h.x,i,e),h.y=this.adjustCoord(u.y,h.y,n,t),h.z=this.adjustCoord(u.z,h.z,a,r)}}},{key:\"setFrame\",value:function(e,t){var r=this.getNumFrames(),i=this;return new Promise((function(n,a){if(0==r&&n(),(e<0||e>=r)&&(e=r-1),null!=i.frames.url){var o=i.frames.url;(0,h.getbin)(o+\"/traj/frame/\"+e+\"/\"+i.frames.path,void 0,\"POST\",void 0).then((function(e){for(var t=new Float32Array(e,44),r=0,a=0;a<i.atoms.length;a++)i.atoms[a].x=t[r++],i.atoms[a].y=t[r++],i.atoms[a].z=t[r++];i.box&&i.atomdfs&&i.adjustCoordinatesToBox(),n()})).catch(a)}else i.atoms=i.frames[e],n();i.molObj=null,i.modelDatas&&e<i.modelDatas.length&&(i.modelData=i.modelDatas[e],i.unitCellObjects&&t&&(t.removeUnitCell(i),t.addUnitCell(i)))}))}},{key:\"addFrame\",value:function(e){this.frames.push(e)}},{key:\"vibrate\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o=0,s=e;r&&(o=-e,s=e),void 0!==this.frames&&void 0!==this.frames.origIndex?this.setFrame(this.frames.origIndex):this.setFrame(0),o<s&&(this.frames=[]),r&&(this.frames.origIndex=e);for(var l=o;l<s;l++){var u=[],c=this.frames.length;if(0!=l||n){for(var d=0;d<this.atoms.length;d++){var f=(0,h.getAtomProperty)(this.atoms[d],\"dx\"),p=(0,h.getAtomProperty)(this.atoms[d],\"dy\"),v=(0,h.getAtomProperty)(this.atoms[d],\"dz\"),g=new a.Vector3(f,p,v),m=new a.Vector3(this.atoms[d].x,this.atoms[d].y,this.atoms[d].z),y=l*t/e;g.multiplyScalar(y),m.add(g);var _={};for(var b in this.atoms[d])_[b]=this.atoms[d][b];if(_.x=m.x,_.y=m.y,_.z=m.z,u.push(_),i&&n){var w=(0,h.extend)({},n),x=new a.Vector3(f,p,v);if(x.multiplyScalar(t),x.add(m),w.start=m,w.end=x,w.frame=c,!w.color){var k=_.style.sphere;k||(k=_.style.stick),k||(k=_.style.line),w.color=(0,h.getColorFromStyle)(_,k)}i.addArrow(w)}}this.frames.push(u)}else this.frames.push(this.atoms)}}},{key:\"setAtomDefaults\",value:function(t){for(var r=0;r<t.length;r++){var i=t[r];i&&(i.style=i.style||(0,h.deepCopy)(e.defaultAtomStyle),i.color=i.color||this.ElementColors[i.elem]||this.defaultColor,i.model=this.id,(i.clickable||i.hoverable)&&(i.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}},{key:\"addMolData\",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.parseMolData(t,r,i);this.dontDuplicateAtoms=!i.duplicateAssemblyAtoms;var a=n.modelData;if(a&&(Array.isArray(a)?(this.modelData=a[0],i.frames&&(this.modelDatas=a)):this.modelData=a),n.box?this.box=n.box:this.box=null,0==this.frames.length){for(var o=0;o<n.length;o++)0!=n[o].length&&this.frames.push(n[o]);this.frames[0]&&(this.atoms=this.frames[0])}else if(i.frames)for(var s=0;s<n.length;s++)this.frames.push(n[s]);else for(var l=0;l<n.length;l++)this.addAtoms(n[l]);for(var h=0;h<this.frames.length;h++)this.setAtomDefaults(this.frames[h]);i.vibrate&&i.vibrate.frames&&i.vibrate.amplitude&&this.vibrate(i.vibrate.frames,i.vibrate.amplitude),i.style&&this.setStyle({},i.style)}},{key:\"setDontDuplicateAtoms\",value:function(e){this.dontDuplicateAtoms=e}},{key:\"setModelData\",value:function(e){this.modelData=e}},{key:\"propertyMatches\",value:function(e,t){if(e==t)return!0;if(\"string\"==typeof t&&\"number\"==typeof e){var r=t.match(/(-?\\d+)\\s*-\\s*(-?\\d+)/);if(r){var i=parseInt(r[1]),n=parseInt(r[2]);if(r&&e>=i&&e<=n)return!0}}return!1}},{key:\"atomIsSelected\",value:function(t,r){if(void 0===r)return!0;var i=!!r.invert,n=!0;for(var a in r)if(\"and\"==a||\"or\"==a||\"not\"==a){if(\"not\"==a){if(this.atomIsSelected(t,r[a])){n=!1;break}}else if(void 0===r[a].__cached_results&&(r=e.deepCopyAndCache(r,this)),!(n=r[a].__cached_results.has(t.index)))break}else if(\"predicate\"===a){if(!r.predicate(t)){n=!1;break}}else if(\"properties\"==a&&t[a]){for(var o in r.properties)if(!o.startsWith(\"__cache\")){if(void 0===t.properties[o]){n=!1;break}if(t.properties[o]!=r.properties[o]){n=!1;break}}}else if(r.hasOwnProperty(a)&&\"props\"!=a&&\"invert\"!=a&&\"model\"!=a&&\"byres\"!=a&&\"expand\"!=a&&\"within\"!=a&&\"and\"!=a&&\"or\"!=a&&\"not\"!=a&&!a.startsWith(\"__cache\")){if(void 0===t[a]){n=!1;break}var s=!1;if(\"bonds\"===a){if(r[a]!=t.bonds.length){n=!1;break}}else if(Array.isArray(r[a])){for(var l=r[a],h=t[a],u=0;u<l.length;u++)if(this.propertyMatches(h,l[u])){s=!0;break}if(!s){n=!1;break}}else{var c=r[a];if(!this.propertyMatches(t[a],c)){n=!1;break}}}return i?!n:n}},{key:\"expandAtomList\",value:function(e,t){if(t<=0)return e;for(var r=(0,h.getExtent)(e,void 0),i=[[],[],[]],n=0;n<3;n++)i[0][n]=r[0][n]-t,i[1][n]=r[1][n]+t,i[2][n]=r[2][n];for(var a=[],o=0;o<this.atoms.length;o++){var s=this.atoms[o].x,l=this.atoms[o].y,u=this.atoms[o].z;s>=i[0][0]&&s<=i[1][0]&&l>=i[0][1]&&l<=i[1][1]&&u>=i[0][2]&&u<=i[1][2]&&(s>=r[0][0]&&s<=r[1][0]&&l>=r[0][1]&&l<=r[1][1]&&u>=r[0][2]&&u<=r[1][2]||a.push(this.atoms[o]))}return a}},{key:\"selectedAtoms\",value:function(t,r){var i=[];t=e.deepCopyAndCache(t||{},this),r||(r=this.atoms);for(var n=r.length,a=0;a<n;a++){var o=r[a];o&&this.atomIsSelected(o,t)&&i.push(o)}if(t.hasOwnProperty(\"expand\"))for(var s=e.getFloat(t.expand),l=this.expandAtomList(i,s),h=i.length,u=s*s,c=0;c<l.length;c++)for(var d=0;d<h;d++){var f=e.squaredDistance(l[c],i[d]);f<u&&f>0&&i.push(l[c])}if(t.hasOwnProperty(\"within\")&&t.within.hasOwnProperty(\"sel\")&&t.within.hasOwnProperty(\"distance\")){for(var p=this.selectedAtoms(t.within.sel,this.atoms),v={},g=e.getFloat(t.within.distance),m=g*g,y=0;y<p.length;y++)for(var _=0;_<i.length;_++){var b=e.squaredDistance(p[y],i[_]);b<m&&b>0&&(v[_]=1)}var w=[];if(t.within.invert)for(var x=0;x<i.length;x++)v[x]||w.push(i[x]);else for(var k in v)w.push(i[k]);i=w}if(t.hasOwnProperty(\"byres\"))for(var C={},A=[],S=[],E=0;E<i.length;E++){var z=i[E],M=z.chain,T=z.resi;if(void 0===C[M]&&(C[M]={}),z.hasOwnProperty(\"resi\")&&void 0===C[M][T])for(C[M][T]=!0,S.push(z);S.length>0;)if(z=S.pop(),M=z.chain,T=z.resi,void 0===A[z.index]){A[z.index]=!0;for(var L=0;L<z.bonds.length;L++){var D=this.atoms[z.bonds[L]];void 0===A[D.index]&&D.hasOwnProperty(\"resi\")&&D.chain==M&&D.resi==T&&(S.push(D),i.push(D))}}}return i}},{key:\"addAtoms\",value:function(t){this.molObj=null;var r,i=this.atoms.length,n=[];for(r=0;r<t.length;r++)void 0===t[r].index&&(t[r].index=r),void 0===t[r].serial&&(t[r].serial=r),n[t[r].index]=i+r;for(r=0;r<t.length;r++){var a=t[r],o=n[a.index],s=(0,h.extend)({},a);s.index=o,s.bonds=[],s.bondOrder=[],s.model=this.id,s.style=s.style||(0,h.deepCopy)(e.defaultAtomStyle),void 0===s.color&&(s.color=this.ElementColors[s.elem]||this.defaultColor);for(var l=a.bonds?a.bonds.length:0,u=0;u<l;u++){var c=n[a.bonds[u]];void 0!==c&&(s.bonds.push(c),s.bondOrder.push(a.bondOrder?a.bondOrder[u]:1))}this.atoms.push(s)}}},{key:\"assignBonds\",value:function(){(0,R.assignBonds)(this.atoms)}},{key:\"removeAtoms\",value:function(e){this.molObj=null;var t,r=[];for(t=0;t<e.length;t++)r[e[t].index]=!0;var i=[];for(t=0;t<this.atoms.length;t++){var n=this.atoms[t];r[n.index]||i.push(n)}this.atoms=[],this.addAtoms(i)}},{key:\"setStyle\",value:function(e,t,r){void 0===t&&void 0===r&&(t=e,e={}),\"string\"==typeof t&&(t=(0,h.specStringToObject)(t));var i=!1,n=this,a=function(a){for(var o=n.selectedAtoms(e,a),s=0;s<a.length;s++)a[s]&&(a[s].capDrawn=!1);for(var l=0;l<o.length;l++)for(var h in i=!0,(o[l].clickable||o[l].hoverable)&&(o[l].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),r||(o[l].style={}),t)t.hasOwnProperty(h)&&(o[l].style[h]=o[l].style[h]||{},Object.assign(o[l].style[h],t[h]))};a(this.atoms);for(var o=0;o<this.frames.length;o++)this.frames[o]!==this.atoms&&a(this.frames[o]);i&&(this.molObj=null)}},{key:\"setClickable\",value:function(e,t,r){if(t=!!t,null!==(r=(0,h.makeFunction)(r))){for(var i=this.selectedAtoms(e,this.atoms),n=i.length,a=0;a<n;a++)i[a].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},i[a].clickable=t,r&&(i[a].callback=r);n>0&&(this.molObj=null)}else console.log(\"Callback is not a function\")}},{key:\"setHoverable\",value:function(e,t,r,i){if(t=!!t,r=(0,h.makeFunction)(r),i=(0,h.makeFunction)(i),null!==r)if(null!==i){for(var n=this.selectedAtoms(e,this.atoms),a=n.length,o=0;o<a;o++)n[o].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},n[o].hoverable=t,r&&(n[o].hover_callback=r),i&&(n[o].unhover_callback=i);a>0&&(this.molObj=null)}else console.log(\"Unhover_callback is not a function\");else console.log(\"Hover_callback is not a function\")}},{key:\"enableContextMenu\",value:function(e,t){var r;t=!!t;var i=this.selectedAtoms(e,this.atoms),n=i.length;for(r=0;r<n;r++)i[r].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},i[r].contextMenuEnabled=t;n>0&&(this.molObj=null)}},{key:\"setColorByElement\",value:function(t,r){if(null===this.molObj||!e.sameObj(r,this.lastColors)){this.lastColors=r;var i=this.selectedAtoms(t,i);i.length>0&&(this.molObj=null);for(var n=0;n<i.length;n++){var a=i[n];void 0!==r[a.elem]&&(a.color=r[a.elem])}}}},{key:\"setColorByProperty\",value:function(e,t,r,i){var n,a,o=this.selectedAtoms(e,o);for(this.lastColors=null,o.length>0&&(this.molObj=null),\"string\"==typeof r&&void 0!==u.Gradient.builtinGradients[r]&&(r=new u.Gradient.builtinGradients[r]),i||(i=r.range()),i||(i=(0,h.getPropertyRange)(o,t)),n=0;n<o.length;n++)a=o[n],null!=(0,h.getAtomProperty)(a,t)&&(a.color=r.valueToHex(parseFloat(a.properties[t]),i))}},{key:\"setColorByFunction\",value:function(e,t){var r=this.selectedAtoms(e,r);if(\"function\"==typeof t){this.lastColors=null,r.length>0&&(this.molObj=null);for(var i=0;i<r.length;i++){var n=r[i];n.color=t(n)}}}},{key:\"toCDObject\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={a:[],b:[]};e&&(t.s=[]);for(var r=0;r<this.atoms.length;r++){var i={},n=this.atoms[r];if(i.x=n.x,i.y=n.y,i.z=n.z,\"C\"!=n.elem&&(i.l=n.elem),e){for(var a=0;a<t.s.length&&JSON.stringify(n.style)!==JSON.stringify(t.s[a]);)a++;a===t.s.length&&t.s.push(n.style),0!==a&&(i.s=a)}t.a.push(i);for(var o=0;o<n.bonds.length;o++){var s=r,l=n.bonds[o];if(!(s>=l)){var h={b:s,e:l},u=n.bondOrder[o];1!=u&&(h.o=u),t.b.push(h)}}}return t}},{key:\"globj\",value:function(e,t){(null===this.molObj||t.regen)&&(this.molObj=this.createMolObj(this.atoms,t),this.renderedMolObj&&(e.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),e.add(this.renderedMolObj))}},{key:\"exportVRML\",value:function(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}},{key:\"removegl\",value:function(e){this.renderedMolObj&&(void 0!==this.renderedMolObj.geometry&&this.renderedMolObj.geometry.dispose(),void 0!==this.renderedMolObj.material&&this.renderedMolObj.material.dispose(),e.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}},{key:\"hide\",value:function(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}},{key:\"show\",value:function(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}},{key:\"addPropertyLabels\",value:function(e,t,r,i){for(var n=this.selectedAtoms(t,n),a=(0,h.deepCopy)(i),o=0;o<n.length;o++){var s=n[o],l=null;void 0!==s[e]?l=String(s[e]):void 0!==s.properties[e]&&(l=String(s.properties[e])),null!=l&&(a.position=s,r.addLabel(l,a))}}},{key:\"addResLabels\",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=[],o=function(i,o){for(var s=i.selectedAtoms(e,s),l={},u=0;u<s.length;u++){var c=s[u],d=c.chain,f=c.resn+\"\"+c.resi;l[d]||(l[d]={}),l[d][f]||(l[d][f]=[]),l[d][f].push(c)}var p=(0,h.deepCopy)(r);for(var v in l)if(l.hasOwnProperty(v)){var g=l[v];for(var m in g)if(g.hasOwnProperty(m)){for(var y=g[m],_=new a.Vector3(0,0,0),b=0;b<y.length;b++){var w=y[b];_.x+=w.x,_.y+=w.y,_.z+=w.z}_.divideScalar(y.length),p.position=_,p.frame=o;var x=t.addLabel(m,p,void 0,!0);n.push(x)}}};if(i){for(var s=this.getNumFrames(),l=this.atoms,u=0;u<s;u++)this.frames[u]&&(this.atoms=this.frames[u],o(this,u));this.atoms=l}else o(this);return n}},{key:\"setupDFS\",value:function(){this.atomdfs=[];var e=this,t=new Int8Array(this.atoms.length);t.fill(0);for(var r=function r(i,n,a){a.push([i,n]);var o=e.atoms[i];t[i]=1;for(var s=0;s<o.bonds.length;s++){var l=o.bonds[s];e.atoms[l]&&!t[l]&&r(l,i,a)}},i=0;i<this.atoms.length;i++)if(this.atoms[i]&&!t[i]){var n=[];r(i,-1,n),this.atomdfs.push(n)}}},{key:\"setCoordinatesFromURL\",value:function(e,t){this.frames=[];var r=this;return this.box&&this.setupDFS(),e.startsWith(\"http\")||(e=\"http://\"+e),(0,h.get)(e+\"/traj/numframes/\"+t,(function(i){if(!isNaN(parseInt(i)))return r.frames.push(r.atoms),r.frames.numFrames=i,r.frames.url=e,r.frames.path=t,r.setFrame(0)}))}},{key:\"setCoordinates\",value:function(t,r){if(!t)return[];if(/\\.gz$/.test(r=r||\"\")){r=r.replace(/\\.gz$/,\"\");try{t=(0,F.inflate)(t,{to:\"string\"})}catch(t){console.log(t)}}if({mdcrd:\"\",inpcrd:\"\",pdb:\"\",netcdf:\"\",array:\"\"}.hasOwnProperty(r)){this.frames=[];for(var i=this.atoms.length,n=e.parseCrd(t,r),a=0;a<n.length;){for(var o=[],s=0;s<i;s++){var l={};for(var h in this.atoms[s])l[h]=this.atoms[s][h];o[s]=l,o[s].x=n[a++],o[s].y=n[a++],o[s].z=n[a++]}this.frames.push(o)}return this.atoms=this.frames[0],this.frames}return[]}},{key:\"addAtomSpecs\",value:function(e){}}],[{key:\"sameObj\",value:function(e,t){return e&&t?JSON.stringify(e)==JSON.stringify(t):e==t}},{key:\"drawStickImposter\",value:function(e,t,r,i,n){for(var a,o=e.updateGeoGroup(4),s=o.vertices,l=3*s,h=o.vertexArray,u=o.colorArray,c=o.radiusArray,d=o.normalArray,f=n.r,p=n.g,v=n.b,g=l,m=0;m<4;m++)h[g]=t.x,d[g]=r.x,u[g]=f,h[++g]=t.y,d[g]=r.y,u[g]=p,h[++g]=t.z,d[g]=r.z,u[g]=m<2?v:(a=void 0,0==(a=-v)&&(a=-1e-4),a),g++;o.vertices+=4,c[s]=-i,c[s+1]=i,c[s+2]=-i,c[s+3]=i;var y=o.faceArray,_=o.faceidx;y[_+0]=s,y[_+1]=s+1,y[_+2]=s+2,y[_+3]=s+2,y[_+4]=s+3,y[_+5]=s,o.faceidx+=6}},{key:\"deepCopyAndCache\",value:function(t,r){if(\"object\"!=_typeof(t)||null==t)return t;if(t.__cache_created)return t;var i={};for(var n in t){var a=t[n];if(Array.isArray(a)){i[n]=[];for(var o=0;o<a.length;o++)i[n].push(e.deepCopyAndCache(a[o],r))}else i[n]=\"object\"==_typeof(a)&&\"properties\"!=n&&\"model\"!=n?e.deepCopyAndCache(a,r):a;if(\"and\"==n||\"or\"==n){var s,l=[],h=_createForOfIteratorHelper(i[n]);try{for(h.s();!(s=h.n()).done;){var u,c=s.value,d=new Set,f=_createForOfIteratorHelper(r.selectedAtoms(c));try{for(f.s();!(u=f.n()).done;){var p=u.value;d.add(p.index)}}catch(E){f.e(E)}finally{f.f()}l.push(d)}}catch(E){h.e(E)}finally{h.f()}if(\"and\"==n){var v,g=function(e,t){var r,i=new Set,n=_createForOfIteratorHelper(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.has(a)&&i.add(a)}}catch(E){n.e(E)}finally{n.f()}return i},m=new Set(l[0]),y=_createForOfIteratorHelper(l.splice(1));try{for(y.s();!(v=y.n()).done;){var _=v.value;m=g(m,_)}}catch(E){y.e(E)}finally{y.f()}i[n].__cached_results=m}else if(\"or\"==n){var b,w=new Set,x=_createForOfIteratorHelper(l);try{for(x.s();!(b=x.n()).done;){var k,C=b.value,A=_createForOfIteratorHelper(C);try{for(A.s();!(k=A.n()).done;){var S=k.value;w.add(S)}}catch(E){A.e(E)}finally{A.f()}}}catch(E){x.e(E)}finally{x.f()}i[n].__cached_results=w}}}return i.__cache_created=!0,i}},{key:\"squaredDistance\",value:function(e,t){var r=t.x-e.x,i=t.y-e.y,n=t.z-e.z;return r*r+i*i+n*n}},{key:\"getFloat\",value:function(e){return\"number\"==typeof e?e:parseFloat(e)}},{key:\"parseCrd\",value:function(e,t){var r=[],i=0;if(\"pdb\"==t)for(var n=e.indexOf(\"\\nATOM\");-1!=n;){for(;\"\\nATOM\"==e.slice(n,n+5)||\"\\nHETATM\"==e.slice(n,n+7);)r[i++]=parseFloat(e.slice(n+31,n+39)),r[i++]=parseFloat(e.slice(n+39,n+47)),r[i++]=parseFloat(e.slice(n+47,n+55)),n=e.indexOf(\"\\n\",n+54),\"\\nTER\"==e.slice(n,n+4)&&(n=e.indexOf(\"\\n\",n+5));n=e.indexOf(\"\\nATOM\",n)}else if(\"netcdf\"==t){var a=new I(e);r=[].concat.apply([],a.getDataVariable(\"coordinates\"))}else{if(\"array\"==t||Array.isArray(e))return e.flat(2);var o=e.indexOf(\"\\n\");\"inpcrd\"==t&&(o=e.indexOf(\"\\n\",o+1)),r=(e=e.slice(o+1)).match(/\\S+/g).map(parseFloat)}return r}},{key:\"parseMolData\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",r=arguments.length>2?arguments[2]:void 0;if(!e)return[];if(/\\.gz$/.test(t)){t=t.replace(/\\.gz$/,\"\");try{e=(0,F.inflate)(e,{to:\"string\"})}catch(e){console.log(e)}}return void 0===c.Parsers[t]&&(t=t.split(\".\").pop(),void 0===c.Parsers[t]&&(console.log(\"Unknown format: \"+t),t=e instanceof Uint8Array?\"mmtf\":e.match(/^@<TRIPOS>MOLECULE/gm)?\"mol2\":e.match(/^data_/gm)&&e.match(/^loop_/gm)?\"cif\":e.match(/^HETATM/gm)||e.match(/^ATOM/gm)?\"pdb\":e.match(/ITEM: TIMESTEP/gm)?\"lammpstrj\":e.match(/^.*\\n.*\\n.\\s*(\\d+)\\s+(\\d+)/gm)?\"sdf\":e.match(/^%VERSION\\s+VERSION_STAMP/gm)?\"prmtop\":\"xyz\",console.log(\"Best guess: \"+t))),(0,c.Parsers[t])(e,r)}}]),e}();P.defaultAtomStyle={line:{}},P.defaultlineWidth=1,P.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86}},8783:function(e,t,r){\"use strict\";r.r(t),r.d(t,{GLShape:function(){return d},splitMesh:function(){return f}});var i=r(7693),n=r(3351),a=r(9652),o=r(2550),s=r(9192),l=r(7323),h=r(4406),u=r(6163),c=r(9005),d=function(){function e(t){_classCallCheck(this,e),this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.side=i.DoubleSide,this.stylespec=t||{},this.boundingSphere=new n.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},e.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new i.Geometry(!0),this.linegeo=new i.Geometry(!0)}return _createClass(e,[{key:\"updateStyle\",value:function(t){for(var r in t)this.stylespec[r]=t[r];if(e.updateFromStyle(this,this.stylespec),t.voldata&&t.volscheme){(0,c.adjustVolumeStyle)(t);var i=t.volscheme,n=t.voldata,a=o.CC,s=i.range()||[-1,1];this.geo.setColors((function(e,t,r){var o=n.getVal(e,t,r);return a.color(i.valueToHex(o,s))})),delete this.color}}},{key:\"addCustom\",value:function(t){t.vertexArr=t.vertexArr||[],t.faceArr=t.faceArr||[],t.normalArr=t.normalArr||[],e.drawCustom(this,this.geo,t)}},{key:\"addSphere\",value:function(t){t.center||(t.center=new a.Vector3(0,0,0)),t.radius=t.radius?(0,a.clamp)(t.radius,0,1/0):1.5,t.color=o.CC.color(t.color),this.intersectionShape.sphere.push(new n.Sphere(t.center,t.radius)),h.GLDraw.drawSphere(this.geo,t.center,t.radius,t.color,t.quality),this.components.push({centroid:new a.Vector3(t.center.x,t.center.y,t.center.z)});var r=this.geo.updateGeoGroup(0);e.updateBoundingFromPoints(this.boundingSphere,this.components,r.vertexArray,r.vertices)}},{key:\"addBox\",value:function(t){var r,i,n,o=t.dimensions||{w:1,h:1,d:1};r=\"number\"==typeof o.w?{x:o.w,y:0,z:0}:o.w,i=\"number\"==typeof o.h?{x:0,y:o.h,z:0}:o.h,n=\"number\"==typeof o.d?{x:0,y:0,z:o.d}:o.d;var s=t.corner;null==s&&(s=void 0!==t.center?{x:t.center.x-.5*(r.x+i.x+n.x),y:t.center.y-.5*(r.y+i.y+n.y),z:t.center.z-.5*(r.z+i.z+n.z)}:{x:0,y:0,z:0});var l=[{x:s.x,y:s.y,z:s.z},{x:s.x+r.x,y:s.y+r.y,z:s.z+r.z},{x:s.x+i.x,y:s.y+i.y,z:s.z+i.z},{x:s.x+r.x+i.x,y:s.y+r.y+i.y,z:s.z+r.z+i.z},{x:s.x+n.x,y:s.y+n.y,z:s.z+n.z},{x:s.x+r.x+n.x,y:s.y+r.y+n.y,z:s.z+r.z+n.z},{x:s.x+i.x+n.x,y:s.y+i.y+n.y,z:s.z+i.z+n.z},{x:s.x+r.x+i.x+n.x,y:s.y+r.y+i.y+n.y,z:s.z+r.z+i.z+n.z}],h=[],u=[];h.splice(h.length,0,l[0],l[1],l[2],l[3]),u.splice(u.length,0,0,2,1,1,2,3);var d=4;h.splice(h.length,0,l[2],l[3],l[6],l[7]),u.splice(u.length,0,d+0,d+2,d+1,d+1,d+2,d+3),d+=4,h.splice(h.length,0,l[4],l[5],l[0],l[1]),u.splice(u.length,0,d+0,d+2,d+1,d+1,d+2,d+3),d+=4,h.splice(h.length,0,l[6],l[7],l[4],l[5]),u.splice(u.length,0,d+0,d+2,d+1,d+1,d+2,d+3),d+=4,h.splice(h.length,0,l[3],l[1],l[7],l[5]),u.splice(u.length,0,d+0,d+2,d+1,d+1,d+2,d+3),d+=4,h.splice(h.length,0,l[2],l[6],l[0],l[4]),u.splice(u.length,0,d+0,d+2,d+1,d+1,d+2,d+3),d+=4;var f=(0,c.extend)({},t);f.vertexArr=h,f.faceArr=u,f.normalArr=[],e.drawCustom(this,this.geo,f);var p=new a.Vector3;this.components.push({centroid:p.addVectors(l[0],l[7]).multiplyScalar(.5)});var v=this.geo.updateGeoGroup(0);e.updateBoundingFromPoints(this.boundingSphere,this.components,v.vertexArray,v.vertices)}},{key:\"addCylinder\",value:function(t){var r,i;r=t.start?new a.Vector3(t.start.x||0,t.start.y||0,t.start.z||0):new a.Vector3(0,0,0),t.end?void 0===(i=new a.Vector3(t.end.x,t.end.y||0,t.end.z||0)).x&&(i.x=3):i=new a.Vector3(0,0,0);var s=t.radius||.1,l=o.CC.color(t.color);this.intersectionShape.cylinder.push(new n.Cylinder(r,i,s)),h.GLDraw.drawCylinder(this.geo,r,i,s,l,t.fromCap,t.toCap);var u=new a.Vector3;this.components.push({centroid:u.addVectors(r,i).multiplyScalar(.5)});var c=this.geo.updateGeoGroup(0);e.updateBoundingFromPoints(this.boundingSphere,this.components,c.vertexArray,c.vertices)}},{key:\"addDashedCylinder\",value:function(t){var r,i;t.dashLength=t.dashLength||.25,t.gapLength=t.gapLength||.25,r=t.start?new a.Vector3(t.start.x||0,t.start.y||0,t.start.z||0):new a.Vector3(0,0,0),t.end?void 0===(i=new a.Vector3(t.end.x,t.end.y||0,t.end.z||0)).x&&(i.x=3):i=new a.Vector3(3,0,0);for(var s=t.radius||.1,l=o.CC.color(t.color),u=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)+Math.pow(r.z-i.z,2)),c=u/(t.gapLength+t.dashLength),d=new a.Vector3(t.start.x||0,t.start.y||0,t.start.z||0),f=new a.Vector3(t.end.x,t.end.y||0,t.end.z||0),p=new a.Vector3((i.x-r.x)/(u/t.gapLength),(i.y-r.y)/(u/t.gapLength),(i.z-r.z)/(u/t.gapLength)),v=new a.Vector3((i.x-r.x)/(u/t.dashLength),(i.y-r.y)/(u/t.dashLength),(i.z-r.z)/(u/t.dashLength)),g=0;g<c;g++)f=new a.Vector3(d.x+v.x,d.y+v.y,d.z+v.z),this.intersectionShape.cylinder.push(new n.Cylinder(d,f,s)),h.GLDraw.drawCylinder(this.geo,d,f,s,l,t.fromCap,t.toCap),d=new a.Vector3(f.x+p.x,f.y+p.y,f.z+p.z);var m=new a.Vector3;this.components.push({centroid:m.addVectors(r,i).multiplyScalar(.5)});var y=this.geo.updateGeoGroup(0);e.updateBoundingFromPoints(this.boundingSphere,this.components,y.vertexArray,y.vertices)}},{key:\"addCurve\",value:function(e){e.points=e.points||[],e.smooth=e.smooth||10,void 0===e.fromCap&&(e.fromCap=2),void 0===e.toCap&&(e.toCap=2);var t=(0,u.subdivide_spline)(e.points,e.smooth);if(t.length<3)console.log(\"Too few points in addCurve\");else{var r=e.radius||.1,i=o.CC.color(e.color),n=0,a=t.length-1,s=t[0].distanceTo(t[1]),l=Math.ceil(2*r/s);if(e.toArrow){var h={start:t[a-=l],end:t[t.length-1],radius:r,color:i,mid:1e-4};this.addArrow(h)}if(e.fromArrow){var c={start:t[n+=l],end:t[0],radius:r,color:i,mid:1e-4};this.addArrow(c)}for(var d=Math.ceil(t.length/2),f={radius:r,color:i,fromCap:2,toCap:2},p=n;p<a;p++)f.start=t[p],f.end=t[p+1],f.fromCap=2,f.toCap=2,p<d?(f.fromCap=2,f.toCap=0):p>d?(f.fromCap=0,f.toCap=2):(f.fromCap=2,f.toCap=2),this.addCylinder(f)}}},{key:\"addLine\",value:function(t){var r,i;r=t.start?new a.Vector3(t.start.x||0,t.start.y||0,t.start.z||0):new a.Vector3(0,0,0),t.end?void 0===(i=new a.Vector3(t.end.x,t.end.y||0,t.end.z||0)).x&&(i.x=3):i=new a.Vector3(3,0,0);var n=this.geo.updateGeoGroup(2),o=n.vertices,s=3*o,l=n.vertexArray;l[s]=r.x,l[s+1]=r.y,l[s+2]=r.z,l[s+3]=i.x,l[s+4]=i.y,l[s+5]=i.z,n.vertices+=2;var h=n.lineArray,u=n.lineidx;h[u]=o,h[u+1]=o+1,n.lineidx+=2;var c=new a.Vector3;this.components.push({centroid:c.addVectors(r,i).multiplyScalar(.5)}),n=this.geo.updateGeoGroup(0),e.updateBoundingFromPoints(this.boundingSphere,this.components,n.vertexArray,n.vertices)}},{key:\"addArrow\",value:function(t){if(t.start?t.start=new a.Vector3(t.start.x||0,t.start.y||0,t.start.z||0):t.start=new a.Vector3(0,0,0),t.dir instanceof a.Vector3&&\"number\"==typeof t.length){var r=t.dir.clone().multiplyScalar(t.length).add(t.start);t.end=r}else t.end?(t.end=new a.Vector3(t.end.x,t.end.y||0,t.end.z||0),void 0===t.end.x&&(t.end.x=3)):t.end=new a.Vector3(3,0,0);t.radius=t.radius||.1,t.radiusRatio=t.radiusRatio||1.618034,t.mid=0<t.mid&&t.mid<1?t.mid:.618034,e.drawArrow(this,this.geo,t);var i=new a.Vector3;this.components.push({centroid:i.addVectors(t.start,t.end).multiplyScalar(.5)});var n=this.geo.updateGeoGroup(0);e.updateBoundingFromPoints(this.boundingSphere,this.components,n.vertexArray,n.vertices)}},{key:\"addIsosurface\",value:function(t,r,i){var n,o,l=void 0!==r.isoval&&\"number\"==typeof r.isoval?r.isoval:0,h=!!r.voxel,u=void 0===r.smoothness?1:r.smoothness,c=t.size.x,d=t.size.y,f=t.size.z,p=new Int16Array(c*d*f),v=t.data;for(n=0,o=p.length;n<o;++n)p[n]=-1;var g=new Uint8Array(c*d*f);for(n=0,o=v.length;n<o;++n)(l>=0?v[n]-l:l-v[n])>0&&(g[n]|=e.ISDONE);var m=[],y=[];s.MarchingCube.march(g,m,y,{fulltable:!0,voxel:h,unitCube:t.unit,origin:t.origin,matrix:t.matrix,nX:c,nY:d,nZ:f}),!h&&u>0&&s.MarchingCube.laplacianSmooth(u,m,y);var _=[],b=[],w=[];if(r.selectedRegion&&void 0===r.coords&&(r.coords=r.selectedRegion),void 0!==r.coords){for(var x=r.coords[0].x,k=r.coords[0].y,C=r.coords[0].z,A=r.coords[0].x,S=r.coords[0].y,E=r.coords[0].z,z=0;z<r.coords.length;z++)r.coords[z].x>x?x=r.coords[z].x:r.coords[z].x<A&&(A=r.coords[z].x),r.coords[z].y>k?k=r.coords[z].y:r.coords[z].y<S&&(S=r.coords[z].y),r.coords[z].z>C?C=r.coords[z].z:r.coords[z].z<E&&(E=r.coords[z].z);var M=2;void 0!==r.radius&&(M=r.radius),void 0!==r.selectedOffset&&(M=r.selectedOffset),void 0!==r.seldist&&(M=r.seldist),A-=M,x+=M,S-=M,k+=M,E-=M,C+=M;for(var T=0;T<m.length;T++)m[T].x>A&&m[T].x<x&&m[T].y>S&&m[T].y<k&&m[T].z>E&&m[T].z<C&&e.inSelectedRegion(m[T],r.coords,M)?(_.push(b.length),b.push(m[T])):_.push(-1);for(var L=0;L+2<y.length;L+=3)-1!==_[y[L]]&&-1!==_[y[L+1]]&&-1!==_[y[L+2]]&&(w.push(y[L]-(y[L]-_[y[L]])),w.push(y[L+1]-(y[L+1]-_[y[L+1]])),w.push(y[L+2]-(y[L+2]-_[y[L+2]])));m=b,y=w}e.drawCustom(this,this.geo,{vertexArr:m,faceArr:y,normalArr:[],clickable:r.clickable,hoverable:r.hoverable}),this.updateStyle(r);for(var D=new a.Vector3(t.origin.x,t.origin.y,t.origin.z),O=new a.Vector3(t.size.x*t.unit.x,t.size.y*t.unit.y,t.size.z*t.unit.z),I=new a.Vector3(0,0,0),F=D.clone(),R=D.clone().add(O),P=0;P<m.length;P++)I.add(m[P]),F.max(m[P]),R.min(m[P]);I.divideScalar(m.length);var N=I.distanceTo(R),B=I.distanceTo(F);this.boundingSphere.center=I,this.boundingSphere.radius=Math.max(N,B),\"function\"==typeof i&&i()}},{key:\"addVolumetricData\",value:function(e,t,r){e=new l.VolumeData(e,t),this.addIsosurface(e,r)}},{key:\"finalize\",value:function(){return e.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}},{key:\"globj\",value:function(t){if(this.renderedShapeObj&&(t.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){e.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),void 0!==this.color&&e.updateColor(this.geo,this.color),this.shapeObj=new i.Object3D;var r=null;r=this.side==i.DoubleSide?new i.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:i.Coloring.VertexColors}):new i.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:i.Coloring.VertexColors});var n=new i.Mesh(this.geo,r);this.shapeObj.add(n);var a=new i.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),o=new i.Line(this.linegeo,a,i.LineStyle.LinePieces);this.shapeObj.add(o),this.renderedShapeObj=this.shapeObj.clone(),t.add(this.renderedShapeObj)}}},{key:\"removegl\",value:function(e){this.renderedShapeObj&&(void 0!==this.renderedShapeObj.geometry&&this.renderedShapeObj.geometry.dispose(),void 0!==this.renderedShapeObj.material&&this.renderedShapeObj.material.dispose(),e.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}},{key:\"position\",get:function(){return this.boundingSphere.center}},{key:\"x\",get:function(){return this.boundingSphere.center.x}},{key:\"y\",get:function(){return this.boundingSphere.center.y}},{key:\"z\",get:function(){return this.boundingSphere.center.z}}],[{key:\"finalizeGeo\",value:function(e){var t=e.updateGeoGroup(0);t.vertices>0&&t.truncateArrayBuffers(!0,!0)}},{key:\"updateColor\",value:function(e,t){var r,i,n;for(var a in t=t||o.CC.color(t),e.colorsNeedUpdate=!0,t.constructor!==Array&&(r=t.r,i=t.g,n=t.b),e.geometryGroups)for(var s=e.geometryGroups[a],l=s.colorArray,h=0,u=s.vertices;h<u;++h){if(t.constructor===Array){var c=t[h];r=c.r,i=c.g,n=c.b}l[3*h]=r,l[3*h+1]=i,l[3*h+2]=n}}},{key:\"drawArrow\",value:function(e,t,r){var i=r.start,o=r.end,s=r.radius,l=r.radiusRatio,h=r.mid,u=r.midpos;if(i&&o){var c=t.updateGeoGroup(51),d=new a.Vector3(o.x,o.y,o.z).sub(i);if(u){var f=d.length();h=u>0?u/f:(f+u)/f}d.multiplyScalar(h);var p=new a.Vector3(i.x,i.y,i.z).add(d),v=d.clone().negate(),g=new a.Vector3(i.x,i.y,i.z);e.intersectionShape.cylinder.push(new n.Cylinder(g,p.clone(),s)),e.intersectionShape.sphere.push(new n.Sphere(g,s));var m=[];m[0]=d.clone(),Math.abs(m[0].x)>1e-4?m[0].y+=1:m[0].x+=1,m[0].cross(d),m[0].normalize(),m[4]=m[0].clone(),m[4].crossVectors(m[0],d),m[4].normalize(),m[8]=m[0].clone().negate(),m[12]=m[4].clone().negate(),m[2]=m[0].clone().add(m[4]).normalize(),m[6]=m[4].clone().add(m[8]).normalize(),m[10]=m[8].clone().add(m[12]).normalize(),m[14]=m[12].clone().add(m[0]).normalize(),m[1]=m[0].clone().add(m[2]).normalize(),m[3]=m[2].clone().add(m[4]).normalize(),m[5]=m[4].clone().add(m[6]).normalize(),m[7]=m[6].clone().add(m[8]).normalize(),m[9]=m[8].clone().add(m[10]).normalize(),m[11]=m[10].clone().add(m[12]).normalize(),m[13]=m[12].clone().add(m[14]).normalize(),m[15]=m[14].clone().add(m[0]).normalize();var y,_,b,w,x,k,C,A,S,E,z,M,T,L,D,O,I,F,R,P,N,B,U=c.vertices,G=c.vertexArray,V=c.faceArray,j=c.normalArray,H=c.lineArray;for(_=0,b=m.length;_<b;++_){y=3*(U+3*_);var q=m[_].clone().multiplyScalar(s).add(i),W=m[_].clone().multiplyScalar(s).add(p),Y=m[_].clone().multiplyScalar(s*l).add(p);if(G[y]=q.x,G[y+1]=q.y,G[y+2]=q.z,G[y+3]=W.x,G[y+4]=W.y,G[y+5]=W.z,G[y+6]=Y.x,G[y+7]=Y.y,G[y+8]=Y.z,_>0){var Z=G[y-3],X=G[y-2],K=G[y-1],$=new a.Vector3(Z,X,K),Q=new a.Vector3(o.x,o.y,o.z),J=p.clone(),ee=new a.Vector3(Y.x,Y.y,Y.z);e.intersectionShape.triangle.push(new n.Triangle(ee,Q,$)),e.intersectionShape.triangle.push(new n.Triangle($.clone(),J,ee.clone()))}}c.vertices+=48,G[y=3*c.vertices]=i.x,G[y+1]=i.y,G[y+2]=i.z,G[y+3]=p.x,G[y+4]=p.y,G[y+5]=p.z,G[y+6]=o.x,G[y+7]=o.y,G[y+8]=o.z,c.vertices+=3;var te=c.vertices-3,re=c.vertices-2,ie=c.vertices-1,ne=3*te,ae=3*re,oe=3*ie;for(_=0,b=m.length-1;_<b;++_){var se=U+3*_;y=3*se,x=c.faceidx,k=c.lineidx,T=3*(C=se),L=3*(A=se+1),D=3*(S=se+2),O=3*(E=se+4),I=3*(z=se+5),F=3*(M=se+3),R=P=m[_],N=B=m[_+1],j[T]=R.x,j[L]=P.x,j[F]=B.x,j[T+1]=R.y,j[L+1]=P.y,j[F+1]=B.y,j[T+2]=R.z,j[L+2]=P.z,j[F+2]=B.z,j[L]=P.x,j[O]=N.x,j[F]=B.x,j[L+1]=P.y,j[O+1]=N.y,j[F+1]=B.y,j[L+2]=P.z,j[O+2]=N.z,j[F+2]=B.z,j[D]=P.x,j[I]=N.x,j[D+1]=P.y,j[I+1]=N.y,j[D+2]=P.z,j[I+2]=N.z,V[x]=C,V[x+1]=A,V[x+2]=M,V[x+3]=A,V[x+4]=E,V[x+5]=M,V[x+6]=C,V[x+7]=M,V[x+8]=te,V[x+9]=S,V[x+10]=re,V[x+11]=z,V[x+12]=S,V[x+13]=ie,V[x+14]=z,H[k]=C,H[k+1]=A,H[k+2]=C,H[k+3]=M,H[k+4]=E,H[k+5]=M,H[k+6]=C,H[k+7]=M,H[k+8]=S,H[k+9]=A,H[k+10]=S,H[k+11]=z,H[k+12]=E,H[k+13]=z,H[k+14]=S,H[k+15]=ie,H[k+16]=S,H[k+17]=z,H[k+18]=ie,H[k+19]=z,c.faceidx+=15,c.lineidx+=20}w=[U+45,U+46,U+1,U,U+47,U+2],x=c.faceidx,k=c.lineidx,T=3*(C=w[0]),L=3*(A=w[1]),D=3*(S=w[4]),O=3*(E=w[2]),I=3*(z=w[5]),F=3*(M=w[3]),R=P=m[15],N=B=m[0],j[T]=R.x,j[L]=P.x,j[F]=B.x,j[T+1]=R.y,j[L+1]=P.y,j[F+1]=B.y,j[T+2]=R.z,j[L+2]=P.z,j[F+2]=B.z,j[L]=P.x,j[O]=N.x,j[F]=B.x,j[L+1]=P.y,j[O+1]=N.y,j[F+1]=B.y,j[L+2]=P.z,j[O+2]=N.z,j[F+2]=B.z,j[D]=P.x,j[I]=N.x,j[D+1]=P.y,j[I+1]=N.y,j[D+2]=P.z,j[I+2]=N.z,d.normalize(),v.normalize(),j[ne]=v.x,j[ae]=j[oe]=d.x,j[ne+1]=v.y,j[ae+1]=j[oe+1]=d.y,j[ne+2]=v.z,j[ae+2]=j[oe+2]=d.z,V[x]=C,V[x+1]=A,V[x+2]=M,V[x+3]=A,V[x+4]=E,V[x+5]=M,V[x+6]=C,V[x+7]=M,V[x+8]=te,V[x+9]=S,V[x+10]=re,V[x+11]=z,V[x+12]=S,V[x+13]=ie,V[x+14]=z,H[k]=C,H[k+1]=A,H[k+2]=C,H[k+3]=M,H[k+4]=E,H[k+5]=M,H[k+6]=C,H[k+7]=M,H[k+8]=S,H[k+9]=A,H[k+10]=S,H[k+11]=z,H[k+12]=E,H[k+13]=z,H[k+14]=S,H[k+15]=ie,H[k+16]=S,H[k+17]=z,H[k+18]=ie,H[k+19]=z,c.faceidx+=15,c.lineidx+=20}}},{key:\"updateBoundingFromPoints\",value:function(e,t,r,i){e.center.set(0,0,0);var n=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,h=-1/0;e.box&&(n=e.box.min.x,s=e.box.max.x,a=e.box.min.y,l=e.box.max.y,o=e.box.min.z,h=e.box.max.z);for(var u=0,c=i;u<c;u++){var d=r[3*u],f=r[3*u+1],p=r[3*u+2];d<n&&(n=d),f<a&&(a=f),p<o&&(o=p),d>s&&(s=d),f>l&&(l=f),p>h&&(h=p)}e.center.set((s+n)/2,(l+a)/2,(h+o)/2),e.radius=e.center.distanceTo({x:s,y:l,z:h}),e.box={min:{x:n,y:a,z:o},max:{x:s,y:l,z:h}}}},{key:\"addCustomGeo\",value:function(t,r,i,o,s){var l,h,u,c,d,f,p,v,g,m=r.addGeoGroup(),y=i.vertexArr,_=i.normalArr,b=i.faceArr;m.vertices=y.length,m.faceidx=b.length;var w=m.vertexArray,x=m.colorArray;for(o.constructor!==Array&&(v=o.r,g=o.g,c=o.b),f=0,p=m.vertices;f<p;++f)l=3*f,h=y[f],w[l]=h.x,w[l+1]=h.y,w[l+2]=h.z,o.constructor===Array&&(v=(d=o[f]).r,g=d.g,c=d.b),x[l]=v,x[l+1]=g,x[l+2]=c;if(s)for(f=0,p=m.faceidx/3;f<p;++f){u=b[l=3*f],c=b[l+1],d=b[l+2];var k=new a.Vector3,C=new a.Vector3,A=new a.Vector3;t.intersectionShape.triangle.push(new n.Triangle(k.copy(y[u]),C.copy(y[c]),A.copy(y[d])))}if(s){for(var S=new a.Vector3(0,0,0),E=0,z=0;z<r.geometryGroups.length;z++)S.add(r.geometryGroups[z].getCentroid()),E++;S.divideScalar(E),e.updateBoundingFromPoints(t.boundingSphere,{centroid:S},w,m.vertices)}if(m.faceArray=new Uint16Array(b),m.truncateArrayBuffers(!0,!0),_.length<m.vertices)m.setNormals();else{var M,T=m.normalArray=new Float32Array(3*m.vertices);for(f=0,p=m.vertices;f<p;++f)l=3*f,M=_[f],T[l]=M.x,T[l+1]=M.y,T[l+2]=M.z}m.setLineIndices(),m.lineidx=m.lineArray.length}},{key:\"updateFromStyle\",value:function(e,t){void 0!==t.color?(e.color=t.color||new o.Color,t.color instanceof o.Color||(e.color=o.CC.color(t.color))):e.color=o.CC.color(0),e.wireframe=!!t.wireframe,e.opacity=t.alpha?(0,a.clamp)(t.alpha,0,1):1,void 0!==t.opacity&&(e.opacity=(0,a.clamp)(t.opacity,0,1)),e.side=void 0!==t.side?t.side:i.DoubleSide,e.linewidth=void 0===t.linewidth?1:t.linewidth,e.clickable=!!t.clickable,e.callback=(0,c.makeFunction)(t.callback),e.hoverable=!!t.hoverable,e.hover_callback=(0,c.makeFunction)(t.hover_callback),e.unhover_callback=(0,c.makeFunction)(t.unhover_callback),e.hidden=t.hidden,e.frame=t.frame}},{key:\"distance_from\",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))}},{key:\"inSelectedRegion\",value:function(t,r,i){for(var n=0;n<r.length;n++)if(e.distance_from(r[n],t)<=i)return!0;return!1}}]),e}();function f(e){if(e.vertexArr.length<64e3)return[e];var t=[{vertexArr:[],normalArr:[],faceArr:[]}];e.colorArr&&(t.colorArr=[]);for(var r=[],i=[],n=0,a=e.faceArr,o=0,s=a.length;o<s;o+=3){for(var l=t[n],h=0;h<3;h++){var u=a[o+h];r[u]!==n&&(r[u]=n,i[u]=l.vertexArr.length,l.vertexArr.push(e.vertexArr[u]),e.normalArr&&e.normalArr[u]&&l.normalArr.push(e.normalArr[u]),e.colorArr&&e.colorArr[u]&&l.colorArr.push(e.colorArr[u])),l.faceArr.push(i[u])}l.vertexArr.length>=64e3&&(t.push({vertexArr:[],normalArr:[],faceArr:[]}),e.colorArr&&(t.colorArr=[]),n++)}return t}d.ISDONE=2,d.drawCustom=function(e,t,r){var i=r,n=i.vertexArr,a=i.faceArr;0!==n.length&&0!==a.length||console.warn(\"Error adding custom shape component: No vertices and/or face indices supplied!\");var s=r.color;void 0===s&&(s=e.color),s=o.CC.color(s);for(var l=f(i),h=0,u=l.length;h<u;h++)d.addCustomGeo(e,t,l[h],l[h].colorArr?l[h].colorArr:s,r.clickable)}},9230:function(e,t,r){\"use strict\";r.r(t),r.d(t,{GLViewer:function(){return v},createStereoViewer:function(){return y},createViewer:function(){return g},createViewerGrid:function(){return m}});var i=r(7693),n=r(9652),a=r(2550),o=r(9005),s=r(1460),l=r(2116),h=r(7825),u=r(8783),c=r(7323),d=r(9192),f=r(1496),p=r(2109),v=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledAtoms=[],this.current_hover=null,this.hoverDuration=500,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.cq=new n.Quaternion(0,0,0,1),this.dq=new n.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=r,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=a.elementColors.defaultColors),this.nomouse=this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||\"#ffffff\",void 0!==this.config.backgroundColor&&(this.bgColor=a.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=null==this.config.backgroundAlpha?1:this.config.backgroundAlpha,this.camerax=0,void 0!==this.config.camerax&&(this.camerax=parseFloat(this.config.camerax)),this._viewer=this,this.container=t,null!=this.config.hoverDuration&&(this.hoverDuration=this.config.hoverDuration),void 0===this.config.antialias&&(this.config.antialias=!0),void 0===this.config.cartoonQuality&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row,this.col=this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new i.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new n.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new n.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new i.Raycaster(new n.Vector3(0,0,0),new n.Vector3(0,0,0)),this.projector=new i.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=a.CC.color(this.bgColor),document.body.addEventListener(\"mouseup\",this._handleMouseUp.bind(this)),document.body.addEventListener(\"touchend\",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener(\"resize\",this.resize.bind(this)),void 0!==window.ResizeObserver&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container));try{\"function\"==typeof this.callback&&this.callback(this)}catch(t){console.log(\"error with glviewer callback: \"+t)}}return _createClass(e,[{key:\"getRect\",value:function(){var e=this.container,t=e.getBoundingClientRect();if(0==t.width&&0==t.height&&\"none\"===e.style.display){var r=e.style.position,i=e.style.visibility;e.style.display=\"block\",e.style.visibility=\"hidden\",e.style.position=\"absolute\",t=e.getBoundingClientRect(),e.style.display=\"none\",e.style.visibility=i,e.style.position=r}return t}},{key:\"getWidth\",value:function(){return this.getRect().width}},{key:\"getHeight\",value:function(){return this.getRect().height}},{key:\"setupRenderer\",value:function(){this.renderer=new i.Renderer({antialias:this.config.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:this.config.id,row:this.config.row,col:this.config.col,rows:this.config.rows,cols:this.config.cols,canvas:this.config.canvas,containerWidth:this.WIDTH||1,containerHeight:this.HEIGHT||1}),this.renderer.domElement.style.width=\"100%\",this.renderer.domElement.style.height=\"100%\",this.renderer.domElement.style.padding=\"0\",this.renderer.domElement.style.position=\"absolute\",this.renderer.domElement.style.top=\"0px\",this.renderer.domElement.style.left=\"0px\",this.renderer.domElement.style.zIndex=\"0\"}},{key:\"initializeScene\",value:function(){this.scene=new i.Scene,this.scene.fog=new i.Fog(this.bgColor,100,200),this.modelGroup=new i.Object3D,this.rotationGroup=new i.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new n.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var e=new i.Light(16777215);e.position=new n.Vector3(.2,.2,1).normalize(),e.intensity=1,this.scene.add(e)}},{key:\"initContainer\",value:function(e){this.container=e,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.nomouse||(this.glDOM.addEventListener(\"mousedown\",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener(\"touchstart\",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener(\"wheel\",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener(\"mousemove\",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener(\"touchmove\",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener(\"contextmenu\",this._handleContextMenu.bind(this),{passive:!1}))}},{key:\"decAnim\",value:function(){this.animated--,this.animated<0&&(this.animated=0)}},{key:\"incAnim\",value:function(){this.animated++}},{key:\"nextSurfID\",value:function(){var e=0;for(var t in this.surfaces)if(this.surfaces.hasOwnProperty(t)){var r=parseInt(t);isNaN(r)||r>e&&(e=r)}return e+1}},{key:\"setSlabAndFog\",value:function(){var e=this.camera.position.z-this.rotationGroup.position.z;e<1&&(e=1),this.camera.near=e+this.slabNear,this.camera.near<1&&(this.camera.near=1),this.camera.far=e+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=e*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far,this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}},{key:\"show\",value:function(e){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!e&&this.linkedViewers.length>0))for(var t=this._viewer.getView(),r=0;r<this.linkedViewers.length;r++)this.linkedViewers[r].setView(t,!0)}},{key:\"updateClickables\",value:function(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledAtoms.splice(0,this.contextMenuEnabledAtoms.length);for(var e=0,t=this.models.length;e<t;e++){var r=this.models[e];if(r){for(var i=r.selectedAtoms({clickable:!0}),n=r.selectedAtoms({hoverable:!0}),a=r.selectedAtoms({contextMenuEnabled:!0}),o=0;o<n.length;o++)this.hoverables.push(n[o]);for(var s=0;s<i.length;s++)this.clickables.push(i[s]);for(var l=0;l<a.length;l++)this.contextMenuEnabledAtoms.push(a[l])}}for(var h=0,u=this.shapes.length;h<u;h++){var c=this.shapes[h];c&&c.clickable&&this.clickables.push(c),c&&c.hoverable&&this.hoverables.push(c)}}},{key:\"handleClickSelection\",value:function(e,t,r){var i=this.targetedObjects(e,t,this.clickables);if(i.length){var n=i[0].clickable;void 0!==n.callback&&(\"function\"!=typeof n.callback&&(n.callback=(0,o.makeFunction)(n.callback)),\"function\"==typeof n.callback&&n.callback(n,this._viewer,r,this.container))}}},{key:\"canvasOffset\",value:function(){var e=this.glDOM,t=e.getBoundingClientRect(),r=e.ownerDocument,i=r.documentElement,n=r.defaultView;return{top:t.top+n.pageYOffset-i.clientTop,left:t.left+n.pageXOffset-i.clientLeft}}},{key:\"setHover\",value:function(e,t){this.current_hover!=e&&(this.current_hover&&(\"function\"!=typeof this.current_hover.unhover_callback&&(this.current_hover.unhover_callback=(0,o.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,t,this.container)),this.current_hover=e,e&&void 0!==e.hover_callback&&(\"function\"!=typeof e.hover_callback&&(e.hover_callback=(0,o.makeFunction)(e.hover_callback)),\"function\"==typeof e.hover_callback&&e.hover_callback(e,this._viewer,t,this.container)))}},{key:\"handleHoverSelection\",value:function(e,t){if(0!=this.hoverables.length){var r=this.targetedObjects(e,t,this.hoverables);if(r.length){var i=r[0].clickable;this.setHover(i),this.current_hover=i}else this.setHover(null)}}},{key:\"handleHoverContinue\",value:function(e,t){var r=this.targetedObjects(e,t,this.hoverables);0!=r.length&&void 0!==r[0]||this.setHover(null),void 0!==r[0]&&r[0].clickable!==this.current_hover&&this.setHover(null)}},{key:\"calcTouchDistance\",value:function(e){var t=e.targetTouches[0].pageX-e.targetTouches[1].pageX,r=e.targetTouches[0].pageY-e.targetTouches[1].pageY;return Math.sqrt(t*t+r*r)}},{key:\"getX\",value:function(e){var t=e.pageX;return null==t&&(t=e.pageX),e.targetTouches&&e.targetTouches[0]?t=e.targetTouches[0].pageX:e.changedTouches&&e.changedTouches[0]&&(t=e.changedTouches[0].pageX),t}},{key:\"getY\",value:function(e){var t=e.pageY;return null==t&&(t=e.pageY),e.targetTouches&&e.targetTouches[0]?t=e.targetTouches[0].pageY:e.changedTouches&&e.changedTouches[0]&&(t=e.changedTouches[0].pageY),t}},{key:\"isInViewer\",value:function(e,t){if(null!=this.viewers&&!this.control_all){var r=this.WIDTH/this.cols,i=this.HEIGHT/this.rows,n=this.canvasOffset(),a=e-n.left,o=t-n.top,s=this.rows-Math.floor(o/i)-1,l=Math.floor(a/r);if(s!=this.row||l!=this.col)return!1}return!0}},{key:\"adjustZoomToLimits\",value:function(e){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){var t=this.CAMERA_Z-this.config.lowerZoomLimit;e>t&&(e=t)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){var r=this.CAMERA_Z-this.config.upperZoomLimit;e<r&&(e=r)}return e>this.CAMERA_Z&&(e=.999*this.CAMERA_Z),e}},{key:\"targetedObjects\",value:function(e,t,r){var i={x:e,y:t,z:-1};return Array.isArray(r)||(r=this.selectedAtoms(r)),0==r.length?[]:(this.raycaster.setFromCamera(i,this.camera),this.raycaster.intersectObjects(this.modelGroup,r))}},{key:\"modelToScreen\",value:function(e){var t=this,r=!1;Array.isArray(e)||(e=[e],r=!0);var i=[],a=this.canvasOffset();return e.forEach((function(e){var r=new n.Vector3(e.x,e.y,e.z);r.applyMatrix4(t.modelGroup.matrixWorld),t.projector.projectVector(r,t.camera);var o=t.WIDTH*(r.x+1)/2+a.left,s=-t.HEIGHT*(r.y-1)/2+a.top;i.push({x:o,y:s})})),r&&(i=i[0]),i}},{key:\"screenOffsetToModel\",value:function(e,t,r){var i=e/this.WIDTH,a=t/this.HEIGHT,o=void 0===r?this.rotationGroup.position.z:r,s=this.rotationGroup.quaternion,l=new n.Vector3(0,0,o);return this.projector.projectVector(l,this.camera),l.x+=2*i,l.y-=2*a,this.projector.unprojectVector(l,this.camera),l.z=0,l.applyQuaternion(s),l}},{key:\"screenToModelDistance\",value:function(e,t){var r=this.canvasOffset(),i=new n.Vector3(t.x,t.y,t.z);i.applyMatrix4(this.modelGroup.matrixWorld);var a=i.clone();this.projector.projectVector(i,this.camera);var o=new n.Vector3(2*(e.x-r.left)/this.WIDTH-1,2*(e.y-r.top)/-this.HEIGHT+1,i.z);return this.projector.unprojectVector(o,this.camera),o.distanceTo(a)}},{key:\"setViewChangeCallback\",value:function(e){\"function\"!=typeof e&&null!=e||(this.viewChangeCallback=e)}},{key:\"setStateChangeCallback\",value:function(e){\"function\"!=typeof e&&null!=e||(this.stateChangeCallback=e)}},{key:\"getConfig\",value:function(){return this.config}},{key:\"setConfig\",value:function(e){this.config=e}},{key:\"getInternalState\",value:function(){for(var e={models:[],surfaces:[],shapes:[],labels:[]},t=0;t<this.models.length;t++)this.models[t]&&(e.models[t]=this.models[t].getInternalState());return e}},{key:\"setInternalState\",value:function(e){this.clear();for(var t=e.models,r=0;r<t.length;r++)t[r]&&(this.models[r]=new l.GLModel(r),this.models[r].setInternalState(t[r]));this.render()}},{key:\"setZoomLimits\",value:function(e,t){void 0!==e&&(this.config.lowerZoomLimit=e),t&&(this.config.upperZoomLimit=t),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}},{key:\"setCameraParameters\",value:function(e){void 0!==e.fov&&(this.fov=e.fov,this.camera.fov=this.fov),void 0!==e.z&&(this.CAMERA_Z=e.z,this.camera.z=this.CAMERA_Z),void 0!==e.orthographic&&(this.camera.ortho=e.orthographic)}},{key:\"_handleMouseDown\",value:function(e){if(e.preventDefault(),this.scene){var t=this.getX(e),r=this.getY(e);if(void 0!==t){this.isDragging=!0,this.mouseButton=e.which,this.mouseStartX=t,this.mouseStartY=r,this.touchHold=!0,this.touchDistanceStart=0,e.targetTouches&&2==e.targetTouches.length&&(this.touchDistanceStart=this.calcTouchDistance(e)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;var i=this;setTimeout((function(){e.targetTouches&&1==i.touchHold&&(i.glDOM=i.renderer.domElement,i.glDOM.dispatchEvent(new Event(\"contextmenu\")))}),1e3)}}}},{key:\"_handleMouseUp\",value:function(e){if(this.touchHold=!1,this.isDragging&&this.scene){var t=this.getX(e),r=this.getY(e);if(t==this.mouseStartX&&r==this.mouseStartY){var i=this.canvasOffset(),n=(t-i.left)/this.WIDTH*2-1,a=-(r-i.top)/this.HEIGHT*2+1;this.handleClickSelection(n,a,e)}}this.isDragging=!1}},{key:\"_handleMouseScroll\",value:function(e){if(e.preventDefault(),this.scene){var t=this.getX(e),r=this.getY(e);if(void 0!==t&&this.isInViewer(t,r)){var i=.85*(this.CAMERA_Z-this.rotationGroup.position.z),n=1;e.ctrlKey&&(n=-1),e.detail?this.rotationGroup.position.z+=n*i*e.detail/10:e.wheelDelta&&(this.rotationGroup.position.z-=n*i*e.wheelDelta/400),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}},{key:\"pngURI\",value:function(){return this.getCanvas().toDataURL(\"image/png\")}},{key:\"apngURI\",value:function(e){var t=this;return e=e||1,new Promise((function(r){var i=0,n=t.viewChangeCallback,a=[],o=[],s=Date.now();t.viewChangeCallback=function(){o.push(Date.now()-s),s=Date.now(),a.push(new Promise((function(e){t.getCanvas().toBlob((function(t){t.arrayBuffer().then(e)}),\"image/png\")}))),i+=1,i==e&&(t.viewChangeCallback=n,Promise.all(a).then((function(e){for(var i=[],n=0;n<e.length;n++){var a=(0,p.decode)(e[n]);i.push((0,p.toRGBA8)(a)[0])}var s=t.getCanvas().width,l=t.getCanvas().height,h=(0,p.encode)(i,s,l,0,o),u=new Blob([h],{type:\"image/png\"}),c=new FileReader;c.onload=function(e){r(e.target.result)},c.readAsDataURL(u)})))}}))}},{key:\"getCanvas\",value:function(){return this.glDOM}},{key:\"getRenderer\",value:function(){return this.renderer}},{key:\"setHoverDuration\",value:function(e){this.hoverDuration=e}},{key:\"_handleMouseMove\",value:function(e){clearTimeout(this.hoverTimeout);var t=this.canvasOffset(),r=(this.getX(e)-t.left)/this.WIDTH*2-1,i=-(this.getY(e)-t.top)/this.HEIGHT*2+1,n=this;if(null!==this.current_hover&&this.handleHoverContinue(r,i),this.hoverables.length>0&&(this.hoverTimeout=setTimeout((function(){n.handleHoverSelection(r,i)}),this.hoverDuration)),e.preventDefault(),this.scene&&this.isDragging){var a=0,o=this.getX(e),s=this.getY(e);if(void 0!==o&&this.isInViewer(o,s)){var l=(o-this.mouseStartX)/this.WIDTH,h=(s-this.mouseStartY)/this.HEIGHT;0!=this.touchDistanceStart&&e.targetTouches&&2==e.targetTouches.length?(a=2,h=2*(this.calcTouchDistance(e)-this.touchDistanceStart)/(this.WIDTH+this.HEIGHT)):e.targetTouches&&3==e.targetTouches.length&&(a=1);var u=this.renderer.getXRatio(),c=this.renderer.getYRatio();l*=u,h*=c;var d,f=Math.sqrt(l*l+h*h);if(3==a||3==this.mouseButton&&e.ctrlKey)this.slabNear=this.cslabNear+100*l,this.slabFar=this.cslabFar-100*h;else if(2==a||3==this.mouseButton||e.shiftKey)(d=.85*(this.CAMERA_Z-this.rotationGroup.position.z))<80&&(d=80),this.rotationGroup.position.z=this.cz+h*d,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(1==a||2==this.mouseButton||e.ctrlKey){var p=this.screenOffsetToModel(u*(o-this.mouseStartX),c*(s-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,p)}else if((0===a||1==this.mouseButton)&&0!==f){var v=Math.sin(f*Math.PI)/f;this.dq.x=Math.cos(f*Math.PI),this.dq.y=0,this.dq.z=v*l,this.dq.w=-v*h,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}}},{key:\"_handleContextMenu\",value:function(e){e.preventDefault();var t=this.getX(e),r=this.getY(e);if(t==this.mouseStartX&&r==this.mouseStartY){var i=this.mouseStartX,n=this.mouseStartY,a=(i-(h=this.canvasOffset()).left)/this.WIDTH*2-1,o=-(n-h.top)/this.HEIGHT*2+1,s=this.targetedObjects(a,o,this.contextMenuEnabledAtoms),l=null;s.length&&(l=s[0].clickable);var h=this.canvasOffset();i=this.mouseStartX-h.left,n=this.mouseStartY-h.top,this.userContextMenuHandler&&this.userContextMenuHandler(l,i,n)}}},{key:\"setContainer\",value:function(e){var t=(0,o.getElement)(e)||this.container;return this.initContainer(t),this}},{key:\"setBackgroundColor\",value:function(e,t){(void 0===t||t<0||t>1)&&(t=1);var r=a.CC.color(e);return this.scene.fog.color=r,this.bgColor=r.getHex(),this.renderer.setClearColorHex(r.getHex(),t),this.show(),this}},{key:\"setProjection\",value:function(e){this.camera.ortho=\"orthographic\"===e,this.setSlabAndFog()}},{key:\"setViewStyle\",value:function(e){if(\"outline\"===e.style){var t={};e.color&&(t.color=a.CC.color(e.color)),e.width&&(t.width=e.width),this.renderer.enableOutline(t)}else this.renderer.disableOutline();return this}},{key:\"updateSize\",value:function(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}},{key:\"setWidth\",value:function(e){return this.WIDTH=e||this.WIDTH,this.updateSize(),this}},{key:\"setHeight\",value:function(e){return this.HEIGHT=e||this.HEIGHT,this.updateSize(),this}},{key:\"resize\",value:function(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();var e=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0&&(this.container.querySelector(\"canvas\").remove(),this.setupRenderer(),this.initContainer(this.container),e=!0),0==this.WIDTH||0==this.HEIGHT?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),e){var t=this.renderer.supportedExtensions();t.regen=!0,this._viewer.render(null,t)}else this.show();return this}},{key:\"getModel\",value:function(e){return void 0===e?0==this.models.length?null:this.models[this.models.length-1]:e instanceof l.GLModel?e:e in this.models?this.models[e]:0==this.models.length?null:this.models[this.models.length-1]}},{key:\"spin\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(clearInterval(this.spinInterval),void 0===e&&(e=\"y\"),\"boolean\"==typeof e){if(!e)return;e=\"y\"}Array.isArray(e)&&(e={x:e[0],y:e[1],z:e[2]});var r=this;this.spinInterval=setInterval((function(){!r.getCanvas().isConnected&&r.renderer.isLost()&&clearInterval(r.spinInterval),r.rotate(1*t,e)}),25)}},{key:\"animateMotion\",value:function(t,r,i,n,a,o){var s=Math.ceil(t/20);s<1&&(s=1),this.incAnim();var l={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(r){for(var h=new Array(s),u=0;u<s;u++){var c=(u+1)/s,d={mpos:l.mpos,rz:l.rz,rot:l.rot};d.mpos=i.clone().sub(l.mpos).multiplyScalar(c).add(l.mpos),d.rz=l.rz+c*(n-l.rz),d.rot=e.slerp(l.rot,a,c),d.cam=o.clone().sub(l.cam).multiplyScalar(c).add(l.cam),h[u]=d}var f=0,p=this,v=function e(){var t=h[f];f+=1,p.modelGroup.position=t.mpos,p.rotationGroup.position.z=t.rz,p.rotationGroup.quaternion=t.rot,p.camera.lookAt(t.cam),f<h.length?setTimeout(e,20):p.decAnim(),p.show()};setTimeout(v,20)}else{var g={},m=1/s;if(i&&(g.mpos=i.clone().sub(l.mpos).multiplyScalar(m)),void 0!==n&&null!=n&&(g.rz=m*(n-l.rz)),a){var y=e.slerp(l.rot,a,m);g.rot=l.rot.clone().inverse().multiply(y)}o&&(g.cam=o.clone().sub(l.cam).multiplyScalar(m));var _=0,b=this,w=function e(){_+=1,g.mpos&&b.modelGroup.position.add(g.mpos),g.rz&&(b.rotationGroup.position.z+=g.rz),g.rot&&b.rotationGroup.quaternion.multiply(g.rot),g.cam&&(b.lookingAt.add(g.cam),b.camera.lookAt(b.lookingAt)),_<s?setTimeout(e,20):b.decAnim(),b.show()};setTimeout(w,20)}}},{key:\"rotate\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"y\",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(\"x\"==t?t={x:1,y:0,z:0}:\"y\"==t?t={x:0,y:1,z:0}:\"z\"==t&&(t={x:0,y:0,z:1}),\"vx\"==t?t={vx:1,vy:0,vz:0}:\"vy\"==t?t={vx:0,vy:1,vz:0}:\"vz\"==t&&(t={vx:0,vy:0,vz:1}),void 0!==t.vx){var a=new n.Vector3(t.vx,t.vy,t.vz);a.applyQuaternion(this.rotationGroup.quaternion),t={x:a.x,y:a.y,z:a.z}}var o=function(e){var r,i,a,o=Math.sin(e/2),s=Math.cos(e/2);return r=t.x*o,i=t.y*o,a=t.z*o,new n.Quaternion(r,i,a,s).normalize()}(Math.PI*e/180);if(r){var s=(new n.Quaternion).copy(this.rotationGroup.quaternion).multiply(o);this.animateMotion(r,i,this.modelGroup.position,this.rotationGroup.position.z,s,this.lookingAt)}else this.rotationGroup.quaternion.multiply(o),this.show();return this}},{key:\"surfacesFinished\",value:function(){for(var e in this.surfaces)if(!this.surfaces[e][0].done)return!1;return!0}},{key:\"getView\",value:function(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var e=this.modelGroup.position,t=this.rotationGroup.quaternion;return[e.x,e.y,e.z,this.rotationGroup.position.z,t.x,t.y,t.z,t.w]}},{key:\"setView\",value:function(e,t){return void 0!==e&&(e instanceof Array||8!==e.length)&&this.modelGroup&&this.rotationGroup?(this.modelGroup.position.x=e[0],this.modelGroup.position.y=e[1],this.modelGroup.position.z=e[2],this.rotationGroup.position.z=e[3],this.rotationGroup.quaternion.x=e[4],this.rotationGroup.quaternion.y=e[5],this.rotationGroup.quaternion.z=e[6],this.rotationGroup.quaternion.w=e[7],void 0!==e[8]&&(this.rotationGroup.position.x=e[8],this.rotationGroup.position.y=e[9]),this.show(t),this):this}},{key:\"render\",value:function(e,t){this.renderer.setViewport(),this.updateClickables();var r,n,a=this.getView();for(this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState()),t||(t=this.renderer.supportedExtensions()),r=0;r<this.models.length;r++)this.models[r]&&this.models[r].globj(this.modelGroup,t);for(r=0;r<this.shapes.length;r++)this.shapes[r]&&(void 0===this.shapes[r].frame||this.viewer_frame<0||this.shapes[r].frame<0||this.shapes[r].frame==this.viewer_frame?this.shapes[r].globj(this.modelGroup,t):this.shapes[r].removegl(this.modelGroup));for(r=0;r<this.labels.length;r++)this.labels[r]&&void 0!==this.labels[r].frame&&this.labels[r].frame>=0&&(this.modelGroup.remove(this.labels[r].sprite),(this.viewer_frame<0||this.labels[r].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[r].sprite));for(r in this.surfaces)if(this.surfaces.hasOwnProperty(r)){var o=this.surfaces[r];for(n=0;n<o.length;n++)if(o.hasOwnProperty(n)){var s=o[n].geo;if(!o[n].finished||t.regen){s.verticesNeedUpdate=!0,s.elementsNeedUpdate=!0,s.normalsNeedUpdate=!0,s.colorsNeedUpdate=!0,s.buffersNeedUpdate=!0,s.boundingSphere=null,o[n].done&&(o[n].finished=!0),o[n].lastGL&&this.modelGroup.remove(o[n].lastGL);var l=null;if(l=o[n].mat instanceof i.LineBasicMaterial?new i.Line(s,o[n].mat):new i.Mesh(s,o[n].mat),o[n].mat.transparent&&0==o[n].mat.opacity?l.visible=!1:l.visible=!0,o[n].symmetries.length>1||1==o[n].symmetries.length&&!o[n].symmetries[n].isIdentity()){var h,u=new i.Object3D;for(h=0;h<o[n].symmetries.length;h++){var c=l.clone();c.matrix=o[n].symmetries[h],c.matrixAutoUpdate=!1,u.add(c)}o[n].lastGL=u,this.modelGroup.add(u)}else o[n].lastGL=l,this.modelGroup.add(l)}}}return this.setView(a),\"function\"==typeof e&&e(this),this}},{key:\"getModelList\",value:function(e){var t=[];if(void 0===e||void 0===e.model)for(var r=0;r<this.models.length;r++)this.models[r]&&t.push(this.models[r]);else{var i=e.model;Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)if(\"number\"==typeof i[n]){var a=i[n];a<0&&(a+=this.models.length),t.push(this.models[a])}else t.push(i[n])}return t}},{key:\"getAtomsFromSel\",value:function(e){var t=[];void 0===e&&(e={});for(var r=this.getModelList(e),i=0;i<r.length;i++)t=t.concat(r[i].selectedAtoms(e));return t}},{key:\"atomIsSelected\",value:function(e,t){void 0===t&&(t={});for(var r=this.getModelList(t),i=0;i<r.length;i++)if(r[i].atomIsSelected(e,t))return!0;return!1}},{key:\"selectedAtoms\",value:function(e){return this.getAtomsFromSel(e)}},{key:\"getUniqueValues\",value:function(e,t){void 0===t&&(t={});var r=this.getAtomsFromSel(t),i={};for(var n in r)r[n].hasOwnProperty(e)&&(i[r[n][e]]=!0);return Object.keys(i)}},{key:\"pdbData\",value:function(e){for(var t=this.getAtomsFromSel(e),r=\"\",i=0,n=t.length;i<n;++i)r+=t[i].pdbline+\"\\n\";return r}},{key:\"zoom\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(this.CAMERA_Z-this.rotationGroup.position.z)/e,n=this.CAMERA_Z-i;return t>0?this.animateMotion(t,r,this.modelGroup.position,this.adjustZoomToLimits(n),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(n),this.show()),this}},{key:\"translate\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e/this.WIDTH,o=t/this.HEIGHT,s=new n.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(s,this.camera),s.x-=a,s.y-=o,this.projector.unprojectVector(s,this.camera),s.z=0;var l=this.lookingAt.clone().add(s);return r>0?this.animateMotion(r,i,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,l):(this.lookingAt=l,this.camera.lookAt(this.lookingAt),this.show()),this}},{key:\"translateScene\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.screenOffsetToModel(e,t),a=this.modelGroup.position.clone().add(n);return r>0?this.animateMotion(r,i,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=a,this.show()),this}},{key:\"fitSlab\",value:function(e){e=e||{};var t=this.getAtomsFromSel(e),r=(0,o.getExtent)(t),i=r[1][0]-r[0][0],n=r[1][1]-r[0][1],a=r[1][2]-r[0][2],s=Math.sqrt(i*i+n*n+a*a);return s<5&&(s=5),this.slabNear=-s/1.9,this.slabFar=s/2,this}},{key:\"center\",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.getAtomsFromSel(r),l=(0,o.getExtent)(s);(0,o.isEmptyObject)(r)?(this.shapes.forEach((function(e){if(e&&e.boundingSphere&&e.boundingSphere.center){var t=e.boundingSphere.center,r=e.boundingSphere.radius;r>0?(s.push(new n.Vector3(t.x+r,t.y,t.z)),s.push(new n.Vector3(t.x-r,t.y,t.z)),s.push(new n.Vector3(t.x,t.y+r,t.z)),s.push(new n.Vector3(t.x,t.y-r,t.z)),s.push(new n.Vector3(t.x,t.y,t.z+r)),s.push(new n.Vector3(t.x,t.y,t.z-r))):s.push(t)}})),l=(0,o.getExtent)(s),e=s,t=l):(e=this.getAtomsFromSel({}),t=(0,o.getExtent)(e));var h=new n.Vector3(l[2][0],l[2][1],l[2][2]),u=t[1][0]-t[0][0],c=t[1][1]-t[0][1],d=t[1][2]-t[0][2],f=Math.sqrt(u*u+c*c+d*d);f<5&&(f=5),this.slabNear=-f/1.9,this.slabFar=f/2,u=l[1][0]-l[0][0],c=l[1][1]-l[0][1],d=l[1][2]-l[0][2],(f=Math.sqrt(u*u+c*c+d*d))<5&&(f=5);for(var p=25,v=0;v<s.length;v++)if(s[v]){var g=h.distanceToSquared(s[v]);g>p&&(p=g)}f=2*Math.sqrt(p);var m=h.clone().multiplyScalar(-1);return i>0?this.animateMotion(i,a,m,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=m,this.show()),this}},{key:\"zoomTo\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getAtomsFromSel(e),a=(0,o.getExtent)(i),s=a;if((0,o.isEmptyObject)(e)){var l=i&&i.length;if(this.shapes.forEach((function(e){if(e&&e.boundingSphere)if(e.boundingSphere.box){var t=e.boundingSphere.box;i.push(new n.Vector3(t.min.x,t.min.y,t.min.z)),i.push(new n.Vector3(t.max.x,t.max.y,t.max.z))}else if(e.boundingSphere.center){var r=e.boundingSphere.center,a=e.boundingSphere.radius;a>0?(i.push(new n.Vector3(r.x+a,r.y,r.z)),i.push(new n.Vector3(r.x-a,r.y,r.z)),i.push(new n.Vector3(r.x,r.y+a,r.z)),i.push(new n.Vector3(r.x,r.y-a,r.z)),i.push(new n.Vector3(r.x,r.y,r.z+a)),i.push(new n.Vector3(r.x,r.y,r.z-a))):i.push(r)}})),s=(0,o.getExtent)(i),!l)for(var h=0;h<3;h++)a[2][h]=(s[0][h]+s[1][h])/2}else{var u=this.getAtomsFromSel({});s=(0,o.getExtent)(u)}var c=new n.Vector3(a[2][0],a[2][1],a[2][2]),d=s[1][0]-s[0][0],f=s[1][1]-s[0][1],p=s[1][2]-s[0][2],v=Math.sqrt(d*d+f*f+p*p);v<5&&(v=5),this.slabNear=-v/1.9,this.slabFar=v/2,0===Object.keys(e).length&&(this.slabNear=Math.min(2*-v,-50),this.slabFar=Math.max(2*v,50));var g=this.config.minimumZoomToDistance||5;d=a[1][0]-a[0][0],f=a[1][1]-a[0][1],p=a[1][2]-a[0][2],(v=Math.sqrt(d*d+f*f+p*p))<g&&(v=g);for(var m=g*g,y=0;y<i.length;y++)if(i[y]){var _=c.distanceToSquared(i[y]);_>m&&(m=_)}v=2*Math.sqrt(m);var b=c.clone().multiplyScalar(-1),w=-(.5*v/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return w=this.adjustZoomToLimits(w),t>0?this.animateMotion(t,r,b,w,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=b,this.rotationGroup.position.z=w,this.show()),this}},{key:\"setSlab\",value:function(e,t){this.slabNear=e,this.slabFar=t}},{key:\"getSlab\",value:function(){return{near:this.slabNear,far:this.slabFar}}},{key:\"addLabel\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r){var n=(0,o.getExtent)(this.getAtomsFromSel(r));t.position={x:n[2][0],y:n[2][1],z:n[2][2]}}var a=new h.Label(e,t);return a.setContext(),this.modelGroup.add(a.sprite),this.labels.push(a),i||this.show(),a}},{key:\"addResLabels\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.labels.length;return this.applyToModels(\"addResLabels\",e,this,t,r),this.show(),this.labels.slice(i)}},{key:\"addPropertyLabels\",value:function(e,t,r){return this.applyToModels(\"addPropertyLabels\",e,t,this,r),this.show(),this}},{key:\"removeLabel\",value:function(e){for(var t=0;t<this.labels.length;t++)if(this.labels[t]==e){this.labels.splice(t,1),e.dispose(),this.modelGroup.remove(e.sprite);break}return this.show(),this}},{key:\"removeAllLabels\",value:function(){for(var e=0;e<this.labels.length;e++)this.labels[e]&&this.labels[e].sprite&&this.modelGroup.remove(this.labels[e].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}},{key:\"setLabelStyle\",value:function(e,t){return this.modelGroup.remove(e.sprite),e.dispose(),e.stylespec=t,e.setContext(),this.modelGroup.add(e.sprite),this.show(),e}},{key:\"setLabelText\",value:function(e,t){return this.modelGroup.remove(e.sprite),e.dispose(),e.text=t,e.setContext(),this.modelGroup.add(e.sprite),this.show(),e}},{key:\"addShape\",value:function(e){e=e||{};var t=new u.GLShape(e);return t.shapePosition=this.shapes.length,this.shapes.push(t),t}},{key:\"removeShape\",value:function(e){if(!e)return this;for(e.removegl(this.modelGroup),delete this.shapes[e.shapePosition];this.shapes.length>0&&void 0===this.shapes[this.shapes.length-1];)this.shapes.pop();return this}},{key:\"removeAllShapes\",value:function(){for(var e=0;e<this.shapes.length;e++){var t=this.shapes[e];t&&t.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}},{key:\"getSelectionCenter\",value:function(e){if(e.hasOwnProperty(\"x\")&&e.hasOwnProperty(\"y\")&&e.hasOwnProperty(\"z\"))return e;var t=this.getAtomsFromSel(e);if(0==t.length)return{x:0,y:0,z:0};var r=(0,o.getExtent)(t);return{x:r[0][0]+(r[1][0]-r[0][0])/2,y:r[0][1]+(r[1][1]-r[0][1])/2,z:r[0][2]+(r[1][2]-r[0][2])/2}}},{key:\"addSphere\",value:function(e){(e=e||{}).center=this.getSelectionCenter(e.center);var t=new u.GLShape(e);return t.shapePosition=this.shapes.length,t.addSphere(e),this.shapes.push(t),t.finalize(),t}},{key:\"addBox\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=e.corner&&(e.corner=this.getSelectionCenter(e.corner)),null!=e.center&&(e.center=this.getSelectionCenter(e.center));var t=new u.GLShape(e);return t.shapePosition=this.shapes.length,t.addBox(e),this.shapes.push(t),t.finalize(),t}},{key:\"addArrow\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.start=this.getSelectionCenter(e.start),e.end=this.getSelectionCenter(e.end);var t=new u.GLShape(e);return t.shapePosition=this.shapes.length,t.addArrow(e),this.shapes.push(t),t.finalize(),t}},{key:\"addCylinder\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.start=this.getSelectionCenter(e.start),e.end=this.getSelectionCenter(e.end);var t=new u.GLShape(e);return t.shapePosition=this.shapes.length,e.dashed?t.addDashedCylinder(e):t.addCylinder(e),this.shapes.push(t),t.finalize(),t}},{key:\"addCurve\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new u.GLShape(e);return t.shapePosition=this.shapes.length,t.addCurve(e),this.shapes.push(t),t.finalize(),t}},{key:\"addLine\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.start=this.getSelectionCenter(e.start),e.end=this.getSelectionCenter(e.end),e.wireframe=!0;var t=new u.GLShape(e);return t.shapePosition=this.shapes.length,e.dashed?t=this.addLineDashed(e,t):t.addLine(e),this.shapes.push(t),t.finalize(),t}},{key:\"addUnitCell\",value:function(e,t){e=this.getModel(e),(t=t||{alabel:\"a\",blabel:\"b\",clabel:\"c\"}).box=t.box||{},t.astyle=t.astyle||{color:\"red\",radius:.1,midpos:-1},t.bstyle=t.bstyle||{color:\"green\",radius:.1,midpos:-1},t.cstyle=t.cstyle||{color:\"blue\",radius:.1,midpos:-1},t.alabelstyle=t.alabelstyle||{fontColor:\"red\",showBackground:!1,alignment:\"center\",inFront:!1},t.blabelstyle=t.blabelstyle||{fontColor:\"green\",showBackground:!1,alignment:\"center\",inFront:!1},t.clabelstyle=t.clabelstyle||{fontColor:\"blue\",showBackground:!1,alignment:\"center\",inFront:!1},e.unitCellObjects&&this.removeUnitCell(e),e.unitCellObjects={shapes:[],labels:[]};var r=e.getCrystData(),i=null;if(r){if(r.matrix)i=r.matrix;else{var a,o,s,l=r.a,h=r.b,c=r.c,d=r.alpha,f=r.beta,p=r.gamma;d=d*Math.PI/180,f=f*Math.PI/180,p=p*Math.PI/180,a=Math.cos(f),o=(Math.cos(d)-Math.cos(f)*Math.cos(p))/Math.sin(p),s=Math.sqrt(Math.max(0,1-a*a-o*o)),i=new n.Matrix3(l,h*Math.cos(p),c*a,0,h*Math.sin(p),c*o,0,0,c*s)}var v=[new n.Vector3(0,0,0),new n.Vector3(1,0,0),new n.Vector3(0,1,0),new n.Vector3(0,0,1),new n.Vector3(1,1,0),new n.Vector3(0,1,1),new n.Vector3(1,0,1),new n.Vector3(1,1,1)];if(r.matrix4)for(var g=0;g<v.length;g++)r.size&&v[g].multiplyVectors(v[g],r.size),v[g]=v[g].applyMatrix4(r.matrix4);else for(var m=0;m<v.length;m++)v[m]=v[m].applyMatrix3(i);if(t.box&&!t.box.hidden){t.box.wireframe=!0;var y=new u.GLShape(t.box);y.shapePosition=this.shapes.length,y.addLine({start:v[0],end:v[1]}),y.addLine({start:v[0],end:v[2]}),y.addLine({start:v[1],end:v[4]}),y.addLine({start:v[2],end:v[4]}),y.addLine({start:v[0],end:v[3]}),y.addLine({start:v[3],end:v[5]}),y.addLine({start:v[2],end:v[5]}),y.addLine({start:v[1],end:v[6]}),y.addLine({start:v[4],end:v[7]}),y.addLine({start:v[6],end:v[7]}),y.addLine({start:v[3],end:v[6]}),y.addLine({start:v[5],end:v[7]}),this.shapes.push(y),e.unitCellObjects.shapes.push(y),y.finalize()}if(!t.astyle.hidden){t.astyle.start=v[0],t.astyle.end=v[1];var _=this.addArrow(t.astyle);e.unitCellObjects.shapes.push(_)}if(!t.bstyle.hidden){t.bstyle.start=v[0],t.bstyle.end=v[2];var b=this.addArrow(t.bstyle);e.unitCellObjects.shapes.push(b)}if(!t.cstyle.hidden){t.cstyle.start=v[0],t.cstyle.end=v[3];var w=this.addArrow(t.cstyle);e.unitCellObjects.shapes.push(w)}if(t.alabel){t.alabelstyle.position=v[1];var x=this.addLabel(t.alabel,t.alabelstyle);e.unitCellObjects.labels.push(x)}if(t.blabel){t.blabelstyle.position=v[2];var k=this.addLabel(t.blabel,t.blabelstyle);e.unitCellObjects.labels.push(k)}if(t.clabel){t.clabelstyle.position=v[3];var C=this.addLabel(t.clabel,t.clabelstyle);e.unitCellObjects.labels.push(C)}}}},{key:\"removeUnitCell\",value:function(e){if((e=this.getModel(e)).unitCellObjects){var t=this;e.unitCellObjects.shapes.forEach((function(e){t.removeShape(e)})),e.unitCellObjects.labels.forEach((function(e){t.removeLabel(e)}))}delete e.unitCellObjects}},{key:\"replicateUnitCell\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=(i=this.getModel(i)).getCrystData();if(o){for(var s=i.selectedAtoms({}),l=o.matrix,h=function(e){return e%2==0?-e/2:Math.ceil(e/2)},u=0;u<e;u++)for(var c=0;c<t;c++)for(var d=0;d<r;d++)if(0!=u||0!=c||0!=d){var f=new n.Vector3(h(u),h(c),h(d));f.applyMatrix3(l);for(var p=[],v=0;v<s.length;v++){var g={};for(var m in s[v])g[m]=s[v][m];g.x+=f.x,g.y+=f.y,g.z+=f.z,p.push(g)}i.addAtoms(p)}a&&i.assignBonds()}}},{key:\"addLineDashed\",value:function(e,t){var r,i;e.dashLength=e.dashLength||.5,e.gapLength=e.gapLength||.5,r=e.start?new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0):new n.Vector3(0,0,0),i=e.end?new n.Vector3(e.end.x,e.end.y||0,e.end.z||0):new n.Vector3(0,0,0);var a,o,s,l=new n.Vector3,h=new n.Vector3,u=new n.Vector3,c=r.clone(),d=0;for(l.subVectors(i,r),a=l.length(),l.normalize(),h=l.clone(),u=l.clone(),h.multiplyScalar(e.dashLength),u.multiplyScalar(e.gapLength),o=h.length(),s=u.length();d<a;){if(d+o>a){e.start=r,e.end=i,t.addLine(e);break}c.addVectors(r,h),e.start=r,e.end=c,t.addLine(e),r=c.clone(),d+=o,c.addVectors(r,u),r=c.clone(),d+=s}return t.finalize(),t}},{key:\"addCustom\",value:function(e){e=e||{};var t=new u.GLShape(e);return t.shapePosition=this.shapes.length,t.addCustom(e),this.shapes.push(t),t.finalize(),t}},{key:\"addVolumetricData\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new c.VolumeData(e,t);return r.hasOwnProperty(\"transferfn\")?this.addVolumetricRender(i,r):this.addIsosurface(i,r)}},{key:\"addIsosurface\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=new u.GLShape(t);return i.shapePosition=this.shapes.length,i.addIsosurface(e,t,r),this.shapes.push(i),i}},{key:\"addVolumetricRender\",value:function(e,t){t=t||{};var r=new f.GLVolumetricRender(e,t);return r.shapePosition=this.shapes.length,this.shapes.push(r),r}},{key:\"hasVolumetricRender\",value:function(){return this.renderer.supportsVolumetric()}},{key:\"enableFog\",value:function(e){e?this.scene.fog=new i.Fog(this.bgColor,100,200):(this.config.disableFog=!0,this.show())}},{key:\"setFrame\",value:function(e){this.viewer_frame=e;var t=this;return new Promise((function(r){var i=t.models.map((function(r){return r.setFrame(e,t)}));Promise.all(i).then((function(){r()}))}))}},{key:\"getFrame\",value:function(){return this.viewer_frame}},{key:\"getNumFrames\",value:function(){for(var e=0,t=0;t<this.models.length;t++)this.models[t].getNumFrames()>e&&(e=this.models[t].getNumFrames());for(var r=0;r<this.shapes.length;r++)this.shapes[r].frame&&this.shapes[r].frame>=e&&(e=this.shapes[r].frame+1);for(var i=0;i<this.labels.length;i++)this.labels[i].frame&&this.labels[i].frame>=e&&(e=this.labels[i].frame+1);return e}},{key:\"animate\",value:function(e){this.incAnim();var t=100,r=\"forward\",i=0;(e=e||{}).interval&&(t=e.interval),e.loop&&(r=e.loop),e.reps&&(i=e.reps);var n=this.getNumFrames(),a=this,s=0;e.startFrame&&(s=e.startFrame%n);var l=1;e.step&&(i/=l=e.step);var h,u,c=0,d=n*i,f=new Date,p=function(e){f=new Date,\"forward\"==e?a.setFrame(s).then((function(){s=(s+l)%n,h()})):\"backward\"==e?a.setFrame(n-1-s).then((function(){s=(s+l)%n,h()})):a.setFrame(s).then((function(){l*=(s+=l)%(n-1)==0?-1:1,h()}))};return h=function(){if(a.render(),a.getCanvas().isConnected)if(++c!=d&&a.isAnimated()){var e=t-((new Date).getTime()-f.getTime());e=e>0?e:0,a.animationTimers.delete(u),u=new o.PausableTimer(p,e,r),a.animationTimers.add(u)}else u.cancel(),a.animationTimers.delete(u),a.decAnim();else a.stopAnimate()},u=new o.PausableTimer(p,0,r),this.animationTimers.add(u),this}},{key:\"stopAnimate\",value:function(){return this.animated=0,this.animationTimers.forEach((function(e){e.cancel()})),this.animationTimers=new Set,this}},{key:\"pauseAnimate\",value:function(){return this.animationTimers.forEach((function(e){e.pause()})),this}},{key:\"resumeAnimate\",value:function(){return this.animationTimers.forEach((function(e){e.resume()})),this}},{key:\"isAnimated\",value:function(){return this.animated>0}},{key:\"addModel\",value:function(e,t,r){r&&!r.defaultcolors?(r.defaultcolors=this.defaultcolors,r.cartoonQuality=r.cartoonQuality||this.config.cartoonQuality):void 0===r&&(r={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality});var i=new l.GLModel(this.models.length,r);return i.addMolData(e,t,r),this.models.push(i),i}},{key:\"addModels\",value:function(e,t,r){(r=r||{}).multimodel=!0,r.frames=!0;for(var i=l.GLModel.parseMolData(e,t,r),n=0;n<i.length;n++){var a=new l.GLModel(this.models.length,this.defaultcolors);a.setAtomDefaults(i[n]),a.addFrame(i[n]),a.setFrame(0),i.modelData&&a.setModelData(i.modelData[n]),a.setDontDuplicateAtoms(!r.duplicateAssemblyAtoms),this.models.push(a)}return this.models}},{key:\"addModelsAsFrames\",value:function(e,t,r){(r=r||{}).multimodel=!0,r.frames=!0;var i=new l.GLModel(this.models.length,this.defaultcolors);return i.addMolData(e,t,r),this.models.push(i),i}},{key:\"addAsOneMolecule\",value:function(e,t,r){(r=r||{}).multimodel=!0,r.onemol=!0;var i=new l.GLModel(this.models.length,this.defaultcolors);return i.addMolData(e,t,r),this.models.push(i),i}},{key:\"removeModel\",value:function(e){if(e=this.getModel(e)){for(e.removegl(this.modelGroup),delete this.models[e.getID()];this.models.length>0&&void 0===this.models[this.models.length-1];)this.models.pop();return this}}},{key:\"removeAllModels\",value:function(){for(var e=0;e<this.models.length;e++){var t=this.models[e];t&&t.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}},{key:\"exportJSON\",value:function(e,t){var r={};return r.m=void 0===t?this.models.map((function(t){return t.toCDObject(e)})):[this.models[t].toCDObject()],JSON.stringify(r)}},{key:\"exportVRML\",value:function(){var e=this.modelGroup;this.applyToModels(\"removegl\",this.modelGroup),this.modelGroup=new i.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var t=\"#VRML V2.0 utf8\\n\"+this.modelGroup.vrml()+\"\\n\";return this.applyToModels(\"removegl\",this.modelGroup),this.modelGroup=e,t}},{key:\"createModelFrom\",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new l.GLModel(this.models.length,this.defaultcolors),i=0;i<this.models.length;i++)if(this.models[i]){var n=this.models[i].selectedAtoms(e);r.addAtoms(n),t&&this.models[i].removeAtoms(n)}return this.models.push(r),r}},{key:\"applyToModels\",value:function(e,t,r,i,n,a,o){for(var s=this.getModelList(t),l=0;l<s.length;l++)s[l][e](t,r,i,n,a,o)}},{key:\"setStyle\",value:function(e,t){return void 0===t&&(t=e,e={}),this.applyToModels(\"setStyle\",e,t,!1),this}},{key:\"addStyle\",value:function(e,t){return void 0===t&&(t=e,e={}),this.applyToModels(\"setStyle\",e,t,!0),this}},{key:\"setClickable\",value:function(e,t,r){return this.applyToModels(\"setClickable\",e,t,r),this}},{key:\"setHoverable\",value:function(e,t,r,i){return this.applyToModels(\"setHoverable\",e,t,r,i),this}},{key:\"enableContextMenu\",value:function(e,t){return this.applyToModels(\"enableContextMenu\",e,t),this}},{key:\"vibrate\",value:function(e,t,r,i){return this.applyToModels(\"vibrate\",e,t,r,this,i),this}},{key:\"setColorByProperty\",value:function(e,t,r,i){return this.applyToModels(\"setColorByProperty\",e,t,r,i),this}},{key:\"setColorByElement\",value:function(e,t){return this.applyToModels(\"setColorByElement\",e,t),this}},{key:\"carveUpExtent\",value:function(t,r,i){for(var n=[],a={},o=0,s=r.length;o<s;o++)a[r[o].index]=o;for(var l=function(e){for(var t=[],r=0,i=e.length;r<i;r++)e[r].index in a&&t.push(a[e[r].index]);return t},h=function(e){var t=[];return t[0]=[e[0][0],e[0][1],e[0][2]],t[1]=[e[1][0],e[1][1],e[1][2]],t},u=function t(r){if(e.volume(r)<e.maxVolume)return[r];var i,n=r[1][0]-r[0][0],a=r[1][1]-r[0][1],o=r[1][2]-r[0][2];i=n>a&&n>o?0:a>n&&a>o?1:2;var s=h(r),l=h(r),u=(r[1][i]-r[0][i])/2+r[0][i];s[1][i]=u,l[0][i]=u;var c=t(s),d=t(l);return c.concat(d)},c=u(t),d=0,f=c.length;d<f;d++){var p=h(c[d]);p[0][0]-=6,p[0][1]-=6,p[0][2]-=6,p[1][0]+=6,p[1][1]+=6,p[1][2]+=6;var v=e.getAtomsWithin(r,p),g=e.getAtomsWithin(i,c[d]);n.push({extent:c[d],atoms:l(v),toshow:l(g)})}return n}},{key:\"addMesh\",value:function(e){var t={geo:e.geometry,mat:e.material,done:!0,finished:!1},r=this.nextSurfID();return this.surfaces[r]=t,r}},{key:\"addSurface\",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0,h=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,f=this.nextSurfID(),p=null,v=this,g=d.SurfaceType.VDW;\"string\"==typeof t?void 0!==e.surfaceTypeMap[t.toUpperCase()]?g=e.surfaceTypeMap[t]:console.log(\"Surface type : \"+t+\" is not recognized\"):\"number\"==typeof t&&(g=t);var m=null,y=null,_=e.shallowCopy(this.getAtomsFromSel(a));m=l?e.shallowCopy(this.getAtomsFromSel(l)):_,(0,o.adjustVolumeStyle)(r);var b,w=!1;for(b=0;b<this.models.length;b++)if(this.models[b]){var x=this.models[b].getSymmetries();if(x.length>1||1==x.length&&!x[0].isIdentity()){w=!0;break}}var k=function(t,i,n){var a;y=h?e.shallowCopy(v.getAtomsFromSel(h)):n;var l=(0,o.getExtent)(n,!0);if(r.map&&r.map.prop){var c=r.map.prop,m=(0,s.getGradient)(r.map.scheme||r.map.gradient||new s.Gradient.RWB),_=m.range();_||(_=(0,o.getPropertyRange)(n,c)),r.colorscheme={prop:c,gradient:m}}for(var b=0,w=i.length;b<w;b++)(a=i[b]).surfaceColor=(0,o.getColorFromStyle)(a,r);var x=e.volume(l),k=v.carveUpExtent(l,i,n);if(y&&y.length&&y.length>0){var C=(0,o.getExtent)(y,!0);k.sort((function(e,t){var r=function(e,t){var r=e.extent,i=r[1][0]-r[0][0],n=r[1][1]-r[0][1],a=r[1][2]-r[0][2],o=i-t[2][0];o*=o;var s=n-t[2][1];s*=s;var l=a-t[2][2];return o+s+l*l};return r(e,C)-r(t,C)}))}for(var A=[],S=0,E=i.length;S<E;S++)a=i[S],A[S]={x:a.x,y:a.y,z:a.z,serial:S,elem:a.elem};if(d.syncSurface){for(var z=function(r){return new Promise((function(n){for(var a=e.generateMeshSyncHelper(g,k[r].extent,k[r].atoms,k[r].toshow,A,x),s=(0,u.splitMesh)({vertexArr:a.vertices,faceArr:a.faces}),l=0,h=s.length;l<h;l++){a={vertices:s[l].vertexArr,faces:s[l].faceArr};var c=e.generateSurfaceMesh(i,a,p);(0,o.mergeGeos)(t.geo,c)}v.render(),n()}))},M=[],T=0;T<k.length;T++)M.push(z(T));return Promise.all(M).then((function(){return t.done=!0,Promise.resolve(f)}))}var L=[];g<0&&(g=0);for(var D=0,O=e.numWorkers;D<O;D++){var I=new Worker($3Dmol.SurfaceWorker);L.push(I),I.postMessage({type:-1,atoms:A,volume:x})}return new Promise((function(r,n){for(var a=0,s=function(){L&&L.length&&L.forEach((function(e){e&&e.terminate&&e.terminate()}))},l=function(n){for(var l=(0,u.splitMesh)({vertexArr:n.data.vertices,faceArr:n.data.faces}),h=0,c=l.length;h<c;h++){var d={vertices:l[h].vertexArr,faces:l[h].faceArr},g=e.generateSurfaceMesh(i,d,p);(0,o.mergeGeos)(t.geo,g)}v.render(),++a==k.length&&(t.done=!0,s(),r(f))},h=function(e){s(),console.log(e.message+\" (\"+e.filename+\":\"+e.lineno+\")\"),n(e)},c=0;c<k.length;c++){var d=L[c%L.length];d.onmessage=l,d.onerror=h,d.postMessage({type:g,expandedExtent:k[c].extent,extendedAtoms:k[c].atoms,atomsToShow:k[c].toshow})}}))};r=r||{},p=e.getMatWithStyle(r);var C=[];C.style=r,C.atomsel=a,C.allsel=l,C.focus=h;var A=null;if(w){var S={},E={};for(b=0;b<this.models.length;b++)S[b]=[],E[b]=[];for(b=0;b<m.length;b++)S[m[b].model].push(m[b]);for(b=0;b<_.length;b++)E[_[b].model].push(_[b]);var z=[];for(b=0;b<this.models.length;b++)E[b].length>0&&(C.push({geo:new i.Geometry(!0),mat:p,done:!1,finished:!1,symmetries:this.models[b].getSymmetries()}),z.push(k(C[C.length-1],S[b],E[b])));A=Promise.all(z)}else C.push({geo:new i.Geometry(!0),mat:p,done:!1,finished:!1,symmetries:[new n.Matrix4]}),A=k(C[C.length-1],m,_);return this.surfaces[f]=C,A.surfid=f,c&&\"function\"==typeof c?(A.then((function(e){c(e)})),f):A}},{key:\"setSurfaceMaterialStyle\",value:function(t,r){if((0,o.adjustVolumeStyle)(r),this.surfaces[t]){var n=this.surfaces[t];n.style=r;for(var s=function(){if(h=n[l].mat=e.getMatWithStyle(r),n[l].mat.side=i.FrontSide,r.color){n[l].mat.color=r.color,n[l].geo.colorsNeedUpdate=!0;var t=a.CC.color(r.color);n[l].geo.setColors((function(){return t}))}else if(h.voldata&&h.volscheme){var o=h.volscheme,s=h.voldata,u=a.CC,c=o.range()||[-1,1];n[l].geo.setColors((function(e,t,r){var i=s.getVal(e,t,r);return u.color(o.valueToHex(i,c))}))}n[l].finished=!1},l=0;l<n.length;l++){var h;s()}}return this}},{key:\"getSurface\",value:function(e){return this.surfaces[e]}},{key:\"removeSurface\",value:function(e){for(var t=this.surfaces[e],r=0;r<t.length;r++)t[r]&&t[r].lastGL&&(void 0!==t[r].geo&&t[r].geo.dispose(),void 0!==t[r].mat&&t[r].mat.dispose(),this.modelGroup.remove(t[r].lastGL));return delete this.surfaces[e],this.show(),this}},{key:\"removeAllSurfaces\",value:function(){for(var e in this.surfaces)if(this.surfaces.hasOwnProperty(e)){for(var t=this.surfaces[e],r=0;r<t.length;r++)t[r]&&t[r].lastGL&&(void 0!==t[r].geo&&t[r].geo.dispose(),void 0!==t[r].mat&&t[r].mat.dispose(),this.modelGroup.remove(t[r].lastGL));delete this.surfaces[e]}return this.show(),this}},{key:\"jmolMoveTo\",value:function(){var e=this.modelGroup.position,t=\"center { \"+-e.x+\" \"+-e.y+\" \"+-e.z+\" }; \",r=this.rotationGroup.quaternion;return t+\"moveto .5 quaternion { \"+r.x+\" \"+r.y+\" \"+r.z+\" \"+r.w+\" };\"}},{key:\"clear\",value:function(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}},{key:\"mapAtomProperties\",value:function(e,t){t=t||{};var r=this.getAtomsFromSel(t);if(\"function\"==typeof e)for(var i=0,n=r.length;i<n;i++)e(r[i]);else for(var a=0,o=r.length;a<o;a++)for(var s=r[a],l=0,h=e.length;l<h;l++){var u=e[l];if(u.props)for(var c in u.props)u.props.hasOwnProperty(c)&&this.atomIsSelected(s,u)&&(s.properties||(s.properties={}),s.properties[c]=u.props[c])}return this}},{key:\"linkViewer\",value:function(e){return this.linkedViewers.push(e),this}},{key:\"getPerceivedDistance\",value:function(){return this.CAMERA_Z-this.rotationGroup.position.z}},{key:\"setPerceivedDistance\",value:function(e){this.rotationGroup.position.z=this.CAMERA_Z-e}},{key:\"setAutoEyeSeparation\",value:function(e,t){var r=this.getPerceivedDistance();return t||(t=5),e||this.camera.position.x>0?this.camera.position.x=r*Math.tan(Math.PI/180*t):this.camera.position.x=-r*Math.tan(Math.PI/180*t),this.camera.lookAt(new n.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}},{key:\"setDefaultCartoonQuality\",value:function(e){this.config.cartoonQuality=e}}],[{key:\"slerp\",value:function(e,t,r){if(1==r)return t.clone();if(0==r)return e.clone();var i=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w;if(i>.9995){var a=new n.Quaternion(e.x+r*(t.x-e.x),e.y+r*(t.y-e.y),e.z+r*(t.z-e.z),e.w+r*(t.w-e.w));return a.normalize(),a}i<0&&(t=t.clone().multiplyScalar(-1),i=-i),i>1?i=1:i<-1&&(i=-1);var o=Math.acos(i)*r,s=t.clone();s.sub(e.clone().multiplyScalar(i)),s.normalize();var l=Math.cos(o),h=Math.sin(o),u=new n.Quaternion(e.x*l+s.x*h,e.y*l+s.y*h,e.z*l+s.z*h,e.w*l+s.w*h);return u.normalize(),u}},{key:\"getAtomsWithin\",value:function(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i];void 0!==n&&(n.x<t[0][0]||n.x>t[1][0]||n.y<t[0][1]||n.y>t[1][1]||n.z<t[0][2]||n.z>t[1][2]||r.push(n))}return r}},{key:\"volume\",value:function(e){return(e[1][0]-e[0][0])*(e[1][1]-e[0][1])*(e[1][2]-e[0][2])}},{key:\"generateSurfaceMesh\",value:function(e,t,r){for(var o=new i.Geometry(!0),s=o.updateGeoGroup(0),l=[],h=0,u=e.length;h<u;h++){var c=e[h];c&&(void 0!==c.surfaceColor?l[h]=c.surfaceColor:c.color&&(l[h]=a.CC.color(c.color)))}for(var d=s.vertexArray,f=t.vertices,p=0,v=f.length;p<v;p++){var g=3*s.vertices;d[g]=f[p].x,d[g+1]=f[p].y,d[g+2]=f[p].z,s.vertices++}var m=s.colorArray;if(r.voldata&&r.volscheme)for(var y=r.volscheme,_=r.voldata,b=y.range()||[-1,1],w=0,x=f.length;w<x;w++){var k=_.getVal(f[w].x,f[w].y,f[w].z),C=a.CC.color(y.valueToHex(k,b)),A=3*w;m[A]=C.r,m[A+1]=C.g,m[A+2]=C.b}else if(l.length>0)for(var S=0,E=f.length;S<E;S++){var z=f[S].atomid,M=3*S;m[M]=l[z].r,m[M+1]=l[z].g,m[M+2]=l[z].b}var T=t.faces;s.faceidx=T.length,o.initTypedArrays();for(var L,D,O,I,F=s.vertexArray,R=s.normalArray,P=0,N=T.length;P<N;P+=3){var B=3*T[P],U=3*T[P+1],G=3*T[P+2];L=new n.Vector3(F[B],F[B+1],F[B+2]),D=new n.Vector3(F[U],F[U+1],F[U+2]),(O=new n.Vector3(F[G],F[G+1],F[G+2])).subVectors(O,D),L.subVectors(L,D),O.cross(L),(I=O).normalize(),R[B]+=I.x,R[U]+=I.x,R[G]+=I.x,R[B+1]+=I.y,R[U+1]+=I.y,R[G+1]+=I.y,R[B+2]+=I.z,R[U+2]+=I.z,R[G+2]+=I.z}return s.faceArray=new Uint16Array(T),new i.Mesh(o,r)}},{key:\"generateMeshSyncHelper\",value:function(e,t,r,i,n,a){var o=new d.ProteinSurface;return o.initparm(t,1!==e,a),o.fillvoxels(n,r),o.buildboundary(),e!=d.SurfaceType.SES&&e!=d.SurfaceType.MS||(o.fastdistancemap(),o.boundingatom(!1),o.fillvoxelswaals(n,r)),o.marchingcube(e),o.getFacesAndVertices(i)}},{key:\"getMatWithStyle\",value:function(e){var t=new i.MeshLambertMaterial;for(var r in t.vertexColors=i.Coloring.VertexColors,e)\"color\"===r||\"map\"===r||e.hasOwnProperty(r)&&(t[r]=e[r]);return void 0!==e.opacity&&(1===e.opacity?t.transparent=!1:t.transparent=!0),t}},{key:\"shallowCopy\",value:function(e){for(var t=[],r=e.length,i=0;i<r;i++)t[i]=(0,o.extend)({},e[i]);return t}}]),e}();function g(e,t){if(e=(0,o.getElement)(e)){t=t||{};try{return new v(e,t)}catch(e){throw\"error creating viewer: \"+e}}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=(0,o.getElement)(e)){var i=[],n=document.createElement(\"canvas\");r.rows=t.rows,r.cols=t.cols,r.control_all=null!=t.control_all&&t.control_all,e.appendChild(n);try{for(var a=0;a<t.rows;a++){for(var s=[],l=0;l<t.cols;l++){r.row=a,r.col=l,r.canvas=n,r.viewers=i,r.control_all=t.control_all;var h=g(e,r);s.push(h)}i.unshift(s)}}catch(e){throw\"error creating viewer grid: \"+e}return i}}function y(e){var t=this;if(e=(0,o.getElement)(e)){var r=m(e,{rows:1,cols:2,control_all:!0});this.glviewer1=r[0][0],this.glviewer2=r[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var i=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter((function(e){return\"function\"==typeof t.glviewer1[e]})),n=0;n<i.length;n++)this[i[n]]=function(e){return function(){var t=this.glviewer1[e].apply(this.glviewer1,arguments),r=this.glviewer2[e].apply(this.glviewer2,arguments);return[t,r]}}(i[n]);this.setCoordinates=function(e,t,r){for(var i=0;i<e.length;i++)e[i].setCoordinates(t,r)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(e){this.glviewer1.render(),this.glviewer2.render(),e&&e(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}v.numWorkers=4,v.maxVolume=64e3,v.surfaceTypeMap={VDW:d.SurfaceType.VDW,MS:d.SurfaceType.MS,SAS:d.SurfaceType.SAS,SES:d.SurfaceType.SES}},1460:function(e,t,r){\"use strict\";r.r(t),r.d(t,{CustomLinear:function(){return u},Gradient:function(){return d},GradientType:function(){return n},ROYGB:function(){return l},RWB:function(){return s},Sinebow:function(){return h},builtinGradients:function(){return c},getGradient:function(){return o},normalizeValue:function(){return a}});var i=r(2550),n=_createClass((function e(){_classCallCheck(this,e)}));function a(e,t,r){return t>=e?(r<e&&(r=e),r>t&&(r=t),{lo:e,hi:t,val:r}):(r>e&&(r=e),r<t&&(r=t),{lo:t,hi:e,val:r=e-r+t})}function o(e){if(e instanceof n)return e;if(void 0!==e.gradient&&c[e.gradient]){var t=void 0===e.min?-1:e.min,r=void 0===e.max?1:e.max;return void 0===e.mid?void 0===e.colors?new c[e.gradient](t,r):new c[e.gradient](t,r,e.colors):new c[e.gradient](t,r,e.mid)}return e}var s=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,i,n){var a;return _classCallCheck(this,r),a=t.call(this),a.gradient=\"RWB\",a.mult=1,a.mid=n,a.min=e,a.max=i,void 0===i&&Array.isArray(e)&&e.length>=2?(a.max=e[1],a.min=e[0]):e&&i&&!Array.isArray(e)&&(a.min=e,a.max=i),a}return _createClass(r,[{key:\"range\",value:function(){return void 0!==this.min&&void 0!==this.max?[this.min,this.max]:null}},{key:\"valueToHex\",value:function(e,t){var r,i;if(e=this.mult*e,t?(r=t[0],i=t[1]):(r=this.min,i=this.max),void 0===e)return 16777215;var n=a(r,i,e);r=n.lo;var o,s=((i=n.hi)+r)/2;return(e=n.val)<(s=t&&void 0!==t[2]?t[2]:void 0!==this.mid?this.mid:(r+i)/2)?16711680+256*(o=Math.floor(255*Math.sqrt((e-r)/(s-r))))+o:e>s?65536*(o=Math.floor(255*Math.sqrt(1-(e-s)/(i-s))))+256*o+255:16777215}}]),r}(n),l=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,i){var n;return _classCallCheck(this,r),n=t.call(this),n.gradient=\"ROYGB\",n.mult=1,n.min=e,n.max=i,void 0===i&&Array.isArray(e)&&e.length>=2?(n.max=e[1],n.min=e[0]):e&&i&&!Array.isArray(e)&&(n.min=e,n.max=i),n}return _createClass(r,[{key:\"valueToHex\",value:function(e,t){var r,i;if(e=this.mult*e,t?(r=t[0],i=t[1]):(r=this.min,i=this.max),void 0===e)return 16777215;var n=a(r,i,e),o=((r=n.lo)+(i=n.hi))/2,s=(r+o)/2,l=(o+i)/2;return(e=n.val)<s?16711680+256*Math.floor(255*Math.sqrt((e-r)/(s-r)))+0:e<o?65536*Math.floor(255*Math.sqrt(1-(e-s)/(o-s)))+65280+0:e<l?65280+1*Math.floor(255*Math.sqrt((e-o)/(l-o))):0+256*Math.floor(255*Math.sqrt(1-(e-l)/(i-l)))+255}},{key:\"range\",value:function(){return void 0!==this.min&&void 0!==this.max?[this.min,this.max]:null}}]),r}(n),h=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,i){var n;return _classCallCheck(this,r),n=t.call(this),n.gradient=\"Sinebow\",n.mult=1,n.min=e,n.max=i,void 0===i&&Array.isArray(e)&&e.length>=2&&(n.max=e[1],n.min=e[0]),i<e&&(n.mult=-1,n.min*=-1,n.max*=-1),n}return _createClass(r,[{key:\"valueToHex\",value:function(e,t){var r,i;if(e=this.mult*e,t?(r=t[0],i=t[1]):(r=this.min,i=this.max),void 0===e)return 16777215;var n=d.normalizeValue(r,i,e);r=n.lo,i=n.hi;var a=((e=n.val)-r)/(i-r)*5/6+.5,o=Math.sin(Math.PI*a);o*=255*o;var s=Math.sin(Math.PI*(a+1/3));s*=255*s;var l=Math.sin(Math.PI*(a+2/3));return l*=255*l,65536*Math.floor(o)+256*Math.floor(l)+1*Math.floor(s)}},{key:\"range\",value:function(){return void 0!==this.min&&void 0!==this.max?[this.min,this.max]:null}}]),r}(n),u=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,a){var o,s;if(_classCallCheck(this,r),o=t.call(this),o.gradient=\"linear\",o.colors=new Array,Array.isArray(e)&&e.length>=2?(o.max=e[1],o.min=e[0],s=n):(o.min=e,o.max=n,s=a),s){var l,h=_createForOfIteratorHelper(s);try{for(h.s();!(l=h.n()).done;){var u=l.value;o.colors.push(i.CC.color(u))}}catch(c){h.e(c)}finally{h.f()}}else o.colors.push(i.CC.color(0));return _possibleConstructorReturn(o)}return _createClass(r,[{key:\"range\",value:function(){return void 0!==this.min&&void 0!==this.max?[this.min,this.max]:null}},{key:\"valueToHex\",value:function(e,t){var r,n;if(t?(r=t[0],n=t[1]):(r=this.min,n=this.max),void 0===e)return 16777215;var o=a(r,n,e);r=o.lo,n=o.hi,e=o.val;var s=this.colors.length,l=(n-r)/s,h=Math.min(Math.floor((e-r)/l),s-1),u=Math.min(h+1,s-1),c=(e-r-h*l)/l,d=this.colors[h],f=this.colors[u];return new i.Color(d.r+c*(f.r-d.r),d.g+c*(f.g-d.g),d.b+c*(f.b-d.b)).getHex()}}]),r}(n),c={rwb:s,RWB:s,roygb:l,ROYGB:l,sinebow:h,linear:u},d=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\"valueToHex\",value:function(e,t){return 0}},{key:\"range\",value:function(){return null}}]),r}(n);d.RWB=s,d.ROYGB=l,d.Sinebow=h,d.CustomLinear=u,d.builtinGradients=c,d.normalizeValue=a,d.getGradient=o},7825:function(e,t,r){\"use strict\";r.r(t),r.d(t,{Label:function(){return l},LabelCount:function(){return o}});var i=r(7693),n=r(1460),a=r(2550),o=0;function s(e,t,r){var i=r;return void 0!==e&&(e instanceof a.Color?i=e.scaled():void 0!==(i=a.CC.color(e)).scaled&&(i=i.scaled())),void 0!==t&&(i.a=parseFloat(t)),i}var l=function(){function e(t,r){_classCallCheck(this,e),this.id=o++,this.stylespec=r||{},this.canvas=document.createElement(\"canvas\"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext(\"2d\"),this.sprite=new i.Sprite,this.text=t,this.frame=this.stylespec.frame}return _createClass(e,[{key:\"getStyle\",value:function(){return this.stylespec}},{key:\"setContext\",value:function(){var e=this.stylespec,t=void 0!==e.useScreen&&e.useScreen,r=e.showBackground;\"0\"!==r&&\"false\"!==r||(r=!1),void 0===r&&(r=!0);var a=e.font?e.font:\"sans-serif\",o=parseInt(e.fontSize)?parseInt(e.fontSize):18,l=s(e.fontColor,e.fontOpacity,{r:255,g:255,b:255,a:1}),h=e.padding?e.padding:4,u=e.borderThickness?e.borderThickness:0,c=s(e.backgroundColor,e.backgroundOpacity,{r:0,g:0,b:0,a:1}),d=s(e.borderColor,e.borderOpacity,c),f=e.position?e.position:{x:-10,y:1,z:1},p=void 0===e.inFront||e.inFront;\"false\"!==p&&\"0\"!==p||(p=!1);var v=e.alignment||i.SpriteAlignment.topLeft;\"string\"==typeof v&&v in i.SpriteAlignment&&(v=i.SpriteAlignment[v]);var g=\"\";e.bold&&(g=\"bold \"),this.context.font=g+o+\"px  \"+a;var m=this.context.measureText(this.text).width;r||(u=0);var y=m+2.5*u+2*h,_=1.25*o+2*u+2*h;if(e.backgroundImage){var b=e.backgroundImage,w=e.backgroundWidth?e.backgroundWidth:b.width,x=e.backgroundHeight?e.backgroundHeight:b.height;w>y&&(y=w),x>_&&(_=x)}if(this.canvas.width=y,this.canvas.height=_,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),g=\"\",e.bold&&(g=\"bold \"),this.context.font=g+o+\"px  \"+a,this.context.fillStyle=\"rgba(\"+c.r+\",\"+c.g+\",\"+c.b+\",\"+c.a+\")\",this.context.strokeStyle=\"rgba(\"+d.r+\",\"+d.g+\",\"+d.b+\",\"+d.a+\")\",e.backgroundGradient){var k=this.context.createLinearGradient(0,_/2,y,_/2),C=n.Gradient.getGradient(e.backgroundGradient),A=C.range(),S=-1,E=1;A&&(S=A[0],E=A[1]);for(var z=E-S,M=0;M<1.01;M+=.1){var T=s(C.valueToHex(S+z*M)),L=\"rgba(\"+T.r+\",\"+T.g+\",\"+T.b+\",\"+T.a+\")\";k.addColorStop(M,L)}this.context.fillStyle=k}this.context.lineWidth=u,r&&function(e,t,r,i,n,a,o){e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+i-a,r),e.quadraticCurveTo(t+i,r,t+i,r+a),e.lineTo(t+i,r+n-a),e.quadraticCurveTo(t+i,r+n,t+i-a,r+n),e.lineTo(t+a,r+n),e.quadraticCurveTo(t,r+n,t,r+n-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),e.fill(),o&&e.stroke()}(this.context,u,u,y-2*u,_-2*u,6,u>0),e.backgroundImage&&this.context.drawImage(b,0,0,y,_),this.context.fillStyle=\"rgba(\"+l.r+\",\"+l.g+\",\"+l.b+\",\"+l.a+\")\",this.context.fillText(this.text,u+h,o+u+h,m);var D=new i.Texture(this.canvas);D.needsUpdate=!0,this.sprite.material=new i.SpriteMaterial({map:D,useScreenCoordinates:t,alignment:v,depthTest:!p,screenOffset:e.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(f.x,f.y,f.z)}},{key:\"dispose\",value:function(){void 0!==this.sprite.material.map&&this.sprite.material.map.dispose(),void 0!==this.sprite.material&&this.sprite.material.dispose()}}]),e}()},9192:function(e,t,r){\"use strict\";r.r(t),r.d(t,{MarchingCube:function(){return l},MarchingCubeInitializer:function(){return s},PointGrid:function(){return h},ProteinSurface:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return u})),SurfaceType:function(){return i},setSyncSurface:function(){return o},syncSurface:function(){return a}});var i,n=r(9652);!function(e){e[e.VDW=1]=\"VDW\",e[e.MS=2]=\"MS\",e[e.SAS=3]=\"SAS\",e[e.SES=4]=\"SES\"}(i||(i={}));var a=!1;function o(e){a=e}(window.navigator.userAgent.indexOf(\"MSIE \")>=0||window.navigator.userAgent.indexOf(\"Trident/\")>=0)&&(a=!0);var s=function(){function e(){_classCallCheck(this,e),this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}return _createClass(e,[{key:\"march\",value:function(e,t,r,i){var a=!!i.fulltable,o=i.hasOwnProperty(\"origin\")&&i.origin.hasOwnProperty(\"x\")?i.origin:{x:0,y:0,z:0},s=!!i.voxel,l=i.matrix,h=i.nX||0,u=i.nY||0,c=i.nZ||0,d=i.scale||1,f=null;f=i.unitCube?i.unitCube:{x:d,y:d,z:d};var p,v,g=new Int32Array(h*u*c);for(p=0,v=g.length;p<v;++p)g[p]=-1;var m=function(e,r,i,a,h,d){var p={x:0,y:0,z:0},v=h;if(!(a&1<<h)&&!!(a&1<<d)&&(v=d),1&v&&i++,2&v&&r++,4&v&&e++,l){var m=new n.Vector3(e,r,i);m=m.applyMatrix4(l),p={x:m.x,y:m.y,z:m.z}}else p.x=o.x+f.x*e,p.y=o.y+f.y*r,p.z=o.z+f.z*i;var y=(u*e+r)*c+i;return s?(t.push(p),t.length-1):(g[y]<0&&(g[y]=t.length,t.push(p)),g[y])},y=new Int32Array(12),_=a?this.edgeTable2:this.edgeTable,b=a?this.triTable2:this.triTable;for(p=0;p<h-1;++p)for(var w=0;w<u-1;++w)for(var x=0;x<c-1;++x){for(var k=0,C=0;C<8;++C)k|=!!(e[(u*(p+((4&C)>>2))+w+((2&C)>>1))*c+x+(1&C)]&this.ISDONE)<<C;if(0!==k&&255!==k){var A=_[k];if(0!==A){var S=b[k];1&A&&(y[0]=m(p,w,x,k,0,1)),2&A&&(y[1]=m(p,w,x,k,1,3)),4&A&&(y[2]=m(p,w,x,k,3,2)),8&A&&(y[3]=m(p,w,x,k,2,0)),16&A&&(y[4]=m(p,w,x,k,4,5)),32&A&&(y[5]=m(p,w,x,k,5,7)),64&A&&(y[6]=m(p,w,x,k,7,6)),128&A&&(y[7]=m(p,w,x,k,6,4)),256&A&&(y[8]=m(p,w,x,k,0,4)),512&A&&(y[9]=m(p,w,x,k,1,5)),1024&A&&(y[10]=m(p,w,x,k,3,7)),2048&A&&(y[11]=m(p,w,x,k,2,6));for(var E=0;E<S.length;E+=3){var z=y[S[E]],M=y[S[E+1]],T=y[S[E+2]];s&&E>=3&&(t.push(t[z]),z=t.length-1,t.push(t[M]),M=t.length-1,t.push(t[T]),T=t.length-1),r.push(z),r.push(M),r.push(T)}}}}}},{key:\"laplacianSmooth\",value:function(e,t,r){var i,n,a,o,s,l=new Array(t.length);for(i=0,n=t.length;i<n;i++)l[i]={x:0,y:0,z:0};var h,u=new Array(20);for(i=0;i<20;i++)u[i]=new Array(t.length);for(i=0,n=t.length;i<n;i++)u[0][i]=0;for(i=0,n=r.length/3;i<n;i++){var c=3*i,d=3*i+1,f=3*i+2;for(h=!0,a=0,o=u[0][r[c]];a<o;a++)if(r[d]==u[a+1][r[c]]){h=!1;break}for(h&&(u[0][r[c]]++,u[u[0][r[c]]][r[c]]=r[d]),h=!0,a=0,o=u[0][r[c]];a<o;a++)if(r[f]==u[a+1][r[c]]){h=!1;break}for(h&&(u[0][r[c]]++,u[u[0][r[c]]][r[c]]=r[f]),h=!0,a=0,o=u[0][r[d]];a<o;a++)if(r[c]==u[a+1][r[d]]){h=!1;break}for(h&&(u[0][r[d]]++,u[u[0][r[d]]][r[d]]=r[c]),h=!0,a=0,o=u[0][r[d]];a<o;a++)if(r[f]==u[a+1][r[d]]){h=!1;break}for(h&&(u[0][r[d]]++,u[u[0][r[d]]][r[d]]=r[f]),h=!0,a=0;a<u[0][r[f]];a++)if(r[c]==u[a+1][r[f]]){h=!1;break}for(h&&(u[0][r[f]]++,u[u[0][r[f]]][r[f]]=r[c]),h=!0,a=0,o=u[0][r[f]];a<o;a++)if(r[d]==u[a+1][r[f]]){h=!1;break}h&&(u[0][r[f]]++,u[u[0][r[f]]][r[f]]=r[d])}var p=.5;for(s=0;s<e;s++){for(i=0,n=t.length;i<n;i++)if(u[0][i]<3)l[i].x=t[i].x,l[i].y=t[i].y,l[i].z=t[i].z;else if(3==u[0][i]||4==u[0][i]){for(l[i].x=0,l[i].y=0,l[i].z=0,a=0,o=u[0][i];a<o;a++)l[i].x+=t[u[a+1][i]].x,l[i].y+=t[u[a+1][i]].y,l[i].z+=t[u[a+1][i]].z;l[i].x+=p*t[i].x,l[i].y+=p*t[i].y,l[i].z+=p*t[i].z,l[i].x/=p+u[0][i],l[i].y/=p+u[0][i],l[i].z/=p+u[0][i]}else{for(l[i].x=0,l[i].y=0,l[i].z=0,a=0,o=u[0][i];a<o;a++)l[i].x+=t[u[a+1][i]].x,l[i].y+=t[u[a+1][i]].y,l[i].z+=t[u[a+1][i]].z;l[i].x+=1*t[i].x,l[i].y+=1*t[i].y,l[i].z+=1*t[i].z,l[i].x/=1+u[0][i],l[i].y/=1+u[0][i],l[i].z/=1+u[0][i]}for(i=0,n=t.length;i<n;i++)t[i].x=l[i].x,t[i].y=l[i].y,t[i].z=l[i].z}}}]),e}(),l=new s,h=function(){function e(t,r,i){_classCallCheck(this,e),this.data=new Int32Array(t*r*i*3),this.width=r,this.height=i}return _createClass(e,[{key:\"set\",value:function(e,t,r,i){var n=3*((e*this.width+t)*this.height+r);this.data[n]=i.ix,this.data[n+1]=i.iy,this.data[n+2]=i.iz}},{key:\"get\",value:function(e,t,r){var i=3*((e*this.width+t)*this.height+r);return{ix:this.data[i],iy:this.data[i+1],iz:this.data[i+2]}}}]),e}(),u=function(){function e(){_classCallCheck(this,e),this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])]}return _createClass(e,[{key:\"getVDWIndex\",value:function(e){return e.elem&&void 0!==this.vdwRadii[e.elem]?e.elem:\"X\"}},{key:\"getFacesAndVertices\",value:function(e){for(var t={},r=0,i=e.length;r<i;r++)t[e[r]]=!0;for(var n=this.verts,a=0,o=n.length;a<o;a++)n[a].x=n[a].x/this.scaleFactor-this.ptranx,n[a].y=n[a].y/this.scaleFactor-this.ptrany,n[a].z=n[a].z/this.scaleFactor-this.ptranz;for(var s=[],l=0,h=this.faces.length;l<h;l+=3){var u=this.faces[l],c=this.faces[l+1],d=this.faces[l+2],f=n[u].atomid,p=n[c].atomid,v=n[d].atomid,g=f;p<g&&(g=p),v<g&&(g=v),t[g]&&u!==c&&c!==d&&u!==d&&(s.push(u),s.push(c),s.push(d))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:n,faces:s}}},{key:\"initparm\",value:function(e,t,r){r>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);var i=1/this.scaleFactor*5.5;this.pminx=e[0][0],this.pmaxx=e[1][0],this.pminy=e[0][1],this.pmaxy=e[1][1],this.pminz=e[0][2],this.pmaxz=e[1][2],t?(this.pminx-=this.probeRadius+i,this.pminy-=this.probeRadius+i,this.pminz-=this.probeRadius+i,this.pmaxx+=this.probeRadius+i,this.pmaxy+=this.probeRadius+i,this.pmaxz+=this.probeRadius+i):(this.pminx-=i,this.pminy-=i,this.pminz-=i,this.pmaxx+=i,this.pmaxy+=i,this.pmaxz+=i),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(t),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}},{key:\"boundingatom\",value:function(e){var t={};for(var r in this.vdwRadii){var i=this.vdwRadii[r];t[r]=e?(i+this.probeRadius)*this.scaleFactor+.5:i*this.scaleFactor+.5;var n=t[r]*t[r];this.widxz[r]=Math.floor(t[r])+1,this.depty[r]=new Int32Array(this.widxz[r]*this.widxz[r]);for(var a=0,o=0;o<this.widxz[r];o++)for(var s=0;s<this.widxz[r];s++){var l=o*o+s*s;if(l>n)this.depty[r][a]=-1;else{var h=Math.sqrt(n-l);this.depty[r][a]=Math.floor(h)}a++}}}},{key:\"fillvoxels\",value:function(e,t){for(var r=0,i=this.vpBits.length;r<i;r++)this.vpBits[r]=0,this.vpDistance[r]=-1,this.vpAtomID[r]=-1;for(var n in t){var a=e[t[n]];void 0!==a&&this.fillAtom(a,e)}for(var o=0,s=this.vpBits.length;o<s;o++)this.vpBits[o]&this.INOUT&&(this.vpBits[o]|=this.ISDONE)}},{key:\"fillAtom\",value:function(e,t){for(var r=Math.floor(.5+this.scaleFactor*(e.x+this.ptranx)),i=Math.floor(.5+this.scaleFactor*(e.y+this.ptrany)),n=Math.floor(.5+this.scaleFactor*(e.z+this.ptranz)),a=this.getVDWIndex(e),o=0,s=this.pWidth*this.pHeight,l=0,h=this.widxz[a];l<h;l++)for(var u=0;u<h;u++){if(-1!=this.depty[a][o])for(var c=-1;c<2;c++)for(var d=-1;d<2;d++)for(var f=-1;f<2;f++)if(0!==c&&0!==d&&0!==f)for(var p=c*l,v=f*u,g=0;g<=this.depty[a][o];g++){var m=g*d,y=r+p,_=i+m,b=n+v;if(!(y<0||_<0||b<0||y>=this.pLength||_>=this.pWidth||b>=this.pHeight)){var w=y*s+_*this.pHeight+b;if(this.vpBits[w]&this.INOUT){var x=t[this.vpAtomID[w]];if(x.serial!=e.serial){var k=r+p-Math.floor(.5+this.scaleFactor*(x.x+this.ptranx)),C=i+m-Math.floor(.5+this.scaleFactor*(x.y+this.ptrany)),A=n+v-Math.floor(.5+this.scaleFactor*(x.z+this.ptranz));p*p+m*m+v*v<k*k+C*C+A*A&&(this.vpAtomID[w]=e.serial)}}else this.vpBits[w]|=this.INOUT,this.vpAtomID[w]=e.serial}}o++}}},{key:\"fillvoxelswaals\",value:function(e,t){for(var r=0,i=this.vpBits.length;r<i;r++)this.vpBits[r]&=~this.ISDONE;for(var n in t){var a=e[t[n]];void 0!==a&&this.fillAtomWaals(a,e)}}},{key:\"fillAtomWaals\",value:function(e,t){for(var r=0,i=Math.floor(.5+this.scaleFactor*(e.x+this.ptranx)),n=Math.floor(.5+this.scaleFactor*(e.y+this.ptrany)),a=Math.floor(.5+this.scaleFactor*(e.z+this.ptranz)),o=this.getVDWIndex(e),s=this.pWidth*this.pHeight,l=0,h=this.widxz[o];l<h;l++)for(var u=0;u<h;u++){if(-1!=this.depty[o][r])for(var c=-1;c<2;c++)for(var d=-1;d<2;d++)for(var f=-1;f<2;f++)if(0!==c&&0!==d&&0!==f)for(var p=c*l,v=f*u,g=0;g<=this.depty[o][r];g++){var m=g*d,y=i+p,_=n+m,b=a+v;if(!(y<0||_<0||b<0||y>=this.pLength||_>=this.pWidth||b>=this.pHeight)){var w=y*s+_*this.pHeight+b;if(this.vpBits[w]&this.ISDONE){var x=t[this.vpAtomID[w]];if(x.serial!=e.serial){var k=i+p-Math.floor(.5+this.scaleFactor*(x.x+this.ptranx)),C=n+m-Math.floor(.5+this.scaleFactor*(x.y+this.ptrany)),A=a+v-Math.floor(.5+this.scaleFactor*(x.z+this.ptranz));p*p+m*m+v*v<k*k+C*C+A*A&&(this.vpAtomID[w]=e.serial)}}else this.vpBits[w]|=this.ISDONE,this.vpAtomID[w]=e.serial}}r++}}},{key:\"buildboundary\",value:function(){for(var e=this.pWidth*this.pHeight,t=0;t<this.pLength;t++)for(var r=0;r<this.pHeight;r++)for(var i=0;i<this.pWidth;i++){var n=t*e+i*this.pHeight+r;if(this.vpBits[n]&this.INOUT)for(var a=0;a<26;){var o=t+this.nb[a][0],s=r+this.nb[a][2],l=i+this.nb[a][1];if(o>-1&&o<this.pLength&&l>-1&&l<this.pWidth&&s>-1&&s<this.pHeight&&!(this.vpBits[o*e+l*this.pHeight+s]&this.INOUT)){this.vpBits[n]|=this.ISBOUND;break}a++}}}},{key:\"fastdistancemap\",value:function(){for(var e,t=new h(this.pLength,this.pWidth,this.pHeight),r=this.pWidth*this.pHeight,i=this.cutRadius*this.cutRadius,n=[],a=[],o=0;o<this.pLength;o++)for(var s=0;s<this.pWidth;s++)for(var l=0;l<this.pHeight;l++)if(e=o*r+s*this.pHeight+l,this.vpBits[e]&=~this.ISDONE,this.vpBits[e]&this.INOUT&&this.vpBits[e]&this.ISBOUND){var u={ix:o,iy:s,iz:l};t.set(o,s,l,u),n.push(u),this.vpDistance[e]=0,this.vpBits[e]|=this.ISDONE,this.vpBits[e]&=~this.ISBOUND}do{a=this.fastoneshell(n,t),n=[];for(var c=0,d=a.length;c<d;c++)e=r*a[c].ix+this.pHeight*a[c].iy+a[c].iz,this.vpBits[e]&=~this.ISBOUND,this.vpDistance[e]<=1.0404*i&&n.push({ix:a[c].ix,iy:a[c].iy,iz:a[c].iz})}while(0!==n.length);n=[],a=[],t=null;var f=this.scaleFactor-.5;f<0&&(f=0);for(var p=i-.5/(.1+f),v=0;v<this.pLength;v++)for(var g=0;g<this.pWidth;g++)for(var m=0;m<this.pHeight;m++)e=v*r+g*this.pHeight+m,this.vpBits[e]&=~this.ISBOUND,this.vpBits[e]&this.INOUT&&(this.vpBits[e]&this.ISDONE&&!(this.vpBits[e]&this.ISDONE&&this.vpDistance[e]>=p)||(this.vpBits[e]|=this.ISBOUND))}},{key:\"fastoneshell\",value:function(e,t){var r,i,n,a,o,s,l,h,u,c=[];if(0===e.length)return c;for(var d={ix:-1,iy:-1,iz:-1},f=this.pWidth*this.pHeight,p=0,v=e.length;p<v;p++){r=e[p].ix,i=e[p].iy,n=e[p].iz,h=t.get(r,i,n);for(var g=0;g<6;g++)d.ix=r+this.nb[g][0],d.iy=i+this.nb[g][1],d.iz=n+this.nb[g][2],d.ix<this.pLength&&d.ix>-1&&d.iy<this.pWidth&&d.iy>-1&&d.iz<this.pHeight&&d.iz>-1&&(u=d.ix*f+this.pHeight*d.iy+d.iz,this.vpBits[u]&this.INOUT&&!(this.vpBits[u]&this.ISDONE)?(t.set(d.ix,d.iy,n+this.nb[g][2],h),a=d.ix-h.ix,o=d.iy-h.iy,s=d.iz-h.iz,l=a*a+o*o+s*s,this.vpDistance[u]=l,this.vpBits[u]|=this.ISDONE,this.vpBits[u]|=this.ISBOUND,c.push({ix:d.ix,iy:d.iy,iz:d.iz})):this.vpBits[u]&this.INOUT&&this.vpBits[u]&this.ISDONE&&(a=d.ix-h.ix,o=d.iy-h.iy,s=d.iz-h.iz,l=a*a+o*o+s*s,l<this.vpDistance[u]&&(t.set(d.ix,d.iy,d.iz,h),this.vpDistance[u]=l,this.vpBits[u]&this.ISBOUND||(this.vpBits[u]|=this.ISBOUND,c.push({ix:d.ix,iy:d.iy,iz:d.iz})))))}for(var m=0,y=e.length;m<y;m++){r=e[m].ix,i=e[m].iy,n=e[m].iz,h=t.get(r,i,n);for(var _=6;_<18;_++)d.ix=r+this.nb[_][0],d.iy=i+this.nb[_][1],d.iz=n+this.nb[_][2],d.ix<this.pLength&&d.ix>-1&&d.iy<this.pWidth&&d.iy>-1&&d.iz<this.pHeight&&d.iz>-1&&(u=d.ix*f+this.pHeight*d.iy+d.iz,this.vpBits[u]&this.INOUT&&!(this.vpBits[u]&this.ISDONE)?(t.set(d.ix,d.iy,n+this.nb[_][2],h),a=d.ix-h.ix,o=d.iy-h.iy,s=d.iz-h.iz,l=a*a+o*o+s*s,this.vpDistance[u]=l,this.vpBits[u]|=this.ISDONE,this.vpBits[u]|=this.ISBOUND,c.push({ix:d.ix,iy:d.iy,iz:d.iz})):this.vpBits[u]&this.INOUT&&this.vpBits[u]&this.ISDONE&&(a=d.ix-h.ix,o=d.iy-h.iy,s=d.iz-h.iz,l=a*a+o*o+s*s,l<this.vpDistance[u]&&(t.set(d.ix,d.iy,d.iz,h),this.vpDistance[u]=l,this.vpBits[u]&this.ISBOUND||(this.vpBits[u]|=this.ISBOUND,c.push({ix:d.ix,iy:d.iy,iz:d.iz})))))}for(var b=0,w=e.length;b<w;b++){r=e[b].ix,i=e[b].iy,n=e[b].iz,h=t.get(r,i,n);for(var x=18;x<26;x++)d.ix=r+this.nb[x][0],d.iy=i+this.nb[x][1],d.iz=n+this.nb[x][2],d.ix<this.pLength&&d.ix>-1&&d.iy<this.pWidth&&d.iy>-1&&d.iz<this.pHeight&&d.iz>-1&&(u=d.ix*f+this.pHeight*d.iy+d.iz,this.vpBits[u]&this.INOUT&&!(this.vpBits[u]&this.ISDONE)?(t.set(d.ix,d.iy,n+this.nb[x][2],h),a=d.ix-h.ix,o=d.iy-h.iy,s=d.iz-h.iz,l=a*a+o*o+s*s,this.vpDistance[u]=l,this.vpBits[u]|=this.ISDONE,this.vpBits[u]|=this.ISBOUND,c.push({ix:d.ix,iy:d.iy,iz:d.iz})):this.vpBits[u]&this.INOUT&&this.vpBits[u]&this.ISDONE&&(a=d.ix-h.ix,o=d.iy-h.iy,s=d.iz-h.iz,l=a*a+o*o+s*s,l<this.vpDistance[u]&&(t.set(d.ix,d.iy,d.iz,h),this.vpDistance[u]=l,this.vpBits[u]&this.ISBOUND||(this.vpBits[u]|=this.ISBOUND,c.push({ix:d.ix,iy:d.iy,iz:d.iz})))))}return c}},{key:\"marchingcubeinit\",value:function(e){for(var t=0,r=this.vpBits.length;t<r;t++)1==e?this.vpBits[t]&=~this.ISBOUND:4==e?(this.vpBits[t]&=~this.ISDONE,this.vpBits[t]&this.ISBOUND&&(this.vpBits[t]|=this.ISDONE),this.vpBits[t]&=~this.ISBOUND):2==e?this.vpBits[t]&this.ISBOUND&&this.vpBits[t]&this.ISDONE?this.vpBits[t]&=~this.ISBOUND:this.vpBits[t]&this.ISBOUND&&!(this.vpBits[t]&this.ISDONE)&&(this.vpBits[t]|=this.ISDONE):3==e&&(this.vpBits[t]&=~this.ISBOUND)}},{key:\"marchingcube\",value:function(e){this.marchingcubeinit(e),this.verts=[],this.faces=[],l.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});for(var t=this.pWidth*this.pHeight,r=0,i=this.verts.length;r<i;r++)this.verts[r].atomid=this.vpAtomID[this.verts[r].x*t+this.pHeight*this.verts[r].y+this.verts[r].z];l.laplacianSmooth(1,this.verts,this.faces)}}]),e}()},7323:function(e,t,r){\"use strict\";r.r(t),r.d(t,{VolumeData:function(){return l}});var i=r(9005),n=r(9652),a=r(5591),o=r(972),s=r(7885),l=function(){function e(t,r,o){if(_classCallCheck(this,e),this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set([\"ccp4\",\"CCP4\"]),this.getCoordinates=function(e){var t=e/(this.size.y*this.size.z),r=e%(this.size.y*this.size.z),i=e%this.size.z;return t*=this.unit.x,r*=this.unit.y,i*=this.unit.z,{x:t+=this.origin.x,y:r+=this.origin.y,z:i+=this.origin.z}},this.vasp=function(e){var t=e.replace(/^\\s+/,\"\").split(/[\\n\\r]/),r=(0,a.VASP)(e)[0].length;if(0==r)return console.log(\"No good formating of CHG or CHGCAR file, not atomic information provided in the file.\"),void(this.data=[]);var i,o=1.889725992,s=parseFloat(t[1]);i=t[2].replace(/^\\s+/,\"\").split(/\\s+/);var l=new n.Vector3(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2])).multiplyScalar(s*o);i=t[3].replace(/^\\s+/,\"\").split(/\\s+/);var h=new n.Vector3(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2])).multiplyScalar(s*o);i=t[4].replace(/^\\s+/,\"\").split(/\\s+/);var u=new n.Vector3(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2])).multiplyScalar(s*o),c=l.x*(h.y*u.z-u.y*h.z)-h.x*(l.y*u.z-u.y*l.z)+u.x*(l.y*h.z-h.y*l.z),d=1/(c=Math.abs(c)/Math.pow(o,3));t.splice(0,8+r+1);var f=t[0].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \"),p=Math.abs(f[0]),v=Math.abs(f[1]),g=Math.abs(f[2]),m=this.origin=new n.Vector3(0,0,0);this.size={x:p,y:v,z:g},this.unit=new n.Vector3(l.x,h.y,u.z),l=l.multiplyScalar(1/(o*p)),h=h.multiplyScalar(1/(o*v)),u=u.multiplyScalar(1/(o*g)),0==l.y&&0==l.z&&0==h.x&&0==h.z&&0==u.x&&0==u.y||(this.matrix=new n.Matrix4(l.x,h.x,u.x,0,l.y,h.y,u.y,0,l.z,h.z,u.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new n.Matrix4).makeTranslation(m.x,m.y,m.z)),this.origin=new n.Vector3(0,0,0),this.unit=new n.Vector3(1,1,1)),t.splice(0,1);var y=t.join(\" \");(y=(y=y.replace(/^\\s+/,\"\")).split(/[\\s\\r]+/)).splice(p*v*g+1);for(var _=new Float32Array(y),b=0;b<_.length;b++)_[b]=_[b]*d*.036749309;this.data=_},this.dx=function(e){var t,r=e.split(/[\\n\\r]+/),i=/gridpositions\\s+counts\\s+(\\d+)\\s+(\\d+)\\s+(\\d+)/,a=/^origin\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)/,o=/^delta\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)/,s=/data follows/,l=0;for(l=0;l<r.length;l++){var h=r[l];if(t=i.exec(h)){var u=parseInt(t[1]),c=parseInt(t[2]),d=parseInt(t[3]);this.size={x:u,y:c,z:d}}else if(t=o.exec(h)){var f=parseFloat(t[1]);if(0==parseFloat(t[2])&&0==parseFloat(t[3])||console.log(\"Non-orthogonal delta matrix not currently supported in dx format\"),h=r[l+=1],null==(t=o.exec(h)))return void console.log(\"Parse error in dx delta matrix\");var p=parseFloat(t[2]);if(0==parseFloat(t[1])&&0==parseFloat(t[3])||console.log(\"Non-orthogonal delta matrix not currently supported in dx format\"),h=r[l+=1],null==(t=o.exec(h)))return void console.log(\"Parse error in dx delta matrix\");var v=parseFloat(t[3]);0==parseFloat(t[1])&&0==parseFloat(t[2])||console.log(\"Non-orthogonal delta matrix not currently supported in dx format\"),this.unit=new n.Vector3(f,p,v)}else if(t=a.exec(h)){var g=parseFloat(t[1]),m=parseFloat(t[2]),y=parseFloat(t[3]);this.origin=new n.Vector3(g,m,y)}else if(t=s.exec(h))break}if(l+=1,this.size&&this.origin&&this.unit&&this.size){var _=r.splice(l).join(\" \");_=_.split(/[\\s\\r]+/),this.data=new Float32Array(_)}else console.log(\"Error parsing dx format\")},r=r.toLowerCase(),/\\.gz$/.test(r)){r=r.replace(/\\.gz$/,\"\");try{this[r]&&this.isbinary.has(r)?(\"string\"==typeof t&&(t=(0,i.base64ToArray)(t)),t=(0,s.inflate)(t)):t=new TextDecoder(\"utf-8\").decode((0,s.inflate)(t))}catch(t){console.log(t)}}if(this[r]&&(this.isbinary.has(r)&&\"string\"==typeof t&&(t=(0,i.base64ToArray)(t)),this[r](t)),o){if(o.negate)for(var l=0,h=this.data.length;l<h;l++)this.data[l]=-this.data[l];if(o.normalize){for(var u=0,c=0,d=this.data.length;c<d;c++)u+=this.data[c];var f=u/this.data.length;u=0;for(var p=0,v=this.data.length;p<v;p++){var g=this.data[p]-f;u+=g*g}for(var m=u/this.data.length,y=0,_=this.data.length;y<_;y++)this.data[y]=(this.data[y]-f)/m}}}return _createClass(e,[{key:\"getIndex\",value:function(e,t,r){if(this.matrix){null==this.inversematrix&&(this.inversematrix=(new n.Matrix4).getInverse(this.matrix));var i=new n.Vector3(e,t,r);e=(i=i.applyMatrix4(this.inversematrix)).x,t=i.y,r=i.z}else e-=this.origin.x,t-=this.origin.y,r-=this.origin.z,e/=this.unit.x,t/=this.unit.y,r/=this.unit.z;return e=Math.round(e),t=Math.round(t),r=Math.round(r),e<0||e>=this.size.x||t<0||t>=this.size.y||r<0||r>=this.size.z?-1:e*this.size.y*this.size.z+t*this.size.z+r}},{key:\"getVal\",value:function(e,t,r){var i=this.getIndex(e,t,r);return i<0?0:this.data[i]}},{key:\"cube\",value:function(e){var t=e.split(/\\r?\\n/);if(!(t.length<6)){var r=(0,o.CUBE)(e,{}).modelData[0].cryst,i=t[2].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \"),n=parseFloat(i[0]),a=Math.abs(n);this.origin=r.origin,this.size=r.size,this.unit=r.unit,this.matrix=r.matrix4;var s=6;n<0&&s++;var l=t.splice(a+s).join(\" \");l=(l=l.replace(/^\\s+/,\"\")).split(/[\\s\\r]+/),this.data=new Float32Array(l)}}},{key:\"ccp4\",value:function(e){var t={};e=new Int8Array(e);var r=new Int32Array(e.buffer,0,56),i=new Float32Array(e.buffer,0,56),a=new DataView(e.buffer);if(t.MAP=String.fromCharCode(a.getUint8(208),a.getUint8(209),a.getUint8(210),a.getUint8(211)),t.MACHST=[a.getUint8(212),a.getUint8(213)],17===t.MACHST[0]&&17===t.MACHST[1])for(var o=e.byteLength,s=0;s<o;s+=4)a.setFloat32(s,a.getFloat32(s),!0);t.NX=r[0],t.NY=r[1],t.NZ=r[2],t.MODE=r[3],t.NXSTART=r[4],t.NYSTART=r[5],t.NZSTART=r[6],t.MX=r[7],t.MY=r[8],t.MZ=r[9],t.xlen=i[10],t.ylen=i[11],t.zlen=i[12],t.alpha=i[13],t.beta=i[14],t.gamma=i[15],t.MAPC=r[16],t.MAPR=r[17],t.MAPS=r[18],t.DMIN=i[19],t.DMAX=i[20],t.DMEAN=i[21],t.ISPG=r[22],t.NSYMBT=r[23],t.LSKFLG=r[24],t.originX=i[49],t.originY=i[50],t.originZ=i[51],t.ARMS=i[54];var l=t,h=[l.xlen,0,0],u=[l.ylen*Math.cos(Math.PI/180*l.gamma),l.ylen*Math.sin(Math.PI/180*l.gamma),0],c=[l.zlen*Math.cos(Math.PI/180*l.beta),l.zlen*(Math.cos(Math.PI/180*l.alpha)-Math.cos(Math.PI/180*l.gamma)*Math.cos(Math.PI/180*l.beta))/Math.sin(Math.PI/180*l.gamma),0];c[2]=Math.sqrt(l.zlen*l.zlen*Math.sin(Math.PI/180*l.beta)*Math.sin(Math.PI/180*l.beta)-c[1]*c[1]);var d=[0,h,u,c],f=[0,l.MX,l.MY,l.MZ],p=[0,l.MAPC,l.MAPR,l.MAPS];this.matrix=new n.Matrix4,this.matrix.set(d[p[1]][0]/f[p[1]],d[p[2]][0]/f[p[2]],d[p[3]][0]/f[p[3]],0,d[p[1]][1]/f[p[1]],d[p[2]][1]/f[p[2]],d[p[3]][1]/f[p[3]],0,d[p[1]][2]/f[p[1]],d[p[2]][2]/f[p[2]],d[p[3]][2]/f[p[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new n.Matrix4).makeTranslation(l.NXSTART+l.originX,l.NYSTART+l.originY,l.NZSTART+l.originZ)),this.origin=new n.Vector3(0,0,0),this.unit=new n.Vector3(1,1,1),this.size={x:t.NX,y:t.NY,z:t.NZ},this.dimensionorder=[t.MAPC,t.MAPR,t.MAPS];var v=new Float32Array(e.buffer,1024+t.NSYMBT),g=t.NX,m=t.NY,y=t.NZ;this.data=new Float32Array(g*m*y);for(var _=0;_<g;_++)for(var b=0;b<m;b++)for(var w=0;w<y;w++)this.data[(_*m+b)*y+w]=v[(w*m+b)*g+_]}}]),e}()},1496:function(e,t,r){\"use strict\";r.r(t),r.d(t,{GLVolumetricRender:function(){return l}});var i=r(3351),n=r(9652),a=r(7693),o=r(2550),s=r(8783),l=function(){function e(t,r){_classCallCheck(this,e),this.hidden=!1,this.boundingSphere=new i.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,r=r||{};var a,l,h,u,c,d,f,p,v,g,m=Object.assign([],r.transferfn);this.subsamples=r.subsamples||5,m.forEach((function(e){e.value=parseFloat(e.value)})),m.sort((function(e,t){return e.value-t.value})),this.min=m[0].value,0==m.length&&m.push(m[0]),this.max=m[m.length-1].value;for(var y=0;y<m.length-1;y++)if(h=o.CC.color(m[y].color),u=o.CC.color(m[y+1].color),v=m[y].opacity,g=m[y+1].opacity,(a=Math.floor(256*(m[y].value-this.min)/(this.max-this.min)))!=(l=Math.floor(256*(m[y+1].value-this.min)/(this.max-this.min)))){c=e.interpolateArray([255*h.r,255*u.r],l-a),d=e.interpolateArray([255*h.g,255*u.g],l-a),f=e.interpolateArray([255*h.b,255*u.b],l-a),p=e.interpolateArray([255*v,255*g],l-a);for(var _=0;_<c.length;_++)this.transferfunctionbuffer.push(c[_]),this.transferfunctionbuffer.push(d[_]),this.transferfunctionbuffer.push(f[_]),this.transferfunctionbuffer.push(p[_])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),t.matrix){var b=new n.Vector3(0,0,0),w=new n.Vector3(t.size.x,t.size.y,t.size.z),x=new n.Vector3(1,1,1);b.applyMatrix4(t.matrix),w.applyMatrix4(t.matrix),x.applyMatrix4(t.matrix).sub(b),this.extent=[[b.x,b.y,b.z],[w.x,w.y,w.z]];for(var k=1;k<7;k++)w.x=1&k?t.size.x:0,w.y=2&k?t.size.y:0,w.z=4&k?t.size.z:0,w.applyMatrix4(t.matrix),this.extent[0][0]=Math.min(this.extent[0][0],w.x),this.extent[0][1]=Math.min(this.extent[0][1],w.y),this.extent[0][2]=Math.min(this.extent[0][2],w.z),this.extent[1][0]=Math.max(this.extent[1][0],w.x),this.extent[1][1]=Math.max(this.extent[1][1],w.y),this.extent[1][2]=Math.max(this.extent[1][2],w.z);var C=w.x-b.x,A=w.y-b.y,S=w.z-b.z;this.maxdepth=Math.sqrt(C*C+A*A+S*S),this.minunit=Math.min(Math.min(x.x,x.y),x.z),this.texmatrix=(new n.Matrix4).identity().scale({x:t.size.x,y:t.size.y,z:t.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(t.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=(new n.Matrix4).identity();var E=t.unit.x*t.size.x,z=t.unit.y*t.size.y,M=t.unit.z*t.size.z;this.texmatrix.makeTranslation(-t.origin.x/E,-t.origin.y/z,-t.origin.z/M),this.texmatrix.scale({x:1/E,y:1/z,z:1/M}),this.minunit=Math.min(Math.min(t.unit.x,t.unit.y),t.unit.z),this.extent=[[t.origin.x,t.origin.y,t.origin.z],[t.origin.x+E,t.origin.y+z,t.origin.z+M]],this.maxdepth=Math.sqrt(E*E+z*z+M*M)}var T=new s.GLShape({});if(T.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=T.finalize(),this.boundingSphere.center=new n.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,void 0!==r.coords&&void 0!==r.seldist){for(var L=new Uint8Array(t.data.length),D=r.seldist,O=D*D,I=0,F=r.coords.length;I<F;I++){var R=r.coords[I],P=R.x-D,N=R.y-D,B=R.z-D,U=R.x+D,G=R.y+D,V=R.z+D;if(t.getIndex(P,N,B)>=0||t.getIndex(U,G,V)>=0)for(var j=P;j<U;j+=this.minunit)for(var H=N;H<G;H+=this.minunit)for(var q=B;q<V;q+=this.minunit){var W=t.getIndex(j,H,q);W>=0&&!L[W]&&(j-R.x)*(j-R.x)+(H-R.y)*(H-R.y)+(q-R.z)*(q-R.z)<O&&(L[W]=1)}}for(var Y=0,Z=t.data.length;Y<Z;Y++)0==L[Y]&&(t.data[Y]=1/0)}this.data=t}return _createClass(e,[{key:\"globj\",value:function(e){if(this.renderedShapeObj&&(e.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new a.Object3D;var t,r=new a.Texture(this.data,!0),i=new a.Texture(this.transferfunctionbuffer,!1);r.needsUpdate=!0,i.needsUpdate=!0,i.flipY=!1,t=new a.VolumetricMaterial({transferfn:i,transfermin:this.min,transfermax:this.max,map:r,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var n=new a.Mesh(this.geo,t);this.shapeObj.add(n),this.renderedShapeObj=this.shapeObj.clone(),e.add(this.renderedShapeObj)}}},{key:\"removegl\",value:function(e){this.renderedShapeObj&&(void 0!==this.renderedShapeObj.geometry&&this.renderedShapeObj.geometry.dispose(),void 0!==this.renderedShapeObj.material&&this.renderedShapeObj.material.dispose(),e.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}},{key:\"position\",get:function(){return this.boundingSphere.center}},{key:\"x\",get:function(){return this.boundingSphere.center.x}},{key:\"y\",get:function(){return this.boundingSphere.center.y}},{key:\"z\",get:function(){return this.boundingSphere.center.z}}],[{key:\"interpolateArray\",value:function(e,t){function r(e,t,r){return e+(t-e)*r}var i=[],n=(e.length-1)/(t-1);i[0]=e[0];for(var a=1;a<t-1;a++){var o=a*n,s=Math.floor(o),l=Math.ceil(o),h=o-s;i[a]=r(e[s],e[l],h)}return i[t-1]=e[e.length-1],i}}]),e}()},7693:function(e,t,r){\"use strict\";var i;r.r(t),r.d(t,{BackSide:function(){return o},Camera:function(){return Ue},ClampToEdgeWrapping:function(){return c},Coloring:function(){return i},Cylinder:function(){return F.Cylinder},DoubleSide:function(){return s},EventDispatcher:function(){return b},FloatType:function(){return g},Fog:function(){return Ge},FrontSide:function(){return a},Geometry:function(){return E},GeometryGroup:function(){return S},GeometryIDCount:function(){return z},ImposterMaterial:function(){return J},InstancedMaterial:function(){return ee},Light:function(){return D},Line:function(){return ue},LineBasicMaterial:function(){return C},LineStyle:function(){return X},LinearFilter:function(){return d},LinearMipMapLinearFilter:function(){return p},Material:function(){return x},MaterialIdCount:function(){return k},Matrix3:function(){return h.Matrix3},Matrix4:function(){return h.Matrix4},Mesh:function(){return ce},MeshDoubleLambertMaterial:function(){return re},MeshLambertMaterial:function(){return te},MeshOutlineMaterial:function(){return ie},NearestFilter:function(){return f},Object3D:function(){return T},Object3DIDCount:function(){return M},Projector:function(){return I},Quaternion:function(){return h.Quaternion},R32Format:function(){return _},RFormat:function(){return y},RGBAFormat:function(){return m},Ray:function(){return h.Ray},Raycaster:function(){return N},Renderer:function(){return He},Scene:function(){return L},ShaderLib:function(){return Pe},ShaderUtils:function(){return Be},Shading:function(){return n},Sphere:function(){return F.Sphere},SphereImposterMaterial:function(){return ne},SphereImposterOutlineMaterial:function(){return ae},Sprite:function(){return de},SpriteAlignment:function(){return u},SpriteMaterial:function(){return oe},SpritePlugin:function(){return Ve},StickImposterMaterial:function(){return se},StickImposterOutlineMaterial:function(){return le},Texture:function(){return $},TextureIdCount:function(){return Q},TextureOperations:function(){return l},Triangle:function(){return F.Triangle},UVMapping:function(){return K},UnsignedByteType:function(){return v},Vector2:function(){return h.Vector2},Vector3:function(){return h.Vector3},VolumetricMaterial:function(){return he},basic:function(){return pe},clamp:function(){return h.clamp},clone:function(){return Ne},conversionMatrix3:function(){return h.conversionMatrix3},degToRad:function(){return h.degToRad},instanced:function(){return ge},intersectObject:function(){return Z},lambert:function(){return ye},lambertdouble:function(){return be},outline:function(){return xe},screen:function(){return ke},screenaa:function(){return Ce},sphereimposter:function(){return Se},sphereimposteroutline:function(){return ze},sprite:function(){return Me},stickimposter:function(){return De},stickimposteroutline:function(){return Ie},volumetric:function(){return Re}}),function(e){e[e.NoColors=0]=\"NoColors\",e[e.FaceColors=1]=\"FaceColors\",e[e.VertexColors=2]=\"VertexColors\"}(i||(i={}));var n,a=0,o=1,s=2;!function(e){e[e.NoShading=0]=\"NoShading\",e[e.FlatShading=1]=\"FlatShading\",e[e.SmoothShading=2]=\"SmoothShading\"}(n||(n={}));var l,h=r(9652),u={topLeft:new h.Vector2(1,-1),topCenter:new h.Vector2(0,-1),topRight:new h.Vector2(-1,-1),centerLeft:new h.Vector2(1,0),center:new h.Vector2(0,0),centerRight:new h.Vector2(-1,0),bottomLeft:new h.Vector2(1,1),bottomCenter:new h.Vector2(0,1),bottomRight:new h.Vector2(-1,1)},c=1001,d=1006,f=1007,p=1008,v=1009,g=1010,m=1021,y=1022,_=1023;!function(e){e[e.MultiplyOperation=0]=\"MultiplyOperation\",e[e.MixOperation=1]=\"MixOperation\",e[e.AddOperation=2]=\"AddOperation\"}(l||(l={}));var b=function(){function e(){_classCallCheck(this,e),this.listeners={}}return _createClass(e,[{key:\"dispatchEvent\",value:function(e){var t=this.listeners[e.type];if(void 0!==t){e.target=this;for(var r=0,i=t.length;r<i;r++)t[r].call(this,e)}}},{key:\"removeEventListener\",value:function(e,t){if(t){var r=this.listeners[e].indexOf(t);-1!==r&&this.listeners[e].splice(r,1)}else this.listeners[e]=[]}},{key:\"addEventListener\",value:function(e,t){void 0===this.listeners[e]&&(this.listeners[e]=[]),-1===this.listeners[e].indexOf(t)&&this.listeners[e].push(t)}}]),e}(),w=r(2550),x=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),e=t.apply(this,arguments),e.id=k++,e.name=\"\",e.side=a,e.opacity=1,e.transparent=!1,e.depthTest=!0,e.depthWrite=!0,e.stencilTest=!0,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.alphaTest=0,e.visible=!0,e.needsUpdate=!0,e.outline=!1,e}return _createClass(r,[{key:\"setValues\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){if(t in this){var i=this[t];i instanceof w.Color&&r instanceof w.Color?i.copy(r):i instanceof w.Color?i.set(r):i instanceof h.Vector3&&r instanceof h.Vector3?i.copy(r):this[t]=r}}else console.warn(\"$3Dmol.Material: '\"+t+\"' parameter is undefined.\")}}},{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.stencilTest=this.stencilTest,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}}]),r}(b),k=0,C=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i;return _classCallCheck(this,r),i=t.call(this),i.color=new w.Color(16777215),i.linewidth=1,i.linecap=\"round\",i.linejoin=\"round\",i.vertexColors=!1,i.fog=!0,i.shaderID=\"basic\",i.setValues(e),i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.color.copy(this.color),e}}]),r}(x),A=65535,S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,e),this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=t}return _createClass(e,[{key:\"setColors\",value:function(e){var t=this.vertexArray,r=this.colorArray;if(!t)throw new Error(\"vertex array not initialized\");if(!r)throw new Error(\"color array not initialized\");if(t.length==r.length)for(var i=0;i<t.length;i+=3){var n=e(t[i],t[i+1],t[i+2]);n instanceof w.Color||(n=w.CC.color(n)),r[i]=n.r,r[i+1]=n.g,r[i+2]=n.b}else console.log(\"Cannot re-color geometry group due to mismatched lengths.\")}},{key:\"getNumVertices\",value:function(){return this.vertices}},{key:\"getVertices\",value:function(){return this.vertexArray}},{key:\"getCentroid\",value:function(){if(!this.vertexArray)throw new Error(\"vertex array not initialized\");for(var e,t,r,i,n=new h.Vector3,a=0;a<this.vertices;++a)e=3*a,t=this.vertexArray[e],r=this.vertexArray[e+1],i=this.vertexArray[e+2],n.x+=t,n.y+=r,n.z+=i;return n.divideScalar(this.vertices),n}},{key:\"setNormals\",value:function(){var e=this.faceArray,t=this.vertexArray,r=this.normalArray;if(this.vertices&&this.faceidx){if(!e)throw new Error(\"face array not initialized\");if(!t)throw new Error(\"vertex array not initialized\");if(!r)throw new Error(\"normal array not initialized\");for(var i,n,a,o,s,l,u,c=0;c<e.length/3;++c)i=3*e[3*c],n=3*e[3*c+1],a=3*e[3*c+2],o=new h.Vector3(t[i],t[i+1],t[i+2]),s=new h.Vector3(t[n],t[n+1],t[n+2]),l=new h.Vector3(t[a],t[a+1],t[a+2]),o.subVectors(o,s),l.subVectors(l,s),l.cross(o),(u=l).normalize(),r[i]+=u.x,r[n]+=u.x,r[a]+=u.x,r[i+1]+=u.y,r[n+1]+=u.y,r[a+1]+=u.y,r[i+2]+=u.z,r[n+2]+=u.z,r[a+2]+=u.z}}},{key:\"setLineIndices\",value:function(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var e=this.faceArray,t=this.lineArray=new Uint16Array(2*this.faceidx);if(this.lineidx=2*this.faceidx,!e)throw new Error(\"face array not initialized\");for(var r=0;r<this.faceidx/3;++r){var i=3*r,n=2*i,a=e[i],o=e[i+1],s=e[i+2];t[n]=a,t[n+1]=o,t[n+2]=a,t[n+3]=s,t[n+4]=o,t[n+5]=s}}}},{key:\"vrml\",value:function(e,t){var r,i,n,a,o,s,l,h,u,c,d,f,p,v,g,m=\"\";m+=e+\"Shape {\\n\"+e+\" appearance Appearance {\\n\"+e+\"  material Material {\\n\"+e+\"   diffuseColor \"+(null===(r=null==t?void 0:t.color)||void 0===r?void 0:r.r)+\" \"+(null===(i=null==t?void 0:t.color)||void 0===i?void 0:i.g)+\" \"+(null===(n=null==t?void 0:t.color)||void 0===n?void 0:n.b)+\"\\n\",(null==t?void 0:t.transparent)&&(m+=e+\"   transparency \"+(1-t.opacity)+\"\\n\"),m+=e+\"  }\\n\",m+=e+\" }\\n\";var y=e;if(e+=\" \",t instanceof C){var _,b,w;m+=e+\"geometry IndexedLineSet {\\n\"+e+\" colorPerVertex TRUE\\n\"+e+\" coord Coordinate {\\n\"+e+\"  point [\\n\";for(var x=0;x<this.vertices;++x){var k=3*x;_=null===(a=this.vertexArray)||void 0===a?void 0:a[k],b=null===(o=this.vertexArray)||void 0===o?void 0:o[k+1],w=null===(s=this.vertexArray)||void 0===s?void 0:s[k+2],m+=e+\"   \"+_+\" \"+b+\" \"+w+\",\\n\"}if(m+=e+\"  ]\\n\",m+=e+\" }\\n\",this.colorArray){m+=e+\" color Color {\\n\"+e+\"  color [\\n\";for(var A=0;A<this.vertices;++A){var S=3*A;_=this.colorArray[S],b=this.colorArray[S+1],w=this.colorArray[S+2],m+=e+\"   \"+_+\" \"+b+\" \"+w+\",\\n\"}m+=e+\"  ]\\n\",m+=e+\" }\\n\"}m+=e+\" coordIndex [\\n\";for(var E=0;E<this.vertices;E+=2)m+=e+\"  \"+E+\", \"+(E+1)+\", -1,\\n\";m+=e+\" ]\\n\",m+=e+\"}\\n\"}else{var z,M,T;m+=e+\"geometry IndexedFaceSet {\\n\"+e+\" colorPerVertex TRUE\\n\"+e+\" normalPerVertex TRUE\\n\"+e+\" solid FALSE\\n\",m+=e+\" coord Coordinate {\\n\"+e+\"  point [\\n\";for(var L=0;L<this.vertices;++L){var D=3*L;z=null===(l=this.vertexArray)||void 0===l?void 0:l[D],M=null===(h=this.vertexArray)||void 0===h?void 0:h[D+1],T=null===(u=this.vertexArray)||void 0===u?void 0:u[D+2],m+=e+\"   \"+z+\" \"+M+\" \"+T+\",\\n\"}m+=e+\"  ]\\n\",m+=e+\" }\\n\",m+=e+\" normal Normal {\\n\"+e+\"  vector [\\n\";for(var O=0;O<this.vertices;++O){var I=3*O;z=null===(c=this.normalArray)||void 0===c?void 0:c[I],M=null===(d=this.normalArray)||void 0===d?void 0:d[I+1],T=null===(f=this.normalArray)||void 0===f?void 0:f[I+2],m+=e+\"   \"+z+\" \"+M+\" \"+T+\",\\n\"}if(m+=e+\"  ]\\n\",m+=e+\" }\\n\",this.colorArray){m+=e+\" color Color {\\n\"+e+\"  color [\\n\";for(var F=0;F<this.vertices;++F){var R=3*F;z=this.colorArray[R],M=this.colorArray[R+1],T=this.colorArray[R+2],m+=e+\"   \"+z+\" \"+M+\" \"+T+\",\\n\"}m+=e+\"  ]\\n\",m+=e+\" }\\n\"}m+=e+\" coordIndex [\\n\";for(var P=0;P<this.faceidx;P+=3)z=null===(p=this.faceArray)||void 0===p?void 0:p[P],M=null===(v=this.faceArray)||void 0===v?void 0:v[P+1],T=null===(g=this.faceArray)||void 0===g?void 0:g[P+2],m+=e+\"  \"+z+\", \"+M+\", \"+T+\", -1,\\n\";m+=e+\" ]\\n\",m+=e+\"}\\n\"}return m+(y+\"}\")}},{key:\"truncateArrayBuffers\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.vertexArray,i=this.colorArray,n=this.normalArray,a=this.faceArray,o=this.lineArray,s=this.radiusArray;this.vertexArray=(null==r?void 0:r.subarray(0,3*this.vertices))||null,this.colorArray=(null==i?void 0:i.subarray(0,3*this.vertices))||null,e?(this.normalArray=(null==n?void 0:n.subarray(0,3*this.vertices))||null,this.faceArray=(null==a?void 0:a.subarray(0,this.faceidx))||null,this.lineidx>0?this.lineArray=(null==o?void 0:o.subarray(0,this.lineidx))||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),s&&(this.radiusArray=s.subarray(0,this.vertices)),t&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}]),e}(),E=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,r),e=t.call(this),e.name=\"\",e.hasTangents=!1,e.dynamic=!0,e.verticesNeedUpdate=!1,e.elementsNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.buffersNeedUpdate=!1,e.imposter=!1,e.instanced=!1,e.geometryGroups=[],e.groups=0,e.id=z++,e.mesh=i,e.radii=n,e.offset=a,e}return _createClass(r,[{key:\"updateGeoGroup\",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!r||r.vertices+t>((null===(e=null==r?void 0:r.vertexArray)||void 0===e?void 0:e.length)||0)/3)&&(r=this.addGeoGroup()),r}},{key:\"vrml\",value:function(e,t){for(var r=\"\",i=this.geometryGroups.length,n=0;n<i;n++)r+=this.geometryGroups[n].vrml(e,t)+\",\\n\";return r}},{key:\"addGeoGroup\",value:function(){var e=new S(this.geometryGroups.length);return this.geometryGroups.push(e),this.groups=this.geometryGroups.length,e.vertexArray=new Float32Array(196605),e.colorArray=new Float32Array(196605),this.mesh&&(e.normalArray=new Float32Array(196605),e.faceArray=new Uint16Array(393210),e.lineArray=new Uint16Array(393210)),this.radii&&(e.radiusArray=new Float32Array(A)),e.useOffset=this.offset,e}},{key:\"setUpNormals\",value:function(){for(var e=0;e<this.groups;e++){var t;(t=this.geometryGroups[e]).setNormals.apply(t,arguments)}}},{key:\"setColors\",value:function(){for(var e=this.geometryGroups.length,t=0;t<e;t++){var r;(r=this.geometryGroups[t]).setColors.apply(r,arguments)}}},{key:\"setUpWireframe\",value:function(){for(var e=0;e<this.groups;e++){var t;(t=this.geometryGroups[e]).setLineIndices.apply(t,arguments)}}},{key:\"initTypedArrays\",value:function(){for(var e=0;e<this.groups;e++){var t=this.geometryGroups[e];!0!==t.__inittedArrays&&t.truncateArrayBuffers(this.mesh,!1)}}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}},{key:\"vertices\",get:function(){for(var e=0,t=0;t<this.groups;t++)e+=this.geometryGroups[t].vertices;return e}}]),r}(b),z=0,M=0,T=function(){function e(){_classCallCheck(this,e),this.id=M++,this.name=\"\",this.children=[],this.position=new h.Vector3,this.rotation=new h.Vector3,this.matrix=new h.Matrix4,this.matrixWorld=new h.Matrix4,this.quaternion=new h.Quaternion,this.eulerOrder=\"XYZ\",this.up=new h.Vector3(0,1,0),this.scale=new h.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}return _createClass(e,[{key:\"lookAt\",value:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&(!0===this.useQuaternion?console.error(\"Unimplemented math operation.\"):this.rotation instanceof h.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}},{key:\"add\",value:function(e){if(e!==this){e.parent=this,this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof L&&t.__addObject(e)}else console.error(\"Can't add $3Dmol.Object3D to itself\")}},{key:\"remove\",value:function(e){var t=this.children.indexOf(e);if(-1!==t){e.parent=void 0,this.children.splice(t,1);for(var r=this;void 0!==r.parent;)r=r.parent;void 0!==r&&r instanceof L&&r.__removeObject(e)}}},{key:\"vrml\",value:function(e){e||(e=\" \");var t=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),r=0,i=0,n=0;if(0!=t){var a=Math.sin(t/2);r=this.quaternion.x/a,i=this.quaternion.y/a,n=this.quaternion.z/a}var o=e+\"Transform {\\n\"+e+\" center \"+this.position.x+\" \"+this.position.y+\" \"+this.position.z+\"\\n\"+e+\" rotation \"+r+\" \"+i+\" \"+n+\" \"+t+\"\\n\"+e+\" children [\\n\";this.geometry&&(o+=this.geometry.vrml(e,this.material));for(var s=0;s<this.children.length;s++)o+=this.children[s].vrml(e+\" \")+\",\\n\";return o+=\" ]\\n\",o+\"}\"}},{key:\"updateMatrix\",value:function(){this.matrix.setPosition(this.position),!1===this.useQuaternion&&this.rotation instanceof h.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),1===this.scale.x&&1===this.scale.y&&1===this.scale.z||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}},{key:\"updateMatrixWorld\",value:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var t=0;t<this.children.length;t++)this.children[t].updateMatrixWorld(!0)}},{key:\"clone\",value:function(t){void 0===t&&(t=new e),t.name=this.name,t.up.copy(this.up),t.position.copy(this.position),t.rotation instanceof h.Vector3&&this.rotation instanceof h.Vector3?t.rotation.copy(this.rotation):t.rotation=this.rotation,t.eulerOrder=this.eulerOrder,t.scale.copy(this.scale),t.rotationAutoUpdate=this.rotationAutoUpdate,t.matrix.copy(this.matrix),t.matrixWorld.copy(this.matrixWorld),t.quaternion.copy(this.quaternion),t.matrixAutoUpdate=this.matrixAutoUpdate,t.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,t.useQuaternion=this.useQuaternion,t.visible=this.visible;for(var r=0;r<this.children.length;r++){var i=this.children[r];t.add(i.clone())}return t}},{key:\"setVisible\",value:function(e){this.visible=e;for(var t=0;t<this.children.length;t++)this.children[t].setVisible(e)}}]),e}(),L=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),e=t.apply(this,arguments),e.fog=null,e.overrideMaterial=null,e.matrixAutoUpdate=!1,e.__objects=[],e.__lights=[],e.__objectsAdded=[],e.__objectsRemoved=[],e}return _createClass(r,[{key:\"__addObject\",value:function(e){if(e instanceof D)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(-1===this.__objects.indexOf(e)){this.__objects.push(e),this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(t,1)}for(var r=0;r<e.children.length;r++)this.__addObject(e.children[r])}},{key:\"__removeObject\",value:function(e){var t;e instanceof D?-1!==(t=this.__lights.indexOf(e))&&this.__lights.splice(t,1):-1!==(t=this.__objects.indexOf(e))&&(this.__objects.splice(t,1),this.__objectsRemoved.push(e),-1!==this.__objectsAdded.indexOf(e)&&this.__objectsAdded.splice(t,1));for(var r=0;r<e.children.length;r++)this.__removeObject(e.children[r])}}]),r}(T),D=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck(this,r),i=t.call(this),i.position=new h.Vector3(0,1,0),i.target=new T,i.castShadow=!1,i.onlyShadow=!1,i.color=new w.Color(e),i.intensity=n,i}return _createClass(r)}(T),O=new h.Matrix4,I=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:\"projectVector\",value:function(t,r){return e.projectVector(t,r)}},{key:\"unprojectVector\",value:function(t,r){return e.unprojectVector(t,r)}}],[{key:\"unprojectVector\",value:function(e,t){return t.projectionMatrixInverse.getInverse(t.projectionMatrix),O.multiplyMatrices(t.matrixWorld,t.projectionMatrixInverse),e.applyProjection(O)}},{key:\"projectVector\",value:function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),O.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),e.applyProjection(O)}}]),e}(),F=r(3351),R=function(e,t){return e.distance-t.distance},P=new h.Matrix4,N=function(){function e(t,r,i,n){_classCallCheck(this,e),this.precision=1e-4,this.linePrecision=.2,this.ray=new h.Ray(t,r),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=n||0,this.far=i||1/0}return _createClass(e,[{key:\"set\",value:function(e,t){this.ray.set(e,t)}},{key:\"setFromCamera\",value:function(e,t){t.ortho?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,e.z),t.projectionMatrixInverse.getInverse(t.projectionMatrix),P.multiplyMatrices(t.matrixWorld,t.projectionMatrixInverse),this.ray.direction.applyProjection(P),this.ray.direction.sub(this.ray.origin).normalize())}},{key:\"intersectObjects\",value:function(e,t){for(var r=[],i=0,n=t.length;i<n;i++)Z(e,t[i],this,r);return r.sort(R),r}}]),e}(),B=function(e){return Math.min(Math.max(e,-1),1)},U=new F.Sphere,G=new F.Cylinder,V=new F.Triangle,j=new h.Vector3,H=new h.Vector3,q=new h.Vector3,W=new h.Vector3,Y=new h.Vector3;function Z(e,t,r,i){if(Y.getPositionFromMatrix(e.matrixWorld),void 0===t.intersectionShape)return i;var n,a,o,s,l,h,u,c,d,f,p,v,g,m,y=t.intersectionShape,_=r.linePrecision,b=(_*=e.matrixWorld.getMaxScaleOnAxis())*_;if(void 0!==t.boundingSphere&&t.boundingSphere instanceof F.Sphere&&(U.copy(t.boundingSphere),U.applyMatrix4(e.matrixWorld),!r.ray.isIntersectionSphere(U)))return i;for(n=0,a=y.triangle.length;n<a;n++)if(y.triangle[n]instanceof F.Triangle){if(V.copy(y.triangle[n]),V.applyMatrix4(e.matrixWorld),o=V.getNormal(),(s=r.ray.direction.dot(o))>=0)continue;if(j.subVectors(V.a,r.ray.origin),(u=o.dot(j)/s)<0)continue;H.copy(r.ray.direction).multiplyScalar(u).add(r.ray.origin),H.sub(V.a),q.copy(V.b).sub(V.a),W.copy(V.c).sub(V.a);var w=q.dot(W),x=q.lengthSq(),k=W.lengthSq();if((v=(x*H.dot(W)-w*H.dot(q))/(x*k-w*w))<0||v>1)continue;if((p=(H.dot(q)-v*w)/x)<0||p>1||p+v>1)continue;i.push({clickable:t,distance:u})}for(n=0,a=y.cylinder.length;n<a;n++)if(y.cylinder[n]instanceof F.Cylinder){if(G.copy(y.cylinder[n]),G.applyMatrix4(e.matrixWorld),j.subVectors(G.c1,r.ray.origin),l=j.dot(G.direction),h=j.dot(r.ray.direction),0===(d=1-(s=B(r.ray.direction.dot(G.direction)))*s))continue;g=(s*h-l)/d,m=(h-s*l)/d,H.copy(G.direction).multiplyScalar(g).add(G.c1),q.copy(r.ray.direction).multiplyScalar(m).add(r.ray.origin),c=W.subVectors(H,q).lengthSq();var C=G.radius*G.radius;if(c<=C){if((p=s*(v=u=(f=(s*l-h)*(s*l-h)-d*(j.lengthSq()-l*l-C))<=0?Math.sqrt(c):(h-s*l-Math.sqrt(f))/d)-l)<0||p*p>G.lengthSq()||v<0)continue;i.push({clickable:t,distance:u})}}for(n=0,a=y.line.length;n<a;n+=2){H.copy(y.line[n]),H.applyMatrix4(e.matrixWorld),q.copy(y.line[n+1]),q.applyMatrix4(e.matrixWorld),W.subVectors(q,H);var A=W.lengthSq();W.normalize(),j.subVectors(H,r.ray.origin);var S=j.dot(W);h=j.dot(r.ray.direction),0!==(d=1-(s=B(r.ray.direction.dot(W)))*s)&&(g=(s*h-S)/d,m=(h-s*S)/d,H.add(W.multiplyScalar(g)),q.copy(r.ray.direction).multiplyScalar(m).add(r.ray.origin),(c=W.subVectors(q,H).lengthSq())<b&&g*g<A&&i.push({clickable:t,distance:m}))}for(n=0,a=y.sphere.length;n<a;n++)if(y.sphere[n]instanceof F.Sphere&&(U.copy(y.sphere[n]),U.applyMatrix4(e.matrixWorld),r.ray.isIntersectionSphere(U))){H.subVectors(U.center,r.ray.origin);var E=H.dot(r.ray.direction);if(f=E*E-(H.lengthSq()-U.radius*U.radius),E<0)return i;u=f<=0?E:E-Math.sqrt(f),i.push({clickable:t,distance:u})}return i}var X,K=_createClass((function e(){_classCallCheck(this,e)})),$=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,i){var n;return _classCallCheck(this,r),n=t.call(this),n.id=Q++,n.name=\"\",n.image=e,n.mapping=new K,n.wrapS=c,n.wrapT=c,n.anisotropy=1,i?(n.format=y,n.type=g,n.premultiplyAlpha=!1,n.flipY=!1,n.unpackAlignment=1,n.magFilter=f,n.minFilter=f):(n.format=m,n.type=v,n.offset=new h.Vector2(0,0),n.repeat=new h.Vector2(1,1),n.premultiplyAlpha=!1,n.flipY=!0,n.unpackAlignment=4,n.magFilter=d,n.minFilter=p),n.needsUpdate=!1,n.onUpdate=null,n}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return e.image=this.image,e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}}]),r}(b),Q=0,J=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var a;return _classCallCheck(this,r),a=t.call(this),a.color=new w.Color(16777215),a.ambient=new w.Color(1048575),a.emissive=new w.Color(0),a.imposter=!0,a.wrapAround=!1,a.wrapRGB=new h.Vector3(1,1,1),a.map=void 0,a.lightMap=null,a.specularMap=null,a.envMap=null,a.reflectivity=1,a.refractionRatio=.98,a.fog=!0,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap=\"round\",a.wireframeLinejoin=\"round\",a.shading=n.SmoothShading,a.shaderID=null,a.vertexColors=i.NoColors,a.skinning=!1,a.setValues(e),a}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e}}]),r}(x),ee=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var a;return _classCallCheck(this,r),a=t.call(this),a.color=new w.Color(16777215),a.ambient=new w.Color(1048575),a.emissive=new w.Color(0),a.wrapAround=!1,a.wrapRGB=new h.Vector3(1,1,1),a.map=void 0,a.lightMap=null,a.specularMap=null,a.envMap=null,a.reflectivity=1,a.refractionRatio=.98,a.fog=!0,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap=\"round\",a.wireframeLinejoin=\"round\",a.shading=n.SmoothShading,a.shaderID=\"instanced\",a.vertexColors=i.NoColors,a.skinning=!1,a.sphere=null,a.setValues(e),a}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e.sphere=this.sphere,e}}]),r}(x),te=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var a;return _classCallCheck(this,r),a=t.call(this),a.color=new w.Color(16777215),a.ambient=new w.Color(1048575),a.emissive=new w.Color(0),a.wrapAround=!1,a.wrapRGB=new h.Vector3(1,1,1),a.map=void 0,a.lightMap=null,a.specularMap=null,a.envMap=null,a.reflectivity=1,a.refractionRatio=.98,a.fog=!0,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap=\"round\",a.wireframeLinejoin=\"round\",a.shading=n.SmoothShading,a.shaderID=\"lambert\",a.vertexColors=i.NoColors,a.skinning=!1,a.setValues(e),a}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e}}]),r}(x),re=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i;return _classCallCheck(this,r),i=t.call(this,e),i.shaderID=\"lambertdouble\",i.side=s,i.outline=!1,i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e}}]),r}(te),ie=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i;return _classCallCheck(this,r),i=t.call(this),e=e||{},i.fog=!0,i.shaderID=\"outline\",i.wireframe=!1,i.outlineColor=e.color||new w.Color(0,0,0),i.outlineWidth=e.width||.1,i.outlinePushback=e.pushback||1,i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.fog=this.fog,e.shaderID=this.shaderID,e.wireframe=this.wireframe,e}}]),r}(x),ne=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i;return _classCallCheck(this,r),i=t.call(this,e),i.shaderID=\"sphereimposter\",i.setValues(e),i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e}}]),r}(J),ae=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i;return _classCallCheck(this,r),i=t.call(this,e),e=e||{},i.shaderID=\"sphereimposteroutline\",i.outlineColor=e.color||new w.Color(0,0,0),i.outlineWidth=e.width||.1,i.outlinePushback=e.pushback||1,i.setValues(e),i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e}}]),r}(J),oe=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i;return _classCallCheck(this,r),i=t.call(this),i.color=new w.Color(16777215),i.map=new $,i.useScreenCoordinates=!0,i.fog=!1,i.uvOffset=new h.Vector2(0,0),i.uvScale=new h.Vector2(1,1),i.depthTest=!i.useScreenCoordinates,i.sizeAttenuation=!i.useScreenCoordinates,i.screenOffset=i.screenOffset,i.scaleByViewPort=!i.sizeAttenuation,i.alignment=u.center.clone(),i.setValues(e),void 0===(e=e||{}).depthTest&&(i.depthTest=!i.useScreenCoordinates),void 0===e.sizeAttenuation&&(i.sizeAttenuation=!i.useScreenCoordinates),void 0===e.scaleByViewPort&&(i.scaleByViewPort=!i.sizeAttenuation),i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.color.copy(this.color),e.map=this.map,e.useScreenCoordinates=this.useScreenCoordinates,e.screenOffset=this.screenOffset,e.sizeAttenuation=this.sizeAttenuation,e.scaleByViewport=this.scaleByViewPort,e.alignment.copy(this.alignment),e.uvOffset.copy(this.uvOffset),e}}]),r}(x),se=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i;return _classCallCheck(this,r),i=t.call(this,e),i.shaderID=\"stickimposter\",i.setValues(e),i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e}}]),r}(J),le=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),e=t.call(this,i),e.shaderID=\"stickimposteroutline\",e.outlineColor=new w.Color(0,0,0),e.outlineWidth=.1,e.outlinePushback=1,i.color&&(e.outlineColor=i.color),i.width&&(e.outlineWidth=i.width),i.pushback&&(e.outlinePushback=i.pushback),e.setValues(i),e}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e}}]),r}(J),he=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i;return _classCallCheck(this,r),i=t.call(this),i.transparent=!1,i.volumetric=!0,i.color=new w.Color(16777215),i.transferfn=null,i.map=void 0,i.extent=[],i.maxdepth=100,i.unit=0,i.texmatrix=null,i.transfermin=-1,i.transfermax=1,i.subsamples=5,i.shaderID=\"volumetric\",i.side=a,i.setValues(e),i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e.transparent=this.transparent,e.volumetric=this.volumetric,e.color=this.color,e.transferfn=this.transferfn,e.map=this.map,e.extent=this.extent,e.maxdepth=this.maxdepth,e.unit=this.unit,e.texmatrix=this.texmatrix,e.transfermin=this.transfermin,e.transfermax=this.transfermax,e.subsamples=this.subsamples,e.shaderID=this.shaderID,e.side=this.side,e}}]),r}(x);!function(e){e[e.LineStrip=0]=\"LineStrip\",e[e.LinePieces=1]=\"LinePieces\"}(X||(X={}));var ue=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new C({color:16777215*Math.random()}),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X.LineStrip;return _classCallCheck(this,r),i=t.call(this),i.geometry=e,i.material=n,i.type=a,i}return _createClass(r,[{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r(this.geometry,this.material,this.type);return _get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e}}]),r}(T),ce=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,i){var n;return _classCallCheck(this,r),n=t.call(this),n.geometry=e,n.material=i,n}return _createClass(r,[{key:\"clone\",value:function(e){return void 0===e&&(e=new r(this.geometry,this.material)),_get(_getPrototypeOf(r.prototype),\"clone\",this).call(this,e),e}}]),r}(T),de=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new oe;return _classCallCheck(this,r),e=t.call(this),e.material=i,e.rotation3d=e.rotation,e.rotation=0,e}return _createClass(r,[{key:\"updateMatrix\",value:function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),1===this.scale.x&&1===this.scale.y||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}},{key:\"clone\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r(this.material);return T.prototype.clone.call(this,e),e}}]),r}(T),fe={opacity:{type:\"f\",value:1},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3}},pe={vertexShader:\"uniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat3 normalMatrix;\\n\\nattribute vec3 position;\\nattribute vec3 color;\\n\\nvarying vec3 vColor;\\n\\nvoid main() {\\n\\n    vColor = color;\\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n    gl_Position = projectionMatrix * mvPosition;\\n\\n}\".replace(\"#define GLSLIFY 1\",\"\"),fragmentShader:\"uniform mat4 viewMatrix;\\nuniform float opacity;\\nuniform vec3 fogColor;\\nuniform float fogNear;\\nuniform float fogFar;\\nvarying vec3 vColor;\\n//DEFINEFRAGCOLOR\\nvoid main() {\\n    gl_FragColor = vec4( vColor, opacity );\\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n}\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:fe},ve={opacity:{type:\"f\",value:1},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},directionalLightColor:{type:\"fv\",value:[]},directionalLightDirection:{type:\"fv\",value:[]}},ge={fragmentShader:\"uniform mat4 viewMatrix;\\nuniform float opacity;\\n\\nuniform vec3 fogColor;\\nuniform float fogNear;\\nuniform float fogFar;\\n\\nvarying vec3 vLightFront;\\nvarying vec3 vColor;\\n//DEFINEFRAGCOLOR\\n\\nvoid main() {\\n\\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\\n\\n    #ifndef WIREFRAME\\n    gl_FragColor.xyz *= vLightFront;\\n    #endif\\n\\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n}\\n\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"\\n\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat3 normalMatrix;\\nuniform vec3 directionalLightColor[ 1 ];\\nuniform vec3 directionalLightDirection[ 1 ];\\n\\nattribute vec3 offset;\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec3 color;\\nattribute float radius;\\n\\nvarying vec3 vColor;\\nvarying vec3 vLightFront;\\n\\nvoid main() {\\n\\n    vColor = color;\\n\\n    vec3 objectNormal = normal;\\n    vec3 transformedNormal = normalMatrix * objectNormal;\\n    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );\\n\\n    vLightFront = vec3( 0.0 );\\n\\n    transformedNormal = normalize( transformedNormal );\\n\\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\\n    vec3 dirVector = normalize( lDirection.xyz );\\n    float dotProduct = dot( transformedNormal, dirVector );\\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\\n\\n    gl_Position = projectionMatrix * mvPosition;\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:ve},me={opacity:{type:\"f\",value:1},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},directionalLightColor:{type:\"fv\",value:[]},directionalLightDirection:{type:\"fv\",value:[]}},ye={fragmentShader:\"uniform mat4 viewMatrix;\\nuniform float opacity;\\n\\nuniform vec3 fogColor;\\nuniform float fogNear;\\nuniform float fogFar;\\n\\nvarying vec3 vLightFront;\\nvarying vec3 vColor;\\n//DEFINEFRAGCOLOR\\n\\nvoid main() {\\n\\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\\n\\n    #ifndef WIREFRAME\\n    gl_FragColor.xyz *= vLightFront;\\n    #endif\\n\\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n}\".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat3 normalMatrix;\\nuniform vec3 directionalLightColor[ 1 ];\\nuniform vec3 directionalLightDirection[ 1 ];\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec3 color;\\n\\nvarying vec3 vColor;\\nvarying vec3 vLightFront;\\n\\nvoid main() {\\n\\n    vColor = color;\\n\\n    vec3 objectNormal = normal;\\n    vec3 transformedNormal = normalMatrix * objectNormal;\\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\n    vLightFront = vec3( 0.0 );\\n\\n    transformedNormal = normalize( transformedNormal );\\n\\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\\n    vec3 dirVector = normalize( lDirection.xyz );\\n    float dotProduct = dot( transformedNormal, dirVector );\\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\\n\\n    gl_Position = projectionMatrix * mvPosition;\\n}\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:me},_e={opacity:{type:\"f\",value:1},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},directionalLightColor:{type:\"fv\",value:[]},directionalLightDirection:{type:\"fv\",value:[]}},be={fragmentShader:\"\\n\\nuniform mat4 viewMatrix;\\nuniform float opacity;\\n\\nuniform vec3 fogColor;\\nuniform float fogNear;\\nuniform float fogFar;\\n\\nvarying vec3 vLightFront;\\nvarying vec3 vLightBack;\\n\\nvarying vec3 vColor;\\n//DEFINEFRAGCOLOR\\n\\nvoid main() {\\n\\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\\n\\n    #ifndef WIREFRAME\\n    if ( gl_FrontFacing )\\n       gl_FragColor.xyz *= vLightFront;\\n    else\\n       gl_FragColor.xyz *= vLightBack;\\n    #endif\\n\\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n}\\n\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"\\n\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat3 normalMatrix;\\nuniform vec3 directionalLightColor[ 1 ];\\nuniform vec3 directionalLightDirection[ 1 ];\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec3 color;\\n\\nvarying vec3 vColor;\\nvarying vec3 vLightFront;\\nvarying vec3 vLightBack;\\n\\nvoid main() {\\n\\n    vColor = color;\\n\\n    vec3 objectNormal = normal;\\n    vec3 transformedNormal = normalMatrix * objectNormal;\\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\n    vLightFront = vec3( 0.0 );\\n    vLightBack = vec3( 0.0 );\\n\\n    transformedNormal = normalize( transformedNormal );\\n\\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\\n    vec3 dirVector = normalize( lDirection.xyz );\\n    float dotProduct = dot( transformedNormal, dirVector );\\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\\n    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;\\n\\n    gl_Position = projectionMatrix * mvPosition;\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:_e},we={opacity:{type:\"f\",value:1},outlineColor:{type:\"c\",value:new w.Color(0,0,0)},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},outlineWidth:{type:\"f\",value:.1},outlinePushback:{type:\"f\",value:1}},xe={fragmentShader:\"\\n\\nuniform float opacity;\\nuniform vec3 outlineColor;\\nuniform vec3 fogColor;\\nuniform float fogNear;\\nuniform float fogFar;\\n//DEFINEFRAGCOLOR\\n\\nvoid main() {\\n    gl_FragColor = vec4( outlineColor, 1 );\\n}\\n\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"\\n\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float outlineWidth;\\nuniform float outlinePushback;\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec3 color;\\n\\nvoid main() {\\n\\n    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);\\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n    mvPosition.xy += norm.xy*outlineWidth;\\n    gl_Position = projectionMatrix * mvPosition;\\n    mvPosition.z -= outlinePushback; //go backwards in model space\\n    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..\\n    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:we},ke={fragmentShader:\"uniform sampler2D colormap;\\nvarying highp vec2 vTexCoords;\\nuniform vec2 dimensions;\\n//DEFINEFRAGCOLOR\\nvoid main (void) {\\n   gl_FragColor = texture2D(colormap, vTexCoords);\\n}\\n        \".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"attribute vec2 vertexPosition;\\nvarying highp vec2 vTexCoords;\\nconst vec2 scale = vec2(0.5, 0.5);\\n\\nvoid main() {\\n   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range\\n   gl_Position = vec4(vertexPosition, 0.0, 1.0);\\n}\\n        \".replace(\"#define GLSLIFY 1\",\"\"),uniforms:{}},Ce={fragmentShader:\"uniform sampler2D colormap;\\nvarying highp vec2 vTexCoords;\\nuniform vec2 dimensions;\\n\\n// Basic FXAA implementation based on the code on geeks3d.com \\n#define FXAA_REDUCE_MIN (1.0/ 128.0)\\n#define FXAA_REDUCE_MUL (1.0 / 8.0)\\n#define FXAA_SPAN_MAX 8.0\\n\\nvec4 applyFXAA(vec2 fragCoord, sampler2D tex)\\n{\\n    vec4 color;\\n    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);\\n    vec3 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP).xyz;\\n    vec3 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP).xyz;\\n    vec3 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP).xyz;\\n    vec3 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP).xyz;\\n    vec3 rgbM  = texture2D(tex, fragCoord  * inverseVP).xyz;\\n    vec3 luma = vec3(0.299, 0.587, 0.114);\\n    float lumaNW = dot(rgbNW, luma);\\n    float lumaNE = dot(rgbNE, luma);\\n    float lumaSW = dot(rgbSW, luma);\\n    float lumaSE = dot(rgbSE, luma);\\n    float lumaM  = dot(rgbM,  luma);\\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\\n\\n    vec2 dir;\\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\\n\\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\\n                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\\n\\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\\n            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\\n            dir * rcpDirMin)) * inverseVP;\\n\\n    vec3 rgbA = 0.5 * (\\n        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)).xyz +\\n        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)).xyz);\\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\\n        texture2D(tex, fragCoord  + dir * -0.5).xyz +\\n        texture2D(tex, fragCoord  + dir * 0.5).xyz);\\n\\n    float lumaB = dot(rgbB, luma);\\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\\n        color = vec4(rgbA, 1.0);\\n    else\\n        color = vec4(rgbB, 1.0);\\n    return color;\\n}\\n//DEFINEFRAGCOLOR\\nvoid main (void) {\\n   gl_FragColor = applyFXAA(vTexCoords, colormap);\\n}\\n        \".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"attribute vec2 vertexPosition;\\nvarying highp vec2 vTexCoords;\\nconst vec2 scale = vec2(0.5, 0.5);\\n\\nvoid main() {\\n   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range\\n   gl_Position = vec4(vertexPosition, 0.0, 1.0);\\n}\\n        \".replace(\"#define GLSLIFY 1\",\"\"),uniforms:{}},Ae={opacity:{type:\"f\",value:1},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},directionalLightColor:{type:\"fv\",value:[]},directionalLightDirection:{type:\"fv\",value:[]}},Se={vertexShader:\"uniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat3 normalMatrix;\\nuniform vec3 directionalLightColor[ 1 ];\\nuniform vec3 directionalLightDirection[ 1 ];\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec3 color;\\n\\nvarying vec2 mapping;\\nvarying vec3 vColor;\\nvarying float rval;\\nvarying vec3 vLight;\\nvarying vec3 center;\\n\\nvoid main() {\\n\\n    vColor = color;\\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n    center = mvPosition.xyz;\\n    vec4 projPosition = projectionMatrix * mvPosition;\\n    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;\\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\\n    vLight = normalize( lDirection.xyz );\\n    mapping = normal.xy;\\n    rval = abs(normal.x);\\n    gl_Position = projPosition+adjust;\\n\\n}\\n\".replace(\"#define GLSLIFY 1\",\"\"),fragmentShader:\"\\nuniform mat4 viewMatrix;\\nuniform float opacity;\\nuniform mat4 projectionMatrix;\\n\\nuniform vec3 fogColor;\\nuniform float fogNear;\\nuniform float fogFar;\\nuniform float uDepth;\\nuniform vec3 directionalLightColor[ 1 ];\\n\\nvarying vec3 vColor;\\nvarying vec2 mapping;\\nvarying float rval;\\nvarying vec3 vLight;\\nvarying vec3 center;\\n\\n//DEFINEFRAGCOLOR\\n\\nvoid main() {\\n    float lensqr = dot(mapping,mapping);\\n    float rsqr = rval*rval;\\n    if(lensqr > rsqr)\\n       discard;\\n    float z = sqrt(rsqr-lensqr);\\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);\\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\\n    float ndcDepth = clipPos.z / clipPos.w;\\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\\n    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));\\n    float dotProduct = dot( norm, vLight );\\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;\\n    gl_FragColor = vec4(vLight*vColor, opacity*opacity );\\n    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );\\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:Ae},Ee={opacity:{type:\"f\",value:1},outlineColor:{type:\"c\",value:new w.Color(0,0,0)},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},outlineWidth:{type:\"f\",value:.1},outlinePushback:{type:\"f\",value:1}},ze={fragmentShader:\"\\n\\nuniform float opacity;\\nuniform vec3 outlineColor;\\nuniform vec3 fogColor;\\nuniform float fogNear;\\nuniform float fogFar;\\nuniform mat4 projectionMatrix;\\nvarying vec2 mapping;\\nvarying float rval;\\nvarying vec3 center;\\n\\nuniform float outlinePushback;\\n\\n//DEFINEFRAGCOLOR\\n\\nvoid main() {\\n    float lensqr = dot(mapping,mapping);\\n    float rsqr = rval*rval;\\n    if(lensqr > rsqr)\\n       discard;\\n    float z = sqrt(rsqr-lensqr);\\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);\\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\\n    float ndcDepth = clipPos.z / clipPos.w;\\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\\n    gl_FragColor = vec4(outlineColor, 1 );\\n}\\n\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"\\n\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float outlineWidth;\\nuniform float outlinePushback;\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec3 color;\\n\\nvarying vec2 mapping;\\nvarying float rval;\\nvarying vec3 center;\\n\\nvoid main() {\\n\\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n    center = mvPosition.xyz;\\n    vec4 projPosition = projectionMatrix * mvPosition;\\n    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);\\n    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;\\n    mapping = norm.xy;\\n    rval = abs(norm.x);\\n    gl_Position = projPosition+adjust;\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:Ee},Me={fragmentShader:\"\\n\\nuniform vec3 color;\\nuniform sampler2D map;\\nuniform float opacity;\\n\\nuniform int fogType;\\nuniform vec3 fogColor;\\nuniform float fogDensity;\\nuniform float fogNear;\\nuniform float fogFar;\\nuniform float alphaTest;\\n\\nvarying vec2 vUV;\\n//DEFINEFRAGCOLOR\\n\\nvoid main() {\\n\\n    vec4 texture = texture2D(map, vUV);\\n\\n    if (texture.a < alphaTest) discard;\\n\\n    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);\\n\\n    if (fogType > 0) {\\n\\n        float depth = gl_FragCoord.z / gl_FragCoord.w;\\n        float fogFactor = 0.0;\\n\\n        if (fogType == 1) {\\n            fogFactor = smoothstep(fogNear, fogFar, depth);\\n        }\\n\\n        else {\\n            const float LOG2 = 1.442695;\\n            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);\\n            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);\\n        }\\n\\n        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\\n\\n    }\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"\\n\\nuniform int useScreenCoordinates;\\nuniform vec3 screenPosition;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float rotation;\\nuniform vec2 scale;\\nuniform vec2 alignment;\\nuniform vec2 uvOffset;\\nuniform vec2 uvScale;\\n\\nattribute vec2 position;\\nattribute vec2 uv;\\n\\nvarying vec2 vUV;\\n\\nvoid main() {\\n\\n    vUV = uvOffset + uv * uvScale;\\n\\n    vec2 alignedPosition = position + alignment;\\n\\n    vec2 rotatedPosition;\\n    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;\\n    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;\\n\\n    vec4 finalPosition;\\n\\n    if(useScreenCoordinates != 0) {\\n        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);\\n    }\\n\\n    else {\\n        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;\\n        finalPosition.xy += rotatedPosition; \\n    }\\n\\n    gl_Position = finalPosition;\\n\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:{}},Te={opacity:{type:\"f\",value:1},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},directionalLightColor:{type:\"fv\",value:[]},directionalLightDirection:{type:\"fv\",value:[]}},Le=\"uniform float opacity;\\nuniform mat4 projectionMatrix;\\n\\nuniform vec3 fogColor;\\nuniform float fogNear;\\nuniform float fogFar;\\n\\nvarying vec3 vLight;\\nvarying vec3 vColor;\\nvarying vec3 cposition;\\nvarying vec3 p1;\\nvarying vec3 p2;\\nvarying float r;\\n\\n//DEFINEFRAGCOLOR\\n\\n//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf\\n//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl\\n//with a bit more care (caps) this could be a general cylinder imposter (see also outline)\\nvoid main() {\\n    vec3 color = abs(vColor);\\n    vec3 pos = cposition;\\n    vec3 p = pos; //ray point\\n    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic\\n    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective\\n    vec3 pa = p1; //cyl start\\n    vec3 va = normalize(p2-p1); //cyl norm\\n    vec3 tmp1 = v-(dot(v,va)*va);\\n    vec3 deltap = p-pa;\\n    float A = dot(tmp1,tmp1);\\n    if(A == 0.0) discard;\\n    vec3 tmp2 = deltap-(dot(deltap,va)*va);\\n    float B = 2.0*dot(tmp1, tmp2);\\n    float C = dot(tmp2,tmp2)-r*r;\\n//quadratic equation!\\n    float det = (B*B) - (4.0*A*C);\\n    if(det < 0.0) discard;\\n    float sqrtDet = sqrt(det);\\n    float posT = (-B+sqrtDet)/(2.0*A);\\n    float negT = (-B-sqrtDet)/(2.0*A);\\n    float intersectionT = min(posT,negT);\\n    vec3 qi = p+v*intersectionT;\\n    float dotp1 = dot(va,qi-p1);\\n    float dotp2 = dot(va,qi-p2);\\n    vec3 norm;\\n    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0\\n       vec3 cp;\\n       if( dotp1 < 0.0) {  \\n//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not\\n        cp = p1;\\n       } else {\\n//          if(vColor.y < 0.0 ) discard;\\n          cp = p2;\\n       }\\n       vec3 diff = p-cp;\\n       A = dot(v,v);\\n       B = dot(diff,v)*2.0;\\n       C = dot(diff,diff)-r*r;\\n       det = (B*B) - (4.0*C);\\n       if(det < 0.0) discard;\\n       sqrtDet = sqrt(det);\\n       posT = (-B+sqrtDet)/(2.0);\\n       negT = (-B-sqrtDet)/(2.0);\\n       float t = min(posT,negT);\\n       qi = p+v*t; \\n       norm = normalize(qi-cp); \\n    } else {\\n       norm = normalize(qi-(dotp1*va + p1));\\n    }\\n    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);\\n    float ndcDepth = clipPos.z / clipPos.w;\\n    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\\n    gl_FragDepthEXT = depth;\",De={fragmentShader:[Le,\"    float dotProduct = dot( norm, vLight );\\n    vec3 light = vec3( max( dotProduct, 0.0 ) );\\n    gl_FragColor = vec4(light*color, opacity*opacity );\\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n}\"].join(\"\\n\").replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"\\n\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat3 normalMatrix;\\nuniform vec3 directionalLightColor[ 1 ];\\nuniform vec3 directionalLightDirection[ 1 ];\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec3 color;\\nattribute float radius;\\n\\nvarying vec3 vColor;\\nvarying vec3 vLight;\\nvarying vec3 cposition;\\nvarying vec3 p1;\\nvarying vec3 p2;\\nvarying float r;\\n\\nvoid main() {\\n\\n    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary\\n    r = abs(radius);\\n    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder\\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\\n    vec4 mvPosition = pt;\\n    p1 = pt.xyz; p2 = to.xyz;\\n    vec3 norm = to.xyz-pt.xyz;\\n    float mult = 1.1; //slop to account for perspective of sphere\\n    if(length(p1) > length(p2)) { //billboard at level of closest point\\n       mvPosition = to;\\n    }\\n    vec3 n = normalize(mvPosition.xyz);\\n//intersect with the plane defined by the camera looking at the billboard point\\n    if(color.z >= 0.0) { //p1\\n       if(projectionMatrix[3][3] == 0.0) { //perspective\\n         vec3 pnorm = normalize(p1);\\n         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\\n         mvPosition.xyz = p1+t*pnorm; \\n       } else { //orthographic\\n         mvPosition.xyz = p1;\\n       }\\n    } else {\\n      if(projectionMatrix[3][3] == 0.0) { //perspective\\n         vec3 pnorm = normalize(p2);\\n         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\\n         mvPosition.xyz = p2+t*pnorm;\\n       } else { //orthographic\\n         mvPosition.xyz = p2;\\n       } \\n       mult *= -1.0;\\n    }\\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;\\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;\\n    mvPosition.xyz +=  mult*(cr + doublecr).xyz;\\n    cposition = mvPosition.xyz;\\n    gl_Position = projectionMatrix * mvPosition;\\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\\n    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:Te},Oe={opacity:{type:\"f\",value:1},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},outlineColor:{type:\"c\",value:new w.Color(0,0,0)},outlineWidth:{type:\"f\",value:.1},outlinePushback:{type:\"f\",value:1}},Ie={fragmentShader:(Le+\"gl_FragColor = vec4(color,1.0);}\").replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"\\n\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat3 normalMatrix;\\nuniform vec3 directionalLightColor[ 1 ];\\nuniform vec3 directionalLightDirection[ 1 ];\\nuniform vec3 outlineColor;\\nuniform float outlineWidth;\\nuniform float outlinePushback;\\n\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec3 color;\\nattribute float radius;\\n\\nvarying vec3 vColor;\\nvarying vec3 vLight;\\nvarying vec3 cposition;\\nvarying vec3 p1;\\nvarying vec3 p2;\\nvarying float r;\\n\\nvoid main() {\\n\\n    vColor = outlineColor;\\n    float rad = radius+sign(radius)*outlineWidth;\\n    r = abs(rad);\\n    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder\\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\\n//pushback\\n    to.xyz += normalize(to.xyz)*outlinePushback;\\n    pt.xyz += normalize(pt.xyz)*outlinePushback;\\n\\n    vec4 mvPosition = pt;\\n    p1 = pt.xyz; p2 = to.xyz;\\n    vec3 norm = to.xyz-pt.xyz;\\n    float mult = 1.1; //slop to account for perspective of sphere\\n    if(length(p1) > length(p2)) { //billboard at level of closest point\\n       mvPosition = to;\\n    }\\n    vec3 n = normalize(mvPosition.xyz);\\n//intersect with the plane defined by the camera looking at the billboard point\\n    if(color.z >= 0.0) { //p1\\n       vec3 pnorm = normalize(p1);\\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\\n       mvPosition.xyz = p1+t*pnorm;\\n    } else {\\n       vec3 pnorm = normalize(p2);\\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\\n       mvPosition.xyz = p2+t*pnorm;\\n       mult *= -1.0;\\n    }\\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;\\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;\\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\\n    cposition = mvPosition.xyz;\\n    gl_Position = projectionMatrix * mvPosition;\\n    vLight = vec3(1.0,1.0,1.0);\\n}\\n\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:Oe},Fe={opacity:{type:\"f\",value:1},fogColor:{type:\"c\",value:new w.Color(1,1,1)},fogNear:{type:\"f\",value:1},fogFar:{type:\"f\",value:2e3},data:{type:\"i\",value:3},colormap:{type:\"i\",value:4},depthmap:{type:\"i\",value:5},step:{type:\"f\",value:1},maxdepth:{type:\"f\",value:100},subsamples:{type:\"f\",value:5},textmat:{type:\"mat4\",value:[]},projinv:{type:\"mat4\",value:[]},transfermin:{type:\"f\",value:-.2},transfermax:{type:\"f\",value:.2}},Re={fragmentShader:\"\\nuniform highp sampler3D data;\\nuniform highp sampler2D colormap;\\nuniform highp sampler2D depthmap;\\n\\n\\nuniform mat4 textmat;\\nuniform mat4 projinv;\\nuniform mat4 projectionMatrix;\\n\\nuniform float step;\\nuniform float subsamples;\\nuniform float maxdepth;\\nuniform float transfermin;\\nuniform float transfermax;\\nin  vec4 mvPosition;\\nout vec4 color;\\nvoid main(void) {\\n\\n   vec4 pos = mvPosition;\\n   bool seengood = false;\\n   float i = 0.0;\\n   color = vec4(1,1,1,0);\\n   float increment = 1.0/subsamples;\\n   float maxsteps = (maxdepth*subsamples/step);\\n//there's probably a better way to do this..\\n//calculate farthest possible point in model coordinates\\n   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);\\n// convert to projection\\n   maxpos = projectionMatrix*maxpos;\\n   vec4 startp = projectionMatrix*pos;\\n// homogonize\\n   maxpos /= maxpos.w;\\n   startp /= startp.w;\\n//take x,y from start and z from max\\n   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);\\n//convert back to model space\\n   maxpos = projinv*maxpos;\\n   maxpos /= maxpos.w;\\n   float incr = step/subsamples;\\n//get depth from depthmap\\n//startp is apparently [-1,1]\\n   vec2 tpos = startp.xy/2.0+0.5;\\n   float depth = texture(depthmap, tpos).r;\\n//compute vector between start and end\\n   vec4 direction = maxpos-pos;\\n   for( i = 0.0; i <= maxsteps; i++) {\\n      vec4 pt = (pos+(i/maxsteps)*direction);\\n      vec4 ppt = projectionMatrix*pt;\\n      float ptdepth = ppt.z/ppt.w;\\n      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\\n      if(ptdepth > depth) break;\\n      pt = textmat*pt;\\n//       pt /= pt.w;\\n      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {\\n         seengood = true;\\n      } else if(seengood) {\\n         break;\\n      }\\n      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){\\n          color.a = 0.0;\\n          continue;\\n      }\\n      else {\\n         float val = texture(data, pt.zyx).r;\\n         if(isinf(val)) continue; //masked out\\n         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range\\n         vec4 val_color = texture(colormap, vec2(cval,0.5));\\n         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;\\n         color.a += (1.0 - color.a) * val_color.a; \\n         if(color.a > 0.0) color.rgb /= color.a;\\n//          color = vec4(pt.x, pt.y, pt.z, 1.0);\\n      }\\n//       color = vec4(pt.x, pt.y, pt.z, 0.0)\\n    }\\n}\\n\\n        \".replace(\"#define GLSLIFY 1\",\"\"),vertexShader:\"uniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewMatrix;\\n\\nin vec3 position;\\nout vec4 mvPosition;\\nvoid main() {\\n\\n    mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n    gl_Position = projectionMatrix*mvPosition;\\n}\\n\".replace(\"#define GLSLIFY 1\",\"\"),uniforms:Fe},Pe={basic:pe,instanced:ge,lambert:ye,lambertdouble:be,outline:xe,screen:ke,screenaa:Ce,sphereimposter:Se,sphereimposteroutline:ze,sprite:Me,stickimposter:De,stickimposteroutline:Ie,volumetric:Re};function Ne(e){var t={};for(var r in e){t[r]={},t[r].type=e[r].type;var i=e[r].value;i instanceof w.Color?t[r].value=i.clone():\"number\"==typeof i?t[r].value=i:i instanceof Array?t[r].value=[]:console.error(\"Error copying shader uniforms from ShaderLib: unknown type for uniform\")}return t}var Be={clone:Ne,stickimposterFragmentShader:Le},Ue=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,r),e=t.call(this),e.projectionMatrix=new h.Matrix4,e.projectionMatrixInverse=new h.Matrix4,e.matrixWorldInverse=new h.Matrix4,e.fov=i,e.aspect=n,e.near=a,e.far=o;var l=e.position.z;return e.right=l*Math.tan(Math.PI/180*i),e.left=-e.right,e.top=e.right/e.aspect,e.bottom=-e.top,e.ortho=!!s,e.updateProjectionMatrix(),e}return _createClass(r,[{key:\"lookAt\",value:function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate&&(!1===this.useQuaternion&&this.rotation instanceof h.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error(\"Unimplemented math operation.\"))}},{key:\"updateProjectionMatrix\",value:function(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}]),r}(T),Ge=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;_classCallCheck(this,e),this.name=\"\",this.color=new w.Color(t),this.near=r,this.far=i}return _createClass(e,[{key:\"clone\",value:function(){return new e(this.color.getHex(),this.near,this.far)}}]),e}(),Ve=function(){function e(){_classCallCheck(this,e),this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}return _createClass(e,[{key:\"init\",value:function(e){this.gl=e.context,this.renderer=e,this.precision=e.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var t=0;this.sprite.vertices[t++]=-1,this.sprite.vertices[t++]=-1,this.sprite.vertices[t++]=0,this.sprite.vertices[t++]=0,this.sprite.vertices[t++]=1,this.sprite.vertices[t++]=-1,this.sprite.vertices[t++]=1,this.sprite.vertices[t++]=0,this.sprite.vertices[t++]=1,this.sprite.vertices[t++]=1,this.sprite.vertices[t++]=1,this.sprite.vertices[t++]=1,this.sprite.vertices[t++]=-1,this.sprite.vertices[t++]=1,this.sprite.vertices[t++]=0,this.sprite.vertices[t++]=1,t=0,this.sprite.faces[t++]=0,this.sprite.faces[t++]=1,this.sprite.faces[t++]=2,this.sprite.faces[t++]=0,this.sprite.faces[t++]=2,this.sprite.faces[t++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(Pe.sprite,this.precision||1),this.sprite.attributes={};var r={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,\"position\"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,\"uv\"),r.uvOffset=this.gl.getUniformLocation(this.sprite.program,\"uvOffset\"),r.uvScale=this.gl.getUniformLocation(this.sprite.program,\"uvScale\"),r.rotation=this.gl.getUniformLocation(this.sprite.program,\"rotation\"),r.scale=this.gl.getUniformLocation(this.sprite.program,\"scale\"),r.alignment=this.gl.getUniformLocation(this.sprite.program,\"alignment\"),r.color=this.gl.getUniformLocation(this.sprite.program,\"color\"),r.map=this.gl.getUniformLocation(this.sprite.program,\"map\"),r.opacity=this.gl.getUniformLocation(this.sprite.program,\"opacity\"),r.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,\"useScreenCoordinates\"),r.screenPosition=this.gl.getUniformLocation(this.sprite.program,\"screenPosition\"),r.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,\"modelViewMatrix\"),r.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,\"projectionMatrix\"),r.fogType=this.gl.getUniformLocation(this.sprite.program,\"fogType\"),r.fogDensity=this.gl.getUniformLocation(this.sprite.program,\"fogDensity\"),r.fogNear=this.gl.getUniformLocation(this.sprite.program,\"fogNear\"),r.fogFar=this.gl.getUniformLocation(this.sprite.program,\"fogFar\"),r.fogColor=this.gl.getUniformLocation(this.sprite.program,\"fogColor\"),r.alphaTest=this.gl.getUniformLocation(this.sprite.program,\"alphaTest\"),this.sprite.uniforms=r}},{key:\"render\",value:function(e,t,r,i,n){var a,o,s,l,h,u,c,d,f,p;if(!this.gl)throw new Error(\"WebGLRenderer not initialized\");var v=[];null===(a=null==e?void 0:e.__webglSprites)||void 0===a||a.forEach((function(e){(n&&0==e.material.depthTest||!n&&e.material.depthTest)&&v.push(e)}));var g=v.length;if(g){var m=this.sprite.attributes,y=this.sprite.uniforms;if(!y)throw new Error(\"Uniforms not defined\");var _=.5*r,b=.5*i;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(m.position),this.gl.enableVertexAttribArray(m.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(m.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(m.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(y.projectionMatrix,!1,t.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(y.map,0);var w,x,k,C,A,S=0,E=0,z=e.fog;z?(this.gl.uniform3f(y.fogColor,z.color.r,z.color.g,z.color.b),this.gl.uniform1f(y.fogNear,z.near),this.gl.uniform1f(y.fogFar,z.far),this.gl.uniform1i(y.fogType,1),S=1,E=1):(this.gl.uniform1i(y.fogType,0),S=0,E=0);var M=[];for(w=0;w<g;w++)x=v[w],k=x.material,k&&(0!=k.depthTest||n)&&x.visible&&0!==k.opacity&&(k.useScreenCoordinates?x.z=-x.position.z:(x._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,x.matrixWorld),x.z=-x._modelViewMatrix.elements[14]));for(v.sort(je),w=0;w<g;w++)if(x=v[w],k=x.material,k&&x.visible&&0!==k.opacity&&k.map&&k.map.image&&k.map.image.width){this.gl.uniform1f((null==y?void 0:y.alphaTest)||null,k.alphaTest);var T=k.map.image.width,L=k.map.image.height;M[0]=T*this.renderer.devicePixelRatio/r,M[1]=L*this.renderer.devicePixelRatio/i,!0===k.useScreenCoordinates?(this.gl.uniform1i(y.useScreenCoordinates,1),this.gl.uniform3f(y.screenPosition,(x.position.x*this.renderer.devicePixelRatio-_)/_,(b-x.position.y*this.renderer.devicePixelRatio)/b,Math.max(0,Math.min(1,x.position.z)))):(this.gl.uniform1i(y.useScreenCoordinates,0),this.gl.uniformMatrix4fv(y.modelViewMatrix,!1,x._modelViewMatrix.elements)),A=e.fog&&k.fog?E:0,S!==A&&(this.gl.uniform1i(y.fogType,A),S=A),C=1/(k.scaleByViewport?i:1),M[0]*=C*x.scale.x,M[1]*=C*x.scale.y;var D=null===(o=null==k?void 0:k.alignment)||void 0===o?void 0:o.x,O=null===(s=null==k?void 0:k.alignment)||void 0===s?void 0:s.y;k.screenOffset&&(D=(D||0)+2*k.screenOffset.x/T,O=(O||0)+2*k.screenOffset.y/L),this.gl.uniform2f(y.uvScale,(null===(l=null==k?void 0:k.uvScale)||void 0===l?void 0:l.x)||1,(null===(h=null==k?void 0:k.uvScale)||void 0===h?void 0:h.y)||1),this.gl.uniform2f(y.uvOffset,(null===(u=null==k?void 0:k.uvOffset)||void 0===u?void 0:u.x)||0,(null===(c=null==k?void 0:k.uvOffset)||void 0===c?void 0:c.y)||0),this.gl.uniform2f(y.alignment,D||0,O||0),this.gl.uniform1f(y.opacity,k.opacity),this.gl.uniform3f(y.color,(null===(d=null==k?void 0:k.color)||void 0===d?void 0:d.r)||0,(null===(f=null==k?void 0:k.color)||void 0===f?void 0:f.g)||0,(null===(p=null==k?void 0:k.color)||void 0===p?void 0:p.b)||0),this.gl.uniform1f(y.rotation,x.rotation),this.gl.uniform2fv(y.scale,M),this.renderer.setDepthTest(k.depthTest),this.renderer.setDepthWrite(k.depthWrite),this.renderer.setTexture(k.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}}},{key:\"createProgram\",value:function(e,t){if(!this.gl)throw new Error(\"WebGL Rendering context not found\");var r=this.gl.createProgram();if(!r)throw new Error(\"Error creating webgl program\");var i=this.gl.createShader(this.gl.FRAGMENT_SHADER),n=this.gl.createShader(this.gl.VERTEX_SHADER);if(!i)throw new Error(\"Unable to create fragment shader SpritePlugin.createProgram\");if(!n)throw new Error(\"Unable to create vertex shader SpritePlugin.createProgram\");var a=\"precision \"+t+\" float;\\n\";if(this.gl.shaderSource(i,a+e.fragmentShader),this.gl.shaderSource(n,a+e.vertexShader),this.gl.compileShader(i),this.gl.compileShader(n),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))throw new Error(\"Error compiling shader: \\n      \".concat(this.gl.getShaderInfoLog(i),\" \\n      \").concat(this.gl.getShaderInfoLog(n)));return this.gl.attachShader(r,i),this.gl.attachShader(r,n),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)||console.error(\"Could not initialize shader\"),r}}]),e}();function je(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var He=function(){function e(t){_classCallCheck(this,e),this.context=null,this.devicePixelRatio=1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldBlending=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._projScreenMatrix=new h.Matrix4,this._vector3=new h.Vector3,this._worldInverse=new h.Matrix4,this._projInverse=new h.Matrix4,this._textureMatrix=new h.Matrix4,this._direction=new h.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new Ve,this._screenshader=null,this._vertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,t=t||{},this.row=t.row,this.col=t.col,this.rows=t.rows,this.cols=t.cols,this._canvas=void 0!==t.canvas?t.canvas:document.createElement(\"canvas\"),this._precision=void 0!==t.precision?t.precision:\"highp\",this._alpha=void 0===t.alpha||t.alpha,this._premultipliedAlpha=void 0===t.premultipliedAlpha||t.premultipliedAlpha,this._antialias=void 0!==t.antialias&&t.antialias,this._stencil=void 0===t.stencil||t.stencil,this._preserveDrawingBuffer=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,this._clearColor=void 0!==t.clearColor?new w.Color(t.clearColor):new w.Color(0),this._clearAlpha=void 0!==t.clearAlpha?t.clearAlpha:0,this._outlineMaterial=new ie(t.outline),this._outlineSphereImposterMaterial=new ae(t.outline),this._outlineStickImposterMaterial=new le(t.outline),this._outlineEnabled=!!t.outline,this.domElement=this._canvas,this._canvas.id=t.id,this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension(\"ANGLE_instanced_arrays\"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension(\"EXT_frag_depth\"),this._extFloatLinear=this._gl.getExtension(\"OES_texture_float_linear\"),this._extColorBufferFloat=this._gl.getExtension(\"EXT_color_buffer_float\"),this.sprites.init(this)}return _createClass(e,[{key:\"supportedExtensions\",value:function(){return{supportsAIA:Boolean(this._extInstanced),supportsImposters:Boolean(this._extFragDepth)||!this.isWebGL1()}}},{key:\"getContext\",value:function(){return this._gl}},{key:\"isLost\",value:function(){return this._gl.isContextLost()}},{key:\"getPrecision\",value:function(){return this._precision}},{key:\"setClearColorHex\",value:function(e,t){this._clearColor.setHex(e),this._clearAlpha=t,this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}},{key:\"enableOutline\",value:function(e){this._outlineMaterial=new ie(e),this._outlineSphereImposterMaterial=new ae(e),this._outlineStickImposterMaterial=new le(e),this._outlineEnabled=!0}},{key:\"disableOutline\",value:function(){this._outlineEnabled=!1}},{key:\"setViewport\",value:function(){if(null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var e=this._canvas.width/this.cols,t=this._canvas.height/this.rows;this._viewportWidth=e,this._viewportHeight=t,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(e*this.col,t*this.row,e,t),this._gl.viewport(e*this.col,t*this.row,e,t)}}},{key:\"setSize\",value:function(e,t){if(this.devicePixelRatio=void 0!==window.devicePixelRatio?window.devicePixelRatio:1,this._antialias&&this.devicePixelRatio<2&&(this.devicePixelRatio*=2),null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var r=e/this.cols,i=t/this.rows;this._canvas.width=e*this.devicePixelRatio,this._canvas.height=t*this.devicePixelRatio,this._viewportWidth=r*this.devicePixelRatio,this._viewportHeight=i*this.devicePixelRatio,this._canvas.style.width=e+\"px\",this._canvas.style.height=t+\"px\",this.setViewport()}else this._viewportWidth=this._canvas.width=e*this.devicePixelRatio,this._viewportHeight=this._canvas.height=t*this.devicePixelRatio,this._canvas.style.width=e+\"px\",this._canvas.style.height=t+\"px\",this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight);this.initFrameBuffer()}},{key:\"clear\",value:function(e,t,r){var i=0;(void 0===e||e)&&(i|=this._gl.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=this._gl.DEPTH_BUFFER_BIT),(void 0===r||r)&&(i|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(i)}},{key:\"clearTarget\",value:function(e,t,r){this.clear(e,t,r)}},{key:\"setMaterialFaces\",value:function(e,t){var r=e.side===s,i=e.side===o;e.imposter||(i=t?!i:i),this._oldDoubleSided!==r&&(r?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=r),this._oldFlipSided!==i&&(i?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=i),this._gl.cullFace(this._gl.BACK)}},{key:\"setDepthTest\",value:function(e){this._oldDepthTest!==e&&(e?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=e)}},{key:\"setDepthWrite\",value:function(e){this._oldDepthWrite!==e&&(this._gl.depthMask(e),this._oldDepthWrite=e)}},{key:\"setBlending\",value:function(e){e?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND),this._oldBlending=e}},{key:\"initMaterial\",value:function(e,t,r,i){var n,a;if(e.addEventListener(\"dispose\",this.onMaterialDispose.bind(this)),a=e.shaderID){var o=Pe[a];e.vertexShader=o.vertexShader,e.fragmentShader=o.fragmentShader,e.uniforms=Be.clone(o.uniforms)}n={wireframe:e.wireframe,fragdepth:e.imposter,volumetric:e.volumetric},e.program=this.buildProgram(e.fragmentShader,e.vertexShader,e.uniforms,n)}},{key:\"renderBuffer\",value:function(e,t,r,i,n,a){if(i.visible){var o,s;s=(o=this.setProgram(e,t,r,i,a,this)).attributes;var l,h,u=!1,c=i.wireframe?1:0,d=16777215*n.id+2*o.id+c;if(d!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=d,u=!0),u&&(this.disableAttributes(),s.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n.__webglVertexBuffer),this.enableAttribute(s.position),this._gl.vertexAttribPointer(s.position,3,this._gl.FLOAT,!1,0,0)),s.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n.__webglColorBuffer),this.enableAttribute(s.color),this._gl.vertexAttribPointer(s.color,3,this._gl.FLOAT,!1,0,0)),s.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n.__webglNormalBuffer),this.enableAttribute(s.normal),this._gl.vertexAttribPointer(s.normal,3,this._gl.FLOAT,!1,0,0)),s.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n.__webglOffsetBuffer),this.enableAttribute(s.offset),this._gl.vertexAttribPointer(s.offset,3,this._gl.FLOAT,!1,0,0)),s.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n.__webglRadiusBuffer),this.enableAttribute(s.radius),this._gl.vertexAttribPointer(s.radius,1,this._gl.FLOAT,!1,0,0))),a instanceof ce){if(\"instanced\"===i.shaderID){var f=i.sphere.geometryGroups[0];u&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,f.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,f.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,n.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,f.faceArray,this._gl.STATIC_DRAW)),l=f.faceidx,this._extInstanced.vertexAttribDivisorANGLE(s.offset,1),this._extInstanced.vertexAttribDivisorANGLE(s.radius,1),this._extInstanced.vertexAttribDivisorANGLE(s.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,l,this._gl.UNSIGNED_SHORT,0,n.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(s.offset,0),this._extInstanced.vertexAttribDivisorANGLE(s.radius,0),this._extInstanced.vertexAttribDivisorANGLE(s.color,0)}else i.wireframe?(h=n.lineidx,this.setLineWidth(i.wireframeLinewidth),u&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,n.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,h,this._gl.UNSIGNED_SHORT,0)):(l=n.faceidx,u&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,n.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,l,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=l,this.info.render.faces+=l/3}else a instanceof ue&&(h=n.vertices,this.setLineWidth(i.linewidth),this._gl.drawArrays(this._gl.LINES,0,h),this.info.render.calls++)}}},{key:\"render\",value:function(e,t,r){if(t instanceof Ue!=0){var i,n,a,o,s,l=e.__lights,h=e.fog;this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),this._projScreenMatrix.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this.autoUpdateObjects&&this.initWebGLObjects(e),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),(this.autoClear||r)&&(this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil));var u=!1;for(i=0,n=(s=e.__webglObjects).length;i<n;i++)o=(a=s[i]).object,a.render=!1,o.visible&&(this.setupMatrices(o,t),this.unrollBufferMaterial(a),a.render=!0,a.volumetric&&(u=!0));var c=null;this.setBlending(!1),this.renderObjects(e.__webglObjects,!0,\"opaque\",t,l,h,!1,c),this.renderSprites(e,t,!1),this.renderObjects(e.__webglObjects,!0,\"blank\",t,l,h,!0,c),this.renderObjects(e.__webglObjects,!1,\"transparent\",t,l,h,!0,c),u&&this._fb&&(this.reinitFrameBuffer(),this.renderObjects(e.__webglObjects,!1,\"volumetric\",t,l,h,!0,c)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(e,t,!0)}else console.error(\"Renderer.render: camera is not an instance of Camera.\")}},{key:\"reinitFrameBuffer\",value:function(){this.isWebGL1()||(this._fb=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0))}},{key:\"setFrameBuffer\",value:function(){if(!this.isWebGL1()&&this._fb){var e=this._viewportWidth,t=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,e,t),this._gl.viewport(0,0,e,t),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,e,t,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,e,t,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}}},{key:\"initFrameBuffer\",value:function(){if(!this.isWebGL1()){var e=this._viewportWidth,t=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,e,t),this._gl.viewport(0,0,e,t),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var r=Pe.screen;this._screenshader=this.buildProgram(r.fragmentShader,r.vertexShader,r.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,\"vertexPosition\"),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW)}}},{key:\"renderFrameBuffertoScreen\",value:function(){this.isWebGL1()||null===this._fb||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}},{key:\"initWebGLObjects\",value:function(e){if(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]),e.__objectsAdded.length){for(;e.__objectsAdded.length;)this.addObject(e.__objectsAdded[0],e),e.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;e.__objectsRemoved.length;)this.removeObject(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1);for(var t=0,r=e.__webglObjects.length;t<r;t++)this.updateObject(e.__webglObjects[t].object)}},{key:\"getYRatio\",value:function(){return void 0!==this.rows&&void 0!==this.row?this.rows:1}},{key:\"getXRatio\",value:function(){return void 0!==this.cols&&void 0!==this.col?this.cols:1}},{key:\"getAspect\",value:function(e,t){null!=e&&null!=t||(e=this._canvas.width,t=this._canvas.height);var r=e/t;return null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col&&(r=e/this.cols/(t/this.rows)),r}},{key:\"setTexture\",value:function(e,t,r){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener(\"dispose\",this.onTextureDispose.bind(this)),e.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+t);var i=r?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(i,e.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,e.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,e.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,e.unpackAlignment);var n=this.paramToGL(e.format),a=this.paramToGL(e.type);if(r)this.setTextureParameters(this._gl.TEXTURE_3D,e),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,e.image.size.z,e.image.size.y,e.image.size.x,0,this._gl.RED,this._gl.FLOAT,e.image.data);else{var o=e.image,s=o.width,l=o.height;void 0===s&&(s=o.length,n==this._gl.RGBA&&(s/=4),l=1),this.setTextureParameters(this._gl.TEXTURE_2D,e),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,n,n,a,e.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,n,s,l,0,n,a,e.image)}e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+t),r?this._gl.bindTexture(this._gl.TEXTURE_3D,e.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,e.__webglTexture)}},{key:\"supportsVolumetric\",value:function(){return!this.isWebGL1()}},{key:\"enableAttribute\",value:function(e){this._enabledAttributes[e]||(this._gl.enableVertexAttribArray(e),this._enabledAttributes[e]=!0)}},{key:\"disableAttributes\",value:function(){for(var e in this._enabledAttributes)this._enabledAttributes[e]&&(this._gl.disableVertexAttribArray(e),this._enabledAttributes[e]=!1)}},{key:\"setPolygonOffset\",value:function(e,t,r){this._oldPolygonOffset!==e&&(e?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}},{key:\"setLineWidth\",value:function(e){e!==this._oldLineWidth&&(this._gl.lineWidth(e),this._oldLineWidth=e)}},{key:\"deallocateGeometry\",value:function(e){if(e.__webglInit=void 0,void 0!==e.__webglVertexBuffer&&this._gl.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglColorBuffer&&this._gl.deleteBuffer(e.__webglColorBuffer),void 0!==e.geometryGroups)for(var t=0,r=e.groups;t<r;t++){var i=e.geometryGroups[t];void 0!==i.__webglVertexBuffer&&this._gl.deleteBuffer(i.__webglVertexBuffer),void 0!==i.__webglColorBuffer&&this._gl.deleteBuffer(i.__webglColorBuffer),void 0!==i.__webglNormalBuffer&&this._gl.deleteBuffer(i.__webglNormalBuffer),void 0!==i.__webglFaceBuffer&&this._gl.deleteBuffer(i.__webglFaceBuffer),void 0!==i.__webglLineBuffer&&this._gl.deleteBuffer(i.__webglLineBuffer)}}},{key:\"deallocateMaterial\",value:function(e){var t=e.program;if(void 0!==t){var r,i,n;e.program=void 0;var a=!1;for(r=0,i=this._programs.length;r<i;r++)if((n=this._programs[r]).program===t){n.usedTimes--,0===n.usedTimes&&(a=!0);break}if(!0===a){var o=[];for(r=0,i=this._programs.length;r<i;r++)(n=this._programs[r]).program!==t&&o.push(n);this._programs=o,this._gl.deleteProgram(t),this.info.memory.programs--}}}},{key:\"deallocateTexture\",value:function(e){if(e.image&&e.image.__webglTextureCube)this._gl.deleteTexture(e.image.__webglTextureCube);else{if(!e.__webglInit)return;e.__webglInit=!1,this._gl.deleteTexture(e.__webglTexture)}}},{key:\"onGeometryDispose\",value:function(e){var t=e.target;t.removeEventListener(\"dispose\",this.onGeometryDispose),this.deallocateGeometry(t),this.info.memory.geometries--}},{key:\"onTextureDispose\",value:function(e){var t=e.target;t.removeEventListener(\"dispose\",this.onTextureDispose),this.deallocateTexture(t),this.info.memory.textures--}},{key:\"onMaterialDispose\",value:function(e){var t=e.target;t.removeEventListener(\"dispose\",this.onMaterialDispose),this.deallocateMaterial(t)}},{key:\"getShader\",value:function(e,t){var r;return this.isWebGL1()||t.startsWith(\"#version\")||(t=t.replace(/gl_FragDepthEXT/g,\"gl_FragDepth\"),t=\"#version 300 es\\n\"+(t=(t=(t=(t=(t=\"fragment\"==e?t.replace(/varying/g,\"in\"):t.replace(/varying/g,\"out\")).replace(/attribute/g,\"in\")).replace(/texture2D/g,\"texture\")).replace(/\\/\\/DEFINEFRAGCOLOR/g,\"out vec4 glFragColor;\")).replace(/gl_FragColor/g,\"glFragColor\"))),\"fragment\"===e?r=this._gl.createShader(this._gl.FRAGMENT_SHADER):\"vertex\"===e&&(r=this._gl.createShader(this._gl.VERTEX_SHADER)),this._gl.shaderSource(r,t),this._gl.compileShader(r),this._gl.getShaderParameter(r,this._gl.COMPILE_STATUS)?r:(console.error(this._gl.getShaderInfoLog(r)),console.error(\"could not initialize shader\"),null)}},{key:\"buildProgram\",value:function(e,t,r,i){var n,a,o,s,l=[];for(n in l.push(e),l.push(t),i)l.push(n),l.push(i[n]);for(s=l.join(),n=0,a=this._programs.length;n<a;n++){var h=this._programs[n];if(h.code===s)return h.usedTimes++,h.program}if(this.isWebGL1()&&i.volumetric)throw new Error(\"Volumetric rendering requires webgl2 which is not supported by your hardware.\");o=this._gl.createProgram();var u,c,d,f=\"precision \"+this._precision+\" float;\",p=[i.volumetric?\"#version 300 es\":\"\",f].join(\"\\n\"),v=[i.volumetric?\"#version 300 es\":\"\",i.fragdepth&&this.isWebGL1()?\"#extension GL_EXT_frag_depth: enable\":\"\",i.wireframe?\"#define WIREFRAME 1\":\"\",f].join(\"\\n\"),g=this.getShader(\"fragment\",v+e),m=this.getShader(\"vertex\",p+t);for(c in this._gl.attachShader(o,m),this._gl.attachShader(o,g),this._gl.linkProgram(o),this._gl.getProgramParameter(o,this._gl.LINK_STATUS)||console.error(\"Could not initialize shader\"),o.uniforms={},o.attributes={},u=[\"viewMatrix\",\"modelViewMatrix\",\"projectionMatrix\",\"normalMatrix\"],r)u.push(c);for(d=0;d<u.length;d++){var y=u[d];o.uniforms[y]=this._gl.getUniformLocation(o,y)}for(u=[\"position\",\"normal\",\"color\",\"lineDistance\",\"offset\",\"radius\"],d=0;d<u.length;d++){var _=u[d];o.attributes[_]=this._gl.getAttribLocation(o,_)}return o.id=this._programs_counter++,this._programs.push({program:o,code:s,usedTimes:1}),this.info.memory.programs=this._programs.length,o}},{key:\"setProgram\",value:function(e,t,r,i,n,a){i.needsUpdate&&(i.program&&this.deallocateMaterial(i),this.initMaterial(i,t,r,n),i.needsUpdate=!1);var o=!1,s=i.program,l=s.uniforms,h=i.uniforms;if(s!=this._currentProgram&&(this._gl.useProgram(s),this._currentProgram=s,o=!0),i.id!=this._currentMaterialId&&(this._currentMaterialId=i.id,o=!0),e!=this._currentCamera&&(this._currentCamera=e,o=!0),this._gl.uniformMatrix4fv(l.projectionMatrix,!1,e.projectionMatrix.elements),this._gl.uniformMatrix4fv(l.modelViewMatrix,!1,n._modelViewMatrix.elements),this._gl.uniformMatrix3fv(l.normalMatrix,!1,n._normalMatrix.elements),o){if(h.fogColor.value=r.color,h.fogNear.value=r.near,h.fogFar.value=r.far,i.shaderID.startsWith(\"lambert\")||\"instanced\"===i.shaderID||i.shaderID.endsWith(\"imposter\"))this._gl.uniformMatrix4fv(l.viewMatrix,!1,e.matrixWorldInverse.elements),this._lightsNeedUpdate&&(this.setupLights(s,t),this._lightsNeedUpdate=!1),h.directionalLightColor.value=this._lights.directional.colors,h.directionalLightDirection.value=this._lights.directional.positions;else if(i.shaderID.endsWith(\"outline\"))h.outlineColor.value=i.outlineColor,h.outlineWidth.value=i.outlineWidth,h.outlinePushback.value=i.outlinePushback;else if(\"volumetric\"===i.shaderID){n._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(n._modelViewMatrix),this._projInverse.getInverse(e.projectionMatrix),this._textureMatrix.multiplyMatrices(n.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(l.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(l.projinv,!1,this._projInverse.elements);var u=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);h.step.value=n.material.unit*u,h.maxdepth.value=n.material.maxdepth*u,h.transfermax.value=n.material.transfermax,h.transfermin.value=n.material.transfermin,h.subsamples.value=n.material.subsamples,a.setTexture(n.material.transferfn,4,!1),a.setTexture(n.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}h.opacity.value=i.opacity,this.loadMaterialUniforms(l,h)}return s}},{key:\"loadMaterialUniforms\",value:function(e,t){var r,i,n,a;for(r in t)e[r]&&(i=t[r].type,n=t[r].value,a=e[r],\"f\"===i?this._gl.uniform1f(a,n):\"i\"===i?this._gl.uniform1i(a,n):\"fv\"===i?this._gl.uniform3fv(a,n):\"c\"===i?this._gl.uniform3f(a,n.r,n.g,n.b):\"f4\"===i&&this._gl.uniform4f(a,n[0],n[1],n[2],n[3]))}},{key:\"addObject\",value:function(e,t){var r,i,n,a;if(!e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new h.Matrix4,e._normalMatrix=new h.Matrix3,void 0!==e.geometry&&void 0===e.geometry.__webglInit&&(e.geometry.__webglInit=!0,e.geometry.addEventListener(\"dispose\",this.onGeometryDispose.bind(this))),e instanceof ce||e instanceof ue))for(n=e.geometry,e.material,r=0,i=n.geometryGroups.length;r<i;r++)(a=n.geometryGroups[r]).id=this._geometryGroupCounter++,a.__webglVertexBuffer||(e instanceof ce?(this.createMeshBuffers(a),n.elementsNeedUpdate=!0,n.normalsNeedUpdate=!0):e instanceof ue&&this.createLineBuffers(a),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0);if(!e.__webglActive){if(e instanceof ce||e instanceof ue)for(r=0,i=(n=e.geometry).geometryGroups.length;r<i;r++)a=n.geometryGroups[r],this.addBuffer(t.__webglObjects,a,e);else e instanceof de&&t.__webglSprites.push(e);e.__webglActive=!0}}},{key:\"updateObject\",value:function(e){var t,r=e.geometry;if(e instanceof ce||e instanceof ue){for(var i=0,n=r.geometryGroups.length;i<n;i++)t=r.geometryGroups[i],(r.verticesNeedUpdate||r.elementsNeedUpdate||r.colorsNeedUpdate||r.normalsNeedUpdate)&&this.setBuffers(t,this._gl.STATIC_DRAW);r.verticesNeedUpdate=!1,r.elementsNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.buffersNeedUpdate=!1}}},{key:\"removeObject\",value:function(e,t){e instanceof ce||e instanceof ue?this.removeInstances(t.__webglObjects,e):e instanceof de&&this.removeInstancesDirect(t.__webglSprites,e),e.__webglActive=!1}},{key:\"removeInstances\",value:function(e,t){for(var r=e.length-1;r>=0;--r)e[r].object===t&&e.splice(r,1)}},{key:\"removeInstancesDirect\",value:function(e,t){for(var r=e.length-1;r>=0;--r)e[r]===t&&e.splice(r,1)}},{key:\"unrollBufferMaterial\",value:function(e){var t=e.object.material;if(t.volumetric)e.opaque=null,e.transparent=null,e.volumetric=t;else if(t.transparent){if(e.opaque=null,e.volumetric=null,e.transparent=t,!t.wireframe){var r=t.clone();r.opacity=0,e.blank=r}}else e.opaque=t,e.transparent=null,e.volumetric=null}},{key:\"setBuffers\",value:function(e,t){var r=e.vertexArray,i=e.colorArray;if(void 0!==e.__webglOffsetBuffer?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,e.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,r,t)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,e.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,r,t)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,e.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,i,t),e.normalArray&&void 0!==e.__webglNormalBuffer){var n=e.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,e.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,n,t)}if(e.radiusArray&&void 0!==e.__webglRadiusBuffer&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,e.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,e.radiusArray,t)),e.faceArray&&void 0!==e.__webglFaceBuffer){var a=e.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,a,t)}if(e.lineArray&&void 0!==e.__webglLineBuffer){var o=e.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,o,t)}}},{key:\"createMeshBuffers\",value:function(e){e.radiusArray&&(e.__webglRadiusBuffer=this._gl.createBuffer()),e.useOffset&&(e.__webglOffsetBuffer=this._gl.createBuffer()),e.__webglVertexBuffer=this._gl.createBuffer(),e.__webglNormalBuffer=this._gl.createBuffer(),e.__webglColorBuffer=this._gl.createBuffer(),e.__webglFaceBuffer=this._gl.createBuffer(),e.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}},{key:\"createLineBuffers\",value:function(e){e.__webglVertexBuffer=this._gl.createBuffer(),e.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}},{key:\"addBuffer\",value:function(e,t,r){e.push({buffer:t,object:r,opaque:null,transparent:null})}},{key:\"setupMatrices\",value:function(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getInverse(e._modelViewMatrix),e._normalMatrix.transpose()}},{key:\"filterFallback\",value:function(e){return this._gl.LINEAR}},{key:\"setTextureParameters\",value:function(e,t){e==this._gl.TEXTURE_2D?(this._gl.texParameteri(e,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(e,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(e,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(t.magFilter)),this._gl.texParameteri(e,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(t.minFilter))):(this._gl.texParameteri(e,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(e,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(e,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(e,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(e,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(e,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(e,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}},{key:\"paramToGL\",value:function(e){return e===v?this._gl.UNSIGNED_BYTE:e===m?this._gl.RGBA:e===f?this._gl.NEAREST:0}},{key:\"setupLights\",value:function(e,t){var r,i,n,a,o,s=this._lights,l=s.directional.colors,h=s.directional.positions,u=0,c=0;for(r=0,i=t.length;r<i;r++)if(a=(n=t[r]).color,o=n.intensity,n.distance,n instanceof D){if(this._direction.getPositionFromMatrix(n.matrixWorld),this._vector3.getPositionFromMatrix(n.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),0===this._direction.x&&0===this._direction.y&&0===this._direction.z)continue;h[c]=this._direction.x,h[c+1]=this._direction.y,h[c+2]=this._direction.z,l[c]=a.r*o,l[c+1]=a.g*o,l[c+2]=a.b*o,c+=3,u++}s.ambient[0]=0,s.ambient[1]=0,s.ambient[2]=0,s.directional.length=u}},{key:\"initGL\",value:function(){try{if(!(this._gl=this._canvas.getContext(\"webgl2\",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:!1,stencil:this._stencil,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext(\"experimental-webgl\",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:!1,stencil:this._stencil,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext(\"webgl\",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:!1,stencil:this._stencil,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw\"Error creating WebGL context.\";var e=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(e[6])}catch(e){console.error(e)}}},{key:\"isWebGL1\",value:function(){return 1==this._webglversion}},{key:\"setDefaultGLState\",value:function(){this._gl.clearColor(0,0,0,1),this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}},{key:\"renderObjects\",value:function(e,t,r,i,n,a,o,s){var l,h,u,c,d,f;t?(c=e.length-1,d=-1,f=-1):(c=0,d=e.length,f=1);for(var p=c;p!==d;p+=f)if((l=e[p]).render){if(h=l.object,u=l.buffer,!(s=l[r]))continue;o&&this.setBlending(!0),this.setDepthTest(s.depthTest),this.setDepthWrite(s.depthWrite),this.setPolygonOffset(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits);var v=h._modelViewMatrix.isReflected();this.setMaterialFaces(s,v),this.renderBuffer(i,n,a,s,u,h),(this._outlineEnabled||s.outline)&&(\"sphereimposter\"==s.shaderID?this.renderBuffer(i,n,a,this._outlineSphereImposterMaterial,u,h):\"stickimposter\"==s.shaderID?this.renderBuffer(i,n,a,this._outlineStickImposterMaterial,u,h):s.wireframe||\"basic\"===s.shaderID||0===s.opacity||this.renderBuffer(i,n,a,this._outlineMaterial,u,h))}}},{key:\"renderSprites\",value:function(e,t,r){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldBlending=-1,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(e,t,this._currentWidth,this._currentHeight,r),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldBlending=-1,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}]),e}()},9652:function(e,t,r){\"use strict\";r.r(t),r.d(t,{Matrix3:function(){return v},Matrix4:function(){return f},Quaternion:function(){return i},Ray:function(){return g},Vector2:function(){return n},Vector3:function(){return p},clamp:function(){return a},conversionMatrix3:function(){return m},degToRad:function(){return d}});var i=function(){function e(t,r,i,n){_classCallCheck(this,e),this.x=t||0,this.y=r||0,this.z=i||0,this.w=void 0!==n?n:1}return _createClass(e,[{key:\"set\",value:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}},{key:\"copy\",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:\"conjugate\",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:\"inverse\",value:function(){return this.conjugate().normalize()}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:\"lengthxyz\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:\"normalize\",value:function(){var e=this.length();return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:\"multiply\",value:function(e){return this.multiplyQuaternions(this,e)}},{key:\"multiplyScalar\",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:\"multiplyQuaternions\",value:function(e,t){var r=e.x,i=e.y,n=e.z,a=e.w,o=t.x,s=t.y,l=t.z,h=t.w;return this.x=r*h+a*o+i*l-n*s,this.y=i*h+a*s+n*o-r*l,this.z=n*h+a*l+r*s-i*o,this.w=a*h-r*o-i*s-n*l,this}},{key:\"sub\",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:\"clone\",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:\"setFromEuler\",value:function(e){var t=Math.cos(e.x/2),r=Math.cos(e.y/2),i=Math.cos(e.z/2),n=Math.sin(e.x/2),a=Math.sin(e.y/2),o=Math.sin(e.z/2);return this.x=n*r*i+t*a*o,this.y=t*a*i-n*r*o,this.z=t*r*o+n*a*i,this.w=t*r*i-n*a*o,this}}]),e}(),n=function(){function e(t,r){_classCallCheck(this,e),this.x=t||0,this.y=r||0}return _createClass(e,[{key:\"set\",value:function(e,t){return this.x=e,this.y=t,this}},{key:\"subVectors\",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:\"copy\",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:\"clone\",value:function(){return new e(this.x,this.y)}}]),e}();function a(e,t,r){return Math.min(Math.max(e,t),r)}var o,s,l,h,u,c=Math.PI/180;function d(e){return e*c}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;_classCallCheck(this,e),void 0!==t&&\"number\"!=typeof t?this.elements=new Float32Array(t):(this.elements=new Float32Array(16),this.elements[0]=t,this.elements[4]=r,this.elements[8]=i,this.elements[12]=n,this.elements[1]=a,this.elements[5]=o,this.elements[9]=s,this.elements[13]=l,this.elements[2]=h,this.elements[6]=u,this.elements[10]=c,this.elements[14]=d,this.elements[3]=f,this.elements[7]=p,this.elements[11]=v,this.elements[15]=g)}return _createClass(e,[{key:\"makeScale\",value:function(e,t,r){throw new Error(\"Method not implemented.\")}},{key:\"set\",value:function(e,t,r,i,n,a,o,s,l,h,u,c,d,f,p,v){var g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=n,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=h,g[10]=u,g[14]=c,g[3]=d,g[7]=f,g[11]=p,g[15]=v,this}},{key:\"identity\",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:\"copy\",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]),this}},{key:\"matrix3FromTopLeft\",value:function(){var e=this.elements;return new v(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10])}},{key:\"setRotationFromEuler\",value:function(e,t){var r=this.elements,i=e.x,n=e.y,a=e.z,o=Math.cos(i),s=Math.sin(i),l=Math.cos(n),h=Math.sin(n),u=Math.cos(a),c=Math.sin(a);if(void 0===t||\"XYZ\"===t){var d=o*u,f=o*c,p=s*u,v=s*c;r[0]=l*u,r[4]=-l*c,r[8]=h,r[1]=f+p*h,r[5]=d-v*h,r[9]=-s*l,r[2]=v-d*h,r[6]=p+f*h,r[10]=o*l}else console.error(\"Error with matrix4 setRotationFromEuler. Order: \".concat(t));return this}},{key:\"setRotationFromQuaternion\",value:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z,a=e.w,o=r+r,s=i+i,l=n+n,h=r*o,u=r*s,c=r*l,d=i*s,f=i*l,p=n*l,v=a*o,g=a*s,m=a*l;return t[0]=1-(d+p),t[4]=u-m,t[8]=c+g,t[1]=u+m,t[5]=1-(h+p),t[9]=f-v,t[2]=c-g,t[6]=f+v,t[10]=1-(h+d),this}},{key:\"multiplyMatrices\",value:function(e,t){var r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],h=r[1],u=r[5],c=r[9],d=r[13],f=r[2],p=r[6],v=r[10],g=r[14],m=r[3],y=r[7],_=r[11],b=r[15],w=i[0],x=i[4],k=i[8],C=i[12],A=i[1],S=i[5],E=i[9],z=i[13],M=i[2],T=i[6],L=i[10],D=i[14],O=i[3],I=i[7],F=i[11],R=i[15];return n[0]=a*w+o*A+s*M+l*O,n[4]=a*x+o*S+s*T+l*I,n[8]=a*k+o*E+s*L+l*F,n[12]=a*C+o*z+s*D+l*R,n[1]=h*w+u*A+c*M+d*O,n[5]=h*x+u*S+c*T+d*I,n[9]=h*k+u*E+c*L+d*F,n[13]=h*C+u*z+c*D+d*R,n[2]=f*w+p*A+v*M+g*O,n[6]=f*x+p*S+v*T+g*I,n[10]=f*k+p*E+v*L+g*F,n[14]=f*C+p*z+v*D+g*R,n[3]=m*w+y*A+_*M+b*O,n[7]=m*x+y*S+_*T+b*I,n[11]=m*k+y*E+_*L+b*F,n[15]=m*C+y*z+_*D+b*R,this}},{key:\"multiplyScalar\",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:\"makeTranslation\",value:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}},{key:\"snap\",value:function(e){e||(e=4);for(var t=Math.pow(10,4),r=this.elements,i=0;i<16;i++){var n=Math.round(r[i]);n===Math.round(r[i]*t)/t&&(r[i]=n)}return this}},{key:\"transpose\",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:\"setPosition\",value:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this}},{key:\"translate\",value:function(e){var t=this.elements;return t[12]+=e.x,t[13]+=e.y,t[14]+=e.z,this}},{key:\"getInverse\",value:function(e,t){var r=this.elements,i=e.elements,n=i[0],a=i[4],o=i[8],s=i[12],l=i[1],h=i[5],u=i[9],c=i[13],d=i[2],f=i[6],p=i[10],v=i[14],g=i[3],m=i[7],y=i[11],_=i[15];r[0]=u*v*m-c*p*m+c*f*y-h*v*y-u*f*_+h*p*_,r[4]=s*p*m-o*v*m-s*f*y+a*v*y+o*f*_-a*p*_,r[8]=o*c*m-s*u*m+s*h*y-a*c*y-o*h*_+a*u*_,r[12]=s*u*f-o*c*f-s*h*p+a*c*p+o*h*v-a*u*v,r[1]=c*p*g-u*v*g-c*d*y+l*v*y+u*d*_-l*p*_,r[5]=o*v*g-s*p*g+s*d*y-n*v*y-o*d*_+n*p*_,r[9]=s*u*g-o*c*g-s*l*y+n*c*y+o*l*_-n*u*_,r[13]=o*c*d-s*u*d+s*l*p-n*c*p-o*l*v+n*u*v,r[2]=h*v*g-c*f*g+c*d*m-l*v*m-h*d*_+l*f*_,r[6]=s*f*g-a*v*g-s*d*m+n*v*m+a*d*_-n*f*_,r[10]=a*c*g-s*h*g+s*l*m-n*c*m-a*l*_+n*h*_,r[14]=s*h*d-a*c*d-s*l*f+n*c*f+a*l*v-n*h*v,r[3]=u*f*g-h*p*g-u*d*m+l*p*m+h*d*y-l*f*y,r[7]=a*p*g-o*f*g+o*d*m-n*p*m-a*d*y+n*f*y,r[11]=o*h*g-a*u*g-o*l*m+n*u*m+a*l*y-n*h*y,r[15]=a*u*d-o*h*d+o*l*f-n*u*f-a*l*p+n*h*p;var b=n*r[0]+l*r[4]+d*r[8]+g*r[12];if(0===b){var w=\"Matrix4.getInverse(): can't invert matrix, determinant is 0\";if(t)throw new Error(w);return console.warn(w),this.identity(),this}return this.multiplyScalar(1/b),this}},{key:\"isReflected\",value:function(){var e=this.elements,t=e[0],r=e[4],i=e[8],n=e[1],a=e[5],o=e[9],s=e[2],l=e[6],h=e[10];return t*a*h+n*l*i+s*r*o-s*a*i-n*r*h-t*l*o<0}},{key:\"scale\",value:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}},{key:\"getMaxScaleOnAxis\",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(r,i)))}},{key:\"makeFrustum\",value:function(e,t,r,i,n,a){var o=this.elements,s=2*n/(t-e),l=2*n/(i-r),h=(t+e)/(t-e),u=(i+r)/(i-r),c=-(a+n)/(a-n),d=-2*a*n/(a-n);return o[0]=s,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:\"makePerspective\",value:function(e,t,r,i){var n=r*Math.tan(d(.5*e)),a=-n,o=a*t,s=n*t;return this.makeFrustum(o,s,a,n,r,i)}},{key:\"makeOrthographic\",value:function(e,t,r,i,n,a){var o=this.elements,s=1/(t-e),l=1/(r-i),h=1/(a-n),u=(t+e)*s,c=(r+i)*l,d=(a+n)*h;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:\"isEqual\",value:function(e){var t=e.elements,r=this.elements;return r[0]===t[0]&&r[4]===t[4]&&r[8]===t[8]&&r[12]===t[12]&&r[1]===t[1]&&r[5]===t[5]&&r[9]===t[9]&&r[13]===t[13]&&r[2]===t[2]&&r[6]===t[6]&&r[10]===t[10]&&r[14]===t[14]&&r[3]===t[3]&&r[7]===t[7]&&r[11]===t[11]&&r[15]===t[15]}},{key:\"clone\",value:function(){var t=this.elements;return new e(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])}},{key:\"isIdentity\",value:function(){var e=this.elements;return 1===e[0]&&0===e[4]&&0===e[8]&&0===e[12]&&0===e[1]&&1===e[5]&&0===e[9]&&0===e[13]&&0===e[2]&&0===e[6]&&1===e[10]&&0===e[14]&&0===e[3]&&0===e[7]&&0===e[11]&&1===e[15]}},{key:\"isNearlyIdentity\",value:function(e){return this.clone().snap(e).isIdentity()}},{key:\"getScale\",value:function(e){var t=this.elements;return e=e||new p,l.set(t[0],t[1],t[2]),h.set(t[4],t[5],t[6]),u.set(t[8],t[9],t[10]),e.x=l.length(),e.y=h.length(),e.z=u.length(),e}},{key:\"lookAt\",value:function(e,t,r){var i=this.elements;return u.subVectors(e,t).normalize(),0===u.length()&&(u.z=1),l.crossVectors(r,u).normalize(),0===l.length()&&(u.x+=1e-4,l.crossVectors(r,u).normalize()),h.crossVectors(u,l),i[0]=l.x,i[4]=h.x,i[8]=u.x,i[1]=l.y,i[5]=h.y,i[9]=u.y,i[2]=l.z,i[6]=h.z,i[10]=u.z,this}},{key:\"compose\",value:function(e,t,r){var i=this.elements;return o.identity(),o.setRotationFromQuaternion(t),s.makeScale(r.x,r.y,r.z),this.multiplyMatrices(o,s),i[12]=e.x,i[13]=e.y,i[14]=e.z,this}}]),e}();o=new f,s=new f;var p=function(){function e(t,r,i){_classCallCheck(this,e),this.x=t||0,this.y=r||0,this.z=i||0,this.atomid=void 0}return _createClass(e,[{key:\"set\",value:function(e,t,r){return this.x=e,this.y=t,this.z=r,this}},{key:\"copy\",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:\"add\",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:\"addVectors\",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:\"multiplyVectors\",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:\"sub\",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:\"subVectors\",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:\"multiplyScalar\",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:\"divideScalar\",value:function(e){return 0!==e?(this.x/=e,this.y/=e,this.z/=e):(this.x=0,this.y=0,this.z=0),this}},{key:\"max\",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:\"min\",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:\"distanceTo\",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:\"distanceToSquared\",value:function(e){var t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}},{key:\"applyMatrix3\",value:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}},{key:\"applyMatrix4\",value:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i+n[12],this.y=n[1]*t+n[5]*r+n[9]*i+n[13],this.z=n[2]*t+n[6]*r+n[10]*i+n[14],this}},{key:\"applyProjection\",value:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements,a=n[3]*t+n[7]*r+n[11]*i+n[15];return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])/a,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])/a,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])/a,this}},{key:\"applyQuaternion\",value:function(e){var t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,o=e.z,s=e.w,l={};l.x=2*(r*o-i*a),l.y=2*(i*n-t*o),l.z=2*(t*a-r*n);var h={};return h.x=l.y*o-l.z*a,h.y=l.z*n-l.x*o,h.z=l.x*a-l.y*n,this.x=t+s*l.x+h.x,this.y=r+s*l.y+h.y,this.z=i+s*l.z+h.z,this}},{key:\"negate\",value:function(){return this.multiplyScalar(-1)}},{key:\"dot\",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:\"lengthSq\",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:\"normalize\",value:function(){return this.divideScalar(this.length())}},{key:\"cross\",value:function(e){var t=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-t*e.z,this.z=t*e.y-r*e.x,this}},{key:\"crossVectors\",value:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this}},{key:\"equals\",value:function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z}},{key:\"getPositionFromMatrix\",value:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this}},{key:\"setEulerFromRotationMatrix\",value:function(e,t){var r=e.elements,i=r[0],n=r[4],o=r[8],s=r[5],l=r[9],h=r[6],u=r[10];return void 0===t||\"XYZ\"===t?(this.y=Math.asin(a(o,-1,1)),Math.abs(o)<.99999?(this.x=Math.atan2(-l,u),this.z=Math.atan2(-n,i)):(this.x=Math.atan2(h,s),this.z=0)):console.error(\"Error with vector's setEulerFromRotationMatrix: Unknown order: \".concat(t)),this}},{key:\"rotateAboutVector\",value:function(e,t){e.normalize();var r=Math.cos(t),i=Math.sin(t),n=this.clone().multiplyScalar(r),a=e.clone().cross(this).multiplyScalar(i),o=e.clone().multiplyScalar(e.clone().dot(this)).multiplyScalar(1-r),s=n.add(a).add(o);return this.x=s.x,this.y=s.y,this.z=s.z,this}},{key:\"setFromMatrixPosition\",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:\"transformDirection\",value:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}},{key:\"clone\",value:function(){return new e(this.x,this.y,this.z)}},{key:\"unproject\",value:function(e){var t=o;return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}]),e}();l=new p,h=new p,u=new p;var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;_classCallCheck(this,e),this.elements=new Float32Array(9),this.set(t,r,i,n,a,o,s,l,h)}return _createClass(e,[{key:\"set\",value:function(e,t,r,i,n,a,o,s,l){var h=this.elements;return h[0]=e,h[3]=t,h[6]=r,h[1]=i,h[4]=n,h[7]=a,h[2]=o,h[5]=s,h[8]=l,this}},{key:\"identity\",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:\"copy\",value:function(e){var t=e.elements;this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])}},{key:\"multiplyScalar\",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:\"getInverse3\",value:function(e){var t=e.elements,r=this.elements;r[0]=t[4]*t[8]-t[5]*t[7],r[3]=t[6]*t[5]-t[3]*t[8],r[6]=t[3]*t[7]-t[6]*t[4],r[1]=t[7]*t[2]-t[1]*t[8],r[4]=t[0]*t[8]-t[6]*t[2],r[7]=t[1]*t[6]-t[0]*t[7],r[2]=t[1]*t[5]-t[2]*t[4],r[5]=t[2]*t[3]-t[0]*t[5],r[8]=t[0]*t[4]-t[1]*t[3];var i=t[0]*r[0]+t[3]*r[1]+t[6]*r[2];return this.multiplyScalar(1/i),this}},{key:\"getInverse\",value:function(e,t){var r=e.elements,i=this.elements;i[0]=r[10]*r[5]-r[6]*r[9],i[1]=-r[10]*r[1]+r[2]*r[9],i[2]=r[6]*r[1]-r[2]*r[5],i[3]=-r[10]*r[4]+r[6]*r[8],i[4]=r[10]*r[0]-r[2]*r[8],i[5]=-r[6]*r[0]+r[2]*r[4],i[6]=r[9]*r[4]-r[5]*r[8],i[7]=-r[9]*r[0]+r[1]*r[8],i[8]=r[5]*r[0]-r[1]*r[4];var n=r[0]*i[0]+r[1]*i[3]+r[2]*i[6];if(0===n){var a=\"Matrix3.getInverse(): can't invert matrix, determinant is 0\";if(t)throw new Error(a);return console.warn(a),this.identity(),this}return this.multiplyScalar(1/n),this}},{key:\"getDeterminant\",value:function(){var e=this.elements;return e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7]}},{key:\"transpose\",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:\"clone\",value:function(){var t=this.elements;return new e(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])}},{key:\"getMatrix4\",value:function(){var e=this.elements;return new f(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0)}}]),e}(),g=function(){function e(t,r){_classCallCheck(this,e),this.origin=void 0!==t?t:new p,this.direction=void 0!==r?r:new p}return _createClass(e,[{key:\"set\",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:\"copy\",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:\"at\",value:function(e,t){return(t||new p).copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:\"recast\",value:function(e){var t=l;return this.origin.copy(this.at(e,t)),this}},{key:\"closestPointToPoint\",value:function(e,t){var r=t||new p;r.subVectors(e,this.origin);var i=r.dot(this.direction);return r.copy(this.direction).multiplyScalar(i).add(this.origin)}},{key:\"distanceToPoint\",value:function(e){var t=l,r=t.subVectors(e,this.origin).dot(this.direction);return t.copy(this.direction).multiplyScalar(r).add(this.origin),t.distanceTo(e)}},{key:\"isIntersectionCylinder\",value:function(){}},{key:\"isIntersectionSphere\",value:function(e){return this.distanceToPoint(e.center)<=e.radius}},{key:\"isIntersectionPlane\",value:function(e){return 0!==e.normal.dot(this.direction)||0===e.distanceToPoint(this.origin)}},{key:\"distanceToPlane\",value:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:void 0:-(this.origin.dot(e.normal)+e.constant)/t}},{key:\"intersectPlane\",value:function(e,t){var r=this.distanceToPlane(e);if(void 0!==r)return this.at(r,t)}},{key:\"applyMatrix4\",value:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this}},{key:\"clone\",value:function(){return(new e).copy(this)}}]),e}();function m(e,t,r,i,n,a){i=i*Math.PI/180,n=n*Math.PI/180,a=a*Math.PI/180;var o=function(e){return e*e},s=Math.cos(i),l=Math.cos(n),h=Math.cos(a),u=Math.sin(a);return new v(e,t*h,r*l,0,t*u,r*(s-l*h)/u,0,0,r*Math.sqrt(1-o(s)-o(l)-o(h)+2*s*l*h)/u)}},3351:function(e,t,r){\"use strict\";r.r(t),r.d(t,{Cylinder:function(){return o},Sphere:function(){return n},Triangle:function(){return l}});var i=r(9652),n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.center=new i.Vector3(t.x,t.y,t.z),this.radius=r}return _createClass(e,[{key:\"set\",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:\"copy\",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:\"applyMatrix4\",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:\"translate\",value:function(e){return this.center.add(e),this}},{key:\"equals\",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:\"clone\",value:function(){return(new e).copy(this)}}]),e}(),a=new i.Vector3,o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Vector3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Vector3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,e),this.c1=t,this.c2=r,this.radius=n,this.direction=(new i.Vector3).subVectors(this.c2,this.c1).normalize()}return _createClass(e,[{key:\"copy\",value:function(e){return this.c1.copy(e.c1),this.c2.copy(e.c2),this.direction.copy(e.direction),this.radius=e.radius,this}},{key:\"lengthSq\",value:function(){return a.subVectors(this.c2,this.c1).lengthSq()}},{key:\"applyMatrix4\",value:function(e){return this.direction.add(this.c1).applyMatrix4(e),this.c1.applyMatrix4(e),this.c2.applyMatrix4(e),this.direction.sub(this.c1).normalize(),this.radius=this.radius*e.getMaxScaleOnAxis(),this}}]),e}(),s=new i.Vector3,l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Vector3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Vector3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i.Vector3;_classCallCheck(this,e),this.a=t,this.b=r,this.c=n}return _createClass(e,[{key:\"copy\",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:\"applyMatrix4\",value:function(e){return this.a.applyMatrix4(e),this.b.applyMatrix4(e),this.c.applyMatrix4(e),this}},{key:\"getNormal\",value:function(){var e=this.a.clone();return e.sub(this.b),s.subVectors(this.c,this.b),e.cross(s),e.normalize(),e}}]),e}()},9158:function _(__unused_webpack_module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{autoinit:function(){return _autoinit},autoload:function(){return _autoload},processing_autoinit:function(){return _processing_autoinit},viewers:function(){return _viewers}});var _GLViewer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9230),_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9192),_utilities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9005),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2550),_autoinit=!1,_processing_autoinit=!1,_viewers={};function _autoload(viewer,callback){var i,dataname,type;if(null!=document.querySelector(\".viewer_3Dmoljs\")&&(_autoinit=!0),_autoinit){_processing_autoinit=!0,viewer=null!=viewer?viewer:null;var nviewers=0;document.querySelectorAll(\".viewer_3Dmoljs\").forEach((function(viewerdiv){var datauri=[],datatypes=[],uri=\"\";\"static\"==viewerdiv.style.position&&(viewerdiv.style.position=\"relative\");var UI=null;if(type=null,viewerdiv.dataset.pdb)datauri.push(\"https://files.rcsb.org/view/\"+viewerdiv.dataset.pdb+\".pdb\"),datatypes.push(\"pdb\");else if(viewerdiv.dataset.cid)datatypes.push(\"sdf\"),datauri.push(\"https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/\"+viewerdiv.dataset.cid+\"/SDF?record_type=3d\");else if(viewerdiv.dataset.href||viewerdiv.dataset.url){uri=viewerdiv.dataset.href?viewerdiv.dataset.href:viewerdiv.dataset.url,datauri.push(uri),type=uri.substring(uri.lastIndexOf(\".\")+1),datatypes.push(type);var molName=uri.substring(uri.lastIndexOf(\"/\")+1,uri.lastIndexOf(\".\"));\"/\"==molName&&(molName=uri.substring(uri.lastIndexOf(\"/\")+1)),viewerdiv.dataset[datatypes[datatypes.length-1]]=molName}var divdata=viewerdiv.dataset;for(i in divdata)\"pdb\"===i.substring(0,3)&&\"pdb\"!==i?(datauri.push(\"https://files.rcsb.org/view/\"+divdata[i]+\".pdb\"),datatypes.push(\"pdb\")):\"href\"===i.substring(0,4)&&\"href\"!==i?(uri=divdata[i],datauri.push(uri),datatypes.push(uri.substr(uri.lastIndexOf(\".\")+1))):\"cid\"===i.substring(0,3)&&\"cid\"!==i&&(datauri.push(\"https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/\"+divdata[i]+\"/SDF?record_type=3d\"),datatypes.push(\"sdf\"));var options={};viewerdiv.dataset.options&&(options=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.options));var bgcolor=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(viewerdiv.dataset.backgroundcolor),bgalpha=viewerdiv.dataset.backgroundalpha;bgalpha=null==bgalpha?1:parseFloat(bgalpha);var style={line:{}};viewerdiv.dataset.style&&(style=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.style));var select={};viewerdiv.dataset.select&&(select=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.select));var selectstylelist=[],surfaces=[],labels=[],zoomto={},spin=null,d=viewerdiv.dataset,stylere=/style(.+)/,surfre=/surface(.*)/,reslabre=/labelres(.*)/,keys=[];for(dataname in d)Object.prototype.hasOwnProperty.call(d,dataname)&&keys.push(dataname);for(keys.sort(),i=0;i<keys.length;i++){dataname=keys[i];var m=stylere.exec(dataname),selname,newsel,styleobj;m&&(selname=\"select\"+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),selectstylelist.push([newsel,styleobj])),m=surfre.exec(dataname),m&&(selname=\"select\"+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),surfaces.push([newsel,styleobj])),m=reslabre.exec(dataname),m&&(selname=\"select\"+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),labels.push([newsel,styleobj])),\"zoomto\"==dataname&&(zoomto=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname])),\"spin\"==dataname&&(spin=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]))}var applyStyles=function(e){for(e.setStyle(select,style),UI&&UI.createSelectionAndStyle(select,style),i=0;i<selectstylelist.length;i++){var t=selectstylelist[i][0]||{},r=selectstylelist[i][1]||{line:{}};e.setStyle(t,r),UI&&UI.createSelectionAndStyle(select,style)}var n=function(){var t=surfaces[i][0]||{},r=surfaces[i][1]||{};UI?e.addSurface(_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__.SurfaceType.VDW,r,t,t).then((function(e){UI.loadSurface(\"VDW\",t,r,e)})):e.addSurface(_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__.SurfaceType.VDW,r,t,t)};for(i=0;i<surfaces.length;i++)n();for(i=0;i<labels.length;i++){var a=labels[i][0]||{},o=labels[i][1]||{};e.addResLabels(a,o)}e.render(),e.zoomTo(zoomto),spin&&e.spin(spin.axis,spin.speed)},glviewer=viewer;try{var config=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.config)||{};void 0===config.backgroundColor&&(config.backgroundColor=bgcolor),void 0===config.backgroundAlpha&&(config.backgroundAlpha=bgalpha),null==glviewer?glviewer=_viewers[viewerdiv.id||nviewers++]=(0,_GLViewer__WEBPACK_IMPORTED_MODULE_0__.createViewer)(viewerdiv,config):(glviewer.setBackgroundColor(bgcolor,bgalpha),glviewer.setConfig(config),UI&&UI.initiateUI()),viewerdiv.dataset.ui&&$3Dmol.StateManager&&(UI=new $3Dmol.StateManager(glviewer))}catch(e){console.log(e),viewerdiv.textContent=\"WebGL appears to be disabled.\"}if(0!=datauri.length){i=0;var process=function process(moldata){uri=datauri[i];var type=viewerdiv.dataset.type||viewerdiv.dataset.datatype||datatypes[i];if(glviewer.addModel(moldata,type,options),UI){var modelName=viewerdiv.dataset[datatypes[i]];UI.setModelTitle(modelName)}if(i+=1,i<datauri.length)(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.get)(datauri[i]).then(process);else{if(applyStyles(glviewer),viewerdiv.dataset.callback){var runres=eval(viewerdiv.dataset.callback);\"function\"==typeof runres&&runres(glviewer)}_processing_autoinit=!1,callback&&callback(glviewer)}};(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.get)(datauri[0]).then(process)}else{if(viewerdiv.dataset.element){var moldataid=\"#\"+viewerdiv.dataset.element,molelem=document.querySelector(moldataid),moldata=molelem?molelem.textContent:\"\";type=viewerdiv.dataset.type||viewerdiv.dataset.datatype,glviewer.addModel(moldata,type,options)}if(applyStyles(glviewer),viewerdiv.dataset.callback){var runres=eval(viewerdiv.dataset.callback);\"function\"==typeof runres&&runres(glviewer)}_processing_autoinit=!1,callback&&callback(glviewer)}}))}}document.onreadystatechange=function(){\"complete\"===document.readyState&&_autoload()}},2550:function(e,t,r){\"use strict\";r.r(t),r.d(t,{CC:function(){return n},Color:function(){return i},builtinColorSchemes:function(){return c},chains:function(){return u},elementColors:function(){return l},htmlColors:function(){return a},residues:function(){return h},ssColors:function(){return o}});var i=function(){function e(t,r,i){return _classCallCheck(this,e),this.r=0,this.g=0,this.b=0,arguments.length>1&&\"number\"==typeof t?(this.r=t||0,this.g=r||0,this.b=i||0,this):this.set(t||0)}return _createClass(e,[{key:\"set\",value:function(t){return t instanceof e?t.clone():(\"number\"==typeof t?this.setHex(t):\"object\"==_typeof(t)&&(this.r=(null==t?void 0:t.r)||0,this.g=(null==t?void 0:t.g)||0,this.b=(null==t?void 0:t.b)||0),this)}},{key:\"setHex\",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:\"getHex\",value:function(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)}},{key:\"clone\",value:function(){return new e(this.r,this.g,this.b)}},{key:\"copy\",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:\"scaled\",value:function(){var e={};return e.r=Math.round(255*this.r),e.g=Math.round(255*this.g),e.b=Math.round(255*this.b),e.a=1,e}}]),e}(),n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:\"color\",value:function(t){if(!t)return e.cache[0];if(t instanceof i)return t;if(\"number\"==typeof t&&void 0!==e.cache[t])return e.cache[t];if(t&&Array.isArray(t))return t.map(e.color);var r=e.getHex(t),n=new i(r);return e.cache[r]=n,n}},{key:\"getHex\",value:function(t){var r;if(Array.isArray(t))return t.map(e.getHex);if(\"string\"==typeof t){var i=t;if(!isNaN(parseInt(i)))return parseInt(i);if(i=i.trim(),4==i.length&&\"#\"==i[0]&&(i=\"#\"+i[1]+i[1]+i[2]+i[2]+i[3]+i[3]),7==i.length&&\"#\"==i[0])return parseInt(i.substring(1),16);var n=e.rgbRegEx.exec(i);if(n){\"\"!=n[1]&&console.log(\"WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.\");for(var a=0,o=2;o<5;o++){a*=256;var s=n[o].endsWith(\"%\")?255*parseFloat(n[o])/100:parseFloat(n[o]);a+=Math.round(s)}return a}return(null===(r=null===window||void 0===window?void 0:window.$3Dmol)||void 0===r?void 0:r.htmlColors[t.toLowerCase()])||0}return t}}]),e}();n.rgbRegEx=/rgb(a?)\\(\\s*([^ ,\\)\\t]+)\\s*,\\s*([^ ,\\)\\t]+)\\s*,\\s*([^ ,\\)\\t]+)/i,n.cache={0:new i(0)};var a={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},o={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},s={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},l={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:s,defaultColors:Object.assign({},s),greenCarbon:Object.assign(Object.assign({},s),{C:65280}),cyanCarbon:Object.assign(Object.assign({},s),{C:65535}),magentaCarbon:Object.assign(Object.assign({},s),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},s),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},s),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},s),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},s),{C:8388736}),blueCarbon:Object.assign(Object.assign({},s),{C:255})},h={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},u={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},c={ssPyMol:{prop:\"ss\",map:o.pyMol},ssJmol:{prop:\"ss\",map:o.Jmol},Jmol:{prop:\"elem\",map:l.Jmol},amino:{prop:\"resn\",map:h.amino},shapely:{prop:\"resn\",map:h.shapely},nucleic:{prop:\"resn\",map:h.nucleic},chain:{prop:\"chain\",map:u.atom},rasmol:{prop:\"elem\",map:l.rasmol},default:{prop:\"elem\",map:l.defaultColors},greenCarbon:{prop:\"elem\",map:l.greenCarbon},chainHetatm:{prop:\"chain\",map:u.hetatm},cyanCarbon:{prop:\"elem\",map:l.cyanCarbon},magentaCarbon:{prop:\"elem\",map:l.magentaCarbon},purpleCarbon:{prop:\"elem\",map:l.purpleCarbon},whiteCarbon:{prop:\"elem\",map:l.whiteCarbon},orangeCarbon:{prop:\"elem\",map:l.orangeCarbon},yellowCarbon:{prop:\"elem\",map:l.yellowCarbon},blueCarbon:{prop:\"elem\",map:l.blueCarbon}}},6163:function(e,t,r){\"use strict\";r.r(t),r.d(t,{drawCartoon:function(){return w},subdivide_spline:function(){return u}});var i=r(9652),n=r(3351),a=r(7693),o=r(1460),s=r(2550),l=r(4406),h=r(9005);function u(e,t){var r,n,a,o,s,l,h,u,c,d=[],f=e;for((f=[]).push(e[0]),r=1,n=e.length-1;r<n;r++)if(s=e[r],l=e[r+1],s.smoothen){var p=new i.Vector3((s.x+l.x)/2,(s.y+l.y)/2,(s.z+l.z)/2);p.atom=s.atom,f.push(p)}else f.push(s);for(f.push(e[e.length-1]),r=-1,a=f.length;r<=a-3;r++)if(o=f[-1===r?0:r],s=f[r+1],l=f[r+2],h=f[r===a-3?a-1:r+3],u=(new i.Vector3).subVectors(l,o).multiplyScalar(.5),c=(new i.Vector3).subVectors(h,s).multiplyScalar(.5),!l.skip)for(var v=0;v<t;v++){var g=1/t*v,m=s.x+g*u.x+g*g*(-3*s.x+3*l.x-2*u.x-c.x)+g*g*g*(2*s.x-2*l.x+u.x+c.x),y=s.y+g*u.y+g*g*(-3*s.y+3*l.y-2*u.y-c.y)+g*g*g*(2*s.y-2*l.y+u.y+c.y),_=s.z+g*u.z+g*g*(-3*s.z+3*l.z-2*u.z-c.z)+g*g*g*(2*s.z-2*l.z+u.z+c.z),b=new i.Vector3(m,y,_);b.atom=v<t/2?s.atom:l.atom,d.push(b)}return d.push(f[f.length-1]),d}function c(e,t,r,i){for(var n,a,o,l,h=0,u=t.length;h<u;h++){l=Math.round(h*(i.length-1)/u),o=s.CC.color(i[l]);var c=e.updateGeoGroup(2),d=c.vertexArray,f=c.colorArray,p=c.faceArray;d[a=3*(n=c.vertices)]=t[h].x,d[a+1]=t[h].y,d[a+2]=t[h].z,d[a+3]=r[h].x,d[a+4]=r[h].y,d[a+5]=r[h].z;for(var v=0;v<6;++v)f[a+3*v]=o.r,f[a+1+3*v]=o.g,f[a+2+3*v]=o.b;if(h>0){var g=[n,n+1,n-1,n-2],m=c.faceidx;p[m]=g[0],p[m+1]=g[1],p[m+2]=g[3],p[m+3]=g[1],p[m+4]=g[2],p[m+5]=g[3],c.faceidx+=6}c.vertices+=2}}function d(e,t,r,i,a,o,l){l&&\"default\"!==l||(l=\"rectangle\"),\"edged\"===l?function(e,t,r,i,a,o){if(!(t.length<2)){var l,h;if(l=t[0],h=t[t.length-1],l=u(l,i),h=u(h,i),!a)return c(e,l,h,r);var d,f,p,v,g,m,y,_,b,w,x,k,C,A,S,E,z,M,T,L,D,O,I=[],F=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(C=0,A=l.length;C<A;C++){if(w=Math.round(C*(r.length-1)/A),b=s.CC.color(r[w]),I.push(f=l[C]),I.push(f),I.push(p=h[C]),I.push(p),C<A-1){var R=l[C+1].clone().sub(l[C]);d=h[C].clone().sub(l[C]).cross(R).normalize().multiplyScalar(a)}for(I.push(v=l[C].clone().add(d)),I.push(v),I.push(g=h[C].clone().add(d)),I.push(g),void 0!==f.atom&&(x=f.atom),L=(T=e.updateGeoGroup(8)).vertexArray,D=T.colorArray,O=T.faceArray,L[y=3*(m=T.vertices)]=f.x,L[y+1]=f.y,L[y+2]=f.z,L[y+3]=f.x,L[y+4]=f.y,L[y+5]=f.z,L[y+6]=p.x,L[y+7]=p.y,L[y+8]=p.z,L[y+9]=p.x,L[y+10]=p.y,L[y+11]=p.z,L[y+12]=v.x,L[y+13]=v.y,L[y+14]=v.z,L[y+15]=v.x,L[y+16]=v.y,L[y+17]=v.z,L[y+18]=g.x,L[y+19]=g.y,L[y+20]=g.z,L[y+21]=g.x,L[y+22]=g.y,L[y+23]=g.z,S=0;S<8;++S)D[y+3*S]=b.r,D[y+1+3*S]=b.g,D[y+2+3*S]=b.b;if(C>0){var P=void 0!==k&&void 0!==x&&k.serial!==x.serial;for(S=0;S<4;S++){var N=[m+F[S][0],m+F[S][1],m+F[S][2],m+F[S][3]];if(O[_=T.faceidx]=N[0],O[_+1]=N[1],O[_+2]=N[3],O[_+3]=N[1],O[_+4]=N[2],O[_+5]=N[3],T.faceidx+=6,x.clickable||k.clickable||x.hoverable||k.hoverable){var B=I[N[3]].clone(),U=I[N[0]].clone(),G=I[N[2]].clone(),V=I[N[1]].clone();if(B.atom=I[N[3]].atom||null,G.atom=I[N[2]].atom||null,U.atom=I[N[0]].atom||null,V.atom=I[N[1]].atom||null,P){var j=B.clone().add(U).multiplyScalar(.5),H=G.clone().add(V).multiplyScalar(.5),q=B.clone().add(V).multiplyScalar(.5);S%2==0?((k.clickable||k.hoverable)&&(E=new n.Triangle(j,q,B),z=new n.Triangle(H,G,q),M=new n.Triangle(q,G,B),k.intersectionShape.triangle.push(E),k.intersectionShape.triangle.push(z),k.intersectionShape.triangle.push(M)),(x.clickable||x.hoverable)&&(E=new n.Triangle(U,V,q),z=new n.Triangle(V,H,q),M=new n.Triangle(U,q,j),x.intersectionShape.triangle.push(E),x.intersectionShape.triangle.push(z),x.intersectionShape.triangle.push(M))):((x.clickable||x.hoverable)&&(E=new n.Triangle(j,q,B),z=new n.Triangle(H,G,q),M=new n.Triangle(q,G,B),x.intersectionShape.triangle.push(E),x.intersectionShape.triangle.push(z),x.intersectionShape.triangle.push(M)),(k.clickable||k.hoverable)&&(E=new n.Triangle(U,V,q),z=new n.Triangle(V,H,q),M=new n.Triangle(U,q,j),k.intersectionShape.triangle.push(E),k.intersectionShape.triangle.push(z),k.intersectionShape.triangle.push(M)))}else(x.clickable||x.hoverable)&&(E=new n.Triangle(U,V,B),z=new n.Triangle(V,G,B),x.intersectionShape.triangle.push(E),x.intersectionShape.triangle.push(z))}}}T.vertices+=8,k=x}var W=I.length-8;for(L=(T=e.updateGeoGroup(8)).vertexArray,D=T.colorArray,O=T.faceArray,y=3*(m=T.vertices),_=T.faceidx,C=0;C<4;C++){I.push(I[2*C]),I.push(I[W+2*C]);var Y=I[2*C],Z=I[W+2*C];L[y+6*C]=Y.x,L[y+1+6*C]=Y.y,L[y+2+6*C]=Y.z,L[y+3+6*C]=Z.x,L[y+4+6*C]=Z.y,L[y+5+6*C]=Z.z,D[y+6*C]=b.r,D[y+1+6*C]=b.g,D[y+2+6*C]=b.b,D[y+3+6*C]=b.r,D[y+4+6*C]=b.g,D[y+5+6*C]=b.b}W+=8,E=[m,m+2,m+6,m+4],z=[m+1,m+5,m+7,m+3],O[_]=E[0],O[_+1]=E[1],O[_+2]=E[3],O[_+3]=E[1],O[_+4]=E[2],O[_+5]=E[3],O[_+6]=z[0],O[_+7]=z[1],O[_+8]=z[3],O[_+9]=z[1],O[_+10]=z[2],O[_+11]=z[3],T.faceidx+=12,T.vertices+=8}}(e,t,r,i,a):\"rectangle\"!==l&&\"oval\"!==l&&\"parabola\"!==l||function(e,t,r,i,a,o,l){var h,d,f,p,v,g,m,y,_,b;if(!((f=t.length)<2||t[0].length<2)){for(h=0;h<f;h++)t[h]=u(t[h],i);if(p=t[0].length,!a)return c(e,t[0],t[f-1],r);var w=[],x=[],k=[];for(d=0;d<f;d++)w.push(.25+1.5*Math.sqrt((f-1)*d-Math.pow(d,2))/(f-1)),x.push(.5),k.push(2*(Math.pow(d/f,2)-d/f)+.6);var C,A,S,E,z,M,T,L,D,O,I=[];for(d=0;d<2*f-1;d++)I[d]=[d,d+1,d+1-2*f,d-2*f];I[2*f-1]=[d,d+1-2*f,d+1-4*f,d-2*f];var F=e.updateGeoGroup();for(h=0;h<p;h++){var R,P,N=e.groups,B=!1;for(F=e.updateGeoGroup(2*f),N!=e.groups&&h>0&&(h-=1,B=!0),M=Math.round(h*(r.length-1)/p),z=s.CC.color(r[M]),_=m,b=y,m=[],y=[],v=[],void 0!==t[0][h].atom&&(E=t[0][h].atom,\"oval\"===l?g=w:\"rectangle\"===l?g=x:\"parabola\"===l&&(g=k)),g||(g=x),d=0;d<f;d++)R=h<p-1?t[d][h+1].clone().sub(t[d][h]):t[d][h-1].clone().sub(t[d][h]).negate(),P=d<f-1?t[d+1][h].clone().sub(t[d][h]):t[d-1][h].clone().sub(t[d][h]).negate(),v[d]=P.cross(R).normalize().multiplyScalar(a*g[d]);for(d=0;d<f;d++)m[d]=t[d][h].clone().add(v[d].clone().negate());for(d=0;d<f;d++)y[d]=t[d][h].clone().add(v[d]);for(T=F.vertexArray,L=F.colorArray,D=F.faceArray,A=3*(C=F.vertices),d=0;d<f;d++)T[A+3*d+0]=m[d].x,T[A+3*d+1]=m[d].y,T[A+3*d+2]=m[d].z;for(d=0;d<f;d++)T[A+3*d+0+3*f]=y[f-1-d].x,T[A+3*d+1+3*f]=y[f-1-d].y,T[A+3*d+2+3*f]=y[f-1-d].z;for(d=0;d<2*f;++d)L[A+3*d+0]=z.r,L[A+3*d+1]=z.g,L[A+3*d+2]=z.b;if(h>0&&!B){for(d=0;d<2*f;d++)O=[C+I[d][0],C+I[d][1],C+I[d][2],C+I[d][3]],D[S=F.faceidx]=O[0],D[S+1]=O[1],D[S+2]=O[3],D[S+3]=O[1],D[S+4]=O[2],D[S+5]=O[3],F.faceidx+=6;if(E.clickable||E.hoverable){var U=[];for(d in U.push(new n.Triangle(_[0],m[0],m[f-1])),U.push(new n.Triangle(_[0],m[f-1],_[f-1])),U.push(new n.Triangle(_[f-1],m[f-1],y[f-1])),U.push(new n.Triangle(_[f-1],y[f-1],b[f-1])),U.push(new n.Triangle(y[0],b[0],b[f-1])),U.push(new n.Triangle(y[f-1],y[0],b[f-1])),U.push(new n.Triangle(m[0],_[0],b[0])),U.push(new n.Triangle(y[0],m[0],b[0])),U)E.intersectionShape.triangle.push(U[d])}}F.vertices+=2*f}for(T=F.vertexArray,L=F.colorArray,D=F.faceArray,A=3*(C=F.vertices),S=F.faceidx,h=0;h<f-1;h++)O=[h,h+1,2*f-2-h,2*f-1-h],D[S=F.faceidx]=O[0],D[S+1]=O[1],D[S+2]=O[3],D[S+3]=O[1],D[S+4]=O[2],D[S+5]=O[3],F.faceidx+=6;for(h=0;h<f-1;h++)O=[C-1-h,C-2-h,C-2*f+h+1,C-2*f+h],D[S=F.faceidx]=O[0],D[S+1]=O[1],D[S+2]=O[3],D[S+3]=O[1],D[S+4]=O[2],D[S+5]=O[3],F.faceidx+=6}}(e,t,r,i,a,0,l)}function f(e){return e&&\"C\"===e.elem&&\"CA\"===e.atom}function p(e,t){if(e&&t&&e.chain===t.chain){if(!(e.hetflag||t.hetflag||e.reschain!==t.reschain||e.resi!==t.resi&&e.resi!==t.resi-1))return!0;if(e.resi<t.resi){var r=e.x-t.x,i=e.y-t.y,n=e.z-t.z,a=r*r+i*i+n*n;if(\"CA\"==e.atom&&\"CA\"==t.atom&&a<16)return!0;if((\"P\"==e.atom||\"P\"==t.atom)&&a<64)return!0}}return!1}function v(e,t,r,i,n){if(null!=t&&0!=t.vertices){n&&(t.initTypedArrays(),t.setUpNormals());var o=new a.MeshDoubleLambertMaterial;o.vertexColors=a.Coloring.FaceColors,\"number\"==typeof r&&r>=0&&r<1&&(o.transparent=!0,o.opacity=r),o.outline=i;var s=new a.Mesh(t,o);e.add(s)}}function g(e,t,r,n,a,o,s,l,h){var u,c,d,f,p,v;if(n&&a&&s){var g=a.sub(n);g.normalize();var m=l[h];for(c=h+1;c<l.length&&(m=l[c]).atom!=s.atom;c++);if((m=m?new i.Vector3(m.x,m.y,m.z):new i.Vector3(0,0,0)).sub(n),\"arrow start\"===s.ss){var y=m.clone().multiplyScalar(.3).cross(a);n.add(y);var _=m.clone().cross(g).normalize();g.rotateAboutVector(_,.43)}for(s.style.cartoon.ribbon?u=s.style.cartoon.thickness||.4:s.style.cartoon.width?u=s.style.cartoon.width:\"c\"===s.ss?u=\"P\"===s.atom?.8:.5:\"arrow start\"===s.ss?(u=1.3,p=!0):u=\"arrow end\"===s.ss||\"h\"===s.ss&&s.style.cartoon.tubes||\"tube start\"===s.ss?.5:1.3,null!=o&&g.dot(o)<0&&g.negate(),g.multiplyScalar(u),c=0;c<t;c++)d=2*c/(t-1)-1,(f=new i.Vector3(n.x+d*g.x,n.y+d*g.y,n.z+d*g.z)).atom=s,r&&\"s\"===s.ss&&(f.smoothen=!0),e[c].push(f);if(p)for(g.multiplyScalar(2),c=0;c<t;c++)d=2*c/(t-1)-1,(f=new i.Vector3(n.x+d*g.x,n.y+d*g.y,n.z+d*g.z)).atom=s,f.smoothen=!1,f.skip=!0,e[c].push(f);return v=s.style.cartoon.style||\"default\",e.style?e.style!=v&&(console.log(\"Warning: a cartoon chain's strand-style is ambiguous\"),e.style=\"default\"):e.style=v,\"arrow start\"!==s.ss&&\"arrow end\"!==s.ss||(s.ss=\"s\"),p}}var m={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,\"O5'\":!0,\"O3'\":!0,\"C5'\":!0,\"C2'\":!0,\"O5*\":!0,\"O3*\":!0,\"C5*\":!0,\"C2*\":!0,N1:!0,N3:!0},y={DA:!0,DG:!0,A:!0,G:!0},_={DT:!0,DC:!0,U:!0,C:!0,T:!0},b={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function w(e,t,r){var u,c,w,x,k,C,A,S,E,z,M,T,L,D,O,I,F,R,P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,N=P,B=P,U=new a.Geometry(!0),G=new a.Geometry(!0),V=[],j=[],H=1,q=!1,W={};for(var Y in o.Gradient.builtinGradients)o.Gradient.builtinGradients.hasOwnProperty(Y)&&(W[Y]=new o.Gradient.builtinGradients[Y](r[1],r[0]));var Z=function(e,t){return r&&\"spectrum\"===t.color?t.colorscheme in W?W[t.colorscheme].valueToHex(e.resi):W.sinebow.valueToHex(e.resi):(0,h.getColorFromStyle)(e,t).getHex()};for(S=0;S<N;S++)j[S]=[];var X=!1,K=!1,$=[];for(S in t){if(\"C\"===(x=t[S]).elem&&\"CA\"===x.atom){var Q=p(w,x);Q&&\"s\"===x.ss?X=!0:X&&(w&&c&&w.style.cartoon.arrows&&c.style.cartoon.arrows&&(w.ss=\"arrow end\",c.ss=\"arrow start\"),X=!1),Q&&(\"h\"===w.ss||\"tube start\"==w.ss)&&w.style.cartoon.tubes?!K&&\"tube start\"!=w.ss&&x.style.cartoon.tubes&&(x.ss=\"tube start\",K=!0):K&&(\"tube start\"===w.ss?w.ss=\"tube end\":c&&c.style.cartoon.tubes&&(c.ss=\"tube end\"),K=!1),c=w,w=x}x&&x.atom in m&&$.push(x)}K&&w.style.cartoon.tubes&&(w.ss=\"tube end\",K=!1);var J=function(t){j[0].length>0&&d(G,j,V,B,A,0,j.style);var r=[],i=null;if(t){for(S=0;S<N;S++)r[S]=j[S][j[S].length-1];i=V[V.length-1]}for(j=[],S=0;S<N;S++)j[S]=[];if(V=[],t){for(S=0;S<N;S++)j[S].push(r[S]);V.push(i)}v(e,G,H,q,!0),v(e,U,H,q,!1),G=new a.Geometry(!0),U=new a.Geometry(!0)};w=void 0;for(var ee=0;ee<$.length;ee++){var te=(x=$[ee]).resn.trim(),re=te in b;if(H=1,u=x.style.cartoon,w&&w.style.cartoon&&(H=w.style.cartoon.opacity),w&&w.style.cartoon&&w.style.cartoon.outline&&(q=w.style.cartoon.outline),!w||!w.style.cartoon||x.style.cartoon&&w.style.cartoon.opacity==x.style.cartoon.opacity||J(w.chain==x.chain),\"trace\"===u.style){if(x.hetflag);else if(\"C\"===x.elem&&\"CA\"===x.atom||re&&\"P\"===x.atom||\"BB\"===x.atom){if(C=Z(x,u),A=(0,h.isNumeric)(u.thickness)?u.thickness:.4,p(w,x))if(C==k){var ie=s.CC.color(C);l.GLDraw.drawCylinder(U,w,x,A,ie,2,2)}else{var ne=(new i.Vector3).addVectors(w,x).multiplyScalar(.5),ae=s.CC.color(k),oe=s.CC.color(C);l.GLDraw.drawCylinder(U,w,ne,A,ae,2,0),l.GLDraw.drawCylinder(U,ne,x,A,oe,0,2)}if((!0===x.clickable||x.hoverable)&&void 0!==x.intersectionShape){var se=new i.Vector3(x.x,x.y,x.z);x.intersectionShape.sphere.push(new n.Sphere(se,A))}w=x,k=C}}else{if(f(x)||re&&(\"P\"===x.atom||0==x.atom.indexOf(\"O5\"))){if(R)if(\"tube end\"===x.ss)R=!1,F=new i.Vector3(x.x,x.y,x.z),l.GLDraw.drawCylinder(U,I,F,2,s.CC.color(k),1,1),x.ss=\"h\";else{if(w.chain==x.chain&&\"tube end\"!==w.ss)continue;R=!1,w.ss=\"h\",F=new i.Vector3(w.x,w.y,w.z),l.GLDraw.drawCylinder(U,I,F,2,s.CC.color(k),1,1)}if(w&&(!p(w,x)||\"tube start\"===w.ss)){for(\"tube start\"===w.ss&&(R=!0,I=new i.Vector3(w.x,w.y,w.z),w.ss=\"h\"),O&&(D=T?(new i.Vector3).addVectors(w,T).multiplyScalar(.5):new i.Vector3(w.x,w.y,w.z),l.GLDraw.drawCylinder(U,D,O,.4,s.CC.color(O.color),0,2),g(j,N,!0,T,L,M,w,$,ee),V.push(C),D=null,O=null),j[0].length>0&&d(G,j,V,B,A,0,j.style),j=[],S=0;S<N;S++)j[S]=[];V=[]}if(void 0===w||w.rescode!=x.rescode||w.resi!=x.resi){if(O){var le=(D=(new i.Vector3).addVectors(w,x).multiplyScalar(.5)).clone().sub(O).multiplyScalar(.02);D.add(le),l.GLDraw.drawCylinder(U,D,O,.4,s.CC.color(O.color),0,2),D=null,O=null}C=Z(x,u),V.push(C),A=(0,h.isNumeric)(u.thickness)?u.thickness:.4,w=x,(E=new i.Vector3(w.x,w.y,w.z)).resi=w.resi,k=C}!0!==x.clickable&&!0!==x.hoverable||void 0!==x.intersectionShape&&void 0!==x.intersectionShape.triangle||(x.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else f(w)&&\"O\"===x.atom||re&&\"P\"===w.atom&&(\"OP2\"===x.atom||\"O2P\"===x.atom)||re&&0==w.atom.indexOf(\"O5\")&&0==x.atom.indexOf(\"C5\")?((z=new i.Vector3(x.x,x.y,x.z)).resi=x.resi,\"OP2\"!==x.atom&&\"O2P\"!==x.atom||(L=new i.Vector3(x.x,x.y,x.z))):re&&0==x.atom.indexOf(\"O3\")?T=new i.Vector3(x.x,x.y,x.z):(\"N1\"===x.atom&&te in y||\"N3\"===x.atom&&te in _)&&((O=new i.Vector3(x.x,x.y,x.z)).color=(0,h.getColorFromStyle)(x,u).getHex());z&&E&&z.resi===E.resi&&(g(j,N,!0,E,z,M,w,$,ee),M=z,E=null,z=null,V.push(C))}}O&&(D=T?(new i.Vector3).addVectors(w,T).multiplyScalar(.5):new i.Vector3(w.x,w.y,w.z),l.GLDraw.drawCylinder(U,D,O,.4,s.CC.color(O.color),0,2),g(j,N,!0,T,L,M,w,$,ee),V.push(C)),J(!1)}},3637:function(e,t,r){\"use strict\";r.r(t),r.d(t,{CAP:function(){return g.CAP},CC:function(){return n.CC},Color:function(){return n.Color},CustomLinear:function(){return i.CustomLinear},Cylinder:function(){return u.Cylinder},GLDraw:function(){return g.GLDraw},GLModel:function(){return y.GLModel},GLShape:function(){return v.GLShape},GLViewer:function(){return _.GLViewer},GLVolumetricRender:function(){return p.GLVolumetricRender},Gradient:function(){return i.Gradient},GradientType:function(){return i.GradientType},Label:function(){return a.Label},LabelCount:function(){return a.LabelCount},MarchingCube:function(){return d.MarchingCube},MarchingCubeInitializer:function(){return d.MarchingCubeInitializer},Matrix3:function(){return h.Matrix3},Matrix4:function(){return h.Matrix4},Parsers:function(){return l.Parsers},PausableTimer:function(){return c.PausableTimer},PointGrid:function(){return d.PointGrid},ProteinSurface:function(){return d.ProteinSurface},Quaternion:function(){return h.Quaternion},ROYGB:function(){return i.ROYGB},RWB:function(){return i.RWB},Ray:function(){return h.Ray},Sinebow:function(){return i.Sinebow},Sphere:function(){return u.Sphere},SurfaceType:function(){return d.SurfaceType},Triangle:function(){return u.Triangle},Vector2:function(){return h.Vector2},Vector3:function(){return h.Vector3},VolumeData:function(){return f.VolumeData},adjustVolumeStyle:function(){return c.adjustVolumeStyle},applyPartialCharges:function(){return s},autoinit:function(){return b.autoinit},autoload:function(){return b.autoload},base64ToArray:function(){return c.base64ToArray},bondLength:function(){return l.bondLength},builtinColorSchemes:function(){return n.builtinColorSchemes},builtinGradients:function(){return i.builtinGradients},chains:function(){return n.chains},clamp:function(){return h.clamp},conversionMatrix3:function(){return h.conversionMatrix3},createStereoViewer:function(){return _.createStereoViewer},createViewer:function(){return _.createViewer},createViewerGrid:function(){return _.createViewerGrid},deepCopy:function(){return c.deepCopy},degToRad:function(){return h.degToRad},download:function(){return c.download},drawCartoon:function(){return m.drawCartoon},elementColors:function(){return n.elementColors},extend:function(){return c.extend},get:function(){return c.get},getAtomProperty:function(){return c.getAtomProperty},getColorFromStyle:function(){return c.getColorFromStyle},getElement:function(){return c.getElement},getExtent:function(){return c.getExtent},getGradient:function(){return i.getGradient},getPropertyRange:function(){return c.getPropertyRange},getbin:function(){return c.getbin},htmlColors:function(){return n.htmlColors},isEmptyObject:function(){return c.isEmptyObject},isNumeric:function(){return c.isNumeric},makeFunction:function(){return c.makeFunction},mergeGeos:function(){return c.mergeGeos},normalizeValue:function(){return i.normalizeValue},partialCharges:function(){return o},processing_autoinit:function(){return b.processing_autoinit},residues:function(){return n.residues},setBondLength:function(){return l.setBondLength},setSyncSurface:function(){return d.setSyncSurface},specStringToObject:function(){return c.specStringToObject},splitMesh:function(){return v.splitMesh},ssColors:function(){return n.ssColors},subdivide_spline:function(){return m.subdivide_spline},syncSurface:function(){return d.syncSurface},viewers:function(){return b.viewers}});var i=r(1460),n=r(2550),a=r(7825),o={\"ALA:N\":-.15,\"ALA:CA\":.1,\"ALA:CB\":0,\"ALA:C\":.6,\"ALA:O\":-.55,\"ARG:N\":-.15,\"ARG:CA\":.1,\"ARG:CB\":0,\"ARG:CG\":0,\"ARG:CD\":.1,\"ARG:NE\":-.1,\"ARG:CZ\":.5,\"ARG:NH1\":.25,\"ARG:NH2\":.25,\"ARG:C\":.6,\"ARG:O\":-.55,\"ASN:N\":-.15,\"ASN:CA\":.1,\"ASN:CB\":0,\"ASN:CG\":.55,\"ASN:OD1\":-.55,\"ASN:ND2\":0,\"ASN:C\":.6,\"ASN:O\":-.55,\"ASP:N\":-.15,\"ASP:CA\":.1,\"ASP:CB\":0,\"ASP:CG\":.14,\"ASP:OD1\":-.57,\"ASP:OD2\":-.57,\"ASP:C\":.6,\"ASP:O\":-.55,\"CYS:N\":-.15,\"CYS:CA\":.1,\"CYS:CB\":.19,\"CYS:SG\":-.19,\"CYS:C\":.6,\"CYS:O\":-.55,\"GLN:N\":-.15,\"GLN:CA\":.1,\"GLN:CB\":0,\"GLN:CG\":0,\"GLN:CD\":.55,\"GLN:OE1\":-.55,\"GLN:NE2\":0,\"GLN:C\":.6,\"GLN:O\":-.55,\"GLU:N\":-.15,\"GLU:CA\":.1,\"GLU:CB\":0,\"GLU:CG\":0,\"GLU:CD\":.14,\"GLU:OE1\":-.57,\"GLU:OE2\":-.57,\"GLU:C\":.6,\"GLU:O\":-.55,\"GLY:N\":-.15,\"GLY:CA\":.1,\"GLY:C\":.6,\"GLY:O\":-.55,\"HIS:N\":-.15,\"HIS:CA\":.1,\"HIS:CB\":0,\"HIS:CG\":.1,\"HIS:ND1\":-.1,\"HIS:CD2\":.1,\"HIS:NE2\":-.4,\"HIS:CE1\":.3,\"HIS:C\":.6,\"HIS:O\":-.55,\"ILE:N\":-.15,\"ILE:CA\":.1,\"ILE:CB\":0,\"ILE:CG2\":0,\"ILE:CG1\":0,\"ILE:CD\":0,\"ILE:C\":.6,\"ILE:O\":-.55,\"LEU:N\":-.15,\"LEU:CA\":.1,\"LEU:CB\":0,\"LEU:CG\":0,\"LEU:CD1\":0,\"LEU:CD2\":0,\"LEU:C\":.6,\"LEU:O\":-.55,\"LYS:N\":-.15,\"LYS:CA\":.1,\"LYS:CB\":0,\"LYS:CG\":0,\"LYS:CD\":0,\"LYS:CE\":.25,\"LYS:NZ\":.75,\"LYS:C\":.6,\"LYS:O\":-.55,\"MET:N\":-.15,\"MET:CA\":.1,\"MET:CB\":0,\"MET:CG\":.06,\"MET:SD\":-.12,\"MET:CE\":.06,\"MET:C\":.6,\"MET:O\":-.55,\"PHE:N\":-.15,\"PHE:CA\":.1,\"PHE:CB\":0,\"PHE:CG\":0,\"PHE:CD1\":0,\"PHE:CD2\":0,\"PHE:CE1\":0,\"PHE:CE2\":0,\"PHE:CZ\":0,\"PHE:C\":.6,\"PHE:O\":-.55,\"PRO:N\":-.25,\"PRO:CD\":.1,\"PRO:CA\":.1,\"PRO:CB\":0,\"PRO:CG\":0,\"PRO:C\":.6,\"PRO:O\":-.55,\"SER:N\":-.15,\"SER:CA\":.1,\"SER:CB\":.25,\"SER:OG\":-.25,\"SER:C\":.6,\"SER:O\":-.55,\"THR:N\":-.15,\"THR:CA\":.1,\"THR:CB\":.25,\"THR:OG1\":-.25,\"THR:CG2\":0,\"THR:C\":.6,\"THR:O\":-.55,\"TRP:N\":-.15,\"TRP:CA\":.1,\"TRP:CB\":0,\"TRP:CG\":-.03,\"TRP:CD2\":.1,\"TRP:CE2\":-.04,\"TRP:CE3\":-.03,\"TRP:CD1\":.06,\"TRP:NE1\":-.06,\"TRP:CZ2\":0,\"TRP:CZ3\":0,\"TRP:CH2\":0,\"TRP:C\":.6,\"TRP:O\":-.55,\"TYR:N\":-.15,\"TYR:CA\":.1,\"TYR:CB\":0,\"TYR:CG\":0,\"TYR:CD1\":0,\"TYR:CE1\":0,\"TYR:CD2\":0,\"TYR:CE2\":0,\"TYR:CZ\":.25,\"TYR:OH\":-.25,\"TYR:C\":.6,\"TYR:O\":-.55,\"VAL:N\":-.15,\"VAL:CA\":.1,\"VAL:CB\":0,\"VAL:CG1\":0,\"VAL:CG2\":0,\"VAL:C\":.6,\"VAL:O\":-.55};function s(e,t){if((!t||void 0===e.partialCharge)&&e.resn&&e.atom){var r=e.resn+\":\"+e.atom;e.properties.partialCharge=o[r]}}var l=r(2640),h=r(9652),u=r(3351),c=r(9005),d=r(9192),f=r(7323),p=r(1496),v=r(8783),g=r(4406),m=r(6163),y=r(2116),_=r(9230),b=r(9158);window&&(window.$3Dmol=t)},972:function(e,t,r){\"use strict\";r.r(t),r.d(t,{CUBE:function(){return o}});var i=r(7693),n=r(3920),a={1:\"H\",2:\"He\",3:\"Li\",4:\"Be\",5:\"B\",6:\"C\",7:\"N\",8:\"O\",9:\"F\",10:\"Ne\",11:\"Na\",12:\"Mg\",13:\"Al\",14:\"Si\",15:\"P\",16:\"S\",17:\"Cl\",18:\"Ar\",19:\"K\",20:\"Ca\",21:\"Sc\",22:\"Ti\",23:\"V\",24:\"Cr\",25:\"Mn\",26:\"Fe\",27:\"Co\",28:\"Ni\",29:\"Cu\",30:\"Zn\",31:\"Ga\",32:\"Ge\",33:\"As\",34:\"Se\",35:\"Br\",36:\"Kr\",37:\"Rb\",38:\"Sr\",39:\"Y\",40:\"Zr\",41:\"Nb\",42:\"Mo\",43:\"Tc\",44:\"Ru\",45:\"Rh\",46:\"Pd\",47:\"Ag\",48:\"Cd\",49:\"In\",50:\"Sn\",51:\"Sb\",52:\"Te\",53:\"I\",54:\"Xe\",55:\"Cs\",56:\"Ba\",71:\"Lu\",72:\"Hf\",73:\"Ta\",74:\"W\",75:\"Re\",76:\"Os\",77:\"Ir\",78:\"Pt\",79:\"Au\",80:\"Hg\",81:\"Tl\",82:\"Pb\",83:\"Bi\",84:\"Po\",85:\"At\",86:\"Rn\",87:\"Fr\",88:\"Ra\",104:\"Rf\",105:\"Db\",106:\"Sg\",107:\"Bh\",108:\"Hs\",109:\"Mt\",110:\"Ds\",111:\"Rg\",112:\"Cn\",113:\"Nh\",114:\"Fl\",115:\"Mc\",116:\"Lv\",117:\"Ts\",118:\"Og\",57:\"La\",58:\"Ce\",59:\"Pr\",60:\"Nd\",61:\"Pm\",62:\"Sm\",63:\"Eu\",64:\"Gd\",65:\"Tb\",66:\"Dy\",67:\"Ho\",68:\"Er\",69:\"Tm\",70:\"Yb\",89:\"Ac\",90:\"Th\",91:\"Pa\",92:\"U\",93:\"Np\",94:\"Pu\",95:\"Am\",96:\"Cm\",97:\"Bk\",98:\"Cf\",99:\"Es\",100:\"Fm\",101:\"Md\",102:\"No\"};function o(e,t){t=t||{};var r=[[]],o=e.split(/\\r?\\n/),s=void 0===t.assignBonds||t.assignBonds;if(o.length<6)return r;var l=o[2].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \"),h=Math.abs(parseFloat(l[0])),u={},c=u.origin=new i.Vector3(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));l=o[3].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \");var d=(l=o[3].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \"))[0]>0?.529177:1;c.multiplyScalar(d);var f=Math.abs(l[0]),p=new i.Vector3(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])).multiplyScalar(d);l=o[4].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \");var v=Math.abs(l[0]),g=new i.Vector3(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])).multiplyScalar(d);l=o[5].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \");var m=Math.abs(l[0]),y=new i.Vector3(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])).multiplyScalar(d);if(u.size={x:f,y:v,z:m},u.unit=new i.Vector3(p.x,g.y,y.z),0!=p.y||0!=p.z||0!=g.x||0!=g.z||0!=y.x||0!=y.y){u.matrix4=new i.Matrix4(p.x,g.x,y.x,0,p.y,g.y,y.y,0,p.z,g.z,y.z,0,0,0,0,1);var _=(new i.Matrix4).makeTranslation(c.x,c.y,c.z);u.matrix4=u.matrix4.multiplyMatrices(_,u.matrix4),u.matrix=u.matrix4.matrix3FromTopLeft(),u.origin=new i.Vector3(0,0,0),u.unit=new i.Vector3(1,1,1)}r.modelData=[{cryst:u}],o=o.splice(6,h);for(var b=r[r.length-1].length,w=b+o.length,x=b;x<w;++x){var k={};k.serial=x;var C=o[x-b].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \");k.elem=a[C[0]],k.x=parseFloat(C[2])*d,k.y=parseFloat(C[3])*d,k.z=parseFloat(C[4])*d,k.hetflag=!0,k.bonds=[],k.bondOrder=[],k.properties={},r[r.length-1].push(k)}if(s)for(var A=0;A<r.length;A++)(0,n.assignBonds)(r[A]);return r}},5591:function(e,t,r){\"use strict\";r.r(t),r.d(t,{VASP:function(){return n}});var i=r(7693);function n(e){var t=[[]],r={},n=e.replace(/^\\s+/,\"\").split(/\\r?\\n/);if(n.length<3)return t;if(!n[1].match(/\\d+/))return console.log(\"Warning: second line of the vasp structure file must be a number\"),t;if(r.length=parseFloat(n[1]),r.length<0)return console.log(\"Warning: Vasp implementation for negative lattice lengths is not yet available\"),t;r.xVec=new Float32Array(n[2].replace(/^\\s+/,\"\").split(/\\s+/)),r.yVec=new Float32Array(n[3].replace(/^\\s+/,\"\").split(/\\s+/)),r.zVec=new Float32Array(n[4].replace(/^\\s+/,\"\").split(/\\s+/));var a=new i.Matrix3(r.xVec[0],r.xVec[1],r.xVec[2],r.yVec[0],r.yVec[1],r.yVec[2],r.zVec[0],r.zVec[1],r.zVec[2]);a.multiplyScalar(r.length),t.modelData=[{symmetries:[],cryst:{matrix:a}}];var o=n[5].replace(/\\s+/,\"\").replace(/\\s+$/,\"\").split(/\\s+/),s=new Int16Array(n[6].replace(/^\\s+/,\"\").split(/\\s+/)),l=n[7].replace(/\\s+/,\"\");if(l.match(/C/))l=\"cartesian\";else{if(!l.match(/D/))return console.log(\"Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)\"),t;l=\"direct\"}if(o.length!=s.length)return console.log(\"Warning: declaration of atomary species wrong:\"),console.log(o),console.log(s),t;n.splice(0,8);for(var h=0,u=0,c=o.length;u<c;u++){for(var d=o[u],f=0,p=s[u];f<p;f++){var v=new Float32Array(n[h+f].replace(/^\\s+/,\"\").split(/\\s+/)),g={};g.elem=d,\"cartesian\"==l?(g.x=r.length*v[0],g.y=r.length*v[1],g.z=r.length*v[2]):(g.x=r.length*(v[0]*r.xVec[0]+v[1]*r.yVec[0]+v[2]*r.zVec[0]),g.y=r.length*(v[0]*r.xVec[1]+v[1]*r.yVec[1]+v[2]*r.zVec[1]),g.z=r.length*(v[0]*r.xVec[2]+v[1]*r.yVec[2]+v[2]*r.zVec[2])),g.bonds=[],t[0].push(g)}h+=s[u]}return t}},2640:function(e,t,r){\"use strict\";r.r(t),r.d(t,{Parsers:function(){return D},bondLength:function(){return v.bondLength},setBondLength:function(){return v.setBondLength}});var i=r(5591),n=r(972),a=r(7693),o=r(3920);function s(e,t){for(var r=[[]],i=void 0===(t=t||{}).assignBonds||t.assignBonds,n=e.split(/\\r?\\n|\\r/);n.length>0&&!(n.length<3);){var s=parseInt(n[0]);if(isNaN(s)||s<=0)break;if(n.length<s+2)break;var l=/Lattice\\s*=\\s*[\"\\{\\}]([^\"\\{\\}]+)[\"\\{\\}]\\s*/gi.exec(n[1]);if(null!=l&&l.length>1){var h=new Float32Array(l[1].split(/\\s+/)),u=new a.Matrix3(h[0],h[3],h[6],h[1],h[4],h[7],h[2],h[5],h[8]);r.modelData=[{cryst:{matrix:u}}]}for(var c=2,d=r[r.length-1].length,f=d+s,p=d;p<f;p++){var v=n[c++].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \"),g={};g.serial=p;var m=v[0];g.atom=g.elem=m[0].toUpperCase()+m.substr(1,1).toLowerCase(),g.x=parseFloat(v[1]),g.y=parseFloat(v[2]),g.z=parseFloat(v[3]),g.hetflag=!0,g.bonds=[],g.bondOrder=[],g.properties={},r[r.length-1][p]=g,v.length>=7&&(g.dx=parseFloat(v[4]),g.dy=parseFloat(v[5]),g.dz=parseFloat(v[6]))}if(!t.multimodel)break;r.push([]),n.splice(0,c)}if(i)for(var y=0;y<r.length;y++)(0,o.assignBonds)(r[y]);if(t.onemol){var _=r;(r=[]).push(_[0]);for(var b=1;b<_.length;b++)for(var w=r[0].length,x=0;x<_[b].length;x++){for(var k=_[b][x],C=0;C<k.bonds.length;C++)k.bonds[C]=k.bonds[C]+w;k.index=r[0].length,k.serial=r[0].length,r[0].push(k)}}return r}function l(e,t){var r=\"V2000\",i=e.split(/\\r?\\n|\\r/);return i.length>3&&i[3].length>38&&(r=i[3].substr(34,5)),\"V2000\"===r?function(e,t){var r=[[]],i=!1;for(void 0!==t.keepH&&(i=!t.keepH);e.length>0&&!(e.length<4);){var n=parseInt(e[3].substr(0,3));if(isNaN(n)||n<=0)break;var a=parseInt(e[3].substr(3,3)),o=4;if(e.length<4+n+a)break;var s,l,h=[],u=r[r.length-1].length,c=u+n;for(s=u;s<c;s++,o++){var d={},f=(l=e[o]).substr(31,3).replace(/ /g,\"\");d.atom=d.elem=f[0].toUpperCase()+f.substr(1).toLowerCase(),\"H\"===d.elem&&i||(d.serial=s,h[s]=r[r.length-1].length,d.x=parseFloat(l.substr(0,10)),d.y=parseFloat(l.substr(10,10)),d.z=parseFloat(l.substr(20,10)),d.hetflag=!0,d.bonds=[],d.bondOrder=[],d.properties={},d.index=r[r.length-1].length,r[r.length-1].push(d))}for(s=0;s<a;s++,o++){l=e[o];var p=h[parseInt(l.substr(0,3))-1+u],v=h[parseInt(l.substr(3,3))-1+u],g=parseFloat(l.substr(6));void 0!==p&&void 0!==v&&(r[r.length-1][p].bonds.push(v),r[r.length-1][p].bondOrder.push(g),r[r.length-1][v].bonds.push(p),r[r.length-1][v].bondOrder.push(g))}if(!t.multimodel)break;for(t.onemol||r.push([]);\"$$$$\"!==e[o];)o++;e.splice(0,++o)}return r}(i,t):\"V3000\"===r?function(e,t){var r=[[]],i=!1;for(void 0!==t.keepH&&(i=!t.keepH);e.length>0&&!(e.length<8)&&e[4].startsWith(\"M  V30 BEGIN CTAB\")&&e[5].startsWith(\"M  V30 COUNTS\")&&!(e[5].length<14);){var n=e[5].substr(13).match(/\\S+/g);if(n.length<2)break;var a=parseInt(n[0]);if(isNaN(a)||a<=0)break;var o=parseInt(n[1]),s=7;if(e.length<8+a+o)break;var l,h=[],u=r[r.length-1].length,c=u+a;for(l=u;l<c;l++,s++){var d=e[s].substr(6).match(/\\S+/g);if(d.length>4){var f={},p=d[1].replace(/ /g,\"\");f.atom=f.elem=p[0].toUpperCase()+p.substr(1).toLowerCase(),\"H\"===f.elem&&i||(f.serial=l,h[l]=r[r.length-1].length,f.x=parseFloat(d[2]),f.y=parseFloat(d[3]),f.z=parseFloat(d[4]),f.hetflag=!0,f.bonds=[],f.bondOrder=[],f.properties={},f.index=r[r.length-1].length,r[r.length-1].push(f))}}if(\"M  V30 END ATOM\"!==e[s])break;if(s++,0===o||\"M  V30 BEGIN BOND\"!==e[s])break;for(s++,l=0;l<o;l++,s++){var v=e[s].substr(6).match(/\\S+/g);if(v.length>3){var g=h[parseInt(v[2])-1+u],m=h[parseInt(v[3])-1+u],y=parseFloat(v[1]);void 0!==g&&void 0!==m&&(r[r.length-1][g].bonds.push(m),r[r.length-1][g].bondOrder.push(y),r[r.length-1][m].bonds.push(g),r[r.length-1][m].bondOrder.push(y))}}if(!t.multimodel)break;for(t.onemol||r.push([]);\"$$$$\"!==e[s];)s++;e.splice(0,++s)}return r}(i,t):[[]]}function h(e,t){var r=[[]];\"string\"==typeof e&&(e=JSON.parse(e));for(var i=e.m,n=i[0].a,a=i[0].b,o=i[0].s,s=void 0!==t&&void 0!==t.parseStyle?t.parseStyle:void 0!==o,l=r[r.length-1].length,h=0;h<n.length;h++){var u=n[h],c={};c.id=u.i,c.x=u.x,c.y=u.y,c.z=u.z||0,c.bonds=[],c.bondOrder=[];var d=u.l||\"C\";c.elem=d[0].toUpperCase()+d.substr(1).toLowerCase(),c.serial=r[r.length-1].length,s&&(c.style=o[u.s||0]),r[r.length-1].push(c)}for(var f=0;f<a.length;f++){var p=a[f],v=p.b+l,g=p.e+l,m=p.o||1,y=r[r.length-1][v],_=r[r.length-1][g];y.bonds.push(g),y.bondOrder.push(m),_.bonds.push(v),_.bondOrder.push(m)}return r}function u(e,t){!function(e,t){for(var r=t||3.2,i=r*r,n=[],a=0,o=e.length;a<o;a++){e[a].index=a;var s=e[a];s.hetflag||\"N\"!==s.atom&&\"O\"!==s.atom||(n.push(s),s.hbondOther=null,s.hbondDistanceSq=Number.POSITIVE_INFINITY)}n.sort((function(e,t){return e.z-t.z}));for(var l=0,h=n.length;l<h;l++)for(var u=n[l],c=l+1;c<h;c++){var d=n[c],f=d.z-u.z;if(f>r)break;if(d.atom!=u.atom){var p=Math.abs(d.y-u.y);if(!(p>r)){var v=Math.abs(d.x-u.x);if(!(v>r)){var g=v*v+p*p+f*f;g>i||d.chain==u.chain&&Math.abs(d.resi-u.resi)<4||(g<u.hbondDistanceSq&&(u.hbondOther=d,u.hbondDistanceSq=g),g<d.hbondDistanceSq&&(d.hbondOther=u,d.hbondDistanceSq=g))}}}}}(e,t);var r,i,n,a,o,s,l={};for(r=0,i=e.length;r<i;r++)if(void 0===l[(o=e[r]).chain]&&(l[o.chain]=[]),isFinite(o.hbondDistanceSq)){var h=o.hbondOther;void 0===l[h.chain]&&(l[h.chain]=[]),4===Math.abs(h.resi-o.resi)&&(l[o.chain][o.resi]=\"h\")}for(n in l)for(a=1;a<l[n].length-1;a++){var u=l[n][a-1],c=l[n][a+1];s=l[n][a],\"h\"==u&&u==c&&s!=u&&(l[n][a]=u)}for(r=0,i=e.length;r<i;r++)o=e[r],isFinite(o.hbondDistanceSq)&&\"h\"!=l[o.chain][o.resi]&&\"h\"!=o.ss&&(l[o.chain][o.resi]=\"maybesheet\");for(var d=0,f=e.length;d<f;d++)if(o=e[d],isFinite(o.hbondDistanceSq)&&\"maybesheet\"==l[o.chain][o.resi]){var p=o.hbondOther,v=l[p.chain][p.resi];\"maybesheet\"!=v&&\"s\"!=v||(l[o.chain][o.resi]=\"s\",l[p.chain][p.resi]=\"s\")}for(var g in l){for(var m=1;m<l[g].length-1;m++){var y=l[g][m-1],_=l[g][m+1];s=l[g][m],\"s\"==y&&y==_&&s!=y&&(l[g][m]=y)}for(var b=0;b<l[g].length;b++){var w=l[g][b];\"h\"!=w&&\"s\"!=w||l[g][b-1]!=w&&l[g][b+1]!=w&&delete l[g][b]}}for(r=0,i=e.length;r<i;r++)s=l[(o=e[r]).chain][o.resi],delete o.hbondOther,delete o.hbondDistanceSq,void 0!==s&&\"maybesheet\"!=s&&(o.ss=s,l[o.chain][o.resi-1]!=s&&(o.ssbegin=!0),l[o.chain][o.resi+1]!=s&&(o.ssend=!0))}function c(e,t,r,i){var n,o,s,l=!r.duplicateAssemblyAtoms,h=t.length,u=h,c=-1;if(r.normalizeAssembly&&i){var d=(0,a.conversionMatrix3)(i.a,i.b,i.c,i.alpha,i.beta,i.gamma),f=new a.Matrix3;for(f.getInverse3(d),n=0;n<e.length;n++){var p=new a.Vector3(0,0,0);for(s=0;s<h;s++){var v=new a.Vector3(t[s].x,t[s].y,t[s].z);v.applyMatrix4(e[n]),v.applyMatrix3(f),p.add(v)}p.divideScalar(h);for(var g=[p.x,p.y,p.z],m=[0,0,0],y=0;y<3;y++){for(;g[y]<-.001;)g[y]+=1,m[y]+=1;for(;g[y]>1.001;)g[y]-=1,m[y]-=1}var _=new a.Vector3(m[0],m[1],m[2]);_.applyMatrix3(d),e[n].isNearlyIdentity()&&_.lengthSq()>.001&&(c=n),e[n].translate(_)}}if(l){if(e.length>1)for(n=0;n<t.length;n++){var b=[];for(o=0;o<e.length;o++)if(!e[o].isNearlyIdentity()){var w=new a.Vector3;w.set(t[n].x,t[n].y,t[n].z),w.applyMatrix4(e[o]),b.push(w)}t[n].symmetries=b}}else{for(s=0;s<h;s++)t[s].sym=-1;for(n=0;n<e.length;n++)if(e[n].isNearlyIdentity()||c==n)for(s=0;s<h;s++)t[s].sym=n;else{var x=new a.Vector3;for(s=0;s<h;s++){var k=[];for(o=0;o<t[s].bonds.length;o++)k.push(t[s].bonds[o]+u);x.set(t[s].x,t[s].y,t[s].z),x.applyMatrix4(e[n]);var C={};for(var A in t[s])C[A]=t[s][A];C.x=x.x,C.y=x.y,C.z=x.z,C.bonds=k,C.sym=n,C.index=t.length,t.push(C)}u=t.length}if(c>=0){var S=new a.Vector3;for(s=0;s<h;s++)S.set(t[s].x,t[s].y,t[s].z),S.applyMatrix4(e[c]),t[s].x=S.x,t[s].y=S.y,t[s].z=S.z}e.length=0}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i=!t.doAssembly,n=r.modelData=[],s=void 0===t.assignBonds||t.assignBonds;function l(e,t){for(var r=[],i=0,n=0;n<e.length;){for(;e.substr(n,t.length)!==t&&n<e.length;){if(\"'\"===e[n])for(n++;n<e.length&&\"'\"!==e[n];)n++;else if('\"'===e[n])for(n++;n<e.length&&'\"'!==e[n];)n++;n++}r.push(e.substr(i,n-i)),i=n+=t.length}return r}for(var h=e.split(/\\r?\\n|\\r/),d=[],f=!1,p=0;p<h.length;p++){var v=h[p].split(\"#\")[0];if(f?\";\"===v[0]&&(f=!1):\";\"===v[0]&&(f=!0),f||\"\"!==v){if(!f&&\"_\"===(v=v.trim())[0]){var g=v.split(/\\s/)[0].indexOf(\".\");if(g>-1){var m=v.split(\"\");m[g]=\"_\",v=(v=m.join(\"\")).substr(0,g)+\"_\"+v.substr(g+1)}}d.push(v)}}for(var y,_,b,w,x=0;x<d.length;){for(;!d[x].startsWith(\"data_\")||\"data_global\"===d[x];)x++;x++;for(var k={};x<d.length&&!d[x].startsWith(\"data_\");)if(void 0===d[x][0])x++;else if(\"_\"===d[x][0]){var C=d[x].split(/\\s/)[0].toLowerCase(),A=k[C]=k[C]||[],S=d[x].substr(d[x].indexOf(C)+C.length);if(\"\"===S)if(\";\"===d[++x][0]){var E=d[x].substr(1);for(x++;\";\"!==d[x];)E=E+\"\\n\"+d[x],x++;A.push(E)}else A.push(d[x]);else A.push(S.trim());x++}else if(\"loop_\"===d[x].substr(0,5)){x++;for(var z=[];\"\"===d[x]||\"_\"===d[x][0];){if(\"\"!==d[x]){var M=d[x].split(/\\s/)[0].toLowerCase(),T=k[M]=k[M]||[];z.push(T)}x++}for(var L=0;x<d.length&&\"_\"!==d[x][0]&&!d[x].startsWith(\"loop_\")&&!d[x].startsWith(\"data_\");){for(var D=l(d[x],\" \"),O=0;O<D.length;O++)\"\"!==D[O]&&(z[L].push(D[O]),L=(L+1)%z.length);x++}}else x++;n.push({symmetries:[]}),r.push([]);var I,F=void 0!==k._atom_site_id?k._atom_site_id.length:k._atom_site_label.length;if(void 0!==k._cell_length_a){var R=parseFloat(k._cell_length_a),P=parseFloat(k._cell_length_b),N=parseFloat(k._cell_length_c),B=parseFloat(k._cell_angle_alpha)||90,U=parseFloat(k._cell_angle_beta)||90,G=parseFloat(k._cell_angle_gamma)||90;I=(0,a.conversionMatrix3)(R,P,N,B,U,G),n[n.length-1].cryst={a:R,b:P,c:N,alpha:B,beta:U,gamma:G}}for(var V=0;V<F;V++)if(void 0===k._atom_site_group_pdb||\"TER\"!==k._atom_site_group_pdb[V]){var j={};if(void 0!==k._atom_site_cartn_x)j.x=parseFloat(k._atom_site_cartn_x[V]),j.y=parseFloat(k._atom_site_cartn_y[V]),j.z=parseFloat(k._atom_site_cartn_z[V]);else{var H=(y=I,_=parseFloat(k._atom_site_fract_x[V]),b=parseFloat(k._atom_site_fract_y[V]),w=parseFloat(k._atom_site_fract_z[V]),new a.Vector3(_,b,w).applyMatrix3(y));j.x=H.x,j.y=H.y,j.z=H.z}j.chain=k._atom_site_auth_asym_id?k._atom_site_auth_asym_id[V]:void 0,j.resi=k._atom_site_auth_seq_id?parseInt(k._atom_site_auth_seq_id[V]):void 0,j.resn=k._atom_site_auth_comp_id?k._atom_site_auth_comp_id[V].trim():void 0,j.atom=k._atom_site_auth_atom_id?k._atom_site_auth_atom_id[V].replace(/\"/gm,\"\"):void 0,j.hetflag=!k._atom_site_group_pdb||\"HETA\"===k._atom_site_group_pdb[V]||\"HETATM\"===k._atom_site_group_pdb[V];var q=\"X\";k._atom_site_type_symbol?q=k._atom_site_type_symbol[V].replace(/\\(?\\+?\\d+.*/,\"\"):k._atom_site_label&&(q=k._atom_site_label[V].split(\"_\")[0].replace(/\\(?\\d+.*/,\"\")),j.elem=q[0].toUpperCase()+q.substr(1,1).toLowerCase(),j.bonds=[],j.ss=\"c\",j.serial=V,j.bondOrder=[],j.properties={},r[r.length-1].push(j)}if(void 0!==k._pdbx_struct_oper_list_id&&!i)for(var W=0;W<k._pdbx_struct_oper_list_id.length;W++){var Y=parseFloat(k[\"_pdbx_struct_oper_list_matrix[1][1]\"][W]),Z=parseFloat(k[\"_pdbx_struct_oper_list_matrix[1][2]\"][W]),X=parseFloat(k[\"_pdbx_struct_oper_list_matrix[1][3]\"][W]),K=parseFloat(k[\"_pdbx_struct_oper_list_vector[1]\"][W]),$=parseFloat(k[\"_pdbx_struct_oper_list_matrix[2][1]\"][W]),Q=parseFloat(k[\"_pdbx_struct_oper_list_matrix[2][2]\"][W]),J=parseFloat(k[\"_pdbx_struct_oper_list_matrix[2][3]\"][W]),ee=parseFloat(k[\"_pdbx_struct_oper_list_vector[2]\"][W]),te=parseFloat(k[\"_pdbx_struct_oper_list_matrix[3][1]\"][W]),re=parseFloat(k[\"_pdbx_struct_oper_list_matrix[3][2]\"][W]),ie=parseFloat(k[\"_pdbx_struct_oper_list_matrix[3][3]\"][W]),ne=parseFloat(k[\"_pdbx_struct_oper_list_vector[3]\"][W]),ae=new a.Matrix4(Y,Z,X,K,$,Q,J,ee,te,re,ie,ne);n[n.length-1].symmetries.push(ae)}var oe=function(e){var t,r=e.match(\"-\"),i=(e=e.replace(/[-xyz]/g,\"\")).split(\"/\");return t=void 0===i[1]?1:parseInt(i[1]),(\"\"===i[0]?1:parseInt(i[0]))/t*(r?-1:1)};if(void 0!==k._symmetry_equiv_pos_as_xyz&&!i)for(var se=0;se<k._symmetry_equiv_pos_as_xyz.length;se++){for(var le=k._symmetry_equiv_pos_as_xyz[se].replace(/[\"' ]/g,\"\").split(\",\").map((function(e){return e.replace(/-/g,\"+-\")})),he=new a.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),ue=0;ue<3;ue++)for(var ce=le[ue].split(\"+\"),de=0;de<ce.length;de++){var fe=ce[de];if(\"\"!==fe){var pe=oe(fe);fe.match(\"x\")?he.elements[ue+0]=pe:fe.match(\"y\")?he.elements[ue+4]=pe:fe.match(\"z\")?he.elements[ue+8]=pe:he.elements[ue+12]=pe}}var ve=I.getMatrix4(),ge=(new a.Matrix4).getInverse(ve,!0);he=(new a.Matrix4).multiplyMatrices(he,ge),he=(new a.Matrix4).multiplyMatrices(ve,he),n[n.length-1].symmetries.push(he)}}for(var me=0;me<r.length;me++)s&&(0,o.assignBonds)(r[me]),u(r[me],t.hbondCutoff),c(n[me].symmetries,r[me],t,n[me].cryst),t.duplicateAssemblyAtoms&&!t.dontConnectDuplicatedAtoms&&s&&(0,o.assignBonds)(r[me]);return r}var f={\"C.1\":\"C\",C1:\"C\",\"C.2\":\"C\",C2:\"C\",\"C.3\":\"C\",C3:\"C\",\"C.ar\":\"C\",Car:\"C\",\"C.cat\":\"C\",Ccat:\"C\",\"H.spc\":\"H\",Hspc:\"H\",\"H.t3p\":\"H\",Ht3p:\"H\",\"N.1\":\"N\",N1:\"N\",\"N.2\":\"N\",N2:\"N\",\"N.3\":\"N\",N3:\"N\",\"N.4\":\"N\",N4:\"N\",\"N.am\":\"N\",Nam:\"N\",\"N.ar\":\"N\",Nar:\"N\",\"N.p13\":\"N\",Np13:\"N\",\"O.2\":\"O\",O2:\"O\",\"O.3\":\"O\",O3:\"O\",\"O.co2\":\"O\",Oco2:\"O\",\"O.spc\":\"O\",Ospc:\"O\",\"O.t3p\":\"O\",Ot3p:\"O\",\"P.3\":\"P\",P3:\"P\",\"S.2\":\"S\",S2:\"S\",\"S.3\":\"S\",S3:\"S\",\"S.o\":\"S\",So:\"S\",\"S.o2\":\"S\",So2:\"S\"};function p(e,t){var r=[[]],i=!1;void 0!==t.keepH&&(i=!t.keepH);var n=e.search(/@<TRIPOS>MOLECULE/),a=e.search(/@<TRIPOS>ATOM/);if(-1==n||-1==a)return r;for(var o=e.substr(n,e.length).split(/\\r?\\n|\\r/);o.length>0;){var s=[],l=o[2].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \"),h=parseInt(l[0]),u=0;l.length>1&&(u=parseInt(l[1]));var c,d=4;for(c=3;c<o.length;c++)if(\"@<TRIPOS>ATOM\"==o[c]){d=c+1;break}var p=r[r.length-1].length,v=p+h;for(c=p;c<v;c++){var g={},m=(l=o[d++].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \"))[5];if(m=void 0!==f[m]?f[m]:(m=m.split(\".\")[0])[0].toUpperCase()+m.substr(1).toLowerCase(),g.atom=l[1],g.elem=m,\"H\"==g.elem&&i);else{var y=r[r.length-1].length,_=parseInt(l[0]);g.serial=_,g.x=parseFloat(l[2]),g.y=parseFloat(l[3]),g.z=parseFloat(l[4]),g.atom=l[5];var b=parseFloat(l[8]);g.index=y,g.bonds=[],g.bondOrder=[],g.properties={charge:b,partialCharge:b},s[_]=y,r[r.length-1].push(g)}}for(var w=!1;d<o.length;)if(\"@<TRIPOS>BOND\"==o[d++]){w=!0;break}if(w&&u)for(c=0;c<u;c++){l=o[d++].replace(/^\\s+/,\"\").replace(/\\s+/g,\" \").split(\" \");var x=parseInt(l[1]),k=r[r.length-1][s[x]],C=parseInt(l[2]),A=r[r.length-1][s[C]],S=parseInt(l[3]);isNaN(S)&&(S=1),void 0!==k&&void 0!==A&&(k.bonds.push(s[C]),k.bondOrder.push(S),A.bonds.push(s[x]),A.bondOrder.push(S))}if(!t.multimodel)break;t.onemol||r.push([]),o.splice(0,d),e=o.join(\"\\n\")}return r}var v=r(2929);function g(e,t){var r=e.replace(/ /g,\"\");return r.length>0&&\"H\"==r[0]&&\"Hg\"!=r&&\"He\"!=r&&\"Hf\"!=r&&\"Hs\"!=r&&\"Ho\"!=r&&(r=\"H\"),r.length>1&&(r=r[0].toUpperCase()+r.substr(1).toLowerCase(),void 0===v.bondTable[r]?r=r[0]:t&&(\"Ca\"==r||\"Cd\"==r)&&(r=\"C\")),r}var m=r(8995),y=new Set([\"ABU\",\"ACD\",\"ALA\",\"ALB\",\"ALI\",\"ARG\",\"AR0\",\"ASN\",\"ASP\",\"ASX\",\"BAS\",\"CYS\",\"CYH\",\"CYX\",\"CSS\",\"CSH\",\"GLN\",\"GLU\",\"GLX\",\"GLY\",\"HIS\",\"HIE\",\"HID\",\"HIP\",\"HYP\",\"ILE\",\"ILU\",\"LEU\",\"LYS\",\"MET\",\"PCA\",\"PGA\",\"PHE\",\"PR0\",\"PRO\",\"PRZ\",\"SER\",\"THR\",\"TRP\",\"TYR\",\"VAL\",\"A\",\"1MA\",\"C\",\"5MC\",\"OMC\",\"G\",\"1MG\",\"2MG\",\"M2G\",\"7MG\",\"OMG\",\"YG\",\"I\",\"T\",\"U\",\"+U\",\"H2U\",\"5MU\",\"PSU\",\"ACE\",\"F0R\",\"H2O\",\"HOH\",\"WAT\"]);function _(e){var t,r,i=[],n=[];for(t=0,r=e.length;t<r;t++){var a=e[t];a.index=t,a.hetflag||!y.has(a.resn)?n.push(a):i.push(a)}(0,o.assignBonds)(n),i.sort((function(e,t){return e.chain!=t.chain?e.chain<t.chain?-1:1:e.resi-t.resi}));var s,l=-1,h=-1;for(t=0,r=i.length;t<r;t++){var u=i[t];u.resi!==l&&(l=u.resi,s||h++,s=!1),u.reschain=h;for(var c=t+1;c<i.length;c++){var d=i[c];if(d.chain!=u.chain)break;if(d.resi-u.resi>1)break;(0,m.areConnected)(u,d)&&(-1===u.bonds.indexOf(d.index)&&(u.bonds.push(d.index),u.bondOrder.push(1),d.bonds.push(u.index),d.bondOrder.push(1)),u.resi!==d.resi&&(s=!0))}}}function b(e,t,r){for(var i,n,o=[],s=void 0===t.assignBonds||t.assignBonds,l=!t.keepH,h=!!t.noSecondaryStructure,d=!t.noComputeSecondaryStructure,f=!t.doAssembly,p=t.altLoc?t.altLoc:\"A\",m={symmetries:[]},y=[],b=[],w={},x=0;x<e.length;x++){var k,C,A,S=(n=e[x].replace(/^\\s*/,\"\")).substr(0,6);if(0==S.indexOf(\"END\")){if(y=e.slice(x+1),\"END\"==S)for(var E in r)r.hasOwnProperty(E)&&delete r[E];break}if(\"ATOM  \"==S||\"HETATM\"==S){var z,M,T,L,D,O,I,F,R,P,N,B;if(\" \"!=(N=n.substr(16,1))&&N!=p&&\"*\"!=p)continue;if(P=parseInt(n.substr(6,5)),i=n.substr(12,4).replace(/ /g,\"\"),z=n.substr(17,3).replace(/ /g,\"\"),M=n.substr(21,1),T=parseInt(n.substr(22,4)),L=n.substr(26,1),D=parseFloat(n.substr(30,8)),O=parseFloat(n.substr(38,8)),I=parseFloat(n.substr(46,8)),B=parseFloat(n.substr(60,8)),\"H\"==(R=\"\"===(R=n.substr(76,2).replace(/ /g,\"\"))||void 0===v.bondTable[R]?g(n.substr(12,2),\"A\"==n[0]):R[0].toUpperCase()+R.substr(1).toLowerCase())&&l)continue;F=\"H\"==S[0],b[P]=o.length,o.push({resn:z,x:D,y:O,z:I,elem:R,hetflag:F,altLoc:N,chain:M,resi:T,icode:L,rescode:T+(\" \"!=L?\"^\"+L:\"\"),serial:P,atom:i,bonds:[],ss:\"c\",bondOrder:[],properties:{},b:B,pdbline:n})}else if(\"SHEET \"==S){k=n.substr(21,1),C=parseInt(n.substr(22,4)),n.substr(32,1),A=parseInt(n.substr(33,4)),k in r||(r[k]={}),r[k][C]=\"s1\";for(var U=C+1;U<A;U++)r[k][U]=\"s\";r[k][A]=\"s2\"}else if(\"CONECT\"==S)for(var G=b[parseInt(n.substr(6,5))],V=o[G],j=[11,16,21,26],H=0;H<4;H++){var q=b[parseInt(n.substr(j[H],5))],W=G+\":\"+q,Y=o[q];if(void 0!==V&&void 0!==Y)if(w[W]){w[W]+=1;for(var Z=0;Z<V.bonds.length;Z++)if(V.bonds[Z]==q){var X=w[W];V.bondOrder[Z]=X>=4?1:X}}else w[W]=1,0!=V.bonds.length&&V.bonds[V.bonds.length-1]==q||(V.bonds.push(q),V.bondOrder.push(1))}else if(\"HELIX \"==S){k=n.substr(19,1),C=parseInt(n.substr(21,4)),n.substr(31,1),A=parseInt(n.substr(33,4)),k in r||(r[k]={}),r[k][C]=\"h1\";for(var K=C+1;K<A;K++)r[k][K]=\"h\";r[k][A]=\"h2\"}else if(f||\"REMARK\"!=S||\"BIOMT\"!=n.substr(13,5)){if(\"CRYST1\"==S){var $=void 0,Q=void 0,J=void 0,ee=void 0,te=void 0,re=void 0;$=parseFloat(n.substr(7,8)),Q=parseFloat(n.substr(16,8)),J=parseFloat(n.substr(25,8)),ee=parseFloat(n.substr(34,6)),te=parseFloat(n.substr(41,6)),re=parseFloat(n.substr(48,6)),m.cryst={a:$,b:Q,c:J,alpha:ee,beta:te,gamma:re}}else if(\"ANISOU\"==S){var ie=o[b[parseInt(n.substr(6,5))]];if(ie){var ne=n.substr(30).trim().split(/\\s+/),ae={u11:parseInt(ne[0]),u22:parseInt(ne[1]),u33:parseInt(ne[2]),u12:parseInt(ne[3]),u13:parseInt(ne[4]),u23:parseInt(ne[5])};ie.uMat=ae}}}else{var oe,se=new a.Matrix4;for(oe=1;oe<=3;oe++)if(n=e[x].replace(/^\\s*/,\"\"),parseInt(n.substr(18,1))==oe)se.elements[oe-1]=parseFloat(n.substr(23,10)),se.elements[oe-1+4]=parseFloat(n.substr(33,10)),se.elements[oe-1+8]=parseFloat(n.substr(43,10)),se.elements[oe-1+12]=parseFloat(n.substr(53)),x++;else for(;\"BIOMT\"==n.substr(13,5);)x++,n=e[x].replace(/^\\s*/,\"\");se.elements[3]=0,se.elements[7]=0,se.elements[11]=0,se.elements[15]=1,m.symmetries.push(se),x--}}if(function(e,t){for(var r=0,i=e.length;r<i;r++)for(var n=e[r],a=0;a<n.bonds.length;a++){var o=e[n.bonds[a]],s=t[n.serial];o&&s&&o.bonds.indexOf(s)<0&&(o.bonds.push(s),o.bondOrder.push(n.bondOrder[a]))}}(o,b),s&&_(o),f||c(m.symmetries,o,t,m.cryst),d&&!h&&u(o,t.hbondCutoff),!function(e){var t;for(t in e)return!1;return!0}(r))for(var le=0;le<o.length;le++)if(void 0!==(i=o[le])&&i.chain in r&&i.resi in r[i.chain]){var he=r[i.chain][i.resi];i.ss=he[0],he.length>1&&(\"1\"==he[1]?i.ssbegin=!0:\"2\"==he[1]&&(i.ssend=!0))}return[o,m,y]}function w(e,t){t=t||{};var r=[],i={};r.modelData=[];for(var n=e.split(/\\r?\\n|\\r/);n.length>0;){var a=b(n,t,i),o=a[0],s=a[1];if(n=a[2],0!=o.length){if(t.multimodel&&t.onemol&&r.length>0)for(var l=r[0].length,h=0;h<o.length;h++){var u=o[h];u.index=h;for(var c=0;c<u.bonds.length;c++)u.bonds[c]+=l;r[0].push(u)}else r.modelData.push(s),r.push(o);if(!t.multimodel)break}}return r}function x(e,t){var r=[[]],i=!t.noSecondaryStructure;r.modelData=[{symmetries:[]}];for(var n,a=[],o=e.split(/\\r?\\n|\\r/),s=0;s<o.length;s++){var l=(n=o[s].replace(/^\\s*/,\"\")).substr(0,6);if(0==l.indexOf(\"END\")){if(t.multimodel){t.onemol||r.push([]);continue}break}if(\"ATOM  \"==l||\"HETATM\"==l){var h,c=parseInt(n.substr(6,5)),d=n.substr(12,4).replace(/ /g,\"\"),f=n.substr(17,3).trim(),p=n.substr(21,1),v=parseInt(n.substr(22,4)),g=n.substr(30).trim().split(/\\s+/),m=parseFloat(g[0]),y=parseFloat(g[1]),b=parseFloat(g[2]),w=parseFloat(g[3]),x=parseFloat(g[4]),k=d[0];d.length>1&&d[1].toUpperCase()!=d[1]&&(k=d.substr(0,2)),h=\"H\"==n[0],a[c]=r[r.length-1].length,r[r.length-1].push({resn:f,x:m,y:y,z:b,elem:k,hetflag:h,chain:p,resi:v,serial:c,atom:d,bonds:[],ss:\"c\",bondOrder:[],properties:{charge:w,partialCharge:w,radius:x},pdbline:n})}else if(\"CONECT\"==l)for(var C=parseInt(n.substr(6,5)),A=r[r.length-1][a[C]],S=0;S<4;S++){var E=parseInt(n.substr([11,16,21,26][S],5)),z=r[r.length-1][a[E]];void 0!==A&&void 0!==z&&(A.bonds.push(a[E]),A.bondOrder.push(1))}}for(var M=0;M<r.length;M++)_(r[M]),i&&u(r[M],t.hbondCutoff);return r}var k=r(9005),C=r(7420),A=function(e){return String.fromCharCode.apply(null,e).replace(/\\0/g,\"\")},S=function(e){return 0==e||2==e||4==e?\"h\":3==e?\"s\":\"c\"},E=new Set([\"D-SACCHARIDE\",\"D-SACCHARIDE 1,4 AND 1,4 LINKING\",\"D-SACCHARIDE 1,4 AND 1,6 LINKING\",\"L-SACCHARIDE\",\"L-SACCHARIDE 1,4 AND 1,4 LINKING\",\"L-SACCHARIDE 1,4 AND 1,6 LINKING\",\"NON-POLYMER\",\"OTHER\",\"PEPTIDE-LIKE\",\"SACCHARIDE\"]);function z(e,t){var r=!t.keepH,i=t.altLoc?t.altLoc:\"A\",n=!!t.noSecondaryStructure,o=!t.noComputeSecondaryStructure,s=!t.doAssembly,l=t.assemblyIndex?t.assemblyIndex:0;e=\"string\"==typeof e?(0,k.base64ToArray)(e):new Uint8Array(e);var h,d,f,p,v,g,m=C.decode(e),y=[[]],_=y.modelData=[],b=0,w=0,x=0,z=m.secStructList,M=m.insCodeList,T=m.sequenceIndexList,L=m.bFactorList,D=m.altLocList,O=m.occupancyList,I=m.bondAtomList,F=m.bondOrderList,R=m.numModels;if(0==R)return y;t.multimodel||(R=1);var P=[];if(!s&&m.bioAssemblyList&&m.bioAssemblyList.length>0){var N=m.bioAssemblyList[l].transformList;for(h=0,g=N.length;h<g;h++){var B=new a.Matrix4(N[h].matrix);B.transpose(),P.push(B)}}var U=null;if(m.unitCell){var G=m.unitCell;U={a:G[0],b:G[1],c:G[2],alpha:G[3],beta:G[4],gamma:G[5]}}var V=[];m.entityList.forEach((function(e){e.chainIndexList.forEach((function(t){V[t]=\"polymer\"==e.type}))}));var j=0;for(v=0;v<R;v++){var H=m.chainsPerModel[v],q=y[y.length-1],W=[];for(_.push({symmetries:P,cryst:U}),h=0;h<H;++h){var Y=m.groupsPerChain[b],Z=A(m.chainIdList.subarray(4*b,4*b+4));m.chainNameList&&(Z=A(m.chainNameList.subarray(4*b,4*b+4)));var X=w,K=\"\";for(d=0;d<Y;++d){var $=m.groupList[m.groupTypeList[w]],Q=$.atomNameList.length,J=0,ee=!1,te=!1;if(z){J=z[w];var re=S(J);0!=w&&re==K||(ee=!0),K=re;var ie=w+1;(ie>=z.length||S(z[ie]!=re))&&(te=!0)}m.insCodeList&&String.fromCharCode(M[w]),T&&T[w];var ne=m.groupIdList[w],ae=$.groupName,oe=$.chemCompType,se=x,le=E.has(oe)||!V[b];for(f=0;f<Q;++f){var he=$.elementList[f];if(r&&\"H\"==he)x+=1;else{var ue=\"\";L&&(ue=L[x]);var ce=\"\";D&&D[x]&&(ce=String.fromCharCode(D[x]));var de=\"\";if(O&&(de=O[x]),\"\"==ce||ce==i||\"*\"==i){var fe=m.atomIdList[x],pe=$.atomNameList[f],ve=0;$.atomChargeList&&(ve=$.atomChargeList[f]);var ge=m.xCoordList[x],me=m.yCoordList[x],ye=m.zCoordList[x];W[x]=q.length,q.push({resn:ae,x:ge,y:me,z:ye,elem:he,hetflag:le,chain:Z,resi:ne,icode:ce,rescode:ne+(\" \"!=ce?\"^\"+ce:\"\"),serial:fe,altLoc:ce,index:x,atom:pe,bonds:[],ss:S(J),ssbegin:ee,ssend:te,bondOrder:[],properties:{charge:ve,occupancy:de},b:ue}),x+=1}else x+=1}}var _e=$.bondAtomList;for(f=0,p=$.bondOrderList.length;f<p;++f){var be=se+_e[2*f],we=se+_e[2*f+1],xe=$.bondOrderList[f],ke=W[be],Ce=W[we],Ae=q[ke],Se=q[Ce];Ae&&Se&&(Ae.bonds.push(Ce),Ae.bondOrder.push(xe),Se.bonds.push(ke),Se.bondOrder.push(xe))}w+=1}for(w=X,d=0;d<Y;++d)w+=1;b+=1}if(I)for(var Ee=j,ze=I.length;Ee<ze;Ee+=2){var Me=I[Ee],Te=I[Ee+1],Le=F?F[Ee/2]:1;if(Me>=x){j=Ee;break}var De=W[Me],Oe=W[Te],Ie=q[De],Fe=q[Oe];Ie&&Fe&&(Ie.bonds.push(Oe),Ie.bondOrder.push(Le),Fe.bonds.push(De),Fe.bondOrder.push(Le))}t.multimodel&&(t.onemol||y.push([]))}if(!s)for(var Re=0;Re<y.length;Re++)c(_[Re].symmetries,y[Re],t,_[Re].cryst);return o&&!n&&u(y,t.hbondCutoff),y}function M(e){var t,r=[],i=0,n=e.split(/\\r?\\n|\\r/);if(!(n.length>0&&n[0].includes(\"VERSION\")))return[];var a=n.filter((function(e){return e.includes(\"POINTERS\")||e.includes(\"ATOM_NAME\")||e.includes(\"CHARGE\")||e.includes(\"RADII\")||e.includes(\"BONDS_INC_HYDROGEN\")||e.includes(\"BONDS_WITHOUT_HYDROGEN\")})),o=b(\"POINTERS\");if(-1==o)return[];var s=w(o),l=parseInt(n[o+1].slice(0,s[1]));if(isNaN(l)||l<=0)return[];if(-1==(o=b(\"ATOM_NAME\")))return[];for(var h=(s=w(o))[0],u=0;u<l/s[0];u++){u==parseInt(l/s[0])&&(h=l%s[0]);for(var c=0;c<h;c++){var d={},f={charge:\"\",radii:\"\"};d.serial=i,d.x=0,d.y=0,d.z=0,d.atom=n[o+1].slice(s[1]*c,s[1]*(c+1)),d.elem=n[o+1].slice(s[1]*c,s[1]*c+1),d.properties=f,d.bonds=[],d.bondOrder=[],r.push(d),i++}o++}if(-1!=(o=b(\"CHARGE\"))){i=0,h=(s=w(o))[0];for(var p=0;p<l/s[0];p++){p==parseInt(l/s[0])&&(h=l%s[0]);for(var v=0;v<h;v++)r[i].properties.charge=parseFloat(n[o+1].slice(s[1]*v,s[1]*(v+1))),i++;o++}}if(-1!=(o=b(\"RADII\"))){i=0,h=(s=w(o))[0];for(var g=0;g<l/s[0];g++){g==parseInt(l/s[0])&&(h=l%s[0]);for(var m=0;m<h;m++)r[i].properties.radii=parseFloat(n[o+1].slice(s[1]*m,s[1]*(m+1))),i++;o++}}if(-1!=(o=b(\"BONDS_WITHOUT_HYDROGEN\")))for(i=0,h=(s=w(o))[0],o+=1;!n[o].match(/^%FLAG/);){n[o+1].match(/^%FLAG/)&&(h=l%s[0]);for(var y=0;y<h;y++)i%3==0?t=parseInt(n[o].slice(s[1]*y,s[1]*(y+1))/3):i%3==1&&r[t].bonds.push(parseInt(n[o].slice(s[1]*y,s[1]*(y+1))/3)),i++;o++}if(-1!=(o=b(\"BONDS_INC_HYDROGEN\")))for(i=0,h=(s=w(o))[0],o+=1;!n[o].match(/^%FLAG/);){n[o+1].match(/^%FLAG/)&&(h=l%s[0]);for(var _=0;_<h;_++)i%3==0?t=parseInt(n[o].slice(s[1]*_,s[1]*(_+1))/3):i%3==1&&r[t].bonds.push(parseInt(n[o].slice(s[1]*_,s[1]*(_+1))/3)),i++;o++}function b(e){var t=n.indexOf(a.filter((function(t){return t.includes(e)}))[0]);if(Number.isInteger(t)&&t>0){for(;!n[t].includes(\"FORMAT\");)t++;return t}return-1}function w(e){var t=n[e].match(/\\((\\d*)\\S*/),r=n[e].match(/[a-zA-Z](\\d*)\\)\\s*/);return null==r&&(r=n[e].match(/[a-zA-Z](\\d*)\\.\\d*\\)\\s*/)),[t[1],r[1]]}return[r]}function T(e){for(var t=[],r=e.split(/\\r?\\n|\\r/);r.length>0&&!(r.length<3);){var i=parseInt(r[1]);if(isNaN(i)||i<=0)break;if(r.length<i+3)break;var n=[];t.push(n);for(var a=2,o=n.length,s=o+i,l=o;l<s;l++){var h=r[a++],u={};u.serial=l,u.atom=h.slice(10,15).trim(),u.elem=g(u.atom,!0),u.x=10*parseFloat(h.slice(20,28)),u.y=10*parseFloat(h.slice(28,36)),u.z=10*parseFloat(h.slice(36,44)),u.resi=parseInt(h.slice(0,5)),u.resn=h.slice(5,10).trim(),u.bonds=[],u.bondOrder=[],u.properties={},h.length>44&&(u.dx=10*parseFloat(h.slice(44,52)),u.dy=10*parseFloat(h.slice(52,60)),u.dz=10*parseFloat(h.slice(60,68))),n[l]=u}if(r.length<=a+3){var c=r[a++].trim().split(/\\s+/);if(3==c.length){for(var d=0;d<3;d++)c[d]=10*parseFloat(c[d]);t.box=c}}r.splice(0,++a)}for(var f=0;f<t.length;f++)_(t[f]);return t}function L(e,t){for(var r=[],i={id:\"serial\",type:\"atom\",element:\"elem\",q:\"charge\",radius:\"radius\",x:\"x\",xu:\"x\",xs:\"x\",xsu:\"x\",y:\"y\",yu:\"y\",ys:\"y\",ysu:\"y\",z:\"z\",zu:\"z\",zs:\"z\",zsu:\"z\"},n=e.split(/\\r?\\n|\\r/),a=0,s=0,l=0;l<n.length-9;){for(var h=l;h<n.length;h++)if(n[h].match(/ITEM: NUMBER OF ATOMS/)&&(s=parseInt(n[h+1])),n[h].match(/ITEM: ATOMS/)){a=h+1;break}var u=n[a-1].replace(\"ITEM: ATOMS \",\"\").split(\" \");r.push([]);for(var c=a;c<a+s;c++){for(var d={},f={},p=n[c].split(\" \"),v=0;v<p.length;v++){var g=i[u[v]];null!=g&&(\"serial\"==g?d[g]=parseInt(p[v]):\"x\"==g||\"y\"==g||\"z\"===g?d[g]=parseFloat(p[v]):\"charge\"==g||\"radius\"==g?f[g]=parseFloat(p[v]):d[g]=p[v]),d.properties=f,d.bonds=[],d.bondOrder=[]}r[r.length-1][c-a]=d}l=a+s-1}if(t.assignBonds)for(var m=0;m<r.length;m++)(0,o.assignBonds)(r[m]);return r}var D={vasp:i.VASP,VASP:i.VASP,cube:n.CUBE,CUBE:n.CUBE,xyz:s,XYZ:s,sdf:l,SDF:l,json:h,cdjson:h,CDJSON:h,mcif:d,cif:d,CIF:d,mol2:p,MOL2:p,pdb:w,PDB:w,pdbqt:w,PDBQT:w,pqr:x,PQR:x,mmtf:z,MMTF:z,prmtop:M,PRMTOP:M,gro:T,GRO:T,lammpstrj:L,LAMMPSTRJ:L}},8995:function(e,t,r){\"use strict\";r.r(t),r.d(t,{areConnected:function(){return n}});var i=r(2929);function n(e,t){var r=(0,i.bondLength)(e.elem)+(0,i.bondLength)(t.elem);r+=.25,r*=r;var n=e.x-t.x;if((n*=n)>r)return!1;var a=e.y-t.y;if((a*=a)>r)return!1;var o=e.z-t.z;if((o*=o)>r)return!1;var s=n+a+o;return!isNaN(s)&&!(s<.5)&&!(s>r)&&(e.altLoc==t.altLoc||\" \"==e.altLoc||\" \"==t.altLoc)}},3920:function(e,t,r){\"use strict\";r.r(t),r.d(t,{assignBonds:function(){return n}});var i=r(8995);function n(e){for(var t=0,r=e.length;t<r;t++)e[t].index||(e[t].index=t);for(var n={},a=4.95,o=0;o<e.length;o++){var s=e[o],l=Math.floor(s.x/a),h=Math.floor(s.y/a),u=Math.floor(s.z/a);n[l]||(n[l]={}),n[l][h]||(n[l][h]={}),n[l][h][u]||(n[l][h][u]=[]),n[l][h][u].push(s)}var c=function(e,t){for(var r=0;r<e.length;r++)for(var n=e[r],a=0;a<t.length;a++){var o=t[a];if((0,i.areConnected)(n,o)){var s=n.bonds.indexOf(o.index),l=o.bonds.indexOf(n.index);-1==s&&-1==l?(n.bonds.push(o.index),n.bondOrder.push(1),o.bonds.push(n.index),o.bondOrder.push(1)):-1==s?(n.bonds.push(o.index),n.bondOrder.push(o.bondOrder[l])):-1==l&&(o.bonds.push(n.index),o.bondOrder.push(n.bondOrder[s]))}}},d=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}];for(var f in n){var p=parseInt(f);for(var v in n[p]){var g=parseInt(v);for(var m in n[p][g]){for(var y=parseInt(m),_=n[p][g][y],b=0;b<_.length;b++)for(var w=_[b],x=b+1;x<_.length;x++){var k=_[x];(0,i.areConnected)(w,k)&&-1==w.bonds.indexOf(k.index)&&(w.bonds.push(k.index),w.bondOrder.push(1),k.bonds.push(w.index),k.bondOrder.push(1))}for(var C=0;C<d.length;C++){var A=d[C];n[p+A.x]&&n[p+A.x][g+A.y]&&n[p+A.x][g+A.y][y+A.z]&&c(_,n[p+A.x][g+A.y][y+A.z])}}}}}},2929:function(e,t,r){\"use strict\";r.r(t),r.d(t,{bondLength:function(){return n},bondTable:function(){return i},setBondLength:function(){return a}});var i={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function n(e){return i[e]||1.6}function a(e,t){t<0&&(t=0),i[e]=t}},9005:function _(__unused_webpack_module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:function(){return _PausableTimer},adjustVolumeStyle:function(){return _adjustVolumeStyle},base64ToArray:function(){return _base64ToArray},deepCopy:function(){return _deepCopy},download:function(){return _download},extend:function(){return _extend},get:function(){return _get2},getAtomProperty:function(){return _getAtomProperty},getColorFromStyle:function(){return _getColorFromStyle},getElement:function(){return _getElement},getExtent:function(){return _getExtent},getPropertyRange:function(){return _getPropertyRange},getbin:function(){return _getbin},isEmptyObject:function(){return _isEmptyObject},isNumeric:function(){return _isNumeric},makeFunction:function(){return _makeFunction},mergeGeos:function(){return _mergeGeos},specStringToObject:function(){return _specStringToObject}});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1460),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7323),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2550);function _extend(e,t){for(var r in t)t.hasOwnProperty(r)&&void 0!==t[r]&&(e[r]=t[r]);return e}function _deepCopy(e){var t,r,i;if(null==e)return{};if(\"object\"!=_typeof(e)||null===e)return e;for(i in t=Array.isArray(e)?[]:{},e)r=e[i],t[i]=_deepCopy(r);return t}function _isNumeric(e){var t=_typeof(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))}function _isEmptyObject(e){var t;for(t in e)return!1;return!0}function _makeFunction(callback){return callback&&\"string\"==typeof callback&&(callback=eval(\"(\"+callback+\")\")),callback&&\"function\"!=typeof callback?null:callback}function _adjustVolumeStyle(e){e&&(!e.volformat||e.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData||(e.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(e.voldata,e.volformat)),e.volscheme&&(e.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(e.volscheme)))}function _getExtent(e,t){var r,i,n,a,o,s,l,h,u,c,d=!t;if(r=i=n=9999,a=o=s=-9999,l=h=u=c=0,0===e.length)return[[0,0,0],[0,0,0],[0,0,0]];for(var f=0;f<e.length;f++){var p=e[f];if(void 0!==p&&isFinite(p.x)&&isFinite(p.y)&&isFinite(p.z)&&(c++,l+=p.x,h+=p.y,u+=p.z,r=r<p.x?r:p.x,i=i<p.y?i:p.y,n=n<p.z?n:p.z,a=a>p.x?a:p.x,o=o>p.y?o:p.y,s=s>p.z?s:p.z,p.symmetries&&d))for(var v=0;v<p.symmetries.length;v++)c++,l+=p.symmetries[v].x,h+=p.symmetries[v].y,u+=p.symmetries[v].z,r=r<p.symmetries[v].x?r:p.symmetries[v].x,i=i<p.symmetries[v].y?i:p.symmetries[v].y,n=n<p.symmetries[v].z?n:p.symmetries[v].z,a=a>p.symmetries[v].x?a:p.symmetries[v].x,o=o>p.symmetries[v].y?o:p.symmetries[v].y,s=s>p.symmetries[v].z?s:p.symmetries[v].z}return[[r,i,n],[a,o,s],[l/c,h/c,u/c]]}function _getPropertyRange(e,t){for(var r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=0,a=e.length;n<a;n++){var o=_getAtomProperty(e[n],t);null!=o&&(o<r&&(r=o),o>i&&(i=o))}return isFinite(r)||isFinite(i)?isFinite(r)?isFinite(i)||(i=r):r=i:r=i=0,[r,i]}var _PausableTimer=function(){function e(t,r,i){_classCallCheck(this,e),this.total_time_run=0,this.fn=t,this.arg=i,this.countdown=r,this.start_time=(new Date).getTime(),this.ident=setTimeout(t,r,i)}return _createClass(e,[{key:\"cancel\",value:function(){clearTimeout(this.ident)}},{key:\"pause\",value:function(){clearTimeout(this.ident),this.total_time_run=(new Date).getTime()-this.start_time}},{key:\"resume\",value:function(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}]),e}();function _base64ToArray(e){for(var t=window.atob(e),r=t.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=t.charCodeAt(n);return i}function _getAtomProperty(e,t){var r=null;return e.properties&&void 0!==e.properties[t]?r=e.properties[t]:void 0!==e[t]&&(r=e[t]),r}function _mergeGeos(e,t){var r=t.geometry;void 0!==r&&e.geometryGroups.push(r.geometryGroups[0])}function _specStringToObject(e){if(\"object\"==_typeof(e))return e;if(void 0===e||null==e)return e;try{return JSON.parse(e)}catch(e){}var t=function(e){return _isNumeric(e)?Math.floor(parseFloat(e))==parseInt(e)||e.indexOf(\".\")>=0?parseFloat(e):parseInt(e):\"true\"===e||\"false\"!==e&&e},r={};if(\"all\"===(e=e.replace(/%7E/,\"~\")))return r;for(var i=e.split(\";\"),n=0;n<i.length;n++){var a=i[n].split(\":\"),o=a[0],s={},l=a[1];if(l)if(-1!==(l=l.replace(/~/g,\"=\")).indexOf(\"=\"))for(var h=l.split(\",\"),u=0;u<h.length;u++){var c=h[u].split(\"=\",2);s[c[0]]=t(c[1])}else s=-1!==l.indexOf(\",\")?l.split(\",\"):t(l);r[o]=s}return r}function checkStatus(e){if(!e.ok)throw new Error(\"HTTP \".concat(e.status,\" - \").concat(e.statusText));return e}function _get2(e,t){var r=fetch(e).then(checkStatus).then((function(e){return e.text()}));return t?r.then(t):r}function _getbin(e,t,r,i){var n;return n=\"POST\"==r?fetch(e,{method:\"POST\",body:i}).then((function(e){return checkStatus(e)})).then((function(e){return e.arrayBuffer()})):fetch(e).then((function(e){return checkStatus(e)})).then((function(e){return e.arrayBuffer()})),t?n.then(t):n}function _download(e,t,r,i){var n=\"\",a=\"\",o=\"\",s=\"\",l=null,h=t.addModel();if(e.indexOf(\":\")<0&&(e=4==e.length?\"pdb:\"+e:isNaN(e)?\"url:\"+e:\"cid:\"+e),\"mmtf:\"===e.substr(0,5))a=r&&r.pdbUri?r.pdbUri:\"https://mmtf.rcsb.org/v1.0/full/\",e=e.substr(5).toUpperCase(),s=a+e,r&&void 0===r.noComputeSecondaryStructure&&(r.noComputeSecondaryStructure=!0),l=new Promise((function(e){_getbin(s).then((function(i){h.addMolData(i,\"mmtf\",r),t.zoomTo(),t.render(),e(h)}),(function(){console.log(\"fetch of \"+s+\" failed.\")}))}));else{if(\"pdb:\"===e.substr(0,4)){if(n=\"mmtf\",r&&r.format&&(n=r.format),r&&void 0===r.noComputeSecondaryStructure&&(r.noComputeSecondaryStructure=!0),!(e=e.substr(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert(\"Wrong PDB ID\");\"mmtf\"==n?(o=r&&r.mmtfUri?r.mmtfUri:\"https://mmtf.rcsb.org/v1.0/full/\",s=o+e.toUpperCase()):(a=r&&r.pdbUri?r.pdbUri:\"https://files.rcsb.org/view/\",s=a+e+\".\"+n)}else if(\"cid:\"==e.substr(0,4)){if(n=\"sdf\",!(e=e.substr(4)).match(/^[0-9]+$/))return void alert(\"Wrong Compound ID\");s=\"https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/\"+e+\"/SDF?record_type=3d\"}else\"url:\"==e.substr(0,4)&&(s=e.substr(4),n=s);var u=function(e){h.addMolData(e,n,r),t.zoomTo(),t.render()};l=new Promise((function(t){\"mmtf\"==n?_getbin(s).then((function(e){u(e),t(h)})).catch((function(){a=r&&r.pdbUri?r.pdbUri:\"https://files.rcsb.org/view/\",s=a+e+\".pdb\",n=\"pdb\",console.log(\"falling back to pdb format\"),_get2(s).then((function(e){u(e),t(h)})).catch((function(e){u(\"\"),t(h),console.log(\"fetch of \"+s+\" failed: \"+e.statusText)}))})):_get2(s).then((function(e){u(e),t(h)})).catch((function(e){u(\"\"),t(h),console.log(\"fetch of \"+s+\" failed: \"+e.statusText)}))}))}return i?(l.then((function(e){i(e)})),h):l}function _getColorFromStyle(e,t){var r=t.colorscheme;if(void 0!==_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r])r=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r];else if(\"string\"==typeof r&&r.endsWith(\"Carbon\")){var i=r.substring(0,r.lastIndexOf(\"Carbon\")).toLowerCase();if(void 0!==_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[i]){var n=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);n.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[i],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r]={prop:\"elem\",map:n},r=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r]}}var a,o,s=e.color;if(void 0!==t.color&&\"spectrum\"!=t.color&&(s=t.color),void 0!==r)if(void 0!==_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[r])r=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[r],void 0!==r[e[r.prop]]&&(s=r.map[e[r.prop]]);else if(void 0!==r[e[r.prop]])s=r.map[e[r.prop]];else if(void 0!==r.prop&&void 0!==r.gradient){a=r.prop;var l=r.gradient;void 0!==_Gradient__WEBPACK_IMPORTED_MODULE_0__.builtinGradients[l]&&(l=new _Gradient__WEBPACK_IMPORTED_MODULE_0__.builtinGradients[l](r.min,r.max,r.mid?r.mid:r.colors));var h=l.range()||[-1,1];o=_getAtomProperty(e,a),null!=o&&(s=l.valueToHex(o,h))}else void 0!==r.prop&&void 0!==r.map?(a=r.prop,o=_getAtomProperty(e,a),void 0!==r.map[o]&&(s=r.map[o])):void 0!==t.colorscheme[e.elem]?s=t.colorscheme[e.elem]:console.log(\"Could not interpret colorscheme \"+r);else void 0!==t.colorfunc&&(s=t.colorfunc(e));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(s)}function _getElement(e){var t=e;return\"string\"==typeof e?t=document.querySelector(\"#\"+e):\"object\"==_typeof(e)&&e.get&&(t=e.get(0)),t}},2109:function(e,t,r){var i;i={},e.exports=i,function(e,t){e.toRGBA8=function(t){var r=t.width,i=t.height;if(null==t.tabs.acTL)return[e.toRGBA8.decodeImage(t.data,r,i,t).buffer];var n=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var a,o=new Uint8Array(r*i*4),s=0;s<t.frames.length;s++){var l=t.frames[s],h=l.rect.x,u=l.rect.y,c=l.rect.width,d=l.rect.height,f=e.toRGBA8.decodeImage(l.data,c,d,t);if(0==s?a=f:0==l.blend?e._copyTile(f,c,d,a,r,i,h,u,0):1==l.blend&&e._copyTile(f,c,d,a,r,i,h,u,1),n.push(a.buffer),a=a.slice(0),0==l.dispose);else if(1==l.dispose)e._copyTile(o,c,d,a,r,i,h,u,0);else if(2==l.dispose){for(var p=s-1;2==t.frames[p].dispose;)p--;a=new Uint8Array(n[p]).slice(0)}}return n},e.toRGBA8.decodeImage=function(t,r,i,n){var a=r*i,o=e.decode._getBPP(n),s=Math.ceil(r*o/8),l=new Uint8Array(4*a),h=new Uint32Array(l.buffer),u=n.ctype,c=n.depth,d=e._bin.readUshort;if(6==u){var f=a<<2;if(8==c)for(var p=0;p<f;p++)l[p]=t[p];if(16==c)for(p=0;p<f;p++)l[p]=t[p<<1]}else if(2==u){var v=n.tabs.tRNS,g=-1,m=-1,y=-1;if(v&&(g=v[0],m=v[1],y=v[2]),8==c)for(p=0;p<a;p++){var _=3*p;l[S=p<<2]=t[_],l[S+1]=t[_+1],l[S+2]=t[_+2],l[S+3]=255,-1!=g&&t[_]==g&&t[_+1]==m&&t[_+2]==y&&(l[S+3]=0)}if(16==c)for(p=0;p<a;p++)_=6*p,l[S=p<<2]=t[_],l[S+1]=t[_+2],l[S+2]=t[_+4],l[S+3]=255,-1!=g&&d(t,_)==g&&d(t,_+2)==m&&d(t,_+4)==y&&(l[S+3]=0)}else if(3==u){var b=n.tabs.PLTE,w=n.tabs.tRNS,x=w?w.length:0;if(1==c)for(var k=0;k<i;k++){var C=k*s,A=k*r;for(p=0;p<r;p++){var S=A+p<<2,E=3*(z=t[C+(p>>3)]>>7-((7&p)<<0)&1);l[S]=b[E],l[S+1]=b[E+1],l[S+2]=b[E+2],l[S+3]=z<x?w[z]:255}}if(2==c)for(k=0;k<i;k++)for(C=k*s,A=k*r,p=0;p<r;p++)S=A+p<<2,E=3*(z=t[C+(p>>2)]>>6-((3&p)<<1)&3),l[S]=b[E],l[S+1]=b[E+1],l[S+2]=b[E+2],l[S+3]=z<x?w[z]:255;if(4==c)for(k=0;k<i;k++)for(C=k*s,A=k*r,p=0;p<r;p++)S=A+p<<2,E=3*(z=t[C+(p>>1)]>>4-((1&p)<<2)&15),l[S]=b[E],l[S+1]=b[E+1],l[S+2]=b[E+2],l[S+3]=z<x?w[z]:255;if(8==c)for(p=0;p<a;p++){var z;S=p<<2,E=3*(z=t[p]),l[S]=b[E],l[S+1]=b[E+1],l[S+2]=b[E+2],l[S+3]=z<x?w[z]:255}}else if(4==u){if(8==c)for(p=0;p<a;p++){S=p<<2;var M=t[T=p<<1];l[S]=M,l[S+1]=M,l[S+2]=M,l[S+3]=t[T+1]}if(16==c)for(p=0;p<a;p++){var T;S=p<<2,M=t[T=p<<2],l[S]=M,l[S+1]=M,l[S+2]=M,l[S+3]=t[T+2]}}else if(0==u){if(g=n.tabs.tRNS?n.tabs.tRNS:-1,1==c)for(p=0;p<a;p++){var L=(M=255*(t[p>>3]>>7-(7&p)&1))==255*g?0:255;h[p]=L<<24|M<<16|M<<8|M}if(2==c)for(p=0;p<a;p++)L=(M=85*(t[p>>2]>>6-((3&p)<<1)&3))==85*g?0:255,h[p]=L<<24|M<<16|M<<8|M;if(4==c)for(p=0;p<a;p++)L=(M=17*(t[p>>1]>>4-((1&p)<<2)&15))==17*g?0:255,h[p]=L<<24|M<<16|M<<8|M;if(8==c)for(p=0;p<a;p++)L=(M=t[p])==g?0:255,h[p]=L<<24|M<<16|M<<8|M;if(16==c)for(p=0;p<a;p++)M=t[p<<1],L=d(t,p<<1)==g?0:255,h[p]=L<<24|M<<16|M<<8|M}return l},e.decode=function(t){for(var r,i=new Uint8Array(t),n=8,a=e._bin,o=a.readUshort,s=a.readUint,l={tabs:{},frames:[]},h=new Uint8Array(i.length),u=0,c=0,d=[137,80,78,71,13,10,26,10],f=0;f<8;f++)if(i[f]!=d[f])throw\"The input is not a PNG file!\";for(;n<i.length;){var p=a.readUint(i,n);n+=4;var v=a.readASCII(i,n,4);if(n+=4,\"IHDR\"==v)e.decode._IHDR(i,n,l);else if(\"IDAT\"==v){for(f=0;f<p;f++)h[u+f]=i[n+f];u+=p}else if(\"acTL\"==v)l.tabs[v]={num_frames:s(i,n),num_plays:s(i,n+4)},r=new Uint8Array(i.length);else if(\"fcTL\"==v){0!=c&&((C=l.frames[l.frames.length-1]).data=e.decode._decompress(l,r.slice(0,c),C.rect.width,C.rect.height),c=0);var g={x:s(i,n+12),y:s(i,n+16),width:s(i,n+4),height:s(i,n+8)},m=o(i,n+22);m=o(i,n+20)/(0==m?100:m);var y={rect:g,delay:Math.round(1e3*m),dispose:i[n+24],blend:i[n+25]};l.frames.push(y)}else if(\"fdAT\"==v){for(f=0;f<p-4;f++)r[c+f]=i[n+f+4];c+=p-4}else if(\"pHYs\"==v)l.tabs[v]=[a.readUint(i,n),a.readUint(i,n+4),i[n+8]];else if(\"cHRM\"==v)for(l.tabs[v]=[],f=0;f<8;f++)l.tabs[v].push(a.readUint(i,n+4*f));else if(\"tEXt\"==v){null==l.tabs[v]&&(l.tabs[v]={});var _=a.nextZero(i,n),b=a.readASCII(i,n,_-n),w=a.readASCII(i,_+1,n+p-_-1);l.tabs[v][b]=w}else if(\"iTXt\"==v){null==l.tabs[v]&&(l.tabs[v]={}),_=0;var x=n;_=a.nextZero(i,x),b=a.readASCII(i,x,_-x),i[x=_+1],i[x+1],x+=2,_=a.nextZero(i,x),a.readASCII(i,x,_-x),x=_+1,_=a.nextZero(i,x),a.readUTF8(i,x,_-x),x=_+1,w=a.readUTF8(i,x,p-(x-n)),l.tabs[v][b]=w}else if(\"PLTE\"==v)l.tabs[v]=a.readBytes(i,n,p);else if(\"hIST\"==v){var k=l.tabs.PLTE.length/3;for(l.tabs[v]=[],f=0;f<k;f++)l.tabs[v].push(o(i,n+2*f))}else if(\"tRNS\"==v)3==l.ctype?l.tabs[v]=a.readBytes(i,n,p):0==l.ctype?l.tabs[v]=o(i,n):2==l.ctype&&(l.tabs[v]=[o(i,n),o(i,n+2),o(i,n+4)]);else if(\"gAMA\"==v)l.tabs[v]=a.readUint(i,n)/1e5;else if(\"sRGB\"==v)l.tabs[v]=i[n];else if(\"bKGD\"==v)0==l.ctype||4==l.ctype?l.tabs[v]=[o(i,n)]:2==l.ctype||6==l.ctype?l.tabs[v]=[o(i,n),o(i,n+2),o(i,n+4)]:3==l.ctype&&(l.tabs[v]=i[n]);else if(\"IEND\"==v){var C;0!=c&&((C=l.frames[l.frames.length-1]).data=e.decode._decompress(l,r.slice(0,c),C.rect.width,C.rect.height),c=0),l.data=e.decode._decompress(l,h,l.width,l.height);break}n+=p,a.readUint(i,n),n+=4}return delete l.compress,delete l.interlace,delete l.filter,l},e.decode._decompress=function(t,r,i,n){return 0==t.compress&&(r=e.decode._inflate(r)),0==t.interlace?r=e.decode._filterZero(r,t,0,i,n):1==t.interlace&&(r=e.decode._readInterlace(r,t)),r},e.decode._inflate=function(e){return t.inflate(e)},e.decode._readInterlace=function(t,r){for(var i=r.width,n=r.height,a=e.decode._getBPP(r),o=a>>3,s=Math.ceil(i*a/8),l=new Uint8Array(n*s),h=0,u=[0,0,4,0,2,0,1],c=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],f=[8,8,4,4,2,2,1],p=0;p<7;){for(var v=d[p],g=f[p],m=0,y=0,_=u[p];_<n;)_+=v,y++;for(var b=c[p];b<i;)b+=g,m++;var w=Math.ceil(m*a/8);e.decode._filterZero(t,r,h,m,y);for(var x=0,k=u[p];k<n;){for(var C=c[p],A=h+x*w<<3;C<i;){var S;if(1==a&&(S=(S=t[A>>3])>>7-(7&A)&1,l[k*s+(C>>3)]|=S<<7-((3&C)<<0)),2==a&&(S=(S=t[A>>3])>>6-(7&A)&3,l[k*s+(C>>2)]|=S<<6-((3&C)<<1)),4==a&&(S=(S=t[A>>3])>>4-(7&A)&15,l[k*s+(C>>1)]|=S<<4-((1&C)<<2)),a>=8)for(var E=k*s+C*o,z=0;z<o;z++)l[E+z]=t[(A>>3)+z];A+=a,C+=g}x++,k+=v}m*y!=0&&(h+=y*(1+w)),p+=1}return l},e.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},e.decode._filterZero=function(t,r,i,n,a){var o=e.decode._getBPP(r),s=Math.ceil(n*o/8),l=e.decode._paeth;o=Math.ceil(o/8);for(var h=0;h<a;h++){var u=i+h*s,c=u+h+1,d=t[c-1];if(0==d)for(var f=0;f<s;f++)t[u+f]=t[c+f];else if(1==d){for(f=0;f<o;f++)t[u+f]=t[c+f];for(f=o;f<s;f++)t[u+f]=t[c+f]+t[u+f-o]&255}else if(0==h){for(f=0;f<o;f++)t[u+f]=t[c+f];if(2==d)for(f=o;f<s;f++)t[u+f]=255&t[c+f];if(3==d)for(f=o;f<s;f++)t[u+f]=t[c+f]+(t[u+f-o]>>1)&255;if(4==d)for(f=o;f<s;f++)t[u+f]=t[c+f]+l(t[u+f-o],0,0)&255}else{if(2==d)for(f=0;f<s;f++)t[u+f]=t[c+f]+t[u+f-s]&255;if(3==d){for(f=0;f<o;f++)t[u+f]=t[c+f]+(t[u+f-s]>>1)&255;for(f=o;f<s;f++)t[u+f]=t[c+f]+(t[u+f-s]+t[u+f-o]>>1)&255}if(4==d){for(f=0;f<o;f++)t[u+f]=t[c+f]+l(0,t[u+f-s],0)&255;for(f=o;f<s;f++)t[u+f]=t[c+f]+l(t[u+f-o],t[u+f-s],t[u+f-o-s])&255}}}return t},e.decode._paeth=function(e,t,r){var i=e+t-r,n=Math.abs(i-e),a=Math.abs(i-t),o=Math.abs(i-r);return n<=a&&n<=o?e:a<=o?t:r},e.decode._IHDR=function(t,r,i){var n=e._bin;i.width=n.readUint(t,r),r+=4,i.height=n.readUint(t,r),r+=4,i.depth=t[r],r++,i.ctype=t[r],r++,i.compress=t[r],r++,i.filter=t[r],r++,i.interlace=t[r],r++},e._bin={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},readUint:function(e,t){return 16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},readASCII:function(e,t,r){for(var i=\"\",n=0;n<r;n++)i+=String.fromCharCode(e[t+n]);return i},writeASCII:function(e,t,r){for(var i=0;i<r.length;i++)e[t+i]=r.charCodeAt(i)},readBytes:function(e,t,r){for(var i=[],n=0;n<r;n++)i.push(e[t+n]);return i},pad:function(e){return e.length<2?\"0\"+e:e},readUTF8:function(t,r,i){for(var n,a=\"\",o=0;o<i;o++)a+=\"%\"+e._bin.pad(t[r+o].toString(16));try{n=decodeURIComponent(a)}catch(n){return e._bin.readASCII(t,r,i)}return n}},e._copyTile=function(e,t,r,i,n,a,o,s,l){for(var h=Math.min(t,n),u=Math.min(r,a),c=0,d=0,f=0;f<u;f++)for(var p=0;p<h;p++)if(o>=0&&s>=0?(c=f*t+p<<2,d=(s+f)*n+o+p<<2):(c=(-s+f)*t-o+p<<2,d=f*n+p<<2),0==l)i[d]=e[c],i[d+1]=e[c+1],i[d+2]=e[c+2],i[d+3]=e[c+3];else if(1==l){var v=e[c+3]*(1/255),g=e[c]*v,m=e[c+1]*v,y=e[c+2]*v,_=i[d+3]*(1/255),b=i[d]*_,w=i[d+1]*_,x=i[d+2]*_,k=1-v,C=v+_*k,A=0==C?0:1/C;i[d+3]=255*C,i[d+0]=(g+b*k)*A,i[d+1]=(m+w*k)*A,i[d+2]=(y+x*k)*A}else if(2==l)v=e[c+3],g=e[c],m=e[c+1],y=e[c+2],_=i[d+3],b=i[d],w=i[d+1],x=i[d+2],v==_&&g==b&&m==w&&y==x?(i[d]=0,i[d+1]=0,i[d+2]=0,i[d+3]=0):(i[d]=g,i[d+1]=m,i[d+2]=y,i[d+3]=v);else if(3==l){if(v=e[c+3],g=e[c],m=e[c+1],y=e[c+2],_=i[d+3],b=i[d],w=i[d+1],x=i[d+2],v==_&&g==b&&m==w&&y==x)continue;if(v<220&&_>20)return!1}return!0},e.encode=function(t,r,i,n,a,o){null==n&&(n=0),null==o&&(o=!1);for(var s=new Uint8Array(t[0].byteLength*t.length+100),l=[137,80,78,71,13,10,26,10],h=0;h<8;h++)s[h]=l[h];var u=8,c=e._bin,d=e.crc.crc,f=c.writeUint,p=c.writeUshort,v=c.writeASCII,g=e.encode.compressPNG(t,r,i,n,o);f(s,u,13),v(s,u+=4,\"IHDR\"),f(s,u+=4,r),f(s,u+=4,i),s[u+=4]=g.depth,s[++u]=g.ctype,s[++u]=0,s[++u]=0,s[++u]=0,f(s,++u,d(s,u-17,17)),f(s,u+=4,1),v(s,u+=4,\"sRGB\"),s[u+=4]=1,f(s,++u,d(s,u-5,5)),u+=4;var m=t.length>1;if(m&&(f(s,u,8),v(s,u+=4,\"acTL\"),f(s,u+=4,t.length),f(s,u+=4,0),f(s,u+=4,d(s,u-12,12)),u+=4),3==g.ctype){for(f(s,u,3*(S=g.plte.length)),v(s,u+=4,\"PLTE\"),u+=4,h=0;h<S;h++){var y=3*h,_=g.plte[h],b=255&_,w=_>>8&255,x=_>>16&255;s[u+y+0]=b,s[u+y+1]=w,s[u+y+2]=x}if(f(s,u+=3*S,d(s,u-3*S-4,3*S+4)),u+=4,g.gotAlpha){for(f(s,u,S),v(s,u+=4,\"tRNS\"),u+=4,h=0;h<S;h++)s[u+h]=g.plte[h]>>24&255;f(s,u+=S,d(s,u-S-4,S+4)),u+=4}}for(var k=0,C=0;C<g.frames.length;C++){var A=g.frames[C];m&&(f(s,u,26),v(s,u+=4,\"fcTL\"),f(s,u+=4,k++),f(s,u+=4,A.rect.width),f(s,u+=4,A.rect.height),f(s,u+=4,A.rect.x),f(s,u+=4,A.rect.y),p(s,u+=4,a[C]),p(s,u+=2,1e3),s[u+=2]=A.dispose,s[++u]=A.blend,f(s,++u,d(s,u-30,30)),u+=4);var S,E=A.cimg;f(s,u,(S=E.length)+(0==C?0:4));var z=u+=4;for(v(s,u,0==C?\"IDAT\":\"fdAT\"),u+=4,0!=C&&(f(s,u,k++),u+=4),h=0;h<S;h++)s[u+h]=E[h];f(s,u+=S,d(s,z,u-z)),u+=4}return f(s,u,0),v(s,u+=4,\"IEND\"),f(s,u+=4,d(s,u-4,4)),u+=4,s.buffer.slice(0,u)},e.encode.compressPNG=function(t,r,i,n,a){for(var o=e.encode.compress(t,r,i,n,!1,a),s=0;s<t.length;s++){var l=o.frames[s],h=(l.rect.width,l.rect.height),u=l.bpl,c=l.bpp,d=new Uint8Array(h*u+h);l.cimg=e.encode._filterZero(l.img,h,c,u,d)}return o},e.encode.compress=function(t,r,i,n,a,o){null==o&&(o=!1);for(var s=6,l=8,h=4,u=255,c=0;c<t.length;c++)for(var d=new Uint8Array(t[c]),f=d.length,p=0;p<f;p+=4)u&=d[p+3];var v=255!=u,g={},m=[];if(0!=t.length&&(g[0]=0,m.push(0),0!=n&&n--),0!=n){var y=e.quantize(t,n,a);for(t=y.bufs,p=0;p<y.plte.length;p++)null==g[b=y.plte[p].est.rgba]&&(g[b]=m.length,m.push(b))}else for(c=0;c<t.length;c++){var _=new Uint32Array(t[c]);for(f=_.length,p=0;p<f;p++){var b=_[p];if((p<r||b!=_[p-1]&&b!=_[p-r])&&null==g[b]&&(g[b]=m.length,m.push(b),m.length>=300))break}}var w=!!v&&a,x=m.length;x<=256&&0==o&&(l=x<=2?1:x<=4?2:x<=16?4:8,a&&(l=8),v=!0);var k=[];for(c=0;c<t.length;c++){var C=new Uint8Array(t[c]),A=new Uint32Array(C.buffer),S=0,E=0,z=r,M=i,T=0;if(0!=c&&!w){for(var L=a||1==c||2==k[k.length-2].dispose?1:2,D=0,O=1e9,I=0;I<L;I++){for(var F=new Uint8Array(t[c-1-I]),R=new Uint32Array(t[c-1-I]),P=r,N=i,B=-1,U=-1,G=0;G<i;G++)for(var V=0;V<r;V++)A[p=G*r+V]!=R[p]&&(V<P&&(P=V),V>B&&(B=V),G<N&&(N=G),G>U&&(U=G));var j=-1==B?1:(B-P+1)*(U-N+1);j<O&&(O=j,D=I,-1==B?(S=E=0,z=M=1):(S=P,E=N,z=B-P+1,M=U-N+1))}F=new Uint8Array(t[c-1-D]),1==D&&(k[k.length-1].dispose=2);var H=new Uint8Array(z*M*4);new Uint32Array(H.buffer),e._copyTile(F,r,i,H,z,M,-S,-E,0),e._copyTile(C,r,i,H,z,M,-S,-E,3)?(e._copyTile(C,r,i,H,z,M,-S,-E,2),T=1):(e._copyTile(C,r,i,H,z,M,-S,-E,0),T=0),C=H,A=new Uint32Array(C.buffer)}var q=4*z;if(x<=256&&0==o){for(q=Math.ceil(l*z/8),H=new Uint8Array(q*M),G=0;G<M;G++){p=G*q;var W=G*z;if(8==l)for(V=0;V<z;V++)H[p+V]=g[A[W+V]];else if(4==l)for(V=0;V<z;V++)H[p+(V>>1)]|=g[A[W+V]]<<4-4*(1&V);else if(2==l)for(V=0;V<z;V++)H[p+(V>>2)]|=g[A[W+V]]<<6-2*(3&V);else if(1==l)for(V=0;V<z;V++)H[p+(V>>3)]|=g[A[W+V]]<<7-1*(7&V)}C=H,s=3,h=1}else if(0==v&&1==t.length){H=new Uint8Array(z*M*3);var Y=z*M;for(p=0;p<Y;p++){var Z=3*p,X=4*p;H[Z]=C[X],H[Z+1]=C[X+1],H[Z+2]=C[X+2]}C=H,s=2,h=3,q=3*z}k.push({rect:{x:S,y:E,width:z,height:M},img:C,bpl:q,bpp:h,blend:T,dispose:w?1:0})}return{ctype:s,depth:l,plte:m,gotAlpha:v,frames:k}},e.encode._filterZero=function(r,i,n,a,o){for(var s=[],l=0;l<5;l++)if(!(i*a>5e5)||2!=l&&3!=l&&4!=l){for(var h=0;h<i;h++)e.encode._filterLine(o,r,h,a,n,l);if(s.push(t.deflate(o)),1==n)break}for(var u,c=1e9,d=0;d<s.length;d++)s[d].length<c&&(u=d,c=s[d].length);return s[u]},e.encode._filterLine=function(t,r,i,n,a,o){var s=i*n,l=s+i,h=e.decode._paeth;if(t[l]=o,l++,0==o)for(var u=0;u<n;u++)t[l+u]=r[s+u];else if(1==o){for(u=0;u<a;u++)t[l+u]=r[s+u];for(u=a;u<n;u++)t[l+u]=r[s+u]-r[s+u-a]+256&255}else if(0==i){for(u=0;u<a;u++)t[l+u]=r[s+u];if(2==o)for(u=a;u<n;u++)t[l+u]=r[s+u];if(3==o)for(u=a;u<n;u++)t[l+u]=r[s+u]-(r[s+u-a]>>1)+256&255;if(4==o)for(u=a;u<n;u++)t[l+u]=r[s+u]-h(r[s+u-a],0,0)+256&255}else{if(2==o)for(u=0;u<n;u++)t[l+u]=r[s+u]+256-r[s+u-n]&255;if(3==o){for(u=0;u<a;u++)t[l+u]=r[s+u]+256-(r[s+u-n]>>1)&255;for(u=a;u<n;u++)t[l+u]=r[s+u]+256-(r[s+u-n]+r[s+u-a]>>1)&255}if(4==o){for(u=0;u<a;u++)t[l+u]=r[s+u]+256-h(0,r[s+u-n],0)&255;for(u=a;u<n;u++)t[l+u]=r[s+u]+256-h(r[s+u-a],r[s+u-n],r[s+u-a-n])&255}}},e.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,i=0;i<8;i++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update:function(t,r,i,n){for(var a=0;a<n;a++)t=e.crc.table[255&(t^r[i+a])]^t>>>8;return t},crc:function(t,r,i){return 4294967295^e.crc.update(4294967295,t,r,i)}},e.quantize=function(t,r,i){for(var n=[],a=0,o=0;o<t.length;o++)n.push(e.encode.alphaMul(new Uint8Array(t[o]),i)),a+=t[o].byteLength;var s=new Uint8Array(a),l=new Uint32Array(s.buffer),h=0;for(o=0;o<n.length;o++){for(var u=n[o],c=u.length,d=0;d<c;d++)s[h+d]=u[d];h+=c}var f={i0:0,i1:s.length,bst:null,est:null,tdst:0,left:null,right:null};f.bst=e.quantize.stats(s,f.i0,f.i1),f.est=e.quantize.estats(f.bst);for(var p=[f];p.length<r;){var v=0,g=0;for(o=0;o<p.length;o++)p[o].est.L>v&&(v=p[o].est.L,g=o);if(v<.001)break;var m=p[g],y=e.quantize.splitPixels(s,l,m.i0,m.i1,m.est.e,m.est.eMq255),_={i0:m.i0,i1:y,bst:null,est:null,tdst:0,left:null,right:null};_.bst=e.quantize.stats(s,_.i0,_.i1),_.est=e.quantize.estats(_.bst);var b={i0:y,i1:m.i1,bst:null,est:null,tdst:0,left:null,right:null};for(b.bst={R:[],m:[],N:m.bst.N-_.bst.N},o=0;o<16;o++)b.bst.R[o]=m.bst.R[o]-_.bst.R[o];for(o=0;o<4;o++)b.bst.m[o]=m.bst.m[o]-_.bst.m[o];b.est=e.quantize.estats(b.bst),m.left=_,m.right=b,p[g]=_,p.push(b)}p.sort((function(e,t){return t.bst.N-e.bst.N}));for(var w=0;w<n.length;w++){var x=e.quantize.planeDst,k=new Uint8Array(n[w].buffer),C=new Uint32Array(n[w].buffer),A=k.length;for(o=0;o<A;o+=4){for(var S=k[o]*(1/255),E=k[o+1]*(1/255),z=k[o+2]*(1/255),M=k[o+3]*(1/255),T=f;T.left;)T=x(T.est,S,E,z,M)<=0?T.left:T.right;C[o>>2]=T.est.rgba}n[w]=C.buffer}return{bufs:n,plte:p}},e.quantize.getNearest=function(t,r,i,n,a){if(null==t.left)return t.tdst=e.quantize.dist(t.est.q,r,i,n,a),t;var o=e.quantize.planeDst(t.est,r,i,n,a),s=t.left,l=t.right;o>0&&(s=t.right,l=t.left);var h=e.quantize.getNearest(s,r,i,n,a);if(h.tdst<=o*o)return h;var u=e.quantize.getNearest(l,r,i,n,a);return u.tdst<h.tdst?u:h},e.quantize.planeDst=function(e,t,r,i,n){var a=e.e;return a[0]*t+a[1]*r+a[2]*i+a[3]*n-e.eMq},e.quantize.dist=function(e,t,r,i,n){var a=t-e[0],o=r-e[1],s=i-e[2],l=n-e[3];return a*a+o*o+s*s+l*l},e.quantize.splitPixels=function(t,r,i,n,a,o){var s=e.quantize.vecDot;for(n-=4;i<n;){for(;s(t,i,a)<=o;)i+=4;for(;s(t,n,a)>o;)n-=4;if(i>=n)break;var l=r[i>>2];r[i>>2]=r[n>>2],r[n>>2]=l,i+=4,n-=4}for(;s(t,i,a)>o;)i-=4;return i+4},e.quantize.vecDot=function(e,t,r){return e[t]*r[0]+e[t+1]*r[1]+e[t+2]*r[2]+e[t+3]*r[3]},e.quantize.stats=function(e,t,r){for(var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0],a=r-t>>2,o=t;o<r;o+=4){var s=e[o]*(1/255),l=e[o+1]*(1/255),h=e[o+2]*(1/255),u=e[o+3]*(1/255);n[0]+=s,n[1]+=l,n[2]+=h,n[3]+=u,i[0]+=s*s,i[1]+=s*l,i[2]+=s*h,i[3]+=s*u,i[5]+=l*l,i[6]+=l*h,i[7]+=l*u,i[10]+=h*h,i[11]+=h*u,i[15]+=u*u}return i[4]=i[1],i[8]=i[2],i[12]=i[3],i[9]=i[6],i[13]=i[7],i[14]=i[11],{R:i,m:n,N:a}},e.quantize.estats=function(t){var r=t.R,i=t.m,n=t.N,a=i[0],o=i[1],s=i[2],l=i[3],h=0==n?0:1/n,u=[r[0]-a*a*h,r[1]-a*o*h,r[2]-a*s*h,r[3]-a*l*h,r[4]-o*a*h,r[5]-o*o*h,r[6]-o*s*h,r[7]-o*l*h,r[8]-s*a*h,r[9]-s*o*h,r[10]-s*s*h,r[11]-s*l*h,r[12]-l*a*h,r[13]-l*o*h,r[14]-l*s*h,r[15]-l*l*h],c=u,d=e.M4,f=[.5,.5,.5,.5],p=0,v=0;if(0!=n)for(var g=0;g<10&&(f=d.multVec(c,f),v=Math.sqrt(d.dot(f,f)),f=d.sml(1/v,f),!(Math.abs(v-p)<1e-9));g++)p=v;var m=[a*h,o*h,s*h,l*h],y=d.dot(d.sml(255,m),f),_=m[3]<.001?0:1/m[3];return{Cov:u,q:m,e:f,L:p,eMq255:y,eMq:d.dot(f,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2]*_)<<16|Math.round(255*m[1]*_)<<8|Math.round(255*m[0]*_)<<0)>>>0}},e.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}},e.encode.alphaMul=function(e,t){for(var r=new Uint8Array(e.length),i=e.length>>2,n=0;n<i;n++){var a=n<<2,o=e[a+3];t&&(o=o<128?0:255);var s=o*(1/255);r[a+0]=e[a+0]*s,r[a+1]=e[a+1]*s,r[a+2]=e[a+2]*s,r[a+3]=o}return r}}(i,r(4300))},4300:function(e,t,r){\"use strict\";var i={};(0,r(6296).assign)(i,r(7434),r(6988),r(5642)),e.exports=i},7434:function(e,t,r){\"use strict\";var i=r(9892),n=r(6296),a=r(3963),o=r(5795),s=r(6866),l=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(o[r]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u=\"string\"==typeof t.dictionary?a.string2buf(t.dictionary):\"[object ArrayBuffer]\"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=i.deflateSetDictionary(this.strm,u)))throw new Error(o[r]);this._dict_set=!0}}function u(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}h.prototype.push=function(e,t){var r,o,s=this.strm,h=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,\"string\"==typeof e?s.input=a.string2buf(e):\"[object ArrayBuffer]\"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new n.Buf8(h),s.next_out=0,s.avail_out=h),1!==(r=i.deflate(s,o))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||(\"string\"===this.options.to?this.onData(a.buf2binstring(n.shrinkBuf(s.output,s.next_out))):this.onData(n.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===o?(r=i.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==o||(this.onEnd(0),s.avail_out=0,!0)},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){0===e&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=h,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},6988:function(e,t,r){\"use strict\";var i=r(5356),n=r(6296),a=r(3963),o=r(5642),s=r(5795),l=r(6866),h=r(8772),u=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=i.inflateInit2(this.strm,t.windowBits);if(r!==o.Z_OK)throw new Error(s[r]);if(this.header=new h,i.inflateGetHeader(this.strm,this.header),t.dictionary&&(\"string\"==typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):\"[object ArrayBuffer]\"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=i.inflateSetDictionary(this.strm,t.dictionary))!==o.Z_OK))throw new Error(s[r])}function d(e,t){var r=new c(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}c.prototype.push=function(e,t){var r,s,l,h,c,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,v=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,\"string\"==typeof e?d.input=a.binstring2buf(e):\"[object ArrayBuffer]\"===u.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new n.Buf8(f),d.next_out=0,d.avail_out=f),(r=i.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(r=i.inflateSetDictionary(this.strm,p)),r===o.Z_BUF_ERROR&&!0===v&&(r=o.Z_OK,v=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==o.Z_STREAM_END&&(0!==d.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(l=a.utf8border(d.output,d.next_out),h=d.next_out-l,c=a.buf2string(d.output,l),d.next_out=h,d.avail_out=f-h,h&&n.arraySet(d.output,d.output,l,h,0),this.onData(c)):this.onData(n.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(v=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),d.avail_out=0,!0)},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){e===o.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=c,t.inflate=d,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},t.ungzip=d},6296:function(e,t){\"use strict\";var r=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if(\"object\"!=_typeof(r))throw new TypeError(r+\"must be non-object\");for(var n in r)i(r,n)&&(e[n]=r[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+i),n);else for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){var t,r,i,n,a,o;for(i=0,t=0,r=e.length;t<r;t++)i+=e[t].length;for(o=new Uint8Array(i),n=0,t=0,r=e.length;t<r;t++)a=e[t],o.set(a,n),n+=a.length;return o}},a={arraySet:function(e,t,r,i,n){for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)},3963:function(e,t,r){\"use strict\";var i=r(6296),n=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new i.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r=\"\",o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r}o[254]=o[254]=1,t.string2buf=function(e){var t,r,n,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new i.Buf8(l),o=0,a=0;o<l;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,i,n,a,s=t||e.length,h=new Array(2*s);for(i=0,r=0;r<s;)if((n=e[r++])<128)h[i++]=n;else if((a=o[n])>4)h[i++]=65533,r+=a-1;else{for(n&=2===a?31:3===a?15:7;a>1&&r<s;)n=n<<6|63&e[r++],a--;a>1?h[i++]=65533:n<65536?h[i++]=n:(n-=65536,h[i++]=55296|n>>10&1023,h[i++]=56320|1023&n)}return l(h,i)},t.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}},7853:function(e){\"use strict\";e.exports=function(e,t,r,i){for(var n=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(n=n+t[i++]|0)|0}while(--o);n%=65521,a%=65521}return n|a<<16|0}},5642:function(e){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},5684:function(e){\"use strict\";var t=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,r,i,n){var a=t,o=n+i;e^=-1;for(var s=n;s<o;s++)e=e>>>8^a[255&(e^r[s])];return-1^e}},9892:function(e,t,r){\"use strict\";var i,n=r(6296),a=r(5313),o=r(7853),s=r(5684),l=r(5795),h=-2,u=258,c=262,d=103,f=113,p=666;function v(e,t){return e.msg=l[t],t}function g(e){return(e<<1)-(e>4?9:0)}function m(e){for(var t=e.length;--t>=0;)e[t]=0}function y(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function _(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function b(e,t){e.pending_buf[e.pending++]=t}function w(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var r,i,n=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-c?e.strstart-(e.w_size-c):0,h=e.window,d=e.w_mask,f=e.prev,p=e.strstart+u,v=h[a+o-1],g=h[a+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(h[(r=t)+o]===g&&h[r+o-1]===v&&h[r]===h[a]&&h[++r]===h[a+1]){a+=2,r++;do{}while(h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&a<p);if(i=u-(p-a),a=p-u,i>o){if(e.match_start=t,o=i,i>=s)break;v=h[a+o-1],g=h[a+o]}}}while((t=f[t&d])>l&&0!=--n);return o<=e.lookahead?o:e.lookahead}function k(e){var t,r,i,a,l,h,u,d,f,p,v=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=v+(v-c)){n.arraySet(e.window,e.window,v,v,0),e.match_start-=v,e.strstart-=v,e.block_start-=v,t=r=e.hash_size;do{i=e.head[--t],e.head[t]=i>=v?i-v:0}while(--r);t=r=v;do{i=e.prev[--t],e.prev[t]=i>=v?i-v:0}while(--r);a+=v}if(0===e.strm.avail_in)break;if(h=e.strm,u=e.window,d=e.strstart+e.lookahead,f=a,p=void 0,(p=h.avail_in)>f&&(p=f),r=0===p?0:(h.avail_in-=p,n.arraySet(u,h.input,h.next_in,p,d),1===h.state.wrap?h.adler=o(h.adler,u,p,d):2===h.state.wrap&&(h.adler=s(h.adler,u,p,d)),h.next_in+=p,h.total_in+=p,p),e.lookahead+=r,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<c&&0!==e.strm.avail_in)}function C(e,t){for(var r,i;;){if(e.lookahead<c){if(k(e),e.lookahead<c&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-c&&(e.match_length=x(e,r)),e.match_length>=3)if(i=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function A(e,t){for(var r,i,n;;){if(e.lookahead<c){if(k(e),e.lookahead<c&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-c&&(e.match_length=x(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,i=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(_(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=a._tr_tally(e,0,e.window[e.strstart-1]))&&_(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function S(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:f,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):v(e,h)}function M(e){var t,r=z(e);return 0===r&&((t=e.state).window_size=2*t.w_size,m(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function T(e,t,r,i,a,o){if(!e)return h;var s=1;if(-1===t&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),a<1||a>9||8!==r||i<8||i>15||t<0||t>9||o<0||o>4)return v(e,h);8===i&&(i=9);var l=new E;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new n.Buf8(2*l.w_size),l.head=new n.Buf16(l.hash_size),l.prev=new n.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new n.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=r,M(e)}i=[new S(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(k(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,_(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-c&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(_(e,!1),e.strm.avail_out),1)})),new S(4,4,8,4,C),new S(4,5,16,8,C),new S(4,6,32,32,C),new S(4,4,16,16,A),new S(8,16,32,32,A),new S(8,16,128,128,A),new S(8,32,128,256,A),new S(32,128,258,1024,A),new S(32,258,258,4096,A)],t.deflateInit=function(e,t){return T(e,t,8,15,8,0)},t.deflateInit2=T,t.deflateReset=M,t.deflateResetKeep=z,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,0):h},t.deflate=function(e,t){var r,n,o,l;if(!e||!e.state||t>5||t<0)return e?v(e,h):h;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===p&&4!==t)return v(e,0===e.avail_out?-5:h);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,b(n,31),b(n,139),b(n,8),n.gzhead?(b(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),b(n,255&n.gzhead.time),b(n,n.gzhead.time>>8&255),b(n,n.gzhead.time>>16&255),b(n,n.gzhead.time>>24&255),b(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),b(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(b(n,255&n.gzhead.extra.length),b(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=s(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(b(n,0),b(n,0),b(n,0),b(n,0),b(n,0),b(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),b(n,3),n.status=f);else{var c=8+(n.w_bits-8<<4)<<8;c|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(c|=32),c+=31-c%31,n.status=f,w(n,c),0!==n.strstart&&(w(n,e.adler>>>16),w(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(o=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),y(e),o=n.pending,n.pending!==n.pending_buf_size));)b(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),y(e),o=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,b(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),0===l&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),y(e),o=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,b(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),0===l&&(n.status=d)}else n.status=d;if(n.status===d&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&y(e),n.pending+2<=n.pending_buf_size&&(b(n,255&e.adler),b(n,e.adler>>8&255),e.adler=0,n.status=f)):n.status=f),0!==n.pending){if(y(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&g(t)<=g(r)&&4!==t)return v(e,-5);if(n.status===p&&0!==e.avail_in)return v(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&n.status!==p){var x=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(k(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,i,n,o,s=e.window;;){if(e.lookahead<=u){if(k(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=s[n=e.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){o=e.strstart+u;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<o);e.match_length=u-(o-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(n,t):i[n.level].func(n,t);if(3!==x&&4!==x||(n.status=p),1===x||3===x)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===x&&(1===t?a._tr_align(n):5!==t&&(a._tr_stored_block(n,0,0,!1),3===t&&(m(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),y(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(b(n,255&e.adler),b(n,e.adler>>8&255),b(n,e.adler>>16&255),b(n,e.adler>>24&255),b(n,255&e.total_in),b(n,e.total_in>>8&255),b(n,e.total_in>>16&255),b(n,e.total_in>>24&255)):(w(n,e.adler>>>16),w(n,65535&e.adler)),y(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==d&&t!==f&&t!==p?v(e,h):(e.state=null,t===f?v(e,-3):0):h},t.deflateSetDictionary=function(e,t){var r,i,a,s,l,u,c,d,f=t.length;if(!e||!e.state)return h;if(2===(s=(r=e.state).wrap)||1===s&&42!==r.status||r.lookahead)return h;for(1===s&&(e.adler=o(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===s&&(m(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new n.Buf8(r.w_size),n.arraySet(d,t,f-r.w_size,r.w_size,0),t=d,f=r.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=t,k(r);r.lookahead>=3;){i=r.strstart,a=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++}while(--a);r.strstart=i,r.lookahead=2,k(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,r.wrap=s,0},t.deflateInfo=\"pako deflate (from Nodeca project)\"},8772:function(e){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},7933:function(e){\"use strict\";e.exports=function(e,t){var r,i,n,a,o,s,l,h,u,c,d,f,p,v,g,m,y,_,b,w,x,k,C,A,S;r=e.state,i=e.next_in,A=e.input,n=i+(e.avail_in-5),a=e.next_out,S=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),l=r.dmax,h=r.wsize,u=r.whave,c=r.wnext,d=r.window,f=r.hold,p=r.bits,v=r.lencode,g=r.distcode,m=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(f+=A[i++]<<p,p+=8,f+=A[i++]<<p,p+=8),_=v[f&m];t:for(;;){if(f>>>=b=_>>>24,p-=b,0===(b=_>>>16&255))S[a++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=v[(65535&_)+(f&(1<<b)-1)];continue t}if(32&b){r.mode=12;break e}e.msg=\"invalid literal/length code\",r.mode=30;break e}w=65535&_,(b&=15)&&(p<b&&(f+=A[i++]<<p,p+=8),w+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=A[i++]<<p,p+=8,f+=A[i++]<<p,p+=8),_=g[f&y];r:for(;;){if(f>>>=b=_>>>24,p-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=g[(65535&_)+(f&(1<<b)-1)];continue r}e.msg=\"invalid distance code\",r.mode=30;break e}if(x=65535&_,p<(b&=15)&&(f+=A[i++]<<p,(p+=8)<b&&(f+=A[i++]<<p,p+=8)),(x+=f&(1<<b)-1)>l){e.msg=\"invalid distance too far back\",r.mode=30;break e}if(f>>>=b,p-=b,x>(b=a-o)){if((b=x-b)>u&&r.sane){e.msg=\"invalid distance too far back\",r.mode=30;break e}if(k=0,C=d,0===c){if(k+=h-b,b<w){w-=b;do{S[a++]=d[k++]}while(--b);k=a-x,C=S}}else if(c<b){if(k+=h+c-b,(b-=c)<w){w-=b;do{S[a++]=d[k++]}while(--b);if(k=0,c<w){w-=b=c;do{S[a++]=d[k++]}while(--b);k=a-x,C=S}}}else if(k+=c-b,b<w){w-=b;do{S[a++]=d[k++]}while(--b);k=a-x,C=S}for(;w>2;)S[a++]=C[k++],S[a++]=C[k++],S[a++]=C[k++],w-=3;w&&(S[a++]=C[k++],w>1&&(S[a++]=C[k++]))}else{k=a-x;do{S[a++]=S[k++],S[a++]=S[k++],S[a++]=S[k++],w-=3}while(w>2);w&&(S[a++]=S[k++],w>1&&(S[a++]=S[k++]))}break}}break}}while(i<n&&a<s);i-=w=p>>3,f&=(1<<(p-=w<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=f,r.bits=p}},5356:function(e,t,r){\"use strict\";var i=r(6296),n=r(7853),a=r(5684),o=r(7933),s=r(6215),l=-2,h=12,u=30;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):l}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):l}function v(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?l:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,p(e))):l}function g(e,t){var r,i;return e?(i=new d,e.state=i,i.window=null,0!==(r=v(e,t))&&(e.state=null),r):l}var m,y,_=!0;function b(e){if(_){var t;for(m=new i.Buf32(512),y=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,y,0,e.work,{bits:5}),_=!1}e.lencode=m,e.lenbits=9,e.distcode=y,e.distbits=5}function w(e,t,r,n){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),n>=o.wsize?(i.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>n&&(a=n),i.arraySet(o.window,t,r-n,a,o.wnext),(n-=a)?(i.arraySet(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=p,t.inflateReset2=v,t.inflateResetKeep=f,t.inflateInit=function(e){return g(e,15)},t.inflateInit2=g,t.inflate=function(e,t){var r,d,f,p,v,g,m,y,_,x,k,C,A,S,E,z,M,T,L,D,O,I,F,R,P=0,N=new i.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;(r=e.state).mode===h&&(r.mode=13),v=e.next_out,f=e.output,m=e.avail_out,p=e.next_in,d=e.input,g=e.avail_in,y=r.hold,_=r.bits,x=g,k=m,I=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;_<16;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(2&r.wrap&&35615===y){r.check=0,N[0]=255&y,N[1]=y>>>8&255,r.check=a(r.check,N,2,0),y=0,_=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg=\"incorrect header check\",r.mode=u;break}if(8!=(15&y)){e.msg=\"unknown compression method\",r.mode=u;break}if(_-=4,O=8+(15&(y>>>=4)),0===r.wbits)r.wbits=O;else if(O>r.wbits){e.msg=\"invalid window size\",r.mode=u;break}r.dmax=1<<O,e.adler=r.check=1,r.mode=512&y?10:h,y=0,_=0;break;case 2:for(;_<16;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(r.flags=y,8!=(255&r.flags)){e.msg=\"unknown compression method\",r.mode=u;break}if(57344&r.flags){e.msg=\"unknown header flags set\",r.mode=u;break}r.head&&(r.head.text=y>>8&1),512&r.flags&&(N[0]=255&y,N[1]=y>>>8&255,r.check=a(r.check,N,2,0)),y=0,_=0,r.mode=3;case 3:for(;_<32;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}r.head&&(r.head.time=y),512&r.flags&&(N[0]=255&y,N[1]=y>>>8&255,N[2]=y>>>16&255,N[3]=y>>>24&255,r.check=a(r.check,N,4,0)),y=0,_=0,r.mode=4;case 4:for(;_<16;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}r.head&&(r.head.xflags=255&y,r.head.os=y>>8),512&r.flags&&(N[0]=255&y,N[1]=y>>>8&255,r.check=a(r.check,N,2,0)),y=0,_=0,r.mode=5;case 5:if(1024&r.flags){for(;_<16;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}r.length=y,r.head&&(r.head.extra_len=y),512&r.flags&&(N[0]=255&y,N[1]=y>>>8&255,r.check=a(r.check,N,2,0)),y=0,_=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((C=r.length)>g&&(C=g),C&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,d,p,C,O)),512&r.flags&&(r.check=a(r.check,d,C,p)),g-=C,p+=C,r.length-=C),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===g)break e;C=0;do{O=d[p+C++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O))}while(O&&C<g);if(512&r.flags&&(r.check=a(r.check,d,C,p)),g-=C,p+=C,O)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===g)break e;C=0;do{O=d[p+C++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O))}while(O&&C<g);if(512&r.flags&&(r.check=a(r.check,d,C,p)),g-=C,p+=C,O)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;_<16;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(y!==(65535&r.check)){e.msg=\"header crc mismatch\",r.mode=u;break}y=0,_=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=h;break;case 10:for(;_<32;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}e.adler=r.check=c(y),y=0,_=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=v,e.avail_out=m,e.next_in=p,e.avail_in=g,r.hold=y,r.bits=_,2;e.adler=r.check=1,r.mode=h;case h:if(5===t||6===t)break e;case 13:if(r.last){y>>>=7&_,_-=7&_,r.mode=27;break}for(;_<3;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}switch(r.last=1&y,_-=1,3&(y>>>=1)){case 0:r.mode=14;break;case 1:if(b(r),r.mode=20,6===t){y>>>=2,_-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg=\"invalid block type\",r.mode=u}y>>>=2,_-=2;break;case 14:for(y>>>=7&_,_-=7&_;_<32;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if((65535&y)!=(y>>>16^65535)){e.msg=\"invalid stored block lengths\",r.mode=u;break}if(r.length=65535&y,y=0,_=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(C=r.length){if(C>g&&(C=g),C>m&&(C=m),0===C)break e;i.arraySet(f,d,p,C,v),g-=C,p+=C,m-=C,v+=C,r.length-=C;break}r.mode=h;break;case 17:for(;_<14;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(r.nlen=257+(31&y),y>>>=5,_-=5,r.ndist=1+(31&y),y>>>=5,_-=5,r.ncode=4+(15&y),y>>>=4,_-=4,r.nlen>286||r.ndist>30){e.msg=\"too many length or distance symbols\",r.mode=u;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;_<3;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}r.lens[B[r.have++]]=7&y,y>>>=3,_-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},I=s(0,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,I){e.msg=\"invalid code lengths set\",r.mode=u;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;z=(P=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,M=65535&P,!((E=P>>>24)<=_);){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(M<16)y>>>=E,_-=E,r.lens[r.have++]=M;else{if(16===M){for(R=E+2;_<R;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(y>>>=E,_-=E,0===r.have){e.msg=\"invalid bit length repeat\",r.mode=u;break}O=r.lens[r.have-1],C=3+(3&y),y>>>=2,_-=2}else if(17===M){for(R=E+3;_<R;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}_-=E,O=0,C=3+(7&(y>>>=E)),y>>>=3,_-=3}else{for(R=E+7;_<R;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}_-=E,O=0,C=11+(127&(y>>>=E)),y>>>=7,_-=7}if(r.have+C>r.nlen+r.ndist){e.msg=\"invalid bit length repeat\",r.mode=u;break}for(;C--;)r.lens[r.have++]=O}}if(r.mode===u)break;if(0===r.lens[256]){e.msg=\"invalid code -- missing end-of-block\",r.mode=u;break}if(r.lenbits=9,F={bits:r.lenbits},I=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,I){e.msg=\"invalid literal/lengths set\",r.mode=u;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},I=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,I){e.msg=\"invalid distances set\",r.mode=u;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(g>=6&&m>=258){e.next_out=v,e.avail_out=m,e.next_in=p,e.avail_in=g,r.hold=y,r.bits=_,o(e,k),v=e.next_out,f=e.output,m=e.avail_out,p=e.next_in,d=e.input,g=e.avail_in,y=r.hold,_=r.bits,r.mode===h&&(r.back=-1);break}for(r.back=0;z=(P=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,M=65535&P,!((E=P>>>24)<=_);){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(z&&0==(240&z)){for(T=E,L=z,D=M;z=(P=r.lencode[D+((y&(1<<T+L)-1)>>T)])>>>16&255,M=65535&P,!(T+(E=P>>>24)<=_);){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}y>>>=T,_-=T,r.back+=T}if(y>>>=E,_-=E,r.back+=E,r.length=M,0===z){r.mode=26;break}if(32&z){r.back=-1,r.mode=h;break}if(64&z){e.msg=\"invalid literal/length code\",r.mode=u;break}r.extra=15&z,r.mode=22;case 22:if(r.extra){for(R=r.extra;_<R;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}r.length+=y&(1<<r.extra)-1,y>>>=r.extra,_-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;z=(P=r.distcode[y&(1<<r.distbits)-1])>>>16&255,M=65535&P,!((E=P>>>24)<=_);){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(0==(240&z)){for(T=E,L=z,D=M;z=(P=r.distcode[D+((y&(1<<T+L)-1)>>T)])>>>16&255,M=65535&P,!(T+(E=P>>>24)<=_);){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}y>>>=T,_-=T,r.back+=T}if(y>>>=E,_-=E,r.back+=E,64&z){e.msg=\"invalid distance code\",r.mode=u;break}r.offset=M,r.extra=15&z,r.mode=24;case 24:if(r.extra){for(R=r.extra;_<R;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}r.offset+=y&(1<<r.extra)-1,y>>>=r.extra,_-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg=\"invalid distance too far back\",r.mode=u;break}r.mode=25;case 25:if(0===m)break e;if(C=k-m,r.offset>C){if((C=r.offset-C)>r.whave&&r.sane){e.msg=\"invalid distance too far back\",r.mode=u;break}C>r.wnext?(C-=r.wnext,A=r.wsize-C):A=r.wnext-C,C>r.length&&(C=r.length),S=r.window}else S=f,A=v-r.offset,C=r.length;C>m&&(C=m),m-=C,r.length-=C;do{f[v++]=S[A++]}while(--C);0===r.length&&(r.mode=21);break;case 26:if(0===m)break e;f[v++]=r.length,m--,r.mode=21;break;case 27:if(r.wrap){for(;_<32;){if(0===g)break e;g--,y|=d[p++]<<_,_+=8}if(k-=m,e.total_out+=k,r.total+=k,k&&(e.adler=r.check=r.flags?a(r.check,f,k,v-k):n(r.check,f,k,v-k)),k=m,(r.flags?y:c(y))!==r.check){e.msg=\"incorrect data check\",r.mode=u;break}y=0,_=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;_<32;){if(0===g)break e;g--,y+=d[p++]<<_,_+=8}if(y!==(4294967295&r.total)){e.msg=\"incorrect length check\",r.mode=u;break}y=0,_=0}r.mode=29;case 29:I=1;break e;case u:I=-3;break e;case 31:return-4;default:return l}return e.next_out=v,e.avail_out=m,e.next_in=p,e.avail_in=g,r.hold=y,r.bits=_,(r.wsize||k!==e.avail_out&&r.mode<u&&(r.mode<27||4!==t))&&w(e,e.output,e.next_out,k-e.avail_out)?(r.mode=31,-4):(x-=e.avail_in,k-=e.avail_out,e.total_in+=x,e.total_out+=k,r.total+=k,r.wrap&&k&&(e.adler=r.check=r.flags?a(r.check,f,k,e.next_out-k):n(r.check,f,k,e.next_out-k)),e.data_type=r.bits+(r.last?64:0)+(r.mode===h?128:0)+(20===r.mode||15===r.mode?256:0),(0===x&&0===k||4===t)&&0===I&&(I=-5),I)},t.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?l:(r.head=t,t.done=!1,0):l},t.inflateSetDictionary=function(e,t){var r,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?l:11===r.mode&&n(1,t,i,0)!==r.check?-3:w(e,t,i,i)?(r.mode=31,-4):(r.havedict=1,0):l},t.inflateInfo=\"pako inflate (from Nodeca project)\"},6215:function(e,t,r){\"use strict\";var i=r(6296),n=15,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,h,u,c,d,f){var p,v,g,m,y,_,b,w,x,k=f.bits,C=0,A=0,S=0,E=0,z=0,M=0,T=0,L=0,D=0,O=0,I=null,F=0,R=new i.Buf16(16),P=new i.Buf16(16),N=null,B=0;for(C=0;C<=n;C++)R[C]=0;for(A=0;A<h;A++)R[t[r+A]]++;for(z=k,E=n;E>=1&&0===R[E];E--);if(z>E&&(z=E),0===E)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(S=1;S<E&&0===R[S];S++);for(z<S&&(z=S),L=1,C=1;C<=n;C++)if(L<<=1,(L-=R[C])<0)return-1;if(L>0&&(0===e||1!==E))return-1;for(P[1]=0,C=1;C<n;C++)P[C+1]=P[C]+R[C];for(A=0;A<h;A++)0!==t[r+A]&&(d[P[t[r+A]]++]=A);if(0===e?(I=N=d,_=19):1===e?(I=a,F-=257,N=o,B-=257,_=256):(I=s,N=l,_=-1),O=0,A=0,C=S,y=c,M=z,T=0,g=-1,m=(D=1<<z)-1,1===e&&D>852||2===e&&D>592)return 1;for(;;){b=C-T,d[A]<_?(w=0,x=d[A]):d[A]>_?(w=N[B+d[A]],x=I[F+d[A]]):(w=96,x=0),p=1<<C-T,S=v=1<<M;do{u[y+(O>>T)+(v-=p)]=b<<24|w<<16|x|0}while(0!==v);for(p=1<<C-1;O&p;)p>>=1;if(0!==p?(O&=p-1,O+=p):O=0,A++,0==--R[C]){if(C===E)break;C=t[r+d[A]]}if(C>z&&(O&m)!==g){for(0===T&&(T=z),y+=S,L=1<<(M=C-T);M+T<E&&!((L-=R[M+T])<=0);)M++,L<<=1;if(D+=1<<M,1===e&&D>852||2===e&&D>592)return 1;u[g=O&m]=z<<24|M<<16|y-c|0}}return 0!==O&&(u[y+O]=C-T<<24|64<<16|0),f.bits=z,0}},5795:function(e){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},5313:function(e,t,r){\"use strict\";var i=r(6296);function n(e){for(var t=e.length;--t>=0;)e[t]=0}var a=256,o=286,s=30,l=15,h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);n(f);var p=new Array(60);n(p);var v=new Array(512);n(v);var g=new Array(256);n(g);var m=new Array(29);n(m);var y,_,b,w=new Array(s);function x(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function C(e){return e<256?v[e]:v[256+(e>>>7)]}function A(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function S(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,A(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function E(e,t,r){S(e,r[2*t],r[2*t+1])}function z(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function M(e,t,r){var i,n,a=new Array(16),o=0;for(i=1;i<=l;i++)a[i]=o=o+r[i-1]<<1;for(n=0;n<=t;n++){var s=e[2*n+1];0!==s&&(e[2*n]=z(a[s]++,s))}}function T(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function L(e){e.bi_valid>8?A(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function D(e,t,r,i){var n=2*t,a=2*r;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[r]}function O(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&D(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!D(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function I(e,t,r){var i,n,o,s,l=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],n=e.pending_buf[e.l_buf+l],l++,0===i?E(e,n,t):(E(e,(o=g[n])+a+1,t),0!==(s=h[o])&&S(e,n-=m[o],s),E(e,o=C(--i),r),0!==(s=u[o])&&S(e,i-=w[o],s))}while(l<e.last_lit);E(e,256,t)}function F(e,t){var r,i,n,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,h=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<h;r++)0!==a[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(n=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=o[2*n+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)O(e,a,r);n=h;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],O(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,a[2*n]=a[2*r]+a[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,a[2*r+1]=a[2*i+1]=n,e.heap[1]=n++,O(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,i,n,a,o,s,h=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,v=t.stat_desc.max_length,g=0;for(a=0;a<=l;a++)e.bl_count[a]=0;for(h[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(a=h[2*h[2*(i=e.heap[r])+1]+1]+1)>v&&(a=v,g++),h[2*i+1]=a,i>u||(e.bl_count[a]++,o=0,i>=p&&(o=f[i-p]),s=h[2*i],e.opt_len+=s*(a+o),d&&(e.static_len+=s*(c[2*i+1]+o)));if(0!==g){do{for(a=v-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[v]--,g-=2}while(g>0);for(a=v;0!==a;a--)for(i=e.bl_count[a];0!==i;)(n=e.heap[--r])>u||(h[2*n+1]!==a&&(e.opt_len+=(a-h[2*n+1])*h[2*n],h[2*n+1]=a),i--)}}(e,t),M(a,u,e.bl_count)}function R(e,t,r){var i,n,a=-1,o=t[1],s=0,l=7,h=4;for(0===o&&(l=138,h=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=o,o=t[2*(i+1)+1],++s<l&&n===o||(s<h?e.bl_tree[2*n]+=s:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=n,0===o?(l=138,h=3):n===o?(l=6,h=3):(l=7,h=4))}function P(e,t,r){var i,n,a=-1,o=t[1],s=0,l=7,h=4;for(0===o&&(l=138,h=3),i=0;i<=r;i++)if(n=o,o=t[2*(i+1)+1],!(++s<l&&n===o)){if(s<h)do{E(e,n,e.bl_tree)}while(0!=--s);else 0!==n?(n!==a&&(E(e,n,e.bl_tree),s--),E(e,16,e.bl_tree),S(e,s-3,2)):s<=10?(E(e,17,e.bl_tree),S(e,s-3,3)):(E(e,18,e.bl_tree),S(e,s-11,7));s=0,a=n,0===o?(l=138,h=3):n===o?(l=6,h=3):(l=7,h=4)}}n(w);var N=!1;function B(e,t,r,n){S(e,0+(n?1:0),3),function(e,t,r,n){L(e),n&&(A(e,r),A(e,~r)),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}t._tr_init=function(e){N||(function(){var e,t,r,i,n,a=new Array(16);for(r=0,i=0;i<28;i++)for(m[i]=r,e=0;e<1<<h[i];e++)g[r++]=i;for(g[r-1]=i,n=0,i=0;i<16;i++)for(w[i]=n,e=0;e<1<<u[i];e++)v[n++]=i;for(n>>=7;i<s;i++)for(w[i]=n<<7,e=0;e<1<<u[i]-7;e++)v[256+n++]=i;for(t=0;t<=l;t++)a[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,a[8]++;for(;e<=255;)f[2*e+1]=9,e++,a[9]++;for(;e<=279;)f[2*e+1]=7,e++,a[7]++;for(;e<=287;)f[2*e+1]=8,e++,a[8]++;for(M(f,287,a),e=0;e<s;e++)p[2*e+1]=5,p[2*e]=z(e,5);y=new x(f,h,257,o,l),_=new x(p,u,0,s,l),b=new x(new Array(0),c,0,19,7)}(),N=!0),e.l_desc=new k(e.dyn_ltree,y),e.d_desc=new k(e.dyn_dtree,_),e.bl_desc=new k(e.bl_tree,b),e.bi_buf=0,e.bi_valid=0,T(e)},t._tr_stored_block=B,t._tr_flush_block=function(e,t,r,i){var n,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),F(e,e.l_desc),F(e,e.d_desc),s=function(e){var t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),F(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=n&&(n=o)):n=o=r+5,r+4<=n&&-1!==t?B(e,t,r,i):4===e.strategy||o===n?(S(e,2+(i?1:0),3),I(e,f,p)):(S(e,4+(i?1:0),3),function(e,t,r,i){var n;for(S(e,t-257,5),S(e,r-1,5),S(e,i-4,4),n=0;n<i;n++)S(e,e.bl_tree[2*d[n]+1],3);P(e,e.dyn_ltree,t-1),P(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),I(e,e.dyn_ltree,e.dyn_dtree)),T(e),i&&L(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(g[r]+a+1)]++,e.dyn_dtree[2*C(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){S(e,2,3),E(e,256,f),function(e){16===e.bi_valid?(A(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},6866:function(e){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},7882:function(){$3Dmol.workerString=function(){self.onmessage=function(e){var t=e.data,r=t.type;if(r<0)self.atomData=t.atoms,self.volume=t.volume,self.ps=new ProteinSurface;else{var i=self.ps;i.initparm(t.expandedExtent,1!=r,self.volume),i.fillvoxels(self.atomData,t.extendedAtoms),i.buildboundary(),4!==r&&2!==r||(i.fastdistancemap(),i.boundingatom(!1),i.fillvoxelswaals(self.atomData,t.extendedAtoms)),i.marchingcube(r);var n=i.getFacesAndVertices(t.atomsToShow);self.postMessage(n)}}}.toString().replace(/(^.*?\\{|\\}$)/g,\"\"),$3Dmol.workerString+=\";\\n\"+$3Dmol.Vector3.toString(),$3Dmol.workerString+=\";\\n\"+$3Dmol.MarchingCubeInitializer.toString()+\";\\nvar MarchingCube = new MarchingCubeInitializer();\",$3Dmol.workerString+=\";\\n\"+$3Dmol.PointGrid.toString()+\";\\n\",$3Dmol.workerString+=\";\\n\"+$3Dmol.ProteinSurface.toString()+\";\\n\",$3Dmol.workerString=$3Dmol.workerString.replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*WEBPACK_IMPORTED_MODULE_[0-9]__\\./g,\"\"),$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:\"text/javascript\"})):void 0},6279:function(e){\"object\"==_typeof(e.exports)&&(e.exports=window.$3Dmol)},7420:function(e,t){!function(e){\"use strict\";function t(e,t,r){for(var i=(e.byteLength,0),n=r.length;n>i;i++){var a=r.charCodeAt(i);if(128>a)e.setUint8(t++,a>>>0&127|0);else if(2048>a)e.setUint8(t++,a>>>6&31|192),e.setUint8(t++,a>>>0&63|128);else if(65536>a)e.setUint8(t++,a>>>12&15|224),e.setUint8(t++,a>>>6&63|128),e.setUint8(t++,a>>>0&63|128);else{if(!(1114112>a))throw new Error(\"bad codepoint \"+a);e.setUint8(t++,a>>>18&7|240),e.setUint8(t++,a>>>12&63|128),e.setUint8(t++,a>>>6&63|128),e.setUint8(t++,a>>>0&63|128)}}}function r(e){for(var t=0,r=0,i=e.length;i>r;r++){var n=e.charCodeAt(r);if(128>n)t+=1;else if(2048>n)t+=2;else if(65536>n)t+=3;else{if(!(1114112>n))throw new Error(\"bad codepoint \"+n);t+=4}}return t}function i(e,n,a){var o=_typeof(e);if(\"string\"===o){if(32>(s=r(e)))return n.setUint8(a,160|s),t(n,a+1,e),1+s;if(256>s)return n.setUint8(a,217),n.setUint8(a+1,s),t(n,a+2,e),2+s;if(65536>s)return n.setUint8(a,218),n.setUint16(a+1,s),t(n,a+3,e),3+s;if(4294967296>s)return n.setUint8(a,219),n.setUint32(a+1,s),t(n,a+5,e),5+s}if(e instanceof Uint8Array){var s=e.byteLength,l=new Uint8Array(n.buffer);if(256>s)return n.setUint8(a,196),n.setUint8(a+1,s),l.set(e,a+2),2+s;if(65536>s)return n.setUint8(a,197),n.setUint16(a+1,s),l.set(e,a+3),3+s;if(4294967296>s)return n.setUint8(a,198),n.setUint32(a+1,s),l.set(e,a+5),5+s}if(\"number\"===o){if(!isFinite(e))throw new Error(\"Number not finite: \"+e);if(Math.floor(e)!==e)return n.setUint8(a,203),n.setFloat64(a+1,e),9;if(e>=0){if(128>e)return n.setUint8(a,e),1;if(256>e)return n.setUint8(a,204),n.setUint8(a+1,e),2;if(65536>e)return n.setUint8(a,205),n.setUint16(a+1,e),3;if(4294967296>e)return n.setUint8(a,206),n.setUint32(a+1,e),5;throw new Error(\"Number too big 0x\"+e.toString(16))}if(e>=-32)return n.setInt8(a,e),1;if(e>=-128)return n.setUint8(a,208),n.setInt8(a+1,e),2;if(e>=-32768)return n.setUint8(a,209),n.setInt16(a+1,e),3;if(e>=-2147483648)return n.setUint8(a,210),n.setInt32(a+1,e),5;throw new Error(\"Number too small -0x\"+(-e).toString(16).substr(1))}if(null===e)return n.setUint8(a,192),1;if(\"boolean\"===o)return n.setUint8(a,e?195:194),1;if(\"object\"===o){var h=0,u=Array.isArray(e);if(u)s=e.length;else{var c=Object.keys(e);s=c.length}if(16>s?(n.setUint8(a,s|(u?144:128)),h=1):65536>s?(n.setUint8(a,u?220:222),n.setUint16(a+1,s),h=3):4294967296>s&&(n.setUint8(a,u?221:223),n.setUint32(a+1,s),h=5),u)for(var d=0;s>d;d++)h+=i(e[d],n,a+h);else for(d=0;s>d;d++){var f=c[d];h+=i(f,n,a+h),h+=i(e[f],n,a+h)}return h}throw new Error(\"Unknown type \"+o)}function n(e){var t=_typeof(e);if(\"string\"===t){if(32>(i=r(e)))return 1+i;if(256>i)return 2+i;if(65536>i)return 3+i;if(4294967296>i)return 5+i}if(e instanceof Uint8Array){if(256>(i=e.byteLength))return 2+i;if(65536>i)return 3+i;if(4294967296>i)return 5+i}if(\"number\"===t){if(Math.floor(e)!==e)return 9;if(e>=0){if(128>e)return 1;if(256>e)return 2;if(65536>e)return 3;if(4294967296>e)return 5;throw new Error(\"Number too big 0x\"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;throw new Error(\"Number too small -0x\"+e.toString(16).substr(1))}if(\"boolean\"===t||null===e)return 1;if(\"object\"===t){var i,a=0;if(Array.isArray(e)){i=e.length;for(var o=0;i>o;o++)a+=n(e[o])}else{var s=Object.keys(e);for(i=s.length,o=0;i>o;o++){var l=s[o];a+=n(l)+n(e[l])}}if(16>i)return 1+a;if(65536>i)return 3+a;if(4294967296>i)return 5+a;throw new Error(\"Array or object too long 0x\"+i.toString(16))}throw new Error(\"Unknown type \"+t)}function a(e){var t=new ArrayBuffer(n(e));return i(e,new DataView(t),0),new Uint8Array(t)}function o(e,t,r){return t?new e(t.buffer,t.byteOffset,t.byteLength/(r||1)):void 0}function s(e){return o(DataView,e)}function l(e){return o(Uint8Array,e)}function h(e){return o(Int8Array,e)}function u(e){return o(Int32Array,e,4)}function c(e){return o(Float32Array,e,4)}function d(e,t){var r=e.length/2;t||(t=new Int16Array(r));for(var i=0,n=0;r>i;++i,n+=2)t[i]=e[n]<<8^e[n+1]<<0;return t}function f(e,t){var r=e.length;t||(t=new Uint8Array(2*r));for(var i=s(t),n=0;r>n;++n)i.setInt16(2*n,e[n]);return l(t)}function p(e,t){var r=e.length/4;t||(t=new Int32Array(r));for(var i=0,n=0;r>i;++i,n+=4)t[i]=e[n]<<24^e[n+1]<<16^e[n+2]<<8^e[n+3]<<0;return t}function v(e,t){var r=e.length;t||(t=new Uint8Array(4*r));for(var i=s(t),n=0;r>n;++n)i.setInt32(4*n,e[n]);return l(t)}function g(e,t){var r=e.length;t||(t=new Float32Array(r/4));for(var i=s(t),n=s(e),a=0,o=0,l=r/4;l>a;++a,o+=4)i.setFloat32(o,n.getFloat32(o),!0);return t}function m(e,t,r){var i=e.length,n=1/t;r||(r=new Float32Array(i));for(var a=0;i>a;++a)r[a]=e[a]*n;return r}function y(e,t,r){var i=e.length;r||(r=new Int32Array(i));for(var n=0;i>n;++n)r[n]=Math.round(e[n]*t);return r}function _(e,t){var r,i;if(!t){var n=0;for(r=0,i=e.length;i>r;r+=2)n+=e[r+1];t=new e.constructor(n)}var a=0;for(r=0,i=e.length;i>r;r+=2)for(var o=e[r],s=e[r+1],l=0;s>l;++l)t[a]=o,++a;return t}function b(e){if(0===e.length)return new Int32Array;var t,r,i=2;for(t=1,r=e.length;r>t;++t)e[t-1]!==e[t]&&(i+=2);var n=new Int32Array(i),a=0,o=1;for(t=1,r=e.length;r>t;++t)e[t-1]!==e[t]?(n[a]=e[t-1],n[a+1]=o,o=1,a+=2):++o;return n[a]=e[e.length-1],n[a+1]=o,n}function w(e,t){var r=e.length;t||(t=new e.constructor(r)),r&&(t[0]=e[0]);for(var i=1;r>i;++i)t[i]=e[i]+t[i-1];return t}function x(e,t){var r=e.length;t||(t=new e.constructor(r)),t[0]=e[0];for(var i=1;r>i;++i)t[i]=e[i]-e[i-1];return t}function k(e,t){var r,i,n=e instanceof Int8Array?127:32767,a=-n-1,o=e.length;if(!t){var s=0;for(r=0;o>r;++r)e[r]<n&&e[r]>a&&++s;t=new Int32Array(s)}for(r=0,i=0;o>r;){for(var l=0;e[r]===n||e[r]===a;)l+=e[r],++r;l+=e[r],++r,t[i]=l,++i}return t}function C(e,t){var r,i=t?127:32767,n=-i-1,a=e.length,o=0;for(r=0;a>r;++r)0===(h=e[r])?++o:h>0?(o+=Math.ceil(h/i),h%i==0&&(o+=1)):(o+=Math.ceil(h/n),h%n==0&&(o+=1));var s=t?new Int8Array(o):new Int16Array(o),l=0;for(r=0;a>r;++r){var h;if((h=e[r])>=0)for(;h>=i;)s[l]=i,++l,h-=i;else for(;n>=h;)s[l]=n,++l,h-=n;s[l]=h,++l}return s}function A(e,t){return w(_(e),t)}function S(e){return b(x(e))}function E(e,t,r){return m(_(e,u(r)),t,r)}function z(e,t){return b(y(e,t))}function M(e,t,r){return m(w(e,u(r)),t,r)}function T(e,t,r){return x(y(e,t),r)}function L(e,t,r){return m(k(e,u(r)),t,r)}function D(e,t,r){var i=k(e,u(r));return M(i,t,c(i))}function O(e,t,r){return C(T(e,t),r)}function I(e){var t=s(e),r=t.getInt32(0),i=t.getInt32(4),n=e.subarray(8,12);return[r,e=e.subarray(12),i,n]}function F(e,t,r,i){var n=new ArrayBuffer(12+i.byteLength),a=new Uint8Array(n),o=new DataView(n);return o.setInt32(0,e),o.setInt32(4,t),r&&a.set(r,8),a.set(i,12),a}function R(e){return F(2,e.length,void 0,l(e))}function P(e){return F(4,e.length,void 0,v(e))}function N(e,t){return F(5,e.length/t,v([t]),l(e))}function B(e){return F(6,e.length,void 0,v(b(e)))}function U(e){return F(8,e.length,void 0,v(S(e)))}function G(e,t){return F(9,e.length,v([t]),v(z(e,t)))}function V(e,t){return F(10,e.length,v([t]),f(O(e,t)))}function j(e){var t={};return ee.forEach((function(r){void 0!==e[r]&&(t[r]=e[r])})),e.bondAtomList&&(t.bondAtomList=P(e.bondAtomList)),e.bondOrderList&&(t.bondOrderList=R(e.bondOrderList)),t.xCoordList=V(e.xCoordList,1e3),t.yCoordList=V(e.yCoordList,1e3),t.zCoordList=V(e.zCoordList,1e3),e.bFactorList&&(t.bFactorList=V(e.bFactorList,100)),e.atomIdList&&(t.atomIdList=U(e.atomIdList)),e.altLocList&&(t.altLocList=B(e.altLocList)),e.occupancyList&&(t.occupancyList=G(e.occupancyList,100)),t.groupIdList=U(e.groupIdList),t.groupTypeList=P(e.groupTypeList),e.secStructList&&(t.secStructList=R(e.secStructList)),e.insCodeList&&(t.insCodeList=B(e.insCodeList)),e.sequenceIndexList&&(t.sequenceIndexList=U(e.sequenceIndexList)),t.chainIdList=N(e.chainIdList,4),e.chainNameList&&(t.chainNameList=N(e.chainNameList,4)),t}function H(e){function t(e){for(var t={},r=0;e>r;r++)t[a()]=a();return t}function r(t){var r=e.subarray(o,o+t);return o+=t,r}function i(t){var r=e.subarray(o,o+t);o+=t;var i=65535;if(t>i){for(var n=[],a=0;a<r.length;a+=i)n.push(String.fromCharCode.apply(null,r.subarray(a,a+i)));return n.join(\"\")}return String.fromCharCode.apply(null,r)}function n(e){for(var t=new Array(e),r=0;e>r;r++)t[r]=a();return t}function a(){var a,l,h=e[o];if(0==(128&h))return o++,h;if(128==(240&h))return o++,t(l=15&h);if(144==(240&h))return o++,n(l=15&h);if(160==(224&h))return o++,i(l=31&h);if(224==(224&h))return a=s.getInt8(o),o++,a;switch(h){case 192:return o++,null;case 194:return o++,!1;case 195:return o++,!0;case 196:return l=s.getUint8(o+1),o+=2,r(l);case 197:return l=s.getUint16(o+1),o+=3,r(l);case 198:return l=s.getUint32(o+1),o+=5,r(l);case 202:return a=s.getFloat32(o+1),o+=5,a;case 203:return a=s.getFloat64(o+1),o+=9,a;case 204:return a=e[o+1],o+=2,a;case 205:return a=s.getUint16(o+1),o+=3,a;case 206:return a=s.getUint32(o+1),o+=5,a;case 208:return a=s.getInt8(o+1),o+=2,a;case 209:return a=s.getInt16(o+1),o+=3,a;case 210:return a=s.getInt32(o+1),o+=5,a;case 217:return l=s.getUint8(o+1),o+=2,i(l);case 218:return l=s.getUint16(o+1),o+=3,i(l);case 219:return l=s.getUint32(o+1),o+=5,i(l);case 220:return l=s.getUint16(o+1),o+=3,n(l);case 221:return l=s.getUint32(o+1),o+=5,n(l);case 222:return l=s.getUint16(o+1),o+=3,t(l);case 223:return l=s.getUint32(o+1),o+=5,t(l)}throw new Error(\"Unknown type 0x\"+h.toString(16))}var o=0,s=new DataView(e.buffer);return a()}function q(e,t,r,i){switch(e){case 1:return g(t);case 2:return h(t);case 3:return d(t);case 4:return p(t);case 5:return l(t);case 6:return _(p(t),new Uint8Array(r));case 7:return _(p(t));case 8:return A(p(t));case 9:return E(p(t),p(i)[0]);case 10:return D(d(t),p(i)[0]);case 11:return m(d(t),p(i)[0]);case 12:return L(d(t),p(i)[0]);case 13:return L(h(t),p(i)[0]);case 14:return k(d(t));case 15:return k(h(t))}}function W(e,t){var r=(t=t||{}).ignoreFields,i={};return re.forEach((function(t){var n=!!r&&-1!==r.indexOf(t),a=e[t];n||void 0===a||(a instanceof Uint8Array?i[t]=q.apply(null,I(a)):i[t]=a)})),i}function Y(e){return String.fromCharCode.apply(null,e).replace(/\\0/g,\"\")}function Z(e,t,r){var i,n,a,o,s,l,h=(r=r||{}).firstModelOnly,u=t.onModel,c=t.onChain,d=t.onGroup,f=t.onAtom,p=t.onBond,v=0,g=0,m=0,y=0,_=0,b=-1,w=e.chainNameList,x=e.secStructList,k=e.insCodeList,C=e.sequenceIndexList,A=e.atomIdList,S=e.bFactorList,E=e.altLocList,z=e.occupancyList,M=e.bondAtomList,T=e.bondOrderList;for(i=0,n=e.chainsPerModel.length;n>i&&!(h&&v>0);++i){var L=e.chainsPerModel[v];for(u&&u({chainCount:L,modelIndex:v}),a=0;L>a;++a){var D=e.groupsPerChain[g];if(c){var O=Y(e.chainIdList.subarray(4*g,4*g+4)),I=null;w&&(I=Y(w.subarray(4*g,4*g+4))),c({groupCount:D,chainIndex:g,modelIndex:v,chainId:O,chainName:I})}for(o=0;D>o;++o){var F=e.groupList[e.groupTypeList[m]],R=F.atomNameList.length;if(d){var P=null;x&&(P=x[m]);var N=null;e.insCodeList&&(N=String.fromCharCode(k[m]));var B=null;C&&(B=C[m]),d({atomCount:R,groupIndex:m,chainIndex:g,modelIndex:v,groupId:e.groupIdList[m],groupType:e.groupTypeList[m],groupName:F.groupName,singleLetterCode:F.singleLetterCode,chemCompType:F.chemCompType,secStruct:P,insCode:N,sequenceIndex:B})}for(s=0;R>s;++s){if(f){var U=null;A&&(U=A[y]);var G=null;S&&(G=S[y]);var V=null;E&&(V=String.fromCharCode(E[y]));var j=null;z&&(j=z[y]),f({atomIndex:y,groupIndex:m,chainIndex:g,modelIndex:v,atomId:U,element:F.elementList[s],atomName:F.atomNameList[s],formalCharge:F.formalChargeList[s],xCoord:e.xCoordList[y],yCoord:e.yCoordList[y],zCoord:e.zCoordList[y],bFactor:G,altLoc:V,occupancy:j})}y+=1}if(p){var H=F.bondAtomList;for(s=0,l=F.bondOrderList.length;l>s;++s)p({atomIndex1:y-R+H[2*s],atomIndex2:y-R+H[2*s+1],bondOrder:F.bondOrderList[s]})}m+=1}g+=1}if(_=b+1,b=y-1,p&&M)for(s=0,l=M.length;l>s;s+=2){var q=M[s],W=M[s+1];(q>=_&&b>=q||W>=_&&b>=W)&&p({atomIndex1:q,atomIndex2:W,bondOrder:T?T[s/2]:null})}v+=1}}function X(e){return a(j(e))}function K(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),W(e instanceof Uint8Array?H(e):e,t)}function $(e,t,r,i){function n(){try{var e=K(a.response);r(e)}catch(e){i(e)}}var a=new XMLHttpRequest;a.addEventListener(\"load\",n,!0),a.addEventListener(\"error\",i,!0),a.responseType=\"arraybuffer\",a.open(\"GET\",t+e.toUpperCase()),a.send()}function Q(e,t,r){$(e,ae,t,r)}function J(e,t,r){$(e,oe,t,r)}var ee=[\"mmtfVersion\",\"mmtfProducer\",\"unitCell\",\"spaceGroup\",\"structureId\",\"title\",\"depositionDate\",\"releaseDate\",\"experimentalMethods\",\"resolution\",\"rFree\",\"rWork\",\"bioAssemblyList\",\"ncsOperatorList\",\"entityList\",\"groupList\",\"numBonds\",\"numAtoms\",\"numGroups\",\"numChains\",\"numModels\",\"groupsPerChain\",\"chainsPerModel\"],te=[\"xCoordList\",\"yCoordList\",\"zCoordList\",\"groupIdList\",\"groupTypeList\",\"chainIdList\",\"bFactorList\",\"atomIdList\",\"altLocList\",\"occupancyList\",\"secStructList\",\"insCodeList\",\"sequenceIndexList\",\"chainNameList\",\"bondAtomList\",\"bondOrderList\"],re=ee.concat(te),ie=\"v1.0.1\",ne=\"//mmtf.rcsb.org/v1.0/\",ae=ne+\"full/\",oe=ne+\"reduced/\";e.encode=X,e.decode=K,e.traverse=Z,e.fetch=Q,e.fetchReduced=J,e.version=ie,e.fetchUrl=ae,e.fetchReducedUrl=oe,e.encodeMsgpack=a,e.encodeMmtf=j,e.decodeMsgpack=H,e.decodeMmtf=W}(t)},7885:function(e,t,r){\"use strict\";function i(e){for(var t=e.length;--t>=0;)e[t]=0}r.r(t),r.d(t,{Deflate:function(){return br},Inflate:function(){return Cr},constants:function(){return zr},default:function(){return Mr},deflate:function(){return wr},deflateRaw:function(){return xr},gzip:function(){return kr},inflate:function(){return Ar},inflateRaw:function(){return Sr},ungzip:function(){return Er}});var n=256,a=286,o=30,s=15,l=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),h=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576);i(d);var f=new Array(60);i(f);var p=new Array(512);i(p);var v=new Array(256);i(v);var g=new Array(29);i(g);var m,y,_,b=new Array(o);function w(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function x(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}i(b);var k=function(e){return e<256?p[e]:p[256+(e>>>7)]},C=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},A=function(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,C(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},S=function(e,t,r){A(e,r[2*t],r[2*t+1])},E=function(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},z=function(e,t,r){var i,n,a=new Array(16),o=0;for(i=1;i<=s;i++)o=o+r[i-1]<<1,a[i]=o;for(n=0;n<=t;n++){var l=e[2*n+1];0!==l&&(e[2*n]=E(a[l]++,l))}},M=function(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},T=function(e){e.bi_valid>8?C(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},L=function(e,t,r,i){var n=2*t,a=2*r;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[r]},D=function(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&L(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!L(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i},O=function(e,t,r){var i,a,o,s,u=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+u++],i+=(255&e.pending_buf[e.sym_buf+u++])<<8,a=e.pending_buf[e.sym_buf+u++],0===i?S(e,a,t):(o=v[a],S(e,o+n+1,t),s=l[o],0!==s&&(a-=g[o],A(e,a,s)),i--,o=k(i),S(e,o,r),s=h[o],0!==s&&(i-=b[o],A(e,i,s)))}while(u<e.sym_next);S(e,256,t)},I=function(e,t){var r,i,n,a=t.dyn_tree,o=t.stat_desc.static_tree,l=t.stat_desc.has_stree,h=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<h;r++)0!==a[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)n=e.heap[++e.heap_len]=u<2?++u:0,a[2*n]=1,e.depth[n]=0,e.opt_len--,l&&(e.static_len-=o[2*n+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)D(e,a,r);n=h;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,a[2*n]=a[2*r]+a[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,a[2*r+1]=a[2*i+1]=n,e.heap[1]=n++,D(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,i,n,a,o,l,h=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,v=t.stat_desc.max_length,g=0;for(a=0;a<=s;a++)e.bl_count[a]=0;for(h[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)i=e.heap[r],a=h[2*h[2*i+1]+1]+1,a>v&&(a=v,g++),h[2*i+1]=a,i>u||(e.bl_count[a]++,o=0,i>=p&&(o=f[i-p]),l=h[2*i],e.opt_len+=l*(a+o),d&&(e.static_len+=l*(c[2*i+1]+o)));if(0!==g){do{for(a=v-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[v]--,g-=2}while(g>0);for(a=v;0!==a;a--)for(i=e.bl_count[a];0!==i;)n=e.heap[--r],n>u||(h[2*n+1]!==a&&(e.opt_len+=(a-h[2*n+1])*h[2*n],h[2*n+1]=a),i--)}}(e,t),z(a,u,e.bl_count)},F=function(e,t,r){var i,n,a=-1,o=t[1],s=0,l=7,h=4;for(0===o&&(l=138,h=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=o,o=t[2*(i+1)+1],++s<l&&n===o||(s<h?e.bl_tree[2*n]+=s:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=n,0===o?(l=138,h=3):n===o?(l=6,h=3):(l=7,h=4))},R=function(e,t,r){var i,n,a=-1,o=t[1],s=0,l=7,h=4;for(0===o&&(l=138,h=3),i=0;i<=r;i++)if(n=o,o=t[2*(i+1)+1],!(++s<l&&n===o)){if(s<h)do{S(e,n,e.bl_tree)}while(0!=--s);else 0!==n?(n!==a&&(S(e,n,e.bl_tree),s--),S(e,16,e.bl_tree),A(e,s-3,2)):s<=10?(S(e,17,e.bl_tree),A(e,s-3,3)):(S(e,18,e.bl_tree),A(e,s-11,7));s=0,a=n,0===o?(l=138,h=3):n===o?(l=6,h=3):(l=7,h=4)}},P=!1,N=function(e,t,r,i){A(e,0+(i?1:0),3),T(e),C(e,r),C(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},B=function(e,t,r,i){var a,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<n;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),I(e,e.l_desc),I(e,e.d_desc),s=function(e){var t;for(F(e,e.dyn_ltree,e.l_desc.max_code),F(e,e.dyn_dtree,e.d_desc.max_code),I(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=a&&(a=o)):a=o=r+5,r+4<=a&&-1!==t?N(e,t,r,i):4===e.strategy||o===a?(A(e,2+(i?1:0),3),O(e,d,f)):(A(e,4+(i?1:0),3),function(e,t,r,i){var n;for(A(e,t-257,5),A(e,r-1,5),A(e,i-4,4),n=0;n<i;n++)A(e,e.bl_tree[2*c[n]+1],3);R(e,e.dyn_ltree,t-1),R(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),O(e,e.dyn_ltree,e.dyn_dtree)),M(e),i&&T(e)},U={_tr_init:function(e){P||(function(){var e,t,r,i,n,c=new Array(16);for(r=0,i=0;i<28;i++)for(g[i]=r,e=0;e<1<<l[i];e++)v[r++]=i;for(v[r-1]=i,n=0,i=0;i<16;i++)for(b[i]=n,e=0;e<1<<h[i];e++)p[n++]=i;for(n>>=7;i<o;i++)for(b[i]=n<<7,e=0;e<1<<h[i]-7;e++)p[256+n++]=i;for(t=0;t<=s;t++)c[t]=0;for(e=0;e<=143;)d[2*e+1]=8,e++,c[8]++;for(;e<=255;)d[2*e+1]=9,e++,c[9]++;for(;e<=279;)d[2*e+1]=7,e++,c[7]++;for(;e<=287;)d[2*e+1]=8,e++,c[8]++;for(z(d,287,c),e=0;e<o;e++)f[2*e+1]=5,f[2*e]=E(e,5);m=new w(d,l,257,a,s),y=new w(f,h,0,o,s),_=new w(new Array(0),u,0,19,7)}(),P=!0),e.l_desc=new x(e.dyn_ltree,m),e.d_desc=new x(e.dyn_dtree,y),e.bl_desc=new x(e.bl_tree,_),e.bi_buf=0,e.bi_valid=0,M(e)},_tr_stored_block:N,_tr_flush_block:B,_tr_tally:function(e,t,r){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(v[r]+n+1)]++,e.dyn_dtree[2*k(t)]++),e.sym_next===e.sym_end},_tr_align:function(e){A(e,2,3),S(e,256,d),function(e){16===e.bi_valid?(C(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},G=function(e,t,r,i){for(var n=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){o=r>2e3?2e3:r,r-=o;do{n=n+t[i++]|0,a=a+n|0}while(--o);n%=65521,a%=65521}return n|a<<16|0},V=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}()),j=function(e,t,r,i){var n=V,a=i+r;e^=-1;for(var o=i;o<a;o++)e=e>>>8^n[255&(e^t[o])];return-1^e},H={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"},q={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},W=U._tr_init,Y=U._tr_stored_block,Z=U._tr_flush_block,X=U._tr_tally,K=U._tr_align,$=q.Z_NO_FLUSH,Q=q.Z_PARTIAL_FLUSH,J=q.Z_FULL_FLUSH,ee=q.Z_FINISH,te=q.Z_BLOCK,re=q.Z_OK,ie=q.Z_STREAM_END,ne=q.Z_STREAM_ERROR,ae=q.Z_DATA_ERROR,oe=q.Z_BUF_ERROR,se=q.Z_DEFAULT_COMPRESSION,le=q.Z_FILTERED,he=q.Z_HUFFMAN_ONLY,ue=q.Z_RLE,ce=q.Z_FIXED,de=q.Z_DEFAULT_STRATEGY,fe=q.Z_UNKNOWN,pe=q.Z_DEFLATED,ve=258,ge=262,me=42,ye=113,_e=666,be=function(e,t){return e.msg=H[t],t},we=function(e){return 2*e-(e>4?9:0)},xe=function(e){for(var t=e.length;--t>=0;)e[t]=0},ke=function(e){var t,r,i,n=e.w_size;t=e.hash_size,i=t;do{r=e.head[--i],e.head[i]=r>=n?r-n:0}while(--t);t=n,i=t;do{r=e.prev[--i],e.prev[i]=r>=n?r-n:0}while(--t)},Ce=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},Ae=function(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},Se=function(e,t){Z(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ae(e.strm)},Ee=function(e,t){e.pending_buf[e.pending++]=t},ze=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Me=function(e,t,r,i){var n=e.avail_in;return n>i&&(n=i),0===n?0:(e.avail_in-=n,t.set(e.input.subarray(e.next_in,e.next_in+n),r),1===e.state.wrap?e.adler=G(e.adler,t,n,r):2===e.state.wrap&&(e.adler=j(e.adler,t,n,r)),e.next_in+=n,e.total_in+=n,n)},Te=function(e,t){var r,i,n=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ge?e.strstart-(e.w_size-ge):0,h=e.window,u=e.w_mask,c=e.prev,d=e.strstart+ve,f=h[a+o-1],p=h[a+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,h[r+o]===p&&h[r+o-1]===f&&h[r]===h[a]&&h[++r]===h[a+1]){a+=2,r++;do{}while(h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&a<d);if(i=ve-(d-a),a=d-ve,i>o){if(e.match_start=t,o=i,i>=s)break;f=h[a+o-1],p=h[a+o]}}}while((t=c[t&u])>l&&0!=--n);return o<=e.lookahead?o:e.lookahead},Le=function(e){var t,r,i,n=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-ge)&&(e.window.set(e.window.subarray(n,n+n-r),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),ke(e),r+=n),0===e.strm.avail_in)break;if(t=Me(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ce(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Ce(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ge&&0!==e.strm.avail_in)},De=function(e,t){var r,i,n,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(r=65535,n=e.bi_valid+42>>3,e.strm.avail_out<n)break;if(n=e.strm.avail_out-n,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>n&&(r=n),r<a&&(0===r&&t!==ee||t===$||r!==i+e.strm.avail_in))break;o=t===ee&&r===i+e.strm.avail_in?1:0,Y(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Ae(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(Me(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==$&&t!==ee&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(n=e.window_size-e.strstart,e.strm.avail_in>n&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,n+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),n>e.strm.avail_in&&(n=e.strm.avail_in),n&&(Me(e.strm,e.window,e.strstart,n),e.strstart+=n,e.insert+=n>e.w_size-e.insert?e.w_size-e.insert:n),e.high_water<e.strstart&&(e.high_water=e.strstart),n=e.bi_valid+42>>3,n=e.pending_buf_size-n>65535?65535:e.pending_buf_size-n,a=n>e.w_size?e.w_size:n,i=e.strstart-e.block_start,(i>=a||(i||t===ee)&&t!==$&&0===e.strm.avail_in&&i<=n)&&(r=i>n?n:i,o=t===ee&&0===e.strm.avail_in&&r===i?1:0,Y(e,e.block_start,r,o),e.block_start+=r,Ae(e.strm)),o?3:1)},Oe=function(e,t){for(var r,i;;){if(e.lookahead<ge){if(Le(e),e.lookahead<ge&&t===$)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ge&&(e.match_length=Te(e,r)),e.match_length>=3)if(i=X(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+1]);else i=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Se(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ee?(Se(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Se(e,!1),0===e.strm.avail_out)?1:2},Ie=function(e,t){for(var r,i,n;;){if(e.lookahead<ge){if(Le(e),e.lookahead<ge&&t===$)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ge&&(e.match_length=Te(e,r),e.match_length<=5&&(e.strategy===le||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,i=X(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(Se(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=X(e,0,e.window[e.strstart-1]),i&&Se(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=X(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ee?(Se(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Se(e,!1),0===e.strm.avail_out)?1:2};function Fe(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}var Re=[new Fe(0,0,0,0,De),new Fe(4,4,8,4,Oe),new Fe(4,5,16,8,Oe),new Fe(4,6,32,32,Oe),new Fe(4,4,16,16,Ie),new Fe(8,16,32,32,Ie),new Fe(8,16,128,128,Ie),new Fe(8,32,128,256,Ie),new Fe(32,128,258,1024,Ie),new Fe(32,258,258,4096,Ie)];function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),xe(this.dyn_ltree),xe(this.dyn_dtree),xe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),xe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),xe(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ne=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==me&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==ye&&t.status!==_e?1:0},Be=function(e){if(Ne(e))return be(e,ne);e.total_in=e.total_out=0,e.data_type=fe;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?me:ye,e.adler=2===t.wrap?0:1,t.last_flush=-2,W(t),re},Ue=function(e){var t,r=Be(e);return r===re&&((t=e.state).window_size=2*t.w_size,xe(t.head),t.max_lazy_match=Re[t.level].max_lazy,t.good_match=Re[t.level].good_length,t.nice_match=Re[t.level].nice_length,t.max_chain_length=Re[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r},Ge=function(e,t,r,i,n,a){if(!e)return ne;var o=1;if(t===se&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),n<1||n>9||r!==pe||i<8||i>15||t<0||t>9||a<0||a>ce||8===i&&1!==o)return be(e,ne);8===i&&(i=9);var s=new Pe;return e.state=s,s.strm=e,s.status=me,s.wrap=o,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=n+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<n+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=r,Ue(e)},Ve={deflateInit:function(e,t){return Ge(e,t,pe,15,8,de)},deflateInit2:Ge,deflateReset:Ue,deflateResetKeep:Be,deflateSetHeader:function(e,t){return Ne(e)||2!==e.state.wrap?ne:(e.state.gzhead=t,re)},deflate:function(e,t){if(Ne(e)||t>te||t<0)return e?be(e,ne):ne;var r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===_e&&t!==ee)return be(e,0===e.avail_out?oe:ne);var i=r.last_flush;if(r.last_flush=t,0!==r.pending){if(Ae(e),0===e.avail_out)return r.last_flush=-1,re}else if(0===e.avail_in&&we(t)<=we(i)&&t!==ee)return be(e,oe);if(r.status===_e&&0!==e.avail_in)return be(e,oe);if(r.status===me&&0===r.wrap&&(r.status=ye),r.status===me){var n=pe+(r.w_bits-8<<4)<<8,a=-1;if(a=r.strategy>=he||r.level<2?0:r.level<6?1:6===r.level?2:3,n|=a<<6,0!==r.strstart&&(n|=32),n+=31-n%31,ze(r,n),0!==r.strstart&&(ze(r,e.adler>>>16),ze(r,65535&e.adler)),e.adler=1,r.status=ye,Ae(e),0!==r.pending)return r.last_flush=-1,re}if(57===r.status)if(e.adler=0,Ee(r,31),Ee(r,139),Ee(r,8),r.gzhead)Ee(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ee(r,255&r.gzhead.time),Ee(r,r.gzhead.time>>8&255),Ee(r,r.gzhead.time>>16&255),Ee(r,r.gzhead.time>>24&255),Ee(r,9===r.level?2:r.strategy>=he||r.level<2?4:0),Ee(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Ee(r,255&r.gzhead.extra.length),Ee(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=j(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Ee(r,0),Ee(r,0),Ee(r,0),Ee(r,0),Ee(r,0),Ee(r,9===r.level?2:r.strategy>=he||r.level<2?4:0),Ee(r,3),r.status=ye,Ae(e),0!==r.pending)return r.last_flush=-1,re;if(69===r.status){if(r.gzhead.extra){for(var o=r.pending,s=(65535&r.gzhead.extra.length)-r.gzindex;r.pending+s>r.pending_buf_size;){var l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>o&&(e.adler=j(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex+=l,Ae(e),0!==r.pending)return r.last_flush=-1,re;o=0,s-=l}var h=new Uint8Array(r.gzhead.extra);r.pending_buf.set(h.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending+=s,r.gzhead.hcrc&&r.pending>o&&(e.adler=j(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){var u,c=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>c&&(e.adler=j(e.adler,r.pending_buf,r.pending-c,c)),Ae(e),0!==r.pending)return r.last_flush=-1,re;c=0}u=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Ee(r,u)}while(0!==u);r.gzhead.hcrc&&r.pending>c&&(e.adler=j(e.adler,r.pending_buf,r.pending-c,c)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){var d,f=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>f&&(e.adler=j(e.adler,r.pending_buf,r.pending-f,f)),Ae(e),0!==r.pending)return r.last_flush=-1,re;f=0}d=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Ee(r,d)}while(0!==d);r.gzhead.hcrc&&r.pending>f&&(e.adler=j(e.adler,r.pending_buf,r.pending-f,f))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Ae(e),0!==r.pending))return r.last_flush=-1,re;Ee(r,255&e.adler),Ee(r,e.adler>>8&255),e.adler=0}if(r.status=ye,Ae(e),0!==r.pending)return r.last_flush=-1,re}if(0!==e.avail_in||0!==r.lookahead||t!==$&&r.status!==_e){var p=0===r.level?De(r,t):r.strategy===he?function(e,t){for(var r;;){if(0===e.lookahead&&(Le(e),0===e.lookahead)){if(t===$)return 1;break}if(e.match_length=0,r=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Se(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Se(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Se(e,!1),0===e.strm.avail_out)?1:2}(r,t):r.strategy===ue?function(e,t){for(var r,i,n,a,o=e.window;;){if(e.lookahead<=ve){if(Le(e),e.lookahead<=ve&&t===$)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=e.strstart-1,i=o[n],i===o[++n]&&i===o[++n]&&i===o[++n])){a=e.strstart+ve;do{}while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<a);e.match_length=ve-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=X(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Se(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Se(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Se(e,!1),0===e.strm.avail_out)?1:2}(r,t):Re[r.level].func(r,t);if(3!==p&&4!==p||(r.status=_e),1===p||3===p)return 0===e.avail_out&&(r.last_flush=-1),re;if(2===p&&(t===Q?K(r):t!==te&&(Y(r,0,0,!1),t===J&&(xe(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Ae(e),0===e.avail_out))return r.last_flush=-1,re}return t!==ee?re:r.wrap<=0?ie:(2===r.wrap?(Ee(r,255&e.adler),Ee(r,e.adler>>8&255),Ee(r,e.adler>>16&255),Ee(r,e.adler>>24&255),Ee(r,255&e.total_in),Ee(r,e.total_in>>8&255),Ee(r,e.total_in>>16&255),Ee(r,e.total_in>>24&255)):(ze(r,e.adler>>>16),ze(r,65535&e.adler)),Ae(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?re:ie)},deflateEnd:function(e){if(Ne(e))return ne;var t=e.state.status;return e.state=null,t===ye?be(e,ae):re},deflateSetDictionary:function(e,t){var r=t.length;if(Ne(e))return ne;var i=e.state,n=i.wrap;if(2===n||1===n&&i.status!==me||i.lookahead)return ne;if(1===n&&(e.adler=G(e.adler,t,r,0)),i.wrap=0,r>=i.w_size){0===n&&(xe(i.head),i.strstart=0,i.block_start=0,i.insert=0);var a=new Uint8Array(i.w_size);a.set(t.subarray(r-i.w_size,r),0),t=a,r=i.w_size}var o=e.avail_in,s=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Le(i);i.lookahead>=3;){var h=i.strstart,u=i.lookahead-2;do{i.ins_h=Ce(i,i.ins_h,i.window[h+3-1]),i.prev[h&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=h,h++}while(--u);i.strstart=h,i.lookahead=2,Le(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=s,e.input=l,e.avail_in=o,i.wrap=n,re},deflateInfo:\"pako deflate (from Nodeca project)\"},je=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},He=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if(\"object\"!=_typeof(r))throw new TypeError(r+\"must be non-object\");for(var i in r)je(r,i)&&(e[i]=r[i])}}return e},qe=function(e){for(var t=0,r=0,i=e.length;r<i;r++)t+=e[r].length;for(var n=new Uint8Array(t),a=0,o=0,s=e.length;a<s;a++){var l=e[a];n.set(l,o),o+=l.length}return n},We=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){We=!1}for(var Ye=new Uint8Array(256),Ze=0;Ze<256;Ze++)Ye[Ze]=Ze>=252?6:Ze>=248?5:Ze>=240?4:Ze>=224?3:Ze>=192?2:1;Ye[254]=Ye[254]=1;var Xe=function(e){if(\"function\"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,i,n,a,o=e.length,s=0;for(n=0;n<o;n++)r=e.charCodeAt(n),55296==(64512&r)&&n+1<o&&(i=e.charCodeAt(n+1),56320==(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),n++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,n=0;a<s;n++)r=e.charCodeAt(n),55296==(64512&r)&&n+1<o&&(i=e.charCodeAt(n+1),56320==(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},Ke=function(e,t){var r,i,n=t||e.length;if(\"function\"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var a=new Array(2*n);for(i=0,r=0;r<n;){var o=e[r++];if(o<128)a[i++]=o;else{var s=Ye[o];if(s>4)a[i++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<n;)o=o<<6|63&e[r++],s--;s>1?a[i++]=65533:o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&We)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r=\"\",i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r}(a,i)},$e=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+Ye[e[r]]>t?r:t},Qe=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0},Je=Object.prototype.toString,et=q.Z_NO_FLUSH,tt=q.Z_SYNC_FLUSH,rt=q.Z_FULL_FLUSH,it=q.Z_FINISH,nt=q.Z_OK,at=q.Z_STREAM_END,ot=q.Z_DEFAULT_COMPRESSION,st=q.Z_DEFAULT_STRATEGY,lt=q.Z_DEFLATED;function ht(e){this.options=He({level:ot,method:lt,chunkSize:16384,windowBits:15,memLevel:8,strategy:st},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new Qe,this.strm.avail_out=0;var r=Ve.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==nt)throw new Error(H[r]);if(t.header&&Ve.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i=\"string\"==typeof t.dictionary?Xe(t.dictionary):\"[object ArrayBuffer]\"===Je.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=Ve.deflateSetDictionary(this.strm,i),r!==nt)throw new Error(H[r]);this._dict_set=!0}}function ut(e,t){var r=new ht(t);if(r.push(e,!0),r.err)throw r.msg||H[r.err];return r.result}ht.prototype.push=function(e,t){var r,i,n=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(i=t===~~t?t:!0===t?it:et,\"string\"==typeof e?n.input=Xe(e):\"[object ArrayBuffer]\"===Je.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),(i===tt||i===rt)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Ve.deflate(n,i),r===at)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Ve.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===nt;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ht.prototype.onData=function(e){this.chunks.push(e)},ht.prototype.onEnd=function(e){e===nt&&(this.result=qe(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ct={Deflate:ht,deflate:ut,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ut(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ut(e,t)},constants:q},dt=16209,ft=function(e,t){var r,i,n,a,o,s,l,h,u,c,d,f,p,v,g,m,y,_,b,w,x,k,C,A,S=e.state;r=e.next_in,C=e.input,i=r+(e.avail_in-5),n=e.next_out,A=e.output,a=n-(t-e.avail_out),o=n+(e.avail_out-257),s=S.dmax,l=S.wsize,h=S.whave,u=S.wnext,c=S.window,d=S.hold,f=S.bits,p=S.lencode,v=S.distcode,g=(1<<S.lenbits)-1,m=(1<<S.distbits)-1;e:do{f<15&&(d+=C[r++]<<f,f+=8,d+=C[r++]<<f,f+=8),y=p[d&g];t:for(;;){if(_=y>>>24,d>>>=_,f-=_,_=y>>>16&255,0===_)A[n++]=65535&y;else{if(!(16&_)){if(0==(64&_)){y=p[(65535&y)+(d&(1<<_)-1)];continue t}if(32&_){S.mode=16191;break e}e.msg=\"invalid literal/length code\",S.mode=dt;break e}b=65535&y,_&=15,_&&(f<_&&(d+=C[r++]<<f,f+=8),b+=d&(1<<_)-1,d>>>=_,f-=_),f<15&&(d+=C[r++]<<f,f+=8,d+=C[r++]<<f,f+=8),y=v[d&m];r:for(;;){if(_=y>>>24,d>>>=_,f-=_,_=y>>>16&255,!(16&_)){if(0==(64&_)){y=v[(65535&y)+(d&(1<<_)-1)];continue r}e.msg=\"invalid distance code\",S.mode=dt;break e}if(w=65535&y,_&=15,f<_&&(d+=C[r++]<<f,f+=8,f<_&&(d+=C[r++]<<f,f+=8)),w+=d&(1<<_)-1,w>s){e.msg=\"invalid distance too far back\",S.mode=dt;break e}if(d>>>=_,f-=_,_=n-a,w>_){if(_=w-_,_>h&&S.sane){e.msg=\"invalid distance too far back\",S.mode=dt;break e}if(x=0,k=c,0===u){if(x+=l-_,_<b){b-=_;do{A[n++]=c[x++]}while(--_);x=n-w,k=A}}else if(u<_){if(x+=l+u-_,_-=u,_<b){b-=_;do{A[n++]=c[x++]}while(--_);if(x=0,u<b){_=u,b-=_;do{A[n++]=c[x++]}while(--_);x=n-w,k=A}}}else if(x+=u-_,_<b){b-=_;do{A[n++]=c[x++]}while(--_);x=n-w,k=A}for(;b>2;)A[n++]=k[x++],A[n++]=k[x++],A[n++]=k[x++],b-=3;b&&(A[n++]=k[x++],b>1&&(A[n++]=k[x++]))}else{x=n-w;do{A[n++]=A[x++],A[n++]=A[x++],A[n++]=A[x++],b-=3}while(b>2);b&&(A[n++]=A[x++],b>1&&(A[n++]=A[x++]))}break}}break}}while(r<i&&n<o);b=f>>3,r-=b,f-=b<<3,d&=(1<<f)-1,e.next_in=r,e.next_out=n,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=n<o?o-n+257:257-(n-o),S.hold=d,S.bits=f},pt=15,vt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),_t=function(e,t,r,i,n,a,o,s){var l,h,u,c,d,f,p,v,g,m=s.bits,y=0,_=0,b=0,w=0,x=0,k=0,C=0,A=0,S=0,E=0,z=null,M=new Uint16Array(16),T=new Uint16Array(16),L=null;for(y=0;y<=pt;y++)M[y]=0;for(_=0;_<i;_++)M[t[r+_]]++;for(x=m,w=pt;w>=1&&0===M[w];w--);if(x>w&&(x=w),0===w)return n[a++]=20971520,n[a++]=20971520,s.bits=1,0;for(b=1;b<w&&0===M[b];b++);for(x<b&&(x=b),A=1,y=1;y<=pt;y++)if(A<<=1,A-=M[y],A<0)return-1;if(A>0&&(0===e||1!==w))return-1;for(T[1]=0,y=1;y<pt;y++)T[y+1]=T[y]+M[y];for(_=0;_<i;_++)0!==t[r+_]&&(o[T[t[r+_]]++]=_);if(0===e?(z=L=o,f=20):1===e?(z=vt,L=gt,f=257):(z=mt,L=yt,f=0),E=0,_=0,y=b,d=a,k=x,C=0,u=-1,S=1<<x,c=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){p=y-C,o[_]+1<f?(v=0,g=o[_]):o[_]>=f?(v=L[o[_]-f],g=z[o[_]-f]):(v=96,g=0),l=1<<y-C,h=1<<k,b=h;do{h-=l,n[d+(E>>C)+h]=p<<24|v<<16|g|0}while(0!==h);for(l=1<<y-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,_++,0==--M[y]){if(y===w)break;y=t[r+o[_]]}if(y>x&&(E&c)!==u){for(0===C&&(C=x),d+=b,k=y-C,A=1<<k;k+C<w&&(A-=M[k+C],!(A<=0));)k++,A<<=1;if(S+=1<<k,1===e&&S>852||2===e&&S>592)return 1;u=E&c,n[u]=x<<24|k<<16|d-a|0}}return 0!==E&&(n[d+E]=y-C<<24|64<<16|0),s.bits=x,0},bt=q.Z_FINISH,wt=q.Z_BLOCK,xt=q.Z_TREES,kt=q.Z_OK,Ct=q.Z_STREAM_END,At=q.Z_NEED_DICT,St=q.Z_STREAM_ERROR,Et=q.Z_DATA_ERROR,zt=q.Z_MEM_ERROR,Mt=q.Z_BUF_ERROR,Tt=q.Z_DEFLATED,Lt=16180,Dt=16190,Ot=16191,It=16192,Ft=16194,Rt=16199,Pt=16200,Nt=16206,Bt=16209,Ut=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function Gt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Vt,jt,Ht=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<Lt||t.mode>16211?1:0},qt=function(e){if(Ht(e))return St;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=Lt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,kt},Wt=function(e){if(Ht(e))return St;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,qt(e)},Yt=function(e,t){var r;if(Ht(e))return St;var i=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?St:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,Wt(e))},Zt=function(e,t){if(!e)return St;var r=new Gt;e.state=r,r.strm=e,r.window=null,r.mode=Lt;var i=Yt(e,t);return i!==kt&&(e.state=null),i},Xt=!0,Kt=function(e){if(Xt){Vt=new Int32Array(512),jt=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(_t(1,e.lens,0,288,Vt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;_t(2,e.lens,0,32,jt,0,e.work,{bits:5}),Xt=!1}e.lencode=Vt,e.lenbits=9,e.distcode=jt,e.distbits=5},$t=function(e,t,r,i){var n,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),a.window.set(t.subarray(r-i,r-i+n),a.wnext),(i-=n)?(a.window.set(t.subarray(r-i,r),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0},Qt={inflateReset:Wt,inflateReset2:Yt,inflateResetKeep:qt,inflateInit:function(e){return Zt(e,15)},inflateInit2:Zt,inflate:function(e,t){var r,i,n,a,o,s,l,h,u,c,d,f,p,v,g,m,y,_,b,w,x,k,C,A,S=0,E=new Uint8Array(4),z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ht(e)||!e.output||!e.input&&0!==e.avail_in)return St;r=e.state,r.mode===Ot&&(r.mode=It),o=e.next_out,n=e.output,l=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,h=r.hold,u=r.bits,c=s,d=l,k=kt;e:for(;;)switch(r.mode){case Lt:if(0===r.wrap){r.mode=It;break}for(;u<16;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(2&r.wrap&&35615===h){0===r.wbits&&(r.wbits=15),r.check=0,E[0]=255&h,E[1]=h>>>8&255,r.check=j(r.check,E,2,0),h=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg=\"incorrect header check\",r.mode=Bt;break}if((15&h)!==Tt){e.msg=\"unknown compression method\",r.mode=Bt;break}if(h>>>=4,u-=4,x=8+(15&h),0===r.wbits&&(r.wbits=x),x>15||x>r.wbits){e.msg=\"invalid window size\",r.mode=Bt;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&h?16189:Ot,h=0,u=0;break;case 16181:for(;u<16;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(r.flags=h,(255&r.flags)!==Tt){e.msg=\"unknown compression method\",r.mode=Bt;break}if(57344&r.flags){e.msg=\"unknown header flags set\",r.mode=Bt;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&4&r.wrap&&(E[0]=255&h,E[1]=h>>>8&255,r.check=j(r.check,E,2,0)),h=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}r.head&&(r.head.time=h),512&r.flags&&4&r.wrap&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,r.check=j(r.check,E,4,0)),h=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&4&r.wrap&&(E[0]=255&h,E[1]=h>>>8&255,r.check=j(r.check,E,2,0)),h=0,u=0,r.mode=16184;case 16184:if(1024&r.flags){for(;u<16;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&4&r.wrap&&(E[0]=255&h,E[1]=h>>>8&255,r.check=j(r.check,E,2,0)),h=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>s&&(f=s),f&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(a,a+f),x)),512&r.flags&&4&r.wrap&&(r.check=j(r.check,i,f,a)),s-=f,a+=f,r.length-=f),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break e;f=0;do{x=i[a+f++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&f<s);if(512&r.flags&&4&r.wrap&&(r.check=j(r.check,i,f,a)),s-=f,a+=f,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break e;f=0;do{x=i[a+f++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&f<s);if(512&r.flags&&4&r.wrap&&(r.check=j(r.check,i,f,a)),s-=f,a+=f,x)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;u<16;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(4&r.wrap&&h!==(65535&r.check)){e.msg=\"header crc mismatch\",r.mode=Bt;break}h=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Ot;break;case 16189:for(;u<32;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}e.adler=r.check=Ut(h),h=0,u=0,r.mode=Dt;case Dt:if(0===r.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=h,r.bits=u,At;e.adler=r.check=1,r.mode=Ot;case Ot:if(t===wt||t===xt)break e;case It:if(r.last){h>>>=7&u,u-=7&u,r.mode=Nt;break}for(;u<3;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}switch(r.last=1&h,h>>>=1,u-=1,3&h){case 0:r.mode=16193;break;case 1:if(Kt(r),r.mode=Rt,t===xt){h>>>=2,u-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg=\"invalid block type\",r.mode=Bt}h>>>=2,u-=2;break;case 16193:for(h>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if((65535&h)!=(h>>>16^65535)){e.msg=\"invalid stored block lengths\",r.mode=Bt;break}if(r.length=65535&h,h=0,u=0,r.mode=Ft,t===xt)break e;case Ft:r.mode=16195;case 16195:if(f=r.length,f){if(f>s&&(f=s),f>l&&(f=l),0===f)break e;n.set(i.subarray(a,a+f),o),s-=f,a+=f,l-=f,o+=f,r.length-=f;break}r.mode=Ot;break;case 16196:for(;u<14;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(r.nlen=257+(31&h),h>>>=5,u-=5,r.ndist=1+(31&h),h>>>=5,u-=5,r.ncode=4+(15&h),h>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg=\"too many length or distance symbols\",r.mode=Bt;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}r.lens[z[r.have++]]=7&h,h>>>=3,u-=3}for(;r.have<19;)r.lens[z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},k=_t(0,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,k){e.msg=\"invalid code lengths set\",r.mode=Bt;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;S=r.lencode[h&(1<<r.lenbits)-1],g=S>>>24,m=S>>>16&255,y=65535&S,!(g<=u);){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(y<16)h>>>=g,u-=g,r.lens[r.have++]=y;else{if(16===y){for(A=g+2;u<A;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(h>>>=g,u-=g,0===r.have){e.msg=\"invalid bit length repeat\",r.mode=Bt;break}x=r.lens[r.have-1],f=3+(3&h),h>>>=2,u-=2}else if(17===y){for(A=g+3;u<A;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}h>>>=g,u-=g,x=0,f=3+(7&h),h>>>=3,u-=3}else{for(A=g+7;u<A;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}h>>>=g,u-=g,x=0,f=11+(127&h),h>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){e.msg=\"invalid bit length repeat\",r.mode=Bt;break}for(;f--;)r.lens[r.have++]=x}}if(r.mode===Bt)break;if(0===r.lens[256]){e.msg=\"invalid code -- missing end-of-block\",r.mode=Bt;break}if(r.lenbits=9,C={bits:r.lenbits},k=_t(1,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,k){e.msg=\"invalid literal/lengths set\",r.mode=Bt;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},k=_t(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,k){e.msg=\"invalid distances set\",r.mode=Bt;break}if(r.mode=Rt,t===xt)break e;case Rt:r.mode=Pt;case Pt:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=h,r.bits=u,ft(e,d),o=e.next_out,n=e.output,l=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,h=r.hold,u=r.bits,r.mode===Ot&&(r.back=-1);break}for(r.back=0;S=r.lencode[h&(1<<r.lenbits)-1],g=S>>>24,m=S>>>16&255,y=65535&S,!(g<=u);){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(m&&0==(240&m)){for(_=g,b=m,w=y;S=r.lencode[w+((h&(1<<_+b)-1)>>_)],g=S>>>24,m=S>>>16&255,y=65535&S,!(_+g<=u);){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}h>>>=_,u-=_,r.back+=_}if(h>>>=g,u-=g,r.back+=g,r.length=y,0===m){r.mode=16205;break}if(32&m){r.back=-1,r.mode=Ot;break}if(64&m){e.msg=\"invalid literal/length code\",r.mode=Bt;break}r.extra=15&m,r.mode=16201;case 16201:if(r.extra){for(A=r.extra;u<A;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;S=r.distcode[h&(1<<r.distbits)-1],g=S>>>24,m=S>>>16&255,y=65535&S,!(g<=u);){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(0==(240&m)){for(_=g,b=m,w=y;S=r.distcode[w+((h&(1<<_+b)-1)>>_)],g=S>>>24,m=S>>>16&255,y=65535&S,!(_+g<=u);){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}h>>>=_,u-=_,r.back+=_}if(h>>>=g,u-=g,r.back+=g,64&m){e.msg=\"invalid distance code\",r.mode=Bt;break}r.offset=y,r.extra=15&m,r.mode=16203;case 16203:if(r.extra){for(A=r.extra;u<A;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg=\"invalid distance too far back\",r.mode=Bt;break}r.mode=16204;case 16204:if(0===l)break e;if(f=d-l,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg=\"invalid distance too far back\",r.mode=Bt;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),v=r.window}else v=n,p=o-r.offset,f=r.length;f>l&&(f=l),l-=f,r.length-=f;do{n[o++]=v[p++]}while(--f);0===r.length&&(r.mode=Pt);break;case 16205:if(0===l)break e;n[o++]=r.length,l--,r.mode=Pt;break;case Nt:if(r.wrap){for(;u<32;){if(0===s)break e;s--,h|=i[a++]<<u,u+=8}if(d-=l,e.total_out+=d,r.total+=d,4&r.wrap&&d&&(e.adler=r.check=r.flags?j(r.check,n,d,o-d):G(r.check,n,d,o-d)),d=l,4&r.wrap&&(r.flags?h:Ut(h))!==r.check){e.msg=\"incorrect data check\",r.mode=Bt;break}h=0,u=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;u<32;){if(0===s)break e;s--,h+=i[a++]<<u,u+=8}if(4&r.wrap&&h!==(4294967295&r.total)){e.msg=\"incorrect length check\",r.mode=Bt;break}h=0,u=0}r.mode=16208;case 16208:k=Ct;break e;case Bt:k=Et;break e;case 16210:return zt;default:return St}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=h,r.bits=u,(r.wsize||d!==e.avail_out&&r.mode<Bt&&(r.mode<Nt||t!==bt))&&$t(e,e.output,e.next_out,d-e.avail_out),c-=e.avail_in,d-=e.avail_out,e.total_in+=c,e.total_out+=d,r.total+=d,4&r.wrap&&d&&(e.adler=r.check=r.flags?j(r.check,n,d,e.next_out-d):G(r.check,n,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Ot?128:0)+(r.mode===Rt||r.mode===Ft?256:0),(0===c&&0===d||t===bt)&&k===kt&&(k=Mt),k},inflateEnd:function(e){if(Ht(e))return St;var t=e.state;return t.window&&(t.window=null),e.state=null,kt},inflateGetHeader:function(e,t){if(Ht(e))return St;var r=e.state;return 0==(2&r.wrap)?St:(r.head=t,t.done=!1,kt)},inflateSetDictionary:function(e,t){var r,i,n,a=t.length;return Ht(e)?St:(r=e.state,0!==r.wrap&&r.mode!==Dt?St:r.mode===Dt&&(i=1,i=G(i,t,a,0),i!==r.check)?Et:(n=$t(e,t,a,a),n?(r.mode=16210,zt):(r.havedict=1,kt)))},inflateInfo:\"pako inflate (from Nodeca project)\"},Jt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1},er=Object.prototype.toString,tr=q.Z_NO_FLUSH,rr=q.Z_FINISH,ir=q.Z_OK,nr=q.Z_STREAM_END,ar=q.Z_NEED_DICT,or=q.Z_STREAM_ERROR,sr=q.Z_DATA_ERROR,lr=q.Z_MEM_ERROR;function hr(e){this.options=He({chunkSize:65536,windowBits:15,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new Qe,this.strm.avail_out=0;var r=Qt.inflateInit2(this.strm,t.windowBits);if(r!==ir)throw new Error(H[r]);if(this.header=new Jt,Qt.inflateGetHeader(this.strm,this.header),t.dictionary&&(\"string\"==typeof t.dictionary?t.dictionary=Xe(t.dictionary):\"[object ArrayBuffer]\"===er.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Qt.inflateSetDictionary(this.strm,t.dictionary),r!==ir)))throw new Error(H[r])}function ur(e,t){var r=new hr(t);if(r.push(e),r.err)throw r.msg||H[r.err];return r.result}hr.prototype.push=function(e,t){var r,i,n,a=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(i=t===~~t?t:!0===t?rr:tr,\"[object ArrayBuffer]\"===er.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(o),a.next_out=0,a.avail_out=o),r=Qt.inflate(a,i),r===ar&&s&&(r=Qt.inflateSetDictionary(a,s),r===ir?r=Qt.inflate(a,i):r===sr&&(r=ar));a.avail_in>0&&r===nr&&a.state.wrap>0&&0!==e[a.next_in];)Qt.inflateReset(a),r=Qt.inflate(a,i);switch(r){case or:case sr:case ar:case lr:return this.onEnd(r),this.ended=!0,!1}if(n=a.avail_out,a.next_out&&(0===a.avail_out||r===nr))if(\"string\"===this.options.to){var l=$e(a.output,a.next_out),h=a.next_out-l,u=Ke(a.output,l);a.next_out=h,a.avail_out=o-h,h&&a.output.set(a.output.subarray(l,l+h),0),this.onData(u)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(r!==ir||0!==n){if(r===nr)return r=Qt.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},hr.prototype.onData=function(e){this.chunks.push(e)},hr.prototype.onEnd=function(e){e===ir&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=qe(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var cr={Inflate:hr,inflate:ur,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ur(e,t)},ungzip:ur,constants:q},dr=ct.Deflate,fr=ct.deflate,pr=ct.deflateRaw,vr=ct.gzip,gr=cr.Inflate,mr=cr.inflate,yr=cr.inflateRaw,_r=cr.ungzip,br=dr,wr=fr,xr=pr,kr=vr,Cr=gr,Ar=mr,Sr=yr,Er=_r,zr=q,Mr={Deflate:dr,deflate:fr,deflateRaw:pr,gzip:vr,Inflate:gr,inflate:mr,inflateRaw:yr,ungzip:_r,constants:q}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},__webpack_require__(3637),__webpack_require__(7882);var __webpack_exports__=__webpack_require__(6279);return __webpack_exports__}()}))}).call(this,__webpack_require__(\"62e4\")(module))},\"5d41\":function(e,t,r){var i=r(\"23e7\"),n=r(\"861d\"),a=r(\"825a\"),o=r(\"5135\"),s=r(\"06cf\"),l=r(\"e163\");function h(e,t){var r,i,u=arguments.length<3?e:arguments[2];return a(e)===u?e[t]:(r=s.f(e,t))?o(r,\"value\")?r.value:void 0===r.get?void 0:r.get.call(u):n(i=l(e))?h(i,t,u):void 0}i({target:\"Reflect\",stat:!0},{get:h})},\"5e89\":function(e,t,r){var i=r(\"861d\"),n=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&n(e)===e}},6072:function(e,t,r){e.exports=r.p+\"static/img/SK-SSPred.f3e3f020.png\"},7039:function(e,t,r){var i=r(\"23e7\"),n=r(\"d039\"),a=r(\"057f\").f,o=n((function(){return!Object.getOwnPropertyNames(1)}));i({target:\"Object\",stat:!0,forced:o},{getOwnPropertyNames:a})},7076:function(e,t,r){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports[\"default\"]=e.exports,i(t)}r(\"131a\"),r(\"3410\"),e.exports=i,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"739a\":function(e,t,r){e.exports=r.p+\"static/img/SK-PepScaf.f0db1e5a.png\"},\"748a\":function(e,t,r){r(\"d3b7\"),r(\"5d41\"),r(\"e439\");var i=r(\"a34f\");function n(){return\"undefined\"!==typeof Reflect&&Reflect.get?(e.exports=n=Reflect.get.bind(),e.exports.__esModule=!0,e.exports[\"default\"]=e.exports):(e.exports=n=function(e,t,r){var n=i(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},e.exports.__esModule=!0,e.exports[\"default\"]=e.exports),n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"769a\":function(e,t,r){},\"7b80\":function(e,t,r){var i=r(\"32af\");function n(e,t){if(\"function\"!==typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&i(e,t)}e.exports=n,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"7ca3\":function(e,t,r){var i=r(\"38a1\")[\"default\"],n=r(\"35b0\");function a(e){var t=n(e,\"string\");return\"symbol\"===i(t)?t:String(t)}e.exports=a,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"7db0\":function(e,t,r){\"use strict\";var i=r(\"23e7\"),n=r(\"b727\").find,a=r(\"44d2\"),o=r(\"ae40\"),s=\"find\",l=!0,h=o(s);s in[]&&Array(1)[s]((function(){l=!1})),i({target:\"Array\",proto:!0,forced:l||!h},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a(s)},8226:function(e,t,r){},\"828f\":function(e,t,r){e.exports=r.p+\"static/img/SynEvo.b872d044.png\"},\"82da\":function(e,t,r){var i=r(\"23e7\"),n=r(\"ebb5\"),a=n.NATIVE_ARRAY_BUFFER_VIEWS;i({target:\"ArrayBuffer\",stat:!0,forced:!a},{isView:n.isView})},\"843c\":function(e,t,r){\"use strict\";var i=r(\"23e7\"),n=r(\"0ccb\").end,a=r(\"9a0c\");i({target:\"String\",proto:!0,forced:a},{padEnd:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},\"84c3\":function(e,t,r){var i=r(\"74e8\");i(\"Uint16\",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},\"857a\":function(e,t,r){var i=r(\"1d80\"),n=/\"/g;e.exports=function(e,t,r,a){var o=String(i(e)),s=\"<\"+t;return\"\"!==r&&(s+=\" \"+r+'=\"'+String(a).replace(n,\"&quot;\")+'\"'),s+\">\"+o+\"</\"+t+\">\"}},8622:function(e,t,r){r(\"4ae1\"),r(\"d3b7\");var i=r(\"7076\"),n=r(\"dbcd\"),a=r(\"5bdf\");function o(e){var t=n();return function(){var r,n=i(e);if(t){var o=i(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}e.exports=o,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},\"8a59\":function(e,t,r){var i=r(\"74e8\");i(\"Uint8\",(function(e){return function(t,r,i){return e(this,t,r,i)}}),!0)},\"8a79\":function(e,t,r){\"use strict\";var i=r(\"23e7\"),n=r(\"06cf\").f,a=r(\"50c4\"),o=r(\"5a34\"),s=r(\"1d80\"),l=r(\"ab13\"),h=r(\"c430\"),u=\"\".endsWith,c=Math.min,d=l(\"endsWith\"),f=!h&&!d&&!!function(){var e=n(String.prototype,\"endsWith\");return e&&!e.writable}();i({target:\"String\",proto:!0,forced:!f&&!d},{endsWith:function(e){var t=String(s(this));o(e);var r=arguments.length>1?arguments[1]:void 0,i=a(t.length),n=void 0===r?i:c(a(r),i),l=String(e);return u?u.call(t,l,n):t.slice(n-l.length,n)===l}})},\"8b09\":function(e,t,r){var i=r(\"74e8\");i(\"Int16\",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},\"8ba4\":function(e,t,r){var i=r(\"23e7\"),n=r(\"5e89\");i({target:\"Number\",stat:!0},{isInteger:n})},9579:function(e,t,r){e.exports=r.p+\"static/img/SH-PepSmiles.302e5d9d.png\"},9708:function(e,t,r){e.exports=r.p+\"static/img/home-brain.01f75169.png\"},\"9e76\":function(e,t,r){e.exports=r.p+\"static/img/SK-StaPred.c947320b.png\"},a2bf:function(e,t,r){\"use strict\";var i=r(\"e8b5\"),n=r(\"50c4\"),a=r(\"0366\"),o=function(e,t,r,s,l,h,u,c){var d,f=l,p=0,v=!!u&&a(u,c,3);while(p<s){if(p in r){if(d=v?v(r[p],p,t):r[p],h>0&&i(d))f=o(e,t,d,n(d.length),f,h-1)-1;else{if(f>=9007199254740991)throw TypeError(\"Exceed the acceptable array length\");e[f]=d}f++}p++}return f};e.exports=o},a34f:function(e,t,r){var i=r(\"7076\");function n(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=i(e),null===e)break;return e}e.exports=n,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},a8ec:function(e,t,r){\"use strict\";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"el-row\",{staticStyle:{\"margin-top\":\"20px\"}},[r(\"el-col\",{attrs:{span:1}},[r(\"div\",{staticClass:\"grid-content\"})]),r(\"el-col\",{attrs:{span:22}},[r(\"el-card\",[r(\"div\",{staticClass:\"clearfix\",attrs:{slot:\"header\"},slot:\"header\"},[r(\"h1\",{staticClass:\"title_font\"},[e._v(e._s(e.modelDetail.name))])]),r(\"div\",[r(\"el-descriptions\",{attrs:{column:2}},[r(\"el-descriptions-item\",{attrs:{label:\"Model Name\"}},[e._v(e._s(e.modelDetail.name))]),r(\"el-descriptions-item\",{attrs:{label:\"Version\"}},[r(\"el-link\",{attrs:{href:e.modelDetail.code_address,type:\"primary\"}},[e._v(\" \"+e._s(e.modelDetail.version)+\" \")])],1),r(\"el-descriptions-item\",{attrs:{label:\"Dataset\"}},[r(\"el-link\",{attrs:{href:e.modelDetail.dataset,target:\"_blank\",type:\"primary\",icon:\"el-icon-bottom\"}},[e._v(\"Download\")])],1),r(\"el-descriptions-item\",{attrs:{label:\"Code\"}},[r(\"el-link\",{attrs:{type:\"primary\",href:e.modelDetail.code_address}},[r(\"svg-icon\",{attrs:{\"icon-class\":\"gitlab\"}}),e._v(\" GitLab \")],1)],1)],1)],1),r(\"el-divider\"),r(\"h1\",{staticClass:\"title_font\"},[e._v(\"Overview\")]),r(\"p\",{staticClass:\"overview_font\"},[e._v(\" \"+e._s(e.modelDetail.long_description)+\" \")]),r(\"div\",{staticStyle:{width:\"100%\"},attrs:{align:\"center\"}},[r(\"img\",{staticStyle:{margin:\"0 auto\",width:\"560px\",height:\"460px\"},attrs:{src:e.modelDetail.arch_img}})]),r(\"el-divider\"),r(\"h1\",{staticClass:\"title_font\"},[e._v(\"Code for inference\")]),r(\"div\",{staticClass:\"editor-container\"},[r(\"python-editor\",{ref:\"pythonEditor\",attrs:{\"code-exmple\":e.codeExmple},model:{value:e.codeExmple,callback:function(t){e.codeExmple=t},expression:\"codeExmple\"}})],1),r(\"div\",{staticStyle:{\"margin-top\":\"50px\",width:\"100%\",height:\"20px\"}},[r(\"el-divider\")],1),r(\"h1\",{staticClass:\"title_font\"},[e._v(\"Try the model now !\")]),r(\"h5\",{staticStyle:{\"text-align\":\"center\"}},[e._v(\"Input data on the left and submit to model\")]),r(\"el-row\",[r(\"el-col\",{attrs:{span:10}},[r(\"div\",{staticClass:\"editor-container\"},[r(\"json-editor\",{ref:\"jsonEditor\",model:{value:e.value,callback:function(t){e.value=t},expression:\"value\"}})],1)]),r(\"el-col\",{attrs:{span:2}},[r(\"div\",{staticClass:\"grid-content\"})]),r(\"el-col\",{attrs:{span:10}},[1===e.resultType?r(\"div\",{staticClass:\"editor-container\"},[r(\"json-editor\",{ref:\"jsonEditor\",model:{value:e.result,callback:function(t){e.result=t},expression:\"result\"}})],1):0===e.resultType?r(\"div\",{staticClass:\"mol-container\",attrs:{id:\"container-01\"}}):2===e.resultType?r(\"div\",[r(\"el-card\",[r(\"div\",{staticClass:\"clearfix\",attrs:{slot:\"header\"},slot:\"header\"},[e._v(\" Prediction Result \")]),r(\"el-row\",[r(\"el-col\",{attrs:{span:24}},[r(\"span\",{domProps:{innerHTML:e._s(e.prot_seq)}})])],1),r(\"el-row\",[r(\"el-col\",{attrs:{span:24}},[r(\"span\",{domProps:{innerHTML:e._s(e.pep_seq)}})])],1)],1)],1):e._e()])],1),r(\"div\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{align:\"center\"}},[r(\"el-button\",{attrs:{type:\"primary\",size:\"medium\"},on:{click:function(t){return e.reasoningModel()}}},[e._v(\"推理\")])],1)],1)],1),r(\"el-col\",{attrs:{span:1}},[r(\"div\",{staticClass:\"grid-content\"})])],1)],1)},n=[],a=(r(\"e9c4\"),r(\"d3b7\"),r(\"25f0\"),r(\"fa7e\")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"python-editor\"},[r(\"textarea\",{ref:\"textarea\"})])},s=[],l=r(\"56b3\"),h=r.n(l);r(\"0dd0\"),r(\"a7be\"),r(\"acdf\"),r(\"7b0e\"),r(\"1759\"),r(\"e27f\"),r(\"8b9e\"),r(\"8c06\"),r(\"db91\"),r(\"b866\"),r(\"eb8f\"),r(\"bbca\"),r(\"f9d4\"),r(\"8822\"),r(\"d2de\");r(\"ae67\");var u={name:\"PythonEditor\",props:[\"codeExmple\"],data:function(){return{pythonEditor:!1}},watch:{value:function(e){this.pythonEditor.setValue(e)}},mounted:function(){this.pythonEditor=h.a.fromTextArea(this.$refs.textarea,{lineNumbers:!1,mode:\"python\",gutters:[\"CodeMirror-lint-markers\"],theme:\"neat\",lint:!0,readOnly:!0}),this.pythonEditor.setValue(this.codeExmple)},methods:{getValue:function(){return this.pythonEditor.getValue()},refreshPythonEditor:function(e){this.pythonEditor.setValue(e)}}},c=u,d=(r(\"481f\"),r(\"2877\")),f=Object(d[\"a\"])(c,o,s,!1,null,\"7f8b4f36\",null),p=f.exports,v=r(\"b775\");function g(e){return Object(v[\"a\"])({url:\"http://82.156.69.32:5015/models/name/\"+e,method:\"get\"})}function m(e,t){return Object(v[\"a\"])({url:\"http://82.156.69.32:5015/model_server/\"+e+\"/v1/predict\",method:\"post\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\"},data:t})}var y=r(\"b406\"),_=r.n(y),b='[{\"items\":[{\"market_type\":\"forexdata\",\"symbol\":\"NGAS\"}],\"name\":\"能源化工\"}]';r(\"5c5b\");var w={name:\"ModeDetail\",components:{JsonEditor:a[\"a\"],PythonEditor:p},data:function(){return{modelName:\"\",value:JSON.parse(b),result:\"\",codeExmple:\"\",resultType:0,prot_seq:\"\",pep_seq:\"\",modelDetail:{}}},created:function(){var e=this,t=this.$route.query.modelName;this.modelName=t,g(t).then((function(t){console.log(t),e.modelDetail=t.data,e.modelDetail.dataset=\"http://120.53.7.54:5065/v6_SMILES_affinity.zip\",e.modelDetail.arch_img=r(\"afac\")(\"./\"+e.modelDetail.arch_img),e.modelDetail.inf_code.length<=0&&(e.modelDetail.inf_code=\"import\"),e.codeExmple=e.modelDetail.inf_code,e.$refs.pythonEditor.refreshPythonEditor(e.codeExmple),e.value=JSON.parse(e.modelDetail.inf_front)})).catch((function(e){console.log(e)}))},methods:{reasoningModel:function(){var e=this;console.log(\"this.value = \"+this.value);var t=JSON.stringify(this.value);m(this.modelName,t).then((function(t){if(\"pdb\"===t.data.data_type){e.resultType=0;var r=_()(\"#container-01\"),i={backgroundColor:\"white\"},n=$3Dmol.createViewer(r,i);n.addModel(t.data.results,\"pdb\"),n.setStyle({chain:\"B\"},{cartoon:{color:\"spectrum\"}}),n.setStyle({chain:\"C\"},{cartoon:{color:\"white\"}}),n.setStyle({chain:\"D\"},{cartoon:{color:\"red\"}}),n.addSurface($3Dmol.SurfaceType.VDW,{opacity:.75,color:\"white\"},{chain:\"D\"}),n.zoomTo(),n.render()}else if(\"float\"===t.data.data_type)e.resultType=1,e.result=\"Prediction Result: \"+t.data.results,e.$message({message:\"Predict Successfly! See the Results Blow\",type:\"success\"});else if(\"interaction\"===t.data.data_type){e.resultType=2;var a=JSON.parse(t.data.results);e.prot_seq=\"<h5>Binding residues in protein: </h5> <br> \";for(var o={},s=0;s<a[\"prot_index\"].length;s++)o[a[\"prot_index\"][s]]=\"1\";for(s=0;s<a[\"prot_seq\"].length;s++)console.log(\"this.tempDict = \",o[s.toString()]),1==o[s.toString()]?e.prot_seq+='<div style=\"color: red; display: inline-block\">'+a[\"prot_seq\"][s]+\"</div>\":e.prot_seq+='<div style=\"display: inline-block\">'+a[\"prot_seq\"][s]+\"</div>\";e.prot_seq='<p class=\"overview_font\">'+e.prot_seq+\"</p>\",e.pep_seq=\"<h5>Binding residues in peptide: </h5> <br> \",o={};for(s=0;s<a[\"pep_index\"].length;s++)o[a[\"pep_index\"][s]]=\"1\";for(s=0;s<a[\"pep_seq\"].length;s++)1==o[s.toString()]?e.pep_seq+='<div style=\"color: red; display: inline-block\">'+a[\"pep_seq\"][s]+\"</div>\":e.pep_seq+=a[\"pep_seq\"][s];e.pep_seq=\"<p>\"+e.pep_seq+\"</p>\",console.log(\"this.result = \",e.result)}})).catch((function(e){console.log(e)}))},change:function(e){console.log(\"change this.value = \"+e)},input:function(e){console.log(\"input this.value = \"+e)},test:function(){}}},x=w,k=(r(\"bca4\"),Object(d[\"a\"])(x,i,n,!1,null,\"56dd8223\",null));t[\"default\"]=k.exports},af03:function(e,t,r){var i=r(\"d039\");e.exports=function(e){return i((function(){var t=\"\"[e]('\"');return t!==t.toLowerCase()||t.split('\"').length>3}))}},afac:function(e,t,r){var i={\"./SC-CPPTransformer.png\":\"098e\",\"./SD-LinkerBuilder.png\":\"cc04\",\"./SD-PepGPT.png\":\"220d\",\"./SD-RL.png\":\"eac8\",\"./SH-PepContrast.png\":\"0a47\",\"./SH-PepSmiles.png\":\"9579\",\"./SH-pepESM.png\":\"0f64\",\"./SK-ImmuPred.png\":\"3dcd\",\"./SK-PepScaf.png\":\"739a\",\"./SK-ProductPred.png\":\"b384\",\"./SK-SSPred.png\":\"6072\",\"./SK-StaPred.png\":\"9e76\",\"./ST-PepCarC.png\":\"2896\",\"./ST-PepGeo.png\":\"4260\",\"./ST-PepInt.png\":\"b780\",\"./ST-PepMRS.png\":\"4163\",\"./ST-PepScore.png\":\"331b\",\"./SynEnergy.png\":\"ece4\",\"./SynEvo.png\":\"828f\",\"./home-brain.png\":\"9708\"};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(i,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id=\"afac\"},b384:function(e,t,r){e.exports=r.p+\"static/img/SK-ProductPred.b212e1fd.png\"},b394:function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}e.exports=r,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},b406:function(e,t,r){(function(e){var i,n,a=r(\"38a1\").default;r(\"3410\"),r(\"fb6a\"),r(\"0481\"),r(\"4069\"),r(\"99af\"),r(\"d3b7\"),r(\"25f0\"),r(\"d81d\"),r(\"4e82\"),r(\"a434\"),r(\"ac1f\"),r(\"5319\"),r(\"a4d3\"),r(\"e01a\"),r(\"d28b\"),r(\"3ca3\"),r(\"ddb0\"),r(\"4d63\"),r(\"2c3e\"),r(\"00b4\"),r(\"a15b\"),r(\"4de4\"),r(\"7db0\"),r(\"466d\"),r(\"b0c0\"),r(\"498a\"),\n/*!\n * jQuery JavaScript Library v3.5.1\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright JS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2020-05-04T22:49Z\n */\nfunction(t,r){\"use strict\";\"object\"===a(e)&&\"object\"===a(e.exports)?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return r(e)}:r(t)}(\"undefined\"!==typeof window?window:this,(function(r,o){\"use strict\";var s=[],l=Object.getPrototypeOf,h=s.slice,u=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},c=s.push,d=s.indexOf,f={},p=f.toString,v=f.hasOwnProperty,g=v.toString,m=g.call(Object),y={},_=function(e){return\"function\"===typeof e&&\"number\"!==typeof e.nodeType},b=function(e){return null!=e&&e===e.window},w=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function k(e,t,r){r=r||w;var i,n,a=r.createElement(\"script\");if(a.text=e,t)for(i in x)n=t[i]||t.getAttribute&&t.getAttribute(i),n&&a.setAttribute(i,n);r.head.appendChild(a).parentNode.removeChild(a)}function C(e){return null==e?e+\"\":\"object\"===a(e)||\"function\"===typeof e?f[p.call(e)]||\"object\":a(e)}var A=\"3.5.1\",S=function e(t,r){return new e.fn.init(t,r)};function E(e){var t=!!e&&\"length\"in e&&e.length,r=C(e);return!_(e)&&!b(e)&&(\"array\"===r||0===t||\"number\"===typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:A,constructor:S,length:0,toArray:function(){return h.call(this)},get:function(e){return null==e?h.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:s.sort,splice:s.splice},S.extend=S.fn.extend=function(){var e,t,r,i,n,o,s=arguments[0]||{},l=1,h=arguments.length,u=!1;for(\"boolean\"===typeof s&&(u=s,s=arguments[l]||{},l++),\"object\"===a(s)||_(s)||(s={}),l===h&&(s=this,l--);l<h;l++)if(null!=(e=arguments[l]))for(t in e)i=e[t],\"__proto__\"!==t&&s!==i&&(u&&i&&(S.isPlainObject(i)||(n=Array.isArray(i)))?(r=s[t],o=n&&!Array.isArray(r)?[]:n||S.isPlainObject(r)?r:{},n=!1,s[t]=S.extend(u,o,i)):void 0!==i&&(s[t]=i));return s},S.extend({expando:\"jQuery\"+(A+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||\"[object Object]\"!==p.call(e))&&(t=l(e),!t||(r=v.call(t,\"constructor\")&&t.constructor,\"function\"===typeof r&&g.call(r)===m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,r){k(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,i=0;if(E(e)){for(r=e.length;i<r;i++)if(!1===t.call(e[i],i,e[i]))break}else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var r=t||[];return null!=e&&(E(Object(e))?S.merge(r,\"string\"===typeof e?[e]:e):c.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:d.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i,n=[],a=0,o=e.length,s=!r;a<o;a++)i=!t(e[a],a),i!==s&&n.push(e[a]);return n},map:function(e,t,r){var i,n,a=0,o=[];if(E(e))for(i=e.length;a<i;a++)n=t(e[a],a,r),null!=n&&o.push(n);else for(a in e)n=t(e[a],a,r),null!=n&&o.push(n);return u(o)},guid:1,support:y}),\"function\"===typeof Symbol&&(S.fn[Symbol.iterator]=s[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),(function(e,t){f[\"[object \"+t+\"]\"]=t.toLowerCase()}));var z=\n/*!\n  * Sizzle CSS Selector Engine v2.3.5\n  * https://sizzlejs.com/\n  *\n  * Copyright JS Foundation and other contributors\n  * Released under the MIT license\n  * https://js.foundation/\n  *\n  * Date: 2020-03-14\n  */\nfunction(e){var t,r,i,n,a,o,s,l,h,u,c,d,f,p,v,g,m,y,_,b=\"sizzle\"+1*new Date,w=e.document,x=0,k=0,C=le(),A=le(),S=le(),E=le(),z=function(e,t){return e===t&&(c=!0),0},M={}.hasOwnProperty,T=[],L=T.pop,D=T.push,O=T.push,I=T.slice,F=function(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",P=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",N=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+P+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",B=\"\\\\[\"+P+\"*(\"+N+\")(?:\"+P+\"*([*^$|!~]?=)\"+P+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+N+\"))|)\"+P+\"*\\\\]\",U=\":(\"+N+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+B+\")*)|.*)\\\\)|)\",G=new RegExp(P+\"+\",\"g\"),V=new RegExp(\"^\"+P+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+P+\"+$\",\"g\"),j=new RegExp(\"^\"+P+\"*,\"+P+\"*\"),H=new RegExp(\"^\"+P+\"*([>+~]|\"+P+\")\"+P+\"*\"),q=new RegExp(P+\"|>\"),W=new RegExp(U),Y=new RegExp(\"^\"+N+\"$\"),Z={ID:new RegExp(\"^#(\"+N+\")\"),CLASS:new RegExp(\"^\\\\.(\"+N+\")\"),TAG:new RegExp(\"^(\"+N+\"|[*])\"),ATTR:new RegExp(\"^\"+B),PSEUDO:new RegExp(\"^\"+U),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+P+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+P+\"*(?:([+-]|)\"+P+\"*(\\\\d+)|))\"+P+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+P+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+P+\"*((?:-\\\\d)?\\\\d*)\"+P+\"*\\\\)|)(?=[^-]|$)\",\"i\")},X=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,$=/^h\\d$/i,Q=/^[^{]+\\{\\s*\\[native \\w/,J=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+P+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),re=function(e,t){var r=\"0x\"+e.slice(1)-65536;return t||(r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320))},ie=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ne=function(e,t){return t?\"\\0\"===e?\"�\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},ae=function(){d()},oe=be((function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()}),{dir:\"parentNode\",next:\"legend\"});try{O.apply(T=I.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(Ee){O={apply:T.length?function(e,t){D.apply(e,I.call(t))}:function(e,t){var r=e.length,i=0;while(e[r++]=t[i++]);e.length=r-1}}}function se(e,t,i,n){var a,s,h,u,c,p,m,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(i=i||[],\"string\"!==typeof e||!e||1!==w&&9!==w&&11!==w)return i;if(!n&&(d(t),t=t||f,v)){if(11!==w&&(c=J.exec(e)))if(a=c[1]){if(9===w){if(!(h=t.getElementById(a)))return i;if(h.id===a)return i.push(h),i}else if(y&&(h=y.getElementById(a))&&_(t,h)&&h.id===a)return i.push(h),i}else{if(c[2])return O.apply(i,t.getElementsByTagName(e)),i;if((a=c[3])&&r.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(a)),i}if(r.qsa&&!E[e+\" \"]&&(!g||!g.test(e))&&(1!==w||\"object\"!==t.nodeName.toLowerCase())){if(m=e,y=t,1===w&&(q.test(e)||H.test(e))){y=ee.test(e)&&me(t.parentNode)||t,y===t&&r.scope||((u=t.getAttribute(\"id\"))?u=u.replace(ie,ne):t.setAttribute(\"id\",u=b)),p=o(e),s=p.length;while(s--)p[s]=(u?\"#\"+u:\":scope\")+\" \"+_e(p[s]);m=p.join(\",\")}try{return O.apply(i,y.querySelectorAll(m)),i}catch(x){E(e,!0)}finally{u===b&&t.removeAttribute(\"id\")}}}return l(e.replace(V,\"$1\"),t,i,n)}function le(){var e=[];function t(r,n){return e.push(r+\" \")>i.cacheLength&&delete t[e.shift()],t[r+\" \"]=n}return t}function he(e){return e[b]=!0,e}function ue(e){var t=f.createElement(\"fieldset\");try{return!!e(t)}catch(Ee){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){var r=e.split(\"|\"),n=r.length;while(n--)i.attrHandle[r[n]]=t}function de(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(r)while(r=r.nextSibling)if(r===t)return-1;return e?1:-1}function fe(e){return function(t){var r=t.nodeName.toLowerCase();return\"input\"===r&&t.type===e}}function pe(e){return function(t){var r=t.nodeName.toLowerCase();return(\"input\"===r||\"button\"===r)&&t.type===e}}function ve(e){return function(t){return\"form\"in t?t.parentNode&&!1===t.disabled?\"label\"in t?\"label\"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:\"label\"in t&&t.disabled===e}}function ge(e){return he((function(t){return t=+t,he((function(r,i){var n,a=e([],r.length,t),o=a.length;while(o--)r[n=a[o]]&&(r[n]=!(i[n]=r[n]))}))}))}function me(e){return e&&\"undefined\"!==typeof e.getElementsByTagName&&e}for(t in r=se.support={},a=se.isXML=function(e){var t=e.namespaceURI,r=(e.ownerDocument||e).documentElement;return!X.test(t||r&&r.nodeName||\"HTML\")},d=se.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:w;return o!=f&&9===o.nodeType&&o.documentElement?(f=o,p=f.documentElement,v=!a(f),w!=f&&(n=f.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",ae,!1):n.attachEvent&&n.attachEvent(\"onunload\",ae)),r.scope=ue((function(e){return p.appendChild(e).appendChild(f.createElement(\"div\")),\"undefined\"!==typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length})),r.attributes=ue((function(e){return e.className=\"i\",!e.getAttribute(\"className\")})),r.getElementsByTagName=ue((function(e){return e.appendChild(f.createComment(\"\")),!e.getElementsByTagName(\"*\").length})),r.getElementsByClassName=Q.test(f.getElementsByClassName),r.getById=ue((function(e){return p.appendChild(e).id=b,!f.getElementsByName||!f.getElementsByName(b).length})),r.getById?(i.filter[\"ID\"]=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute(\"id\")===t}},i.find[\"ID\"]=function(e,t){if(\"undefined\"!==typeof t.getElementById&&v){var r=t.getElementById(e);return r?[r]:[]}}):(i.filter[\"ID\"]=function(e){var t=e.replace(te,re);return function(e){var r=\"undefined\"!==typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return r&&r.value===t}},i.find[\"ID\"]=function(e,t){if(\"undefined\"!==typeof t.getElementById&&v){var r,i,n,a=t.getElementById(e);if(a){if(r=a.getAttributeNode(\"id\"),r&&r.value===e)return[a];n=t.getElementsByName(e),i=0;while(a=n[i++])if(r=a.getAttributeNode(\"id\"),r&&r.value===e)return[a]}return[]}}),i.find[\"TAG\"]=r.getElementsByTagName?function(e,t){return\"undefined\"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],n=0,a=t.getElementsByTagName(e);if(\"*\"===e){while(r=a[n++])1===r.nodeType&&i.push(r);return i}return a},i.find[\"CLASS\"]=r.getElementsByClassName&&function(e,t){if(\"undefined\"!==typeof t.getElementsByClassName&&v)return t.getElementsByClassName(e)},m=[],g=[],(r.qsa=Q.test(f.querySelectorAll))&&(ue((function(e){var t;p.appendChild(e).innerHTML=\"<a id='\"+b+\"'></a><select id='\"+b+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&g.push(\"[*^$]=\"+P+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||g.push(\"\\\\[\"+P+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+b+\"-]\").length||g.push(\"~=\"),t=f.createElement(\"input\"),t.setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||g.push(\"\\\\[\"+P+\"*name\"+P+\"*=\"+P+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||g.push(\":checked\"),e.querySelectorAll(\"a#\"+b+\"+*\").length||g.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),g.push(\"[\\\\r\\\\n\\\\f]\")})),ue((function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=f.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&g.push(\"name\"+P+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&g.push(\":enabled\",\":disabled\"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&g.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),g.push(\",.*:\")}))),(r.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue((function(e){r.disconnectedMatch=y.call(e,\"*\"),y.call(e,\"[s!='']:x\"),m.push(\"!=\",U)})),g=g.length&&new RegExp(g.join(\"|\")),m=m.length&&new RegExp(m.join(\"|\")),t=Q.test(p.compareDocumentPosition),_=t||Q.test(p.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return c=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e==f||e.ownerDocument==w&&_(w,e)?-1:t==f||t.ownerDocument==w&&_(w,t)?1:u?F(u,e)-F(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return c=!0,0;var r,i=0,n=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!n||!a)return e==f?-1:t==f?1:n?-1:a?1:u?F(u,e)-F(u,t):0;if(n===a)return de(e,t);r=e;while(r=r.parentNode)o.unshift(r);r=t;while(r=r.parentNode)s.unshift(r);while(o[i]===s[i])i++;return i?de(o[i],s[i]):o[i]==w?-1:s[i]==w?1:0},f):f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(d(e),r.matchesSelector&&v&&!E[t+\" \"]&&(!m||!m.test(t))&&(!g||!g.test(t)))try{var i=y.call(e,t);if(i||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(Ee){E(t,!0)}return se(t,f,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=f&&d(e),_(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=f&&d(e);var n=i.attrHandle[t.toLowerCase()],a=n&&M.call(i.attrHandle,t.toLowerCase())?n(e,t,!v):void 0;return void 0!==a?a:r.attributes||!v?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},se.escape=function(e){return(e+\"\").replace(ie,ne)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,i=[],n=0,a=0;if(c=!r.detectDuplicates,u=!r.sortStable&&e.slice(0),e.sort(z),c){while(t=e[a++])t===e[a]&&(n=i.push(a));while(n--)e.splice(i[n],1)}return u=null,e},n=se.getText=function(e){var t,r=\"\",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if(\"string\"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===a||4===a)return e.nodeValue}else while(t=e[i++])r+=n(t);return r},i=se.selectors={cacheLength:50,createPseudo:he,match:Z,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,re),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,re),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return Z[\"CHILD\"].test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":r&&W.test(r)&&(t=o(r,!0))&&(t=r.indexOf(\")\",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+\" \"];return t||(t=new RegExp(\"(^|\"+P+\")\"+e+\"(\"+P+\"|$)\"))&&C(e,(function(e){return t.test(\"string\"===typeof e.className&&e.className||\"undefined\"!==typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")}))},ATTR:function(e,t,r){return function(i){var n=se.attr(i,e);return null==n?\"!=\"===t:!t||(n+=\"\",\"=\"===t?n===r:\"!=\"===t?n!==r:\"^=\"===t?r&&0===n.indexOf(r):\"*=\"===t?r&&n.indexOf(r)>-1:\"$=\"===t?r&&n.slice(-r.length)===r:\"~=\"===t?(\" \"+n.replace(G,\" \")+\" \").indexOf(r)>-1:\"|=\"===t&&(n===r||n.slice(0,r.length+1)===r+\"-\"))}},CHILD:function(e,t,r,i,n){var a=\"nth\"!==e.slice(0,3),o=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,l){var h,u,c,d,f,p,v=a!==o?\"nextSibling\":\"previousSibling\",g=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(g){if(a){while(v){d=t;while(d=d[v])if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=v=\"only\"===e&&!p&&\"nextSibling\"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&y){d=g,c=d[b]||(d[b]={}),u=c[d.uniqueID]||(c[d.uniqueID]={}),h=u[e]||[],f=h[0]===x&&h[1],_=f&&h[2],d=f&&g.childNodes[f];while(d=++f&&d&&d[v]||(_=f=0)||p.pop())if(1===d.nodeType&&++_&&d===t){u[e]=[x,f,_];break}}else if(y&&(d=t,c=d[b]||(d[b]={}),u=c[d.uniqueID]||(c[d.uniqueID]={}),h=u[e]||[],f=h[0]===x&&h[1],_=f),!1===_)while(d=++f&&d&&d[v]||(_=f=0)||p.pop())if((s?d.nodeName.toLowerCase()===m:1===d.nodeType)&&++_&&(y&&(c=d[b]||(d[b]={}),u=c[d.uniqueID]||(c[d.uniqueID]={}),u[e]=[x,_]),d===t))break;return _-=n,_===i||_%i===0&&_/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return n[b]?n(t):n.length>1?(r=[e,e,\"\",t],i.setFilters.hasOwnProperty(e.toLowerCase())?he((function(e,r){var i,a=n(e,t),o=a.length;while(o--)i=F(e,a[o]),e[i]=!(r[i]=a[o])})):function(e){return n(e,0,r)}):n}},pseudos:{not:he((function(e){var t=[],r=[],i=s(e.replace(V,\"$1\"));return i[b]?he((function(e,t,r,n){var a,o=i(e,null,n,[]),s=e.length;while(s--)(a=o[s])&&(e[s]=!(t[s]=a))})):function(e,n,a){return t[0]=e,i(t,null,a,r),t[0]=null,!r.pop()}})),has:he((function(e){return function(t){return se(e,t).length>0}})),contains:he((function(e){return e=e.replace(te,re),function(t){return(t.textContent||n(t)).indexOf(e)>-1}})),lang:he((function(e){return Y.test(e||\"\")||se.error(\"unsupported lang: \"+e),e=e.replace(te,re).toLowerCase(),function(t){var r;do{if(r=v?t.lang:t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"))return r=r.toLowerCase(),r===e||0===r.indexOf(e+\"-\")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos[\"empty\"](e)},header:function(e){return $.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,r){return[r<0?r+t:r]})),even:ge((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:ge((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:ge((function(e,t,r){for(var i=r<0?r+t:r>t?t:r;--i>=0;)e.push(i);return e})),gt:ge((function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e}))}},i.pseudos[\"nth\"]=i.pseudos[\"eq\"],{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=pe(t);function ye(){}function _e(e){for(var t=0,r=e.length,i=\"\";t<r;t++)i+=e[t].value;return i}function be(e,t,r){var i=t.dir,n=t.next,a=n||i,o=r&&\"parentNode\"===a,s=k++;return t.first?function(t,r,n){while(t=t[i])if(1===t.nodeType||o)return e(t,r,n);return!1}:function(t,r,l){var h,u,c,d=[x,s];if(l){while(t=t[i])if((1===t.nodeType||o)&&e(t,r,l))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),u=c[t.uniqueID]||(c[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[i]||t;else{if((h=u[a])&&h[0]===x&&h[1]===s)return d[2]=h[2];if(u[a]=d,d[2]=e(t,r,l))return!0}return!1}}function we(e){return e.length>1?function(t,r,i){var n=e.length;while(n--)if(!e[n](t,r,i))return!1;return!0}:e[0]}function xe(e,t,r){for(var i=0,n=t.length;i<n;i++)se(e,t[i],r);return r}function ke(e,t,r,i,n){for(var a,o=[],s=0,l=e.length,h=null!=t;s<l;s++)(a=e[s])&&(r&&!r(a,i,n)||(o.push(a),h&&t.push(s)));return o}function Ce(e,t,r,i,n,a){return i&&!i[b]&&(i=Ce(i)),n&&!n[b]&&(n=Ce(n,a)),he((function(a,o,s,l){var h,u,c,d=[],f=[],p=o.length,v=a||xe(t||\"*\",s.nodeType?[s]:s,[]),g=!e||!a&&t?v:ke(v,d,e,s,l),m=r?n||(a?e:p||i)?[]:o:g;if(r&&r(g,m,s,l),i){h=ke(m,f),i(h,[],s,l),u=h.length;while(u--)(c=h[u])&&(m[f[u]]=!(g[f[u]]=c))}if(a){if(n||e){if(n){h=[],u=m.length;while(u--)(c=m[u])&&h.push(g[u]=c);n(null,m=[],h,l)}u=m.length;while(u--)(c=m[u])&&(h=n?F(a,c):d[u])>-1&&(a[h]=!(o[h]=c))}}else m=ke(m===o?m.splice(p,m.length):m),n?n(null,o,m,l):O.apply(o,m)}))}function Ae(e){for(var t,r,n,a=e.length,o=i.relative[e[0].type],s=o||i.relative[\" \"],l=o?1:0,u=be((function(e){return e===t}),s,!0),c=be((function(e){return F(t,e)>-1}),s,!0),d=[function(e,r,i){var n=!o&&(i||r!==h)||((t=r).nodeType?u(e,r,i):c(e,r,i));return t=null,n}];l<a;l++)if(r=i.relative[e[l].type])d=[be(we(d),r)];else{if(r=i.filter[e[l].type].apply(null,e[l].matches),r[b]){for(n=++l;n<a;n++)if(i.relative[e[n].type])break;return Ce(l>1&&we(d),l>1&&_e(e.slice(0,l-1).concat({value:\" \"===e[l-2].type?\"*\":\"\"})).replace(V,\"$1\"),r,l<n&&Ae(e.slice(l,n)),n<a&&Ae(e=e.slice(n)),n<a&&_e(e))}d.push(r)}return we(d)}function Se(e,t){var r=t.length>0,n=e.length>0,a=function(a,o,s,l,u){var c,p,g,m=0,y=\"0\",_=a&&[],b=[],w=h,k=a||n&&i.find[\"TAG\"](\"*\",u),C=x+=null==w?1:Math.random()||.1,A=k.length;for(u&&(h=o==f||o||u);y!==A&&null!=(c=k[y]);y++){if(n&&c){p=0,o||c.ownerDocument==f||(d(c),s=!v);while(g=e[p++])if(g(c,o||f,s)){l.push(c);break}u&&(x=C)}r&&((c=!g&&c)&&m--,a&&_.push(c))}if(m+=y,r&&y!==m){p=0;while(g=t[p++])g(_,b,o,s);if(a){if(m>0)while(y--)_[y]||b[y]||(b[y]=L.call(l));b=ke(b)}O.apply(l,b),u&&!a&&b.length>0&&m+t.length>1&&se.uniqueSort(l)}return u&&(x=C,h=w),_};return r?he(a):a}return ye.prototype=i.filters=i.pseudos,i.setFilters=new ye,o=se.tokenize=function(e,t){var r,n,a,o,s,l,h,u=A[e+\" \"];if(u)return t?0:u.slice(0);s=e,l=[],h=i.preFilter;while(s){for(o in r&&!(n=j.exec(s))||(n&&(s=s.slice(n[0].length)||s),l.push(a=[])),r=!1,(n=H.exec(s))&&(r=n.shift(),a.push({value:r,type:n[0].replace(V,\" \")}),s=s.slice(r.length)),i.filter)!(n=Z[o].exec(s))||h[o]&&!(n=h[o](n))||(r=n.shift(),a.push({value:r,type:o,matches:n}),s=s.slice(r.length));if(!r)break}return t?s.length:s?se.error(e):A(e,l).slice(0)},s=se.compile=function(e,t){var r,i=[],n=[],a=S[e+\" \"];if(!a){t||(t=o(e)),r=t.length;while(r--)a=Ae(t[r]),a[b]?i.push(a):n.push(a);a=S(e,Se(n,i)),a.selector=e}return a},l=se.select=function(e,t,r,n){var a,l,h,u,c,d=\"function\"===typeof e&&e,f=!n&&o(e=d.selector||e);if(r=r||[],1===f.length){if(l=f[0]=f[0].slice(0),l.length>2&&\"ID\"===(h=l[0]).type&&9===t.nodeType&&v&&i.relative[l[1].type]){if(t=(i.find[\"ID\"](h.matches[0].replace(te,re),t)||[])[0],!t)return r;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}a=Z[\"needsContext\"].test(e)?0:l.length;while(a--){if(h=l[a],i.relative[u=h.type])break;if((c=i.find[u])&&(n=c(h.matches[0].replace(te,re),ee.test(l[0].type)&&me(t.parentNode)||t))){if(l.splice(a,1),e=n.length&&_e(l),!e)return O.apply(r,n),r;break}}}return(d||s(e,f))(n,t,!v,r,!t||ee.test(e)&&me(t.parentNode)||t),r},r.sortStable=b.split(\"\").sort(z).join(\"\")===b,r.detectDuplicates=!!c,d(),r.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(f.createElement(\"fieldset\"))})),ue((function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")}))||ce(\"type|href|height|width\",(function(e,t,r){if(!r)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)})),r.attributes&&ue((function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")}))||ce(\"value\",(function(e,t,r){if(!r&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute(\"disabled\")}))||ce(R,(function(e,t,r){var i;if(!r)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),se}(r);S.find=z,S.expr=z.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=z.uniqueSort,S.text=z.getText,S.isXMLDoc=z.isXML,S.contains=z.contains,S.escapeSelector=z.escape;var M=function(e,t,r){var i=[],n=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(n&&S(e).is(r))break;i.push(e)}return i},T=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},L=S.expr.match.needsContext;function D(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function I(e,t,r){return _(t)?S.grep(e,(function(e,i){return!!t.call(e,i,e)!==r})):t.nodeType?S.grep(e,(function(e){return e===t!==r})):\"string\"!==typeof t?S.grep(e,(function(e){return d.call(t,e)>-1!==r})):S.filter(t,e,r)}S.filter=function(e,t,r){var i=t[0];return r&&(e=\":not(\"+e+\")\"),1===t.length&&1===i.nodeType?S.find.matchesSelector(i,e)?[i]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,r,i=this.length,n=this;if(\"string\"!==typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<i;t++)if(S.contains(n[t],this))return!0})));for(r=this.pushStack([]),t=0;t<i;t++)S.find(e,n[t],r);return i>1?S.uniqueSort(r):r},filter:function(e){return this.pushStack(I(this,e||[],!1))},not:function(e){return this.pushStack(I(this,e||[],!0))},is:function(e){return!!I(this,\"string\"===typeof e&&L.test(e)?S(e):e||[],!1).length}});var F,R=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,P=S.fn.init=function(e,t,r){var i,n;if(!e)return this;if(r=r||F,\"string\"===typeof e){if(i=\"<\"===e[0]&&\">\"===e[e.length-1]&&e.length>=3?[null,e,null]:R.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),O.test(i[1])&&S.isPlainObject(t))for(i in t)_(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return n=w.getElementById(i[2]),n&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):_(e)?void 0!==r.ready?r.ready(e):e(S):S.makeArray(e,this)};P.prototype=S.fn,F=S(w);var N=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function U(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var r,i=0,n=this.length,a=[],o=\"string\"!==typeof e&&S(e);if(!L.test(e))for(;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&S.find.matchesSelector(r,e))){a.push(r);break}return this.pushStack(a.length>1?S.uniqueSort(a):a)},index:function(e){return e?\"string\"===typeof e?d.call(S(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return M(e,\"parentNode\")},parentsUntil:function(e,t,r){return M(e,\"parentNode\",r)},next:function(e){return U(e,\"nextSibling\")},prev:function(e){return U(e,\"previousSibling\")},nextAll:function(e){return M(e,\"nextSibling\")},prevAll:function(e){return M(e,\"previousSibling\")},nextUntil:function(e,t,r){return M(e,\"nextSibling\",r)},prevUntil:function(e,t,r){return M(e,\"previousSibling\",r)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&l(e.contentDocument)?e.contentDocument:(D(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(r,i){var n=S.map(this,t,r);return\"Until\"!==e.slice(-5)&&(i=r),i&&\"string\"===typeof i&&(n=S.filter(i,n)),this.length>1&&(B[e]||S.uniqueSort(n),N.test(e)&&n.reverse()),this.pushStack(n)}}));var G=/[^\\x20\\t\\r\\n\\f]+/g;function V(e){var t={};return S.each(e.match(G)||[],(function(e,r){t[r]=!0})),t}function j(e){return e}function H(e){throw e}function q(e,t,r,i){var n;try{e&&_(n=e.promise)?n.call(e).done(t).fail(r):e&&_(n=e.then)?n.call(e,t,r):t.apply(void 0,[e].slice(i))}catch(e){r.apply(void 0,[e])}}S.Callbacks=function(e){e=\"string\"===typeof e?V(e):S.extend({},e);var t,r,i,n,a=[],o=[],s=-1,l=function(){for(n=n||e.once,i=t=!0;o.length;s=-1){r=o.shift();while(++s<a.length)!1===a[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=a.length,r=!1)}e.memory||(r=!1),t=!1,n&&(a=r?[]:\"\")},h={add:function(){return a&&(r&&!t&&(s=a.length-1,o.push(r)),function t(r){S.each(r,(function(r,i){_(i)?e.unique&&h.has(i)||a.push(i):i&&i.length&&\"string\"!==C(i)&&t(i)}))}(arguments),r&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){var r;while((r=S.inArray(t,a,r))>-1)a.splice(r,1),r<=s&&s--})),this},has:function(e){return e?S.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return n=o=[],a=r=\"\",this},disabled:function(){return!a},lock:function(){return n=o=[],r||t||(a=r=\"\"),this},locked:function(){return!!n},fireWith:function(e,r){return n||(r=r||[],r=[e,r.slice?r.slice():r],o.push(r),t||l()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},S.extend({Deferred:function(e){var t=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(r){S.each(t,(function(t,i){var n=_(e[i[4]])&&e[i[4]];o[i[1]]((function(){var e=n&&n.apply(this,arguments);e&&_(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[i[0]+\"With\"](this,n?[e]:arguments)}))})),e=null})).promise()},then:function(e,i,n){var o=0;function s(e,t,i,n){return function(){var l=this,h=arguments,u=function(){var r,u;if(!(e<o)){if(r=i.apply(l,h),r===t.promise())throw new TypeError(\"Thenable self-resolution\");u=r&&(\"object\"===a(r)||\"function\"===typeof r)&&r.then,_(u)?n?u.call(r,s(o,t,j,n),s(o,t,H,n)):(o++,u.call(r,s(o,t,j,n),s(o,t,H,n),s(o,t,j,t.notifyWith))):(i!==j&&(l=void 0,h=[r]),(n||t.resolveWith)(l,h))}},c=n?u:function(){try{u()}catch(r){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(r,c.stackTrace),e+1>=o&&(i!==H&&(l=void 0,h=[r]),t.rejectWith(l,h))}};e?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),r.setTimeout(c))}}return S.Deferred((function(r){t[0][3].add(s(0,r,_(n)?n:j,r.notifyWith)),t[1][3].add(s(0,r,_(e)?e:j)),t[2][3].add(s(0,r,_(i)?i:H))})).promise()},promise:function(e){return null!=e?S.extend(e,n):n}},o={};return S.each(t,(function(e,r){var a=r[2],s=r[5];n[r[1]]=a.add,s&&a.add((function(){i=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+\"With\"](this===o?void 0:this,arguments),this},o[r[0]+\"With\"]=a.fireWith})),n.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,r=t,i=Array(r),n=h.call(arguments),a=S.Deferred(),o=function(e){return function(r){i[e]=this,n[e]=arguments.length>1?h.call(arguments):r,--t||a.resolveWith(i,n)}};if(t<=1&&(q(e,a.done(o(r)).resolve,a.reject,!t),\"pending\"===a.state()||_(n[r]&&n[r].then)))return a.then();while(r--)q(n[r],o(r),a.reject);return a.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&W.test(e.name)&&r.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){r.setTimeout((function(){throw e}))};var Y=S.Deferred();function Z(){w.removeEventListener(\"DOMContentLoaded\",Z),r.removeEventListener(\"load\",Z),S.ready()}S.fn.ready=function(e){return Y.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||Y.resolveWith(w,[S]))}}),S.ready.then=Y.then,\"complete\"===w.readyState||\"loading\"!==w.readyState&&!w.documentElement.doScroll?r.setTimeout(S.ready):(w.addEventListener(\"DOMContentLoaded\",Z),r.addEventListener(\"load\",Z));var X=function e(t,r,i,n,a,o,s){var l=0,h=t.length,u=null==i;if(\"object\"===C(i))for(l in a=!0,i)e(t,r,l,i[l],!0,o,s);else if(void 0!==n&&(a=!0,_(n)||(s=!0),u&&(s?(r.call(t,n),r=null):(u=r,r=function(e,t,r){return u.call(S(e),r)})),r))for(;l<h;l++)r(t[l],i,s?n:n.call(t[l],l,r(t[l],i)));return a?t:u?r.call(t):h?r(t[0],i):o},K=/^-ms-/,$=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function J(e){return e.replace(K,\"ms-\").replace($,Q)}var ee=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function te(){this.expando=S.expando+te.uid++}te.uid=1,te.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ee(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var i,n=this.cache(e);if(\"string\"===typeof t)n[J(t)]=r;else for(i in t)n[J(i)]=t[i];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,r){return void 0===t||t&&\"string\"===typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i=e[this.expando];if(void 0!==i){if(void 0!==t){Array.isArray(t)?t=t.map(J):(t=J(t),t=t in i?[t]:t.match(G)||[]),r=t.length;while(r--)delete i[t[r]]}(void 0===t||S.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var re=new te,ie=new te,ne=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,ae=/[A-Z]/g;function oe(e){return\"true\"===e||\"false\"!==e&&(\"null\"===e?null:e===+e+\"\"?+e:ne.test(e)?JSON.parse(e):e)}function se(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i=\"data-\"+t.replace(ae,\"-$&\").toLowerCase(),r=e.getAttribute(i),\"string\"===typeof r){try{r=oe(r)}catch(n){}ie.set(e,t,r)}else r=void 0;return r}S.extend({hasData:function(e){return ie.hasData(e)||re.hasData(e)},data:function(e,t,r){return ie.access(e,t,r)},removeData:function(e,t){ie.remove(e,t)},_data:function(e,t,r){return re.access(e,t,r)},_removeData:function(e,t){re.remove(e,t)}}),S.fn.extend({data:function(e,t){var r,i,n,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(n=ie.get(o),1===o.nodeType&&!re.get(o,\"hasDataAttrs\"))){r=s.length;while(r--)s[r]&&(i=s[r].name,0===i.indexOf(\"data-\")&&(i=J(i.slice(5)),se(o,i,n[i])));re.set(o,\"hasDataAttrs\",!0)}return n}return\"object\"===a(e)?this.each((function(){ie.set(this,e)})):X(this,(function(t){var r;if(o&&void 0===t)return r=ie.get(o,e),void 0!==r?r:(r=se(o,e),void 0!==r?r:void 0);this.each((function(){ie.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ie.remove(this,e)}))}}),S.extend({queue:function(e,t,r){var i;if(e)return t=(t||\"fx\")+\"queue\",i=re.get(e,t),r&&(!i||Array.isArray(r)?i=re.access(e,t,S.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||\"fx\";var r=S.queue(e,t),i=r.length,n=r.shift(),a=S._queueHooks(e,t),o=function(){S.dequeue(e,t)};\"inprogress\"===n&&(n=r.shift(),i--),n&&(\"fx\"===t&&r.unshift(\"inprogress\"),delete a.stop,n.call(e,o,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var r=t+\"queueHooks\";return re.get(e,r)||re.access(e,r,{empty:S.Callbacks(\"once memory\").add((function(){re.remove(e,[t+\"queue\",r])}))})}}),S.fn.extend({queue:function(e,t){var r=2;return\"string\"!==typeof e&&(t=e,e=\"fx\",r--),arguments.length<r?S.queue(this[0],e):void 0===t?this:this.each((function(){var r=S.queue(this,e,t);S._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==r[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var r,i=1,n=S.Deferred(),a=this,o=this.length,s=function(){--i||n.resolveWith(a,[a])};\"string\"!==typeof e&&(t=e,e=void 0),e=e||\"fx\";while(o--)r=re.get(a[o],e+\"queueHooks\"),r&&r.empty&&(i++,r.empty.add(s));return s(),n.promise(t)}});var le=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,he=new RegExp(\"^(?:([+-])=|)(\"+le+\")([a-z%]*)$\",\"i\"),ue=[\"Top\",\"Right\",\"Bottom\",\"Left\"],ce=w.documentElement,de=function(e){return S.contains(e.ownerDocument,e)},fe={composed:!0};ce.getRootNode&&(de=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(fe)===e.ownerDocument});var pe=function(e,t){return e=t||e,\"none\"===e.style.display||\"\"===e.style.display&&de(e)&&\"none\"===S.css(e,\"display\")};function ve(e,t,r,i){var n,a,o=20,s=i?function(){return i.cur()}:function(){return S.css(e,t,\"\")},l=s(),h=r&&r[3]||(S.cssNumber[t]?\"\":\"px\"),u=e.nodeType&&(S.cssNumber[t]||\"px\"!==h&&+l)&&he.exec(S.css(e,t));if(u&&u[3]!==h){l/=2,h=h||u[3],u=+l||1;while(o--)S.style(e,t,u+h),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),u/=a;u*=2,S.style(e,t,u+h),r=r||[]}return r&&(u=+u||+l||0,n=r[1]?u+(r[1]+1)*r[2]:+r[2],i&&(i.unit=h,i.start=u,i.end=n)),n}var ge={};function me(e){var t,r=e.ownerDocument,i=e.nodeName,n=ge[i];return n||(t=r.body.appendChild(r.createElement(i)),n=S.css(t,\"display\"),t.parentNode.removeChild(t),\"none\"===n&&(n=\"block\"),ge[i]=n,n)}function ye(e,t){for(var r,i,n=[],a=0,o=e.length;a<o;a++)i=e[a],i.style&&(r=i.style.display,t?(\"none\"===r&&(n[a]=re.get(i,\"display\")||null,n[a]||(i.style.display=\"\")),\"\"===i.style.display&&pe(i)&&(n[a]=me(i))):\"none\"!==r&&(n[a]=\"none\",re.set(i,\"display\",r)));for(a=0;a<o;a++)null!=n[a]&&(e[a].style.display=n[a]);return e}S.fn.extend({show:function(){return ye(this,!0)},hide:function(){return ye(this)},toggle:function(e){return\"boolean\"===typeof e?e?this.show():this.hide():this.each((function(){pe(this)?S(this).show():S(this).hide()}))}});var _e=/^(?:checkbox|radio)$/i,be=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,we=/^$|^module$|\\/(?:java|ecma)script/i;(function(){var e=w.createDocumentFragment(),t=e.appendChild(w.createElement(\"div\")),r=w.createElement(\"input\");r.setAttribute(\"type\",\"radio\"),r.setAttribute(\"checked\",\"checked\"),r.setAttribute(\"name\",\"t\"),t.appendChild(r),y.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML=\"<option></option>\",y.option=!!t.lastChild})();var xe={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ke(e,t){var r;return r=\"undefined\"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!==typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&D(e,t)?S.merge([e],r):r}function Ce(e,t){for(var r=0,i=e.length;r<i;r++)re.set(e[r],\"globalEval\",!t||re.get(t[r],\"globalEval\"))}xe.tbody=xe.tfoot=xe.colgroup=xe.caption=xe.thead,xe.th=xe.td,y.option||(xe.optgroup=xe.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var Ae=/<|&#?\\w+;/;function Se(e,t,r,i,n){for(var a,o,s,l,h,u,c=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if(a=e[f],a||0===a)if(\"object\"===C(a))S.merge(d,a.nodeType?[a]:a);else if(Ae.test(a)){o=o||c.appendChild(t.createElement(\"div\")),s=(be.exec(a)||[\"\",\"\"])[1].toLowerCase(),l=xe[s]||xe._default,o.innerHTML=l[1]+S.htmlPrefilter(a)+l[2],u=l[0];while(u--)o=o.lastChild;S.merge(d,o.childNodes),o=c.firstChild,o.textContent=\"\"}else d.push(t.createTextNode(a));c.textContent=\"\",f=0;while(a=d[f++])if(i&&S.inArray(a,i)>-1)n&&n.push(a);else if(h=de(a),o=ke(c.appendChild(a),\"script\"),h&&Ce(o),r){u=0;while(a=o[u++])we.test(a.type||\"\")&&r.push(a)}return c}var Ee=/^key/,ze=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Me=/^([^.]*)(?:\\.(.+)|)/;function Te(){return!0}function Le(){return!1}function De(e,t){return e===Oe()===(\"focus\"===t)}function Oe(){try{return w.activeElement}catch(e){}}function Ie(e,t,r,i,n,o){var s,l;if(\"object\"===a(t)){for(l in\"string\"!==typeof r&&(i=i||r,r=void 0),t)Ie(e,l,r,i,t[l],o);return e}if(null==i&&null==n?(n=r,i=r=void 0):null==n&&(\"string\"===typeof r?(n=i,i=void 0):(n=i,i=r,r=void 0)),!1===n)n=Le;else if(!n)return e;return 1===o&&(s=n,n=function(e){return S().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=S.guid++)),e.each((function(){S.event.add(this,t,n,i,r)}))}function Fe(e,t,r){r?(re.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var i,n,a=re.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=h.call(arguments),re.set(this,t,a),i=r(this,t),this[t](),n=re.get(this,t),a!==n||i?re.set(this,t,!1):n={},a!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else a.length&&(re.set(this,t,{value:S.event.trigger(S.extend(a[0],S.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===re.get(e,t)&&S.event.add(e,t,Te)}S.event={global:{},add:function(e,t,r,i,n){var a,o,s,l,h,u,c,d,f,p,v,g=re.get(e);if(ee(e)){r.handler&&(a=r,r=a.handler,n=a.selector),n&&S.find.matchesSelector(ce,n),r.guid||(r.guid=S.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return\"undefined\"!==typeof S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),t=(t||\"\").match(G)||[\"\"],h=t.length;while(h--)s=Me.exec(t[h])||[],f=v=s[1],p=(s[2]||\"\").split(\".\").sort(),f&&(c=S.event.special[f]||{},f=(n?c.delegateType:c.bindType)||f,c=S.event.special[f]||{},u=S.extend({type:f,origType:v,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&S.expr.match.needsContext.test(n),namespace:p.join(\".\")},a),(d=l[f])||(d=l[f]=[],d.delegateCount=0,c.setup&&!1!==c.setup.call(e,i,p,o)||e.addEventListener&&e.addEventListener(f,o)),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=r.guid)),n?d.splice(d.delegateCount++,0,u):d.push(u),S.event.global[f]=!0)}},remove:function(e,t,r,i,n){var a,o,s,l,h,u,c,d,f,p,v,g=re.hasData(e)&&re.get(e);if(g&&(l=g.events)){t=(t||\"\").match(G)||[\"\"],h=t.length;while(h--)if(s=Me.exec(t[h])||[],f=v=s[1],p=(s[2]||\"\").split(\".\").sort(),f){c=S.event.special[f]||{},f=(i?c.delegateType:c.bindType)||f,d=l[f]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+p.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),o=a=d.length;while(a--)u=d[a],!n&&v!==u.origType||r&&r.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&(\"**\"!==i||!u.selector)||(d.splice(a,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(e,u));o&&!d.length&&(c.teardown&&!1!==c.teardown.call(e,p,g.handle)||S.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)S.event.remove(e,f+t[h],r,i,!0);S.isEmptyObject(l)&&re.remove(e,\"handle events\")}},dispatch:function(e){var t,r,i,n,a,o,s=new Array(arguments.length),l=S.event.fix(e),h=(re.get(this,\"events\")||Object.create(null))[l.type]||[],u=S.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){o=S.event.handlers.call(this,l,h),t=0;while((n=o[t++])&&!l.isPropagationStopped()){l.currentTarget=n.elem,r=0;while((a=n.handlers[r++])&&!l.isImmediatePropagationStopped())l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,i=((S.event.special[a.origType]||{}).handle||a.handler).apply(n.elem,s),void 0!==i&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()))}return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var r,i,n,a,o,s=[],l=t.delegateCount,h=e.target;if(l&&h.nodeType&&!(\"click\"===e.type&&e.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&(\"click\"!==e.type||!0!==h.disabled)){for(a=[],o={},r=0;r<l;r++)i=t[r],n=i.selector+\" \",void 0===o[n]&&(o[n]=i.needsContext?S(n,this).index(h)>-1:S.find(n,this,null,[h]).length),o[n]&&a.push(i);a.length&&s.push({elem:h,handlers:a})}return h=this,l<t.length&&s.push({elem:h,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return _e.test(t.type)&&t.click&&D(t,\"input\")&&Fe(t,\"click\",Te),!1},trigger:function(e){var t=this||e;return _e.test(t.type)&&t.click&&D(t,\"input\")&&Fe(t,\"click\"),!0},_default:function(e){var t=e.target;return _e.test(t.type)&&t.click&&D(t,\"input\")&&re.get(t,\"click\")||D(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Te:Le,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Le,isPropagationStopped:Le,isImmediatePropagationStopped:Le,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ee.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ze.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},(function(e,t){S.event.special[e]={setup:function(){return Fe(this,e,De),!1},trigger:function(){return Fe(this,e),!0},delegateType:t}})),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,n=e.relatedTarget,a=e.handleObj;return n&&(n===i||S.contains(i,n))||(e.type=a.origType,r=a.handler.apply(this,arguments),e.type=t),r}}})),S.fn.extend({on:function(e,t,r,i){return Ie(this,e,t,r,i)},one:function(e,t,r,i){return Ie(this,e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,S(e.delegateTarget).off(i.namespace?i.origType+\".\"+i.namespace:i.origType,i.selector,i.handler),this;if(\"object\"===a(e)){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&\"function\"!==typeof t||(r=t,t=void 0),!1===r&&(r=Le),this.each((function(){S.event.remove(this,e,r,t)}))}});var Re=/<script|<style|<link/i,Pe=/checked\\s*(?:[^=]|=\\s*.checked.)/i,Ne=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function Be(e,t){return D(e,\"table\")&&D(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function Ue(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function Ge(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Ve(e,t){var r,i,n,a,o,s,l;if(1===t.nodeType){if(re.hasData(e)&&(a=re.get(e),l=a.events,l))for(n in re.remove(t,\"handle events\"),l)for(r=0,i=l[n].length;r<i;r++)S.event.add(t,n,l[n][r]);ie.hasData(e)&&(o=ie.access(e),s=S.extend({},o),ie.set(t,s))}}function je(e,t){var r=t.nodeName.toLowerCase();\"input\"===r&&_e.test(e.type)?t.checked=e.checked:\"input\"!==r&&\"textarea\"!==r||(t.defaultValue=e.defaultValue)}function He(e,t,r,i){t=u(t);var n,a,o,s,l,h,c=0,d=e.length,f=d-1,p=t[0],v=_(p);if(v||d>1&&\"string\"===typeof p&&!y.checkClone&&Pe.test(p))return e.each((function(n){var a=e.eq(n);v&&(t[0]=p.call(this,n,a.html())),He(a,t,r,i)}));if(d&&(n=Se(t,e[0].ownerDocument,!1,e,i),a=n.firstChild,1===n.childNodes.length&&(n=a),a||i)){for(o=S.map(ke(n,\"script\"),Ue),s=o.length;c<d;c++)l=n,c!==f&&(l=S.clone(l,!0,!0),s&&S.merge(o,ke(l,\"script\"))),r.call(e[c],l,c);if(s)for(h=o[o.length-1].ownerDocument,S.map(o,Ge),c=0;c<s;c++)l=o[c],we.test(l.type||\"\")&&!re.access(l,\"globalEval\")&&S.contains(h,l)&&(l.src&&\"module\"!==(l.type||\"\").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute(\"nonce\")},h):k(l.textContent.replace(Ne,\"\"),l,h))}return e}function qe(e,t,r){for(var i,n=t?S.filter(t,e):e,a=0;null!=(i=n[a]);a++)r||1!==i.nodeType||S.cleanData(ke(i)),i.parentNode&&(r&&de(i)&&Ce(ke(i,\"script\")),i.parentNode.removeChild(i));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var i,n,a,o,s=e.cloneNode(!0),l=de(e);if(!y.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!S.isXMLDoc(e))for(o=ke(s),a=ke(e),i=0,n=a.length;i<n;i++)je(a[i],o[i]);if(t)if(r)for(a=a||ke(e),o=o||ke(s),i=0,n=a.length;i<n;i++)Ve(a[i],o[i]);else Ve(e,s);return o=ke(s,\"script\"),o.length>0&&Ce(o,!l&&ke(e,\"script\")),s},cleanData:function(e){for(var t,r,i,n=S.event.special,a=0;void 0!==(r=e[a]);a++)if(ee(r)){if(t=r[re.expando]){if(t.events)for(i in t.events)n[i]?S.event.remove(r,i):S.removeEvent(r,i,t.handle);r[re.expando]=void 0}r[ie.expando]&&(r[ie.expando]=void 0)}}}),S.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return X(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return He(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.appendChild(e)}}))},prepend:function(){return He(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return He(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return He(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ke(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return X(this,(function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"===typeof e&&!Re.test(e)&&!xe[(be.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;r<i;r++)t=this[r]||{},1===t.nodeType&&(S.cleanData(ke(t,!1)),t.innerHTML=e);t=0}catch(n){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return He(this,arguments,(function(t){var r=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(ke(this)),r&&r.replaceChild(t,this))}),e)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},(function(e,t){S.fn[e]=function(e){for(var r,i=[],n=S(e),a=n.length-1,o=0;o<=a;o++)r=o===a?this:this.clone(!0),S(n[o])[t](r),c.apply(i,r.get());return this.pushStack(i)}}));var We=new RegExp(\"^(\"+le+\")(?!px)[a-z%]+$\",\"i\"),Ye=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ze=function(e,t,r){var i,n,a={};for(n in t)a[n]=e.style[n],e.style[n]=t[n];for(n in i=r.call(e),t)e.style[n]=a[n];return i},Xe=new RegExp(ue.join(\"|\"),\"i\");function Ke(e,t,r){var i,n,a,o,s=e.style;return r=r||Ye(e),r&&(o=r.getPropertyValue(t)||r[t],\"\"!==o||de(e)||(o=S.style(e,t)),!y.pixelBoxStyles()&&We.test(o)&&Xe.test(t)&&(i=s.width,n=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=r.width,s.width=i,s.minWidth=n,s.maxWidth=a)),void 0!==o?o+\"\":o}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}(function(){function e(){if(u){h.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",u.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",ce.appendChild(h).appendChild(u);var e=r.getComputedStyle(u);i=\"1%\"!==e.top,l=12===t(e.marginLeft),u.style.right=\"60%\",o=36===t(e.right),n=36===t(e.width),u.style.position=\"absolute\",a=12===t(u.offsetWidth/3),ce.removeChild(h),u=null}}function t(e){return Math.round(parseFloat(e))}var i,n,a,o,s,l,h=w.createElement(\"div\"),u=w.createElement(\"div\");u.style&&(u.style.backgroundClip=\"content-box\",u.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===u.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,i,n;return null==s&&(e=w.createElement(\"table\"),t=w.createElement(\"tr\"),i=w.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px\",t.style.height=\"1px\",i.style.height=\"9px\",ce.appendChild(e).appendChild(t).appendChild(i),n=r.getComputedStyle(t),s=parseInt(n.height)>3,ce.removeChild(e)),s}}))})();var Qe=[\"Webkit\",\"Moz\",\"ms\"],Je=w.createElement(\"div\").style,et={};function tt(e){var t=e[0].toUpperCase()+e.slice(1),r=Qe.length;while(r--)if(e=Qe[r]+t,e in Je)return e}function rt(e){var t=S.cssProps[e]||et[e];return t||(e in Je?e:et[e]=tt(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,nt=/^--/,at={position:\"absolute\",visibility:\"hidden\",display:\"block\"},ot={letterSpacing:\"0\",fontWeight:\"400\"};function st(e,t,r){var i=he.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||\"px\"):t}function lt(e,t,r,i,n,a){var o=\"width\"===t?1:0,s=0,l=0;if(r===(i?\"border\":\"content\"))return 0;for(;o<4;o+=2)\"margin\"===r&&(l+=S.css(e,r+ue[o],!0,n)),i?(\"content\"===r&&(l-=S.css(e,\"padding\"+ue[o],!0,n)),\"margin\"!==r&&(l-=S.css(e,\"border\"+ue[o]+\"Width\",!0,n))):(l+=S.css(e,\"padding\"+ue[o],!0,n),\"padding\"!==r?l+=S.css(e,\"border\"+ue[o]+\"Width\",!0,n):s+=S.css(e,\"border\"+ue[o]+\"Width\",!0,n));return!i&&a>=0&&(l+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))||0),l}function ht(e,t,r){var i=Ye(e),n=!y.boxSizingReliable()||r,a=n&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),o=a,s=Ke(e,t,i),l=\"offset\"+t[0].toUpperCase()+t.slice(1);if(We.test(s)){if(!r)return s;s=\"auto\"}return(!y.boxSizingReliable()&&a||!y.reliableTrDimensions()&&D(e,\"tr\")||\"auto\"===s||!parseFloat(s)&&\"inline\"===S.css(e,\"display\",!1,i))&&e.getClientRects().length&&(a=\"border-box\"===S.css(e,\"boxSizing\",!1,i),o=l in e,o&&(s=e[l])),s=parseFloat(s)||0,s+lt(e,t,r||(a?\"border\":\"content\"),o,i,s)+\"px\"}function ut(e,t,r,i,n){return new ut.prototype.init(e,t,r,i,n)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ke(e,\"opacity\");return\"\"===r?\"1\":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s,l=J(t),h=nt.test(t),u=e.style;if(h||(t=rt(l)),s=S.cssHooks[t]||S.cssHooks[l],void 0===r)return s&&\"get\"in s&&void 0!==(n=s.get(e,!1,i))?n:u[t];o=a(r),\"string\"===o&&(n=he.exec(r))&&n[1]&&(r=ve(e,t,n),o=\"number\"),null!=r&&r===r&&(\"number\"!==o||h||(r+=n&&n[3]||(S.cssNumber[l]?\"\":\"px\")),y.clearCloneStyle||\"\"!==r||0!==t.indexOf(\"background\")||(u[t]=\"inherit\"),s&&\"set\"in s&&void 0===(r=s.set(e,r,i))||(h?u.setProperty(t,r):u[t]=r))}},css:function(e,t,r,i){var n,a,o,s=J(t),l=nt.test(t);return l||(t=rt(s)),o=S.cssHooks[t]||S.cssHooks[s],o&&\"get\"in o&&(n=o.get(e,!0,r)),void 0===n&&(n=Ke(e,t,i)),\"normal\"===n&&t in ot&&(n=ot[t]),\"\"===r||r?(a=parseFloat(n),!0===r||isFinite(a)?a||0:n):n}}),S.each([\"height\",\"width\"],(function(e,t){S.cssHooks[t]={get:function(e,r,i){if(r)return!it.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?ht(e,t,i):Ze(e,at,(function(){return ht(e,t,i)}))},set:function(e,r,i){var n,a=Ye(e),o=!y.scrollboxSize()&&\"absolute\"===a.position,s=o||i,l=s&&\"border-box\"===S.css(e,\"boxSizing\",!1,a),h=i?lt(e,t,i,l,a):0;return l&&o&&(h-=Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-lt(e,t,\"border\",!1,a)-.5)),h&&(n=he.exec(r))&&\"px\"!==(n[3]||\"px\")&&(e.style[t]=r,r=S.css(e,t)),st(e,r,h)}}})),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ke(e,\"marginLeft\"))||e.getBoundingClientRect().left-Ze(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+\"px\"})),S.each({margin:\"\",padding:\"\",border:\"Width\"},(function(e,t){S.cssHooks[e+t]={expand:function(r){for(var i=0,n={},a=\"string\"===typeof r?r.split(\" \"):[r];i<4;i++)n[e+ue[i]+t]=a[i]||a[i-2]||a[0];return n}},\"margin\"!==e&&(S.cssHooks[e+t].set=st)})),S.fn.extend({css:function(e,t){return X(this,(function(e,t,r){var i,n,a={},o=0;if(Array.isArray(t)){for(i=Ye(e),n=t.length;o<n;o++)a[t[o]]=S.css(e,t[o],!1,i);return a}return void 0!==r?S.style(e,t,r):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=ut,ut.prototype={constructor:ut,init:function(e,t,r,i,n,a){this.elem=e,this.prop=r,this.easing=n||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(S.cssNumber[r]?\"\":\"px\")},cur:function(){var e=ut.propHooks[this.prop];return e&&e.get?e.get(this):ut.propHooks._default.get(this)},run:function(e){var t,r=ut.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):ut.propHooks._default.set(this),this}},ut.prototype.init.prototype=ut.prototype,ut.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"),t&&\"auto\"!==t?t:0)},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[rt(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},ut.propHooks.scrollTop=ut.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=ut.prototype.init,S.fx.step={};var ct,dt,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function vt(){dt&&(!1===w.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(vt):r.setTimeout(vt,S.fx.interval),S.fx.tick())}function gt(){return r.setTimeout((function(){ct=void 0})),ct=Date.now()}function mt(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)r=ue[i],n[\"margin\"+r]=n[\"padding\"+r]=e;return t&&(n.opacity=n.width=e),n}function yt(e,t,r){for(var i,n=(wt.tweeners[t]||[]).concat(wt.tweeners[\"*\"]),a=0,o=n.length;a<o;a++)if(i=n[a].call(r,t,e))return i}function _t(e,t,r){var i,n,a,o,s,l,h,u,c=\"width\"in t||\"height\"in t,d=this,f={},p=e.style,v=e.nodeType&&pe(e),g=re.get(e,\"fxshow\");for(i in r.queue||(o=S._queueHooks(e,\"fx\"),null==o.unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,S.queue(e,\"fx\").length||o.empty.fire()}))}))),t)if(n=t[i],ft.test(n)){if(delete t[i],a=a||\"toggle\"===n,n===(v?\"hide\":\"show\")){if(\"show\"!==n||!g||void 0===g[i])continue;v=!0}f[i]=g&&g[i]||S.style(e,i)}if(l=!S.isEmptyObject(t),l||!S.isEmptyObject(f))for(i in c&&1===e.nodeType&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],h=g&&g.display,null==h&&(h=re.get(e,\"display\")),u=S.css(e,\"display\"),\"none\"===u&&(h?u=h:(ye([e],!0),h=e.style.display||h,u=S.css(e,\"display\"),ye([e]))),(\"inline\"===u||\"inline-block\"===u&&null!=h)&&\"none\"===S.css(e,\"float\")&&(l||(d.done((function(){p.display=h})),null==h&&(u=p.display,h=\"none\"===u?\"\":u)),p.display=\"inline-block\")),r.overflow&&(p.overflow=\"hidden\",d.always((function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}))),l=!1,f)l||(g?\"hidden\"in g&&(v=g.hidden):g=re.access(e,\"fxshow\",{display:h}),a&&(g.hidden=!v),v&&ye([e],!0),d.done((function(){for(i in v||ye([e]),re.remove(e,\"fxshow\"),f)S.style(e,i,f[i])}))),l=yt(v?g[i]:0,i,d),i in g||(g[i]=l.start,v&&(l.end=l.start,l.start=0))}function bt(e,t){var r,i,n,a,o;for(r in e)if(i=J(r),n=t[i],a=e[r],Array.isArray(a)&&(n=a[1],a=e[r]=a[0]),r!==i&&(e[i]=a,delete e[r]),o=S.cssHooks[i],o&&\"expand\"in o)for(r in a=o.expand(a),delete e[i],a)r in e||(e[r]=a[r],t[r]=n);else t[i]=n}function wt(e,t,r){var i,n,a=0,o=wt.prefilters.length,s=S.Deferred().always((function(){delete l.elem})),l=function(){if(n)return!1;for(var t=ct||gt(),r=Math.max(0,h.startTime+h.duration-t),i=r/h.duration||0,a=1-i,o=0,l=h.tweens.length;o<l;o++)h.tweens[o].run(a);return s.notifyWith(e,[h,a,r]),a<1&&l?r:(l||s.notifyWith(e,[h,1,0]),s.resolveWith(e,[h]),!1)},h=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},r),originalProperties:t,originalOptions:r,startTime:ct||gt(),duration:r.duration,tweens:[],createTween:function(t,r){var i=S.Tween(e,h.opts,t,r,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(i),i},stop:function(t){var r=0,i=t?h.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)h.tweens[r].run(1);return t?(s.notifyWith(e,[h,1,0]),s.resolveWith(e,[h,t])):s.rejectWith(e,[h,t]),this}}),u=h.props;for(bt(u,h.opts.specialEasing);a<o;a++)if(i=wt.prefilters[a].call(h,e,u,h.opts),i)return _(i.stop)&&(S._queueHooks(h.elem,h.opts.queue).stop=i.stop.bind(i)),i;return S.map(u,yt,h),_(h.opts.start)&&h.opts.start.call(e,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:h,queue:h.opts.queue})),h}S.Animation=S.extend(wt,{tweeners:{\"*\":[function(e,t){var r=this.createTween(e,t);return ve(r.elem,e,he.exec(t),r),r}]},tweener:function(e,t){_(e)?(t=e,e=[\"*\"]):e=e.match(G);for(var r,i=0,n=e.length;i<n;i++)r=e[i],wt.tweeners[r]=wt.tweeners[r]||[],wt.tweeners[r].unshift(t)},prefilters:[_t],prefilter:function(e,t){t?wt.prefilters.unshift(e):wt.prefilters.push(e)}}),S.speed=function(e,t,r){var i=e&&\"object\"===a(e)?S.extend({},e):{complete:r||!r&&t||_(e)&&e,duration:e,easing:r&&t||t&&!_(t)&&t};return S.fx.off?i.duration=0:\"number\"!==typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue=\"fx\"),i.old=i.complete,i.complete=function(){_(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(e,t,r,i){return this.filter(pe).css(\"opacity\",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=S.isEmptyObject(e),a=S.speed(t,r,i),o=function(){var t=wt(this,S.extend({},e),a);(n||re.get(this,\"finish\"))&&t.stop(!0)};return o.finish=o,n||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return\"string\"!==typeof e&&(r=t,t=e,e=void 0),t&&this.queue(e||\"fx\",[]),this.each((function(){var t=!0,n=null!=e&&e+\"queueHooks\",a=S.timers,o=re.get(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&pt.test(n)&&i(o[n]);for(n=a.length;n--;)a[n].elem!==this||null!=e&&a[n].queue!==e||(a[n].anim.stop(r),t=!1,a.splice(n,1));!t&&r||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||\"fx\"),this.each((function(){var t,r=re.get(this),i=r[e+\"queue\"],n=r[e+\"queueHooks\"],a=S.timers,o=i?i.length:0;for(r.finish=!0,S.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish}))}}),S.each([\"toggle\",\"show\",\"hide\"],(function(e,t){var r=S.fn[t];S.fn[t]=function(e,i,n){return null==e||\"boolean\"===typeof e?r.apply(this,arguments):this.animate(mt(t,!0),e,i,n)}})),S.each({slideDown:mt(\"show\"),slideUp:mt(\"hide\"),slideToggle:mt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},(function(e,t){S.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}})),S.timers=[],S.fx.tick=function(){var e,t=0,r=S.timers;for(ct=Date.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||S.fx.stop(),ct=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){dt||(dt=!0,vt())},S.fx.stop=function(){dt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||\"fx\",this.queue(t,(function(t,i){var n=r.setTimeout(t,e);i.stop=function(){r.clearTimeout(n)}}))},function(){var e=w.createElement(\"input\"),t=w.createElement(\"select\"),r=t.appendChild(w.createElement(\"option\"));e.type=\"checkbox\",y.checkOn=\"\"!==e.value,y.optSelected=r.selected,e=w.createElement(\"input\"),e.value=\"t\",e.type=\"radio\",y.radioValue=\"t\"===e.value}();var xt,kt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return X(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,r){var i,n,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return\"undefined\"===typeof e.getAttribute?S.prop(e,t,r):(1===a&&S.isXMLDoc(e)||(n=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?xt:void 0)),void 0!==r?null===r?void S.removeAttr(e,t):n&&\"set\"in n&&void 0!==(i=n.set(e,r,t))?i:(e.setAttribute(t,r+\"\"),r):n&&\"get\"in n&&null!==(i=n.get(e,t))?i:(i=S.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&\"radio\"===t&&D(e,\"input\")){var r=e.value;return e.setAttribute(\"type\",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,i=0,n=t&&t.match(G);if(n&&1===e.nodeType)while(r=n[i++])e.removeAttribute(r)}}),xt={set:function(e,t,r){return!1===t?S.removeAttr(e,r):e.setAttribute(r,r),r}},S.each(S.expr.match.bool.source.match(/\\w+/g),(function(e,t){var r=kt[t]||S.find.attr;kt[t]=function(e,t,i){var n,a,o=t.toLowerCase();return i||(a=kt[o],kt[o]=n,n=null!=r(e,t,i)?o:null,kt[o]=a),n}}));var Ct=/^(?:input|select|textarea|button)$/i,At=/^(?:a|area)$/i;function St(e){var t=e.match(G)||[];return t.join(\" \")}function Et(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function zt(e){return Array.isArray(e)?e:\"string\"===typeof e&&e.match(G)||[]}S.fn.extend({prop:function(e,t){return X(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,r){var i,n,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(e)||(t=S.propFix[t]||t,n=S.propHooks[t]),void 0!==r?n&&\"set\"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&\"get\"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\"tabindex\");return t?parseInt(t,10):Ct.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:\"htmlFor\",class:\"className\"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,r,i,n,a,o,s,l=0;if(_(e))return this.each((function(t){S(this).addClass(e.call(this,t,Et(this)))}));if(t=zt(e),t.length)while(r=this[l++])if(n=Et(r),i=1===r.nodeType&&\" \"+St(n)+\" \",i){o=0;while(a=t[o++])i.indexOf(\" \"+a+\" \")<0&&(i+=a+\" \");s=St(i),n!==s&&r.setAttribute(\"class\",s)}return this},removeClass:function(e){var t,r,i,n,a,o,s,l=0;if(_(e))return this.each((function(t){S(this).removeClass(e.call(this,t,Et(this)))}));if(!arguments.length)return this.attr(\"class\",\"\");if(t=zt(e),t.length)while(r=this[l++])if(n=Et(r),i=1===r.nodeType&&\" \"+St(n)+\" \",i){o=0;while(a=t[o++])while(i.indexOf(\" \"+a+\" \")>-1)i=i.replace(\" \"+a+\" \",\" \");s=St(i),n!==s&&r.setAttribute(\"class\",s)}return this},toggleClass:function(e,t){var r=a(e),i=\"string\"===r||Array.isArray(e);return\"boolean\"===typeof t&&i?t?this.addClass(e):this.removeClass(e):_(e)?this.each((function(r){S(this).toggleClass(e.call(this,r,Et(this),t),t)})):this.each((function(){var t,n,a,o;if(i){n=0,a=S(this),o=zt(e);while(t=o[n++])a.hasClass(t)?a.removeClass(t):a.addClass(t)}else void 0!==e&&\"boolean\"!==r||(t=Et(this),t&&re.set(this,\"__className__\",t),this.setAttribute&&this.setAttribute(\"class\",t||!1===e?\"\":re.get(this,\"__className__\")||\"\"))}))},hasClass:function(e){var t,r,i=0;t=\" \"+e+\" \";while(r=this[i++])if(1===r.nodeType&&(\" \"+St(Et(r))+\" \").indexOf(t)>-1)return!0;return!1}});var Mt=/\\r/g;S.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=_(e),this.each((function(r){var n;1===this.nodeType&&(n=i?e.call(this,r,S(this).val()):e,null==n?n=\"\":\"number\"===typeof n?n+=\"\":Array.isArray(n)&&(n=S.map(n,(function(e){return null==e?\"\":e+\"\"}))),t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()],t&&\"set\"in t&&void 0!==t.set(this,n,\"value\")||(this.value=n))}))):n?(t=S.valHooks[n.type]||S.valHooks[n.nodeName.toLowerCase()],t&&\"get\"in t&&void 0!==(r=t.get(n,\"value\"))?r:(r=n.value,\"string\"===typeof r?r.replace(Mt,\"\"):null==r?\"\":r)):void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\"value\");return null!=t?t:St(S.text(e))}},select:{get:function(e){var t,r,i,n=e.options,a=e.selectedIndex,o=\"select-one\"===e.type,s=o?null:[],l=o?a+1:n.length;for(i=a<0?l:o?a:0;i<l;i++)if(r=n[i],(r.selected||i===a)&&!r.disabled&&(!r.parentNode.disabled||!D(r.parentNode,\"optgroup\"))){if(t=S(r).val(),o)return t;s.push(t)}return s},set:function(e,t){var r,i,n=e.options,a=S.makeArray(t),o=n.length;while(o--)i=n[o],(i.selected=S.inArray(S.valHooks.option.get(i),a)>-1)&&(r=!0);return r||(e.selectedIndex=-1),a}}}}),S.each([\"radio\",\"checkbox\"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})})),y.focusin=\"onfocusin\"in r;var Tt=/^(?:focusinfocus|focusoutblur)$/,Lt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,i,n){var o,s,l,h,u,c,d,f,p=[i||w],g=v.call(e,\"type\")?e.type:e,m=v.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(s=f=l=i=i||w,3!==i.nodeType&&8!==i.nodeType&&!Tt.test(g+S.event.triggered)&&(g.indexOf(\".\")>-1&&(m=g.split(\".\"),g=m.shift(),m.sort()),u=g.indexOf(\":\")<0&&\"on\"+g,e=e[S.expando]?e:new S.Event(g,\"object\"===a(e)&&e),e.isTrigger=n?2:3,e.namespace=m.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+m.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:S.makeArray(t,[e]),d=S.event.special[g]||{},n||!d.trigger||!1!==d.trigger.apply(i,t))){if(!n&&!d.noBubble&&!b(i)){for(h=d.delegateType||g,Tt.test(h+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),l=s;l===(i.ownerDocument||w)&&p.push(l.defaultView||l.parentWindow||r)}o=0;while((s=p[o++])&&!e.isPropagationStopped())f=s,e.type=o>1?h:d.bindType||g,c=(re.get(s,\"events\")||Object.create(null))[e.type]&&re.get(s,\"handle\"),c&&c.apply(s,t),c=u&&s[u],c&&c.apply&&ee(s)&&(e.result=c.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,n||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!ee(i)||u&&_(i[g])&&!b(i)&&(l=i[u],l&&(i[u]=null),S.event.triggered=g,e.isPropagationStopped()&&f.addEventListener(g,Lt),i[g](),e.isPropagationStopped()&&f.removeEventListener(g,Lt),S.event.triggered=void 0,l&&(i[u]=l)),e.result}},simulate:function(e,t,r){var i=S.extend(new S.Event,r,{type:e,isSimulated:!0});S.event.trigger(i,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return S.event.trigger(e,t,r,!0)}}),y.focusin||S.each({focus:\"focusin\",blur:\"focusout\"},(function(e,t){var r=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,n=re.access(i,t);n||i.addEventListener(e,r,!0),re.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,n=re.access(i,t)-1;n?re.access(i,t,n):(i.removeEventListener(e,r,!0),re.remove(i,t))}}}));var Dt=r.location,Ot={guid:Date.now()},It=/\\?/;S.parseXML=function(e){var t;if(!e||\"string\"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,\"text/xml\")}catch(i){t=void 0}return t&&!t.getElementsByTagName(\"parsererror\").length||S.error(\"Invalid XML: \"+e),t};var Ft=/\\[\\]$/,Rt=/\\r?\\n/g,Pt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Bt(e,t,r,i){var n;if(Array.isArray(t))S.each(t,(function(t,n){r||Ft.test(e)?i(e,n):Bt(e+\"[\"+(\"object\"===a(n)&&null!=n?t:\"\")+\"]\",n,r,i)}));else if(r||\"object\"!==C(t))i(e,t);else for(n in t)Bt(e+\"[\"+n+\"]\",t[n],r,i)}S.param=function(e,t){var r,i=[],n=function(e,t){var r=_(t)?t():t;i[i.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==r?\"\":r)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){n(this.name,this.value)}));else for(r in e)Bt(r,e[r],t,n);return i.join(\"&\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,\"elements\");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(\":disabled\")&&Nt.test(this.nodeName)&&!Pt.test(e)&&(this.checked||!_e.test(e))})).map((function(e,t){var r=S(this).val();return null==r?null:Array.isArray(r)?S.map(r,(function(e){return{name:t.name,value:e.replace(Rt,\"\\r\\n\")}})):{name:t.name,value:r.replace(Rt,\"\\r\\n\")}})).get()}});var Ut=/%20/g,Gt=/#.*$/,Vt=/([?&])_=[^&]*/,jt=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qt=/^(?:GET|HEAD)$/,Wt=/^\\/\\//,Yt={},Zt={},Xt=\"*/\".concat(\"*\"),Kt=w.createElement(\"a\");function $t(e){return function(t,r){\"string\"!==typeof t&&(r=t,t=\"*\");var i,n=0,a=t.toLowerCase().match(G)||[];if(_(r))while(i=a[n++])\"+\"===i[0]?(i=i.slice(1)||\"*\",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function Qt(e,t,r,i){var n={},a=e===Zt;function o(s){var l;return n[s]=!0,S.each(e[s]||[],(function(e,s){var h=s(t,r,i);return\"string\"!==typeof h||a||n[h]?a?!(l=h):void 0:(t.dataTypes.unshift(h),o(h),!1)})),l}return o(t.dataTypes[0])||!n[\"*\"]&&o(\"*\")}function Jt(e,t){var r,i,n=S.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&S.extend(!0,e,i),e}function er(e,t,r){var i,n,a,o,s=e.contents,l=e.dataTypes;while(\"*\"===l[0])l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(i)for(n in s)if(s[n]&&s[n].test(i)){l.unshift(n);break}if(l[0]in r)a=l[0];else{for(n in r){if(!l[0]||e.converters[n+\" \"+l[0]]){a=n;break}o||(o=n)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),r[a]}function tr(e,t,r,i){var n,a,o,s,l,h={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)h[o.toLowerCase()]=e.converters[o];a=u.shift();while(a)if(e.responseFields[a]&&(r[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift(),a)if(\"*\"===a)a=l;else if(\"*\"!==l&&l!==a){if(o=h[l+\" \"+a]||h[\"* \"+a],!o)for(n in h)if(s=n.split(\" \"),s[1]===a&&(o=h[l+\" \"+s[0]]||h[\"* \"+s[0]],o)){!0===o?o=h[n]:!0!==h[n]&&(a=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(c){return{state:\"parsererror\",error:o?c:\"No conversion from \"+l+\" to \"+a}}}return{state:\"success\",data:t}}Kt.href=Dt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dt.href,type:\"GET\",isLocal:Ht.test(Dt.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Xt,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jt(Jt(e,S.ajaxSettings),t):Jt(S.ajaxSettings,e)},ajaxPrefilter:$t(Yt),ajaxTransport:$t(Zt),ajax:function(e,t){\"object\"===a(e)&&(t=e,e=void 0),t=t||{};var i,n,o,s,l,h,u,c,d,f,p=S.ajaxSetup({},t),v=p.context||p,g=p.context&&(v.nodeType||v.jquery)?S(v):S.event,m=S.Deferred(),y=S.Callbacks(\"once memory\"),_=p.statusCode||{},b={},x={},k=\"canceled\",C={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s){s={};while(t=jt.exec(o))s[t[1].toLowerCase()+\" \"]=(s[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=s[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)C.always(e[C.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||k;return i&&i.abort(t),A(0,t),this}};if(m.promise(C),p.url=((e||p.url||Dt.href)+\"\").replace(Wt,Dt.protocol+\"//\"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||\"*\").toLowerCase().match(G)||[\"\"],null==p.crossDomain){h=w.createElement(\"a\");try{h.href=p.url,h.href=h.href,p.crossDomain=Kt.protocol+\"//\"+Kt.host!==h.protocol+\"//\"+h.host}catch(E){p.crossDomain=!0}}if(p.data&&p.processData&&\"string\"!==typeof p.data&&(p.data=S.param(p.data,p.traditional)),Qt(Yt,p,t,C),u)return C;for(d in c=S.event&&p.global,c&&0===S.active++&&S.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!qt.test(p.type),n=p.url.replace(Gt,\"\"),p.hasContent?p.data&&p.processData&&0===(p.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(p.data=p.data.replace(Ut,\"+\")):(f=p.url.slice(n.length),p.data&&(p.processData||\"string\"===typeof p.data)&&(n+=(It.test(n)?\"&\":\"?\")+p.data,delete p.data),!1===p.cache&&(n=n.replace(Vt,\"$1\"),f=(It.test(n)?\"&\":\"?\")+\"_=\"+Ot.guid+++f),p.url=n+f),p.ifModified&&(S.lastModified[n]&&C.setRequestHeader(\"If-Modified-Since\",S.lastModified[n]),S.etag[n]&&C.setRequestHeader(\"If-None-Match\",S.etag[n])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&C.setRequestHeader(\"Content-Type\",p.contentType),C.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+Xt+\"; q=0.01\":\"\"):p.accepts[\"*\"]),p.headers)C.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(v,C,p)||u))return C.abort();if(k=\"abort\",y.add(p.complete),C.done(p.success),C.fail(p.error),i=Qt(Zt,p,t,C),i){if(C.readyState=1,c&&g.trigger(\"ajaxSend\",[C,p]),u)return C;p.async&&p.timeout>0&&(l=r.setTimeout((function(){C.abort(\"timeout\")}),p.timeout));try{u=!1,i.send(b,A)}catch(E){if(u)throw E;A(-1,E)}}else A(-1,\"No Transport\");function A(e,t,a,s){var h,d,f,b,w,x=t;u||(u=!0,l&&r.clearTimeout(l),i=void 0,o=s||\"\",C.readyState=e>0?4:0,h=e>=200&&e<300||304===e,a&&(b=er(p,C,a)),!h&&S.inArray(\"script\",p.dataTypes)>-1&&(p.converters[\"text script\"]=function(){}),b=tr(p,b,C,h),h?(p.ifModified&&(w=C.getResponseHeader(\"Last-Modified\"),w&&(S.lastModified[n]=w),w=C.getResponseHeader(\"etag\"),w&&(S.etag[n]=w)),204===e||\"HEAD\"===p.type?x=\"nocontent\":304===e?x=\"notmodified\":(x=b.state,d=b.data,f=b.error,h=!f)):(f=x,!e&&x||(x=\"error\",e<0&&(e=0))),C.status=e,C.statusText=(t||x)+\"\",h?m.resolveWith(v,[d,x,C]):m.rejectWith(v,[C,x,f]),C.statusCode(_),_=void 0,c&&g.trigger(h?\"ajaxSuccess\":\"ajaxError\",[C,p,h?d:f]),y.fireWith(v,[C,x]),c&&(g.trigger(\"ajaxComplete\",[C,p]),--S.active||S.event.trigger(\"ajaxStop\")))}return C},getJSON:function(e,t,r){return S.get(e,t,r,\"json\")},getScript:function(e,t){return S.get(e,void 0,t,\"script\")}}),S.each([\"get\",\"post\"],(function(e,t){S[t]=function(e,r,i,n){return _(r)&&(n=n||i,i=r,r=void 0),S.ajax(S.extend({url:e,type:t,dataType:n,data:r,success:i},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")})),S._evalUrl=function(e,t,r){return S.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){S.globalEval(e,t,r)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(_(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return _(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=_(e);return this.each((function(r){S(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not(\"body\").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var rr={0:200,1223:204},ir=S.ajaxSettings.xhr();y.cors=!!ir&&\"withCredentials\"in ir,y.ajax=ir=!!ir,S.ajaxTransport((function(e){var t,i;if(y.cors||ir&&!e.crossDomain)return{send:function(n,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n[\"X-Requested-With\"]||(n[\"X-Requested-With\"]=\"XMLHttpRequest\"),n)s.setRequestHeader(o,n[o]);t=function(e){return function(){t&&(t=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,\"abort\"===e?s.abort():\"error\"===e?\"number\"!==typeof s.status?a(0,\"error\"):a(s.status,s.statusText):a(rr[s.status]||s.status,s.statusText,\"text\"!==(s.responseType||\"text\")||\"string\"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),i=s.onerror=s.ontimeout=t(\"error\"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&i()}))},t=t(\"abort\");try{s.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\"script\",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")})),S.ajaxTransport(\"script\",(function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(i,n){t=S(\"<script>\").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on(\"load error\",r=function(e){t.remove(),r=null,e&&n(\"error\"===e.type?404:200,e.type)}),w.head.appendChild(t[0])},abort:function(){r&&r()}}}));var nr=[],ar=/(=)\\?(?=&|$)|\\?\\?/;S.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=nr.pop()||S.expando+\"_\"+Ot.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\"json jsonp\",(function(e,t,i){var n,a,o,s=!1!==e.jsonp&&(ar.test(e.url)?\"url\":\"string\"===typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&ar.test(e.data)&&\"data\");if(s||\"jsonp\"===e.dataTypes[0])return n=e.jsonpCallback=_(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ar,\"$1\"+n):!1!==e.jsonp&&(e.url+=(It.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+n),e.converters[\"script json\"]=function(){return o||S.error(n+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",a=r[n],r[n]=function(){o=arguments},i.always((function(){void 0===a?S(r).removeProp(n):r[n]=a,e[n]&&(e.jsonpCallback=t.jsonpCallback,nr.push(n)),o&&_(a)&&a(o[0]),o=a=void 0})),\"script\"})),y.createHTMLDocument=function(){var e=w.implementation.createHTMLDocument(\"\").body;return e.innerHTML=\"<form></form><form></form>\",2===e.childNodes.length}(),S.parseHTML=function(e,t,r){return\"string\"!==typeof e?[]:(\"boolean\"===typeof t&&(r=t,t=!1),t||(y.createHTMLDocument?(t=w.implementation.createHTMLDocument(\"\"),i=t.createElement(\"base\"),i.href=w.location.href,t.head.appendChild(i)):t=w),n=O.exec(e),a=!r&&[],n?[t.createElement(n[1])]:(n=Se([e],t,a),a&&a.length&&S(a).remove(),S.merge([],n.childNodes)));var i,n,a},S.fn.load=function(e,t,r){var i,n,o,s=this,l=e.indexOf(\" \");return l>-1&&(i=St(e.slice(l)),e=e.slice(0,l)),_(t)?(r=t,t=void 0):t&&\"object\"===a(t)&&(n=\"POST\"),s.length>0&&S.ajax({url:e,type:n||\"GET\",dataType:\"html\",data:t}).done((function(e){o=arguments,s.html(i?S(\"<div>\").append(S.parseHTML(e)).find(i):e)})).always(r&&function(e,t){s.each((function(){r.apply(this,o||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,r){var i,n,a,o,s,l,h,u=S.css(e,\"position\"),c=S(e),d={};\"static\"===u&&(e.style.position=\"relative\"),s=c.offset(),a=S.css(e,\"top\"),l=S.css(e,\"left\"),h=(\"absolute\"===u||\"fixed\"===u)&&(a+l).indexOf(\"auto\")>-1,h?(i=c.position(),o=i.top,n=i.left):(o=parseFloat(a)||0,n=parseFloat(l)||0),_(t)&&(t=t.call(e,r,S.extend({},s))),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+n),\"using\"in t?t.using.call(e,d):(\"number\"===typeof d.top&&(d.top+=\"px\"),\"number\"===typeof d.left&&(d.left+=\"px\"),c.css(d))}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,r,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),r=i.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,i=this[0],n={top:0,left:0};if(\"fixed\"===S.css(i,\"position\"))t=i.getBoundingClientRect();else{t=this.offset(),r=i.ownerDocument,e=i.offsetParent||r.documentElement;while(e&&(e===r.body||e===r.documentElement)&&\"static\"===S.css(e,\"position\"))e=e.parentNode;e&&e!==i&&1===e.nodeType&&(n=S(e).offset(),n.top+=S.css(e,\"borderTopWidth\",!0),n.left+=S.css(e,\"borderLeftWidth\",!0))}return{top:t.top-n.top-S.css(i,\"marginTop\",!0),left:t.left-n.left-S.css(i,\"marginLeft\",!0)}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&\"static\"===S.css(e,\"position\"))e=e.offsetParent;return e||ce}))}}),S.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},(function(e,t){var r=\"pageYOffset\"===t;S.fn[e]=function(i){return X(this,(function(e,i,n){var a;if(b(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===n)return a?a[t]:e[i];a?a.scrollTo(r?a.pageXOffset:n,r?n:a.pageYOffset):e[i]=n}),e,i,arguments.length)}})),S.each([\"top\",\"left\"],(function(e,t){S.cssHooks[t]=$e(y.pixelPosition,(function(e,r){if(r)return r=Ke(e,t),We.test(r)?S(e).position()[t]+\"px\":r}))})),S.each({Height:\"height\",Width:\"width\"},(function(e,t){S.each({padding:\"inner\"+e,content:t,\"\":\"outer\"+e},(function(r,i){S.fn[i]=function(n,a){var o=arguments.length&&(r||\"boolean\"!==typeof n),s=r||(!0===n||!0===a?\"margin\":\"border\");return X(this,(function(t,r,n){var a;return b(t)?0===i.indexOf(\"outer\")?t[\"inner\"+e]:t.document.documentElement[\"client\"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body[\"scroll\"+e],a[\"scroll\"+e],t.body[\"offset\"+e],a[\"offset\"+e],a[\"client\"+e])):void 0===n?S.css(t,r,s):S.style(t,r,n,s)}),t,o?n:void 0,o)}}))})),S.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),(function(e,t){S.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}));var or=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;S.proxy=function(e,t){var r,i,n;if(\"string\"===typeof t&&(r=e[t],t=e,e=r),_(e))return i=h.call(arguments,2),n=function(){return e.apply(t||this,i.concat(h.call(arguments)))},n.guid=e.guid=e.guid||S.guid++,n},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=D,S.isFunction=_,S.isWindow=b,S.camelCase=J,S.type=C,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\"\":(e+\"\").replace(or,\"\")},i=[],n=function(){return S}.apply(t,i),void 0===n||(e.exports=n);var sr=r.jQuery,lr=r.$;return S.noConflict=function(e){return r.$===S&&(r.$=lr),e&&r.jQuery===S&&(r.jQuery=sr),S},\"undefined\"===typeof o&&(r.jQuery=r.$=S),S}))}).call(this,r(\"62e4\")(e))},b780:function(e,t,r){e.exports=r.p+\"static/img/ST-PepInt.a507d4ee.png\"},bca4:function(e,t,r){\"use strict\";r(\"c024\")},c024:function(e,t,r){},c19f:function(e,t,r){\"use strict\";var i=r(\"23e7\"),n=r(\"da84\"),a=r(\"621a\"),o=r(\"2626\"),s=\"ArrayBuffer\",l=a[s],h=n[s];i({global:!0,forced:h!==l},{ArrayBuffer:l}),o(s)},cb29:function(e,t,r){var i=r(\"23e7\"),n=r(\"81d5\"),a=r(\"44d2\");i({target:\"Array\",proto:!0},{fill:n}),a(\"fill\")},cc04:function(e,t,r){e.exports=r.p+\"static/img/SD-LinkerBuilder.26ef1cf9.png\"},cc71:function(e,t,r){\"use strict\";var i=r(\"23e7\"),n=r(\"857a\"),a=r(\"af03\");i({target:\"String\",proto:!0,forced:a(\"bold\")},{bold:function(){return n(this,\"b\",\"\",\"\")}})},cfc3:function(e,t,r){var i=r(\"74e8\");i(\"Float32\",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},dbcd:function(e,t,r){function i(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}r(\"d3b7\"),r(\"4ae1\"),e.exports=i,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},e27f:function(e,t,r){},eac8:function(e,t,r){e.exports=r.p+\"static/img/SD-RL.b66cf767.png\"},ece4:function(e,t,r){e.exports=r.p+\"static/img/SynEnergy.0ad58948.png\"},f94f:function(e,t,r){var i=r(\"7ca3\");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}e.exports=a,e.exports.__esModule=!0,e.exports[\"default\"]=e.exports},fa7e:function(e,t,r){\"use strict\";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"json-editor\"},[r(\"textarea\",{ref:\"textarea\"})])},n=[],a=(r(\"e9c4\"),r(\"56b3\")),o=r.n(a);r(\"0dd0\"),r(\"a7be\"),r(\"acdf\"),r(\"f9d4\"),r(\"db91\"),r(\"8822\"),r(\"d2de\"),r(\"18d1\"),r(\"7b0e\"),r(\"1759\"),r(\"8b9e\"),r(\"8c06\"),r(\"b866\"),r(\"eb8f\"),r(\"bbca\");r(\"ae67\");var s={name:\"JsonEditor\",props:[\"value\"],data:function(){return{jsonEditor:!1}},watch:{value:function(e){var t=this.jsonEditor.getValue();e!==t&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var e=this;this.jsonEditor=o.a.fromTextArea(this.$refs.textarea,{lineNumbers:!1,mode:\"application/json\",gutters:[\"CodeMirror-lint-markers\"],theme:\"neat\",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on(\"change\",(function(t){e.$emit(\"changed\",t.getValue()),e.$emit(\"input\",t.getValue())}))},methods:{getValue:function(){return this.jsonEditor.getValue()}}},l=s,h=(r(\"1ca7\"),r(\"2877\")),u=Object(h[\"a\"])(l,i,n,!1,null,\"0ce587cf\",null);t[\"a\"]=u.exports},fb2c:function(e,t,r){var i=r(\"74e8\");i(\"Uint32\",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},fd87:function(e,t,r){var i=r(\"74e8\");i(\"Int8\",(function(e){return function(t,r,i){return e(this,t,r,i)}}))}}]);","extractedComments":[]}